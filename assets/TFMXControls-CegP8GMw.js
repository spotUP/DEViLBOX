import{aG as e,j as s}from"./index-zx6LJBPK.js";import{r as o}from"./vendor-utils-XMmR-oGw.js";import"./vendor-react-DkDaD07v.js";import"./vendor-tone-CADp_hfL.js";import"./vendor-ui-uomqNFY-.js";function t(e,s=64){const o=e.slice(0,s),t=[];for(let n=0;n<o.length;n+=16){const e=o.slice(n,n+16),s=Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join(" "),r=Array.from(e).map(e=>e>=32&&e<127?String.fromCharCode(e):".").join("");t.push(`${n.toString(16).padStart(4,"0")}  ${s.padEnd(47)}  ${r}`)}return t.join("\n")}const n=({config:n,onChange:r})=>{const[l,i]=o.useState("summary"),[m,c]=o.useState(!1),[a,d]=o.useState(!1),[u,p]=o.useState(0),N=o.useRef(n);o.useEffect(()=>{N.current=n},[n]);const x="cyan-lineart"===e(e=>e.currentThemeId),b=x?"#00ffff":"#ff6644",v=x?"#009999":"#cc4422",f=x?"#004444":"#331100",C=x?"bg-[#041510] border-cyan-900/50":"bg-[#1a0800] border-red-900/30",E=x?"#041510":"#1a0800",D=x?"#020e0a":"#0e0500",V=!r,X=o.useCallback((e,s)=>{if(!r)return;const o=N.current,t=new Uint8Array(o.volModSeqData);t[e]=Math.max(0,Math.min(255,s)),r({...o,volModSeqData:t})},[r]),h=({label:e})=>s.jsxDEV("div",{className:"text-[10px] font-bold uppercase tracking-widest mb-2",style:{color:b,opacity:.7},children:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:297,columnNumber:5},void 0),M=({label:e,value:o})=>s.jsxDEV("div",{className:"flex items-center gap-2 py-0.5",children:[s.jsxDEV("span",{className:"text-[10px] text-gray-500 w-36",children:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:305,columnNumber:7},void 0),s.jsxDEV("span",{className:"text-[10px] font-mono",style:{color:b},children:o},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:306,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:304,columnNumber:5},void 0);return s.jsxDEV("div",{className:"flex flex-col h-full",children:[s.jsxDEV("div",{className:"flex border-b",style:{borderColor:f},children:[{id:"summary",label:"Summary"},{id:"volmod",label:"VolModSeq"},{id:"sndmod",label:"SndModSeqs"}].map(({id:e,label:o})=>s.jsxDEV("button",{onClick:()=>i(e),className:"px-4 py-2 text-xs font-bold uppercase tracking-wider transition-colors",style:{color:l===e?b:"#666",borderBottom:l===e?`2px solid ${b}`:"2px solid transparent",background:l===e?x?"#041510":"#1a0800":"transparent"},children:o},e,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:624,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:622,columnNumber:7},void 0),"summary"===l&&(()=>{const e=function(e,s){const o=[];for(let t=0;t<s;t++){const s=30*t;if(s+30>e.length)break;let n="";for(let o=0;o<18;o++){const t=e[s+o];if(0===t)break;n+=String.fromCharCode(t)}const r=(e[s+18]<<24|e[s+19]<<16|e[s+20]<<8|e[s+21])>>>0,l=e[s+22]<<8|e[s+23],i=e[s+24]<<8|e[s+25],m=e[s+28]<<8|e[s+29];o.push({idx:t,name:n.trim()||`Sample ${t+1}`,startOffset:r,lenBytes:2*l,repOffset:i,repLenBytes:2*m})}return o}(n.sampleHeaders,n.sampleCount);return s.jsxDEV("div",{className:"flex flex-col gap-3 p-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 280px)"},children:[s.jsxDEV("div",{className:`rounded-lg border p-3 ${C}`,children:[s.jsxDEV(h,{label:"TFMX Instrument Data"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:318,columnNumber:11},void 0),s.jsxDEV(M,{label:"SndModSeq count",value:n.sndSeqsCount.toString()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:319,columnNumber:11},void 0),s.jsxDEV(M,{label:"SndModSeq bytes",value:`${n.sndModSeqData.byteLength} B`},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:320,columnNumber:11},void 0),s.jsxDEV(M,{label:"VolModSeq bytes",value:`${n.volModSeqData.byteLength} B`},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:321,columnNumber:11},void 0),s.jsxDEV(M,{label:"Sample slots",value:n.sampleCount.toString()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:322,columnNumber:11},void 0),s.jsxDEV(M,{label:"Sample headers",value:`${n.sampleHeaders.byteLength} B`},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:323,columnNumber:11},void 0),s.jsxDEV(M,{label:"Sample PCM bank",value:`${(n.sampleData.byteLength/1024).toFixed(1)} KiB`},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:324,columnNumber:11},void 0),s.jsxDEV("div",{className:"mt-2 text-[9px] text-gray-600",children:"TFMX instruments use SndMod/VolMod macro sequences with a shared PCM sample bank."},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:325,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:317,columnNumber:9},void 0),e.length>0&&s.jsxDEV("div",{className:`rounded-lg border p-3 ${C}`,children:[s.jsxDEV(h,{label:"Sample Bank"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:333,columnNumber:13},void 0),s.jsxDEV("div",{className:"font-mono text-[9px] flex border-b mb-1 pb-0.5",style:{borderColor:f,color:"#555"},children:[s.jsxDEV("span",{className:"w-5",children:"#"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:336,columnNumber:15},void 0),s.jsxDEV("span",{className:"w-28",children:"Name"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:337,columnNumber:15},void 0),s.jsxDEV("span",{className:"w-16 text-right pr-2",children:"Offset"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:338,columnNumber:15},void 0),s.jsxDEV("span",{className:"w-16 text-right pr-2",children:"Len"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:339,columnNumber:15},void 0),s.jsxDEV("span",{className:"w-16 text-right",children:"RepLen"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:340,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:334,columnNumber:13},void 0),s.jsxDEV("div",{className:"overflow-y-auto",style:{maxHeight:"200px"},children:e.map(e=>s.jsxDEV("div",{className:"font-mono text-[9px] flex py-0.5 items-center",children:[s.jsxDEV("span",{className:"w-5 text-gray-600",children:e.idx},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:345,columnNumber:19},void 0),s.jsxDEV("span",{className:"w-28 truncate",style:{color:b},children:e.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:346,columnNumber:19},void 0),s.jsxDEV("span",{className:"w-16 text-right pr-2 text-gray-500",children:["$",e.startOffset.toString(16).padStart(6,"0")]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:347,columnNumber:19},void 0),s.jsxDEV("span",{className:"w-16 text-right pr-2 text-gray-400",children:e.lenBytes>0?`${(e.lenBytes/1024).toFixed(1)}K`:"0"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:350,columnNumber:19},void 0),s.jsxDEV("span",{className:"w-16 text-right text-gray-500",children:e.repLenBytes>2?`${(e.repLenBytes/1024).toFixed(1)}K`:"–"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:353,columnNumber:19},void 0)]},e.idx,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:344,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:342,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:332,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:315,columnNumber:7},void 0)})(),"volmod"===l&&(()=>{const e={envelopeSpeed:(o=n.volModSeqData)[0]??0,sndSeqNum:o[1]??0,vibSpeed:o[2]??0,vibAmpl:o[3]??0,vibDelay:o[4]??0};var o;const r=function(e){const s=[];let o=5;const t=Math.min(e.length,64);for(;o<t;){const n=e[o];if(224===n&&o+1<t){const t=63&(e[o+1]??0);s.push({pos:o,raw:n,kind:"loop",label:"LOOP",detail:`→ pos ${t}`,argBytes:2}),o+=2}else{if(225===n){s.push({pos:o,raw:n,kind:"end",label:"END",detail:"",argBytes:1}),o+=1;break}if(232===n&&o+1<t){const t=e[o+1]??0;s.push({pos:o,raw:n,kind:"sustain",label:"SUSTAIN",detail:`${t} ticks`,argBytes:2}),o+=2}else if(234===n&&o+2<t){const t=e[o+1]??0,r=e[o+2]??0;s.push({pos:o,raw:n,kind:"slide",label:"VOL SLIDE",detail:`spd=${t} t=${r}`,argBytes:3}),o+=3}else n>=224?(s.push({pos:o,raw:n,kind:"unknown",label:`$${n.toString(16).toUpperCase()}`,detail:"unknown cmd",argBytes:1}),o+=1):(s.push({pos:o,raw:n,kind:"volume",label:"VOL",detail:`${n}`,argBytes:1}),o+=1)}}return s}(n.volModSeqData);return s.jsxDEV("div",{className:"flex flex-col gap-3 p-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 280px)"},children:[s.jsxDEV("div",{className:`rounded-lg border p-3 ${C}`,children:[s.jsxDEV(h,{label:"VolModSeq Header (bytes 0–4)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:384,columnNumber:11},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[["[0] Env Speed",0,e.envelopeSpeed],["[1] SndSeq #",1,e.sndSeqNum],["[2] Vib Speed",2,e.vibSpeed],["[3] Vib Ampl",3,e.vibAmpl],["[4] Vib Delay",4,e.vibDelay]].map(([e,o,t])=>s.jsxDEV("div",{className:"flex items-center gap-2 py-0.5",children:[s.jsxDEV("span",{className:"text-[9px] text-gray-500 w-24",children:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:394,columnNumber:17},void 0),s.jsxDEV("input",{type:"number",min:0,max:255,disabled:V,value:t,onChange:e=>{const s=parseInt(e.target.value);isNaN(s)||X(o,s)},className:"text-[10px] font-mono text-center border rounded py-0.5",style:{width:"52px",background:D,borderColor:f,color:0!==t?b:"#444",cursor:V?"default":void 0}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:395,columnNumber:17},void 0)]},o,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:393,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:385,columnNumber:11},void 0),e.sndSeqNum>=n.sndSeqsCount&&s.jsxDEV("div",{className:"mt-2 text-[9px]",style:{color:"#ff6644"},children:["Warning: SndSeq #",e.sndSeqNum," is out of range (max ",n.sndSeqsCount-1,")"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:417,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:383,columnNumber:9},void 0),s.jsxDEV("div",{className:`rounded-lg border p-3 ${C}`,children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[s.jsxDEV(h,{label:"Volume Envelope (bytes 5–63)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:426,columnNumber:13},void 0),s.jsxDEV("button",{onClick:()=>c(e=>!e),className:"text-[9px] px-2 py-0.5 rounded border",style:{borderColor:f,color:v,background:"transparent"},children:m?"Hide":"Hex"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:427,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:425,columnNumber:11},void 0),m?s.jsxDEV("pre",{className:"text-[9px] font-mono overflow-x-auto p-2 rounded",style:{background:"#080400",color:"#888",border:`1px solid ${f}`},children:t(n.volModSeqData.slice(5))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:436,columnNumber:13},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"flex font-mono text-[9px] border-b mb-1 pb-0.5",style:{borderColor:f,color:"#555"},children:[s.jsxDEV("span",{className:"w-6 text-center",children:"Pos"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:445,columnNumber:17},void 0),s.jsxDEV("span",{className:"w-8 text-center",children:"Hex"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:446,columnNumber:17},void 0),s.jsxDEV("span",{className:"w-16 text-center",children:"Cmd"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:447,columnNumber:17},void 0),s.jsxDEV("span",{className:"flex-1",children:"Detail"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:448,columnNumber:17},void 0),!V&&s.jsxDEV("span",{className:"w-12 text-right",children:"Edit"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:449,columnNumber:31},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:443,columnNumber:15},void 0),s.jsxDEV("div",{className:"overflow-y-auto",style:{maxHeight:"220px"},children:0===r.length?s.jsxDEV("div",{className:"text-[9px] text-gray-600 py-2",children:"No envelope data"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:453,columnNumber:19},void 0):r.map((e,o)=>{return s.jsxDEV("div",{className:"flex items-center font-mono text-[9px] py-0.5",children:[s.jsxDEV("span",{className:"w-6 text-center text-gray-600",children:e.pos},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:457,columnNumber:23},void 0),s.jsxDEV("span",{className:"w-8 text-center text-gray-500",children:e.raw.toString(16).padStart(2,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:458,columnNumber:23},void 0),s.jsxDEV("span",{className:"w-16 text-center font-bold",style:{color:(t=e.kind,"volume"===t?b:"end"===t?"#ff4444":"loop"===t?"#44ff88":"sustain"===t?"#ffaa44":"slide"===t?"#aa88ff":"#666")},children:e.label},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:461,columnNumber:23},void 0),s.jsxDEV("span",{className:"flex-1 text-gray-400",children:e.detail},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:464,columnNumber:23},void 0),!V&&"volume"===e.kind&&s.jsxDEV("input",{type:"number",min:0,max:64,value:e.raw,onChange:s=>{const o=parseInt(s.target.value);isNaN(o)||X(5+e.pos,o)},className:"text-[9px] font-mono text-center border rounded py-0",style:{width:"44px",background:D,borderColor:f,color:b}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:466,columnNumber:25},void 0),!V&&"volume"!==e.kind&&s.jsxDEV("span",{className:"w-12"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:484,columnNumber:25},void 0)]},o,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:456,columnNumber:21},void 0);var t})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:451,columnNumber:15},void 0),s.jsxDEV("div",{className:"mt-2 text-[9px] text-gray-600",children:"Volume range 0–64. Commands: E0=loop E1=end E8=sustain EA=vol-slide"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:490,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:441,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:424,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:381,columnNumber:7},void 0)})(),"sndmod"===l&&(()=>{const e=Math.min(n.sndSeqsCount,Math.floor(n.sndModSeqData.length/64)),o=Math.max(0,Math.min(e-1,u)),r=e>0?function(e,s,o){const t=[],n=64*s,r=Math.min(n+64,e.length);let l=n;for(;l<r;){const s=l-n,i=e[l];if(i<224){const o=l+1<r?e[l+1]:0,n=!!(128&i),m=127&i;t.push({pos:s,raw:i,kind:"note",label:n?"NOTE":"TRANS",detail:n?`pitch=$${m.toString(16).padStart(2,"0")} p2=$${o.toString(16).padStart(2,"0")}`:`trans=${m-64} p2=$${o.toString(16).padStart(2,"0")}`,argBytes:2}),l+=2}else if(224===i&&l+1<r){const o=63&(e[l+1]??0);t.push({pos:s,raw:i,kind:"loop",label:"LOOP",detail:`→ pos ${o}`,argBytes:2}),l+=2}else{if(225===i){t.push({pos:s,raw:i,kind:"end",label:"END",detail:"",argBytes:1}),l+=1;break}if(226===i&&l+1<r){const o=e[l+1]??0;t.push({pos:s,raw:i,kind:"setwave",label:"SET_WAVE",detail:`smp#${o}`,argBytes:2}),l+=2}else if(227===i&&l+2<r){const o=e[l+1]??0,n=e[l+2]??0;t.push({pos:s,raw:i,kind:"vibrato",label:"VIBRATO",detail:`spd=${o} amp=${n}`,argBytes:3}),l+=3}else if(228===i&&l+1<r){const o=e[l+1]??0;t.push({pos:s,raw:i,kind:"newwave",label:"NEW_WAVE",detail:`smp#${o}`,argBytes:2}),l+=2}else if(229===i){const o=l+1<r?e[l+1]:0;t.push({pos:s,raw:i,kind:"wavemod",label:"WAVE_MOD",detail:`smp#${o} (+8 args)`,argBytes:9}),l+=9}else if(230===i)t.push({pos:s,raw:i,kind:"updwavemod",label:"UPD_WAVE_MOD",detail:"(+5 args)",argBytes:6}),l+=6;else if(231===i&&l+1<r){const n=e[l+1]??0,r=n<o;t.push({pos:s,raw:i,kind:"setseq",label:"SET_SEQ",detail:`seq#${n}${r?"":" (!)"}`,argBytes:2}),l+=2}else if(232===i&&l+1<r){const o=e[l+1]??0;t.push({pos:s,raw:i,kind:"sustain",label:"SUSTAIN",detail:`${o} ticks`,argBytes:2}),l+=2}else if(233===i&&l+2<r){const o=e[l+1]??0,n=e[l+2]??0;t.push({pos:s,raw:i,kind:"smppack",label:"SMP_PACK",detail:`pack#${o} smp#${n}`,argBytes:3}),l+=3}else if(234===i&&l+1<r){const o=e[l+1]??0;t.push({pos:s,raw:i,kind:"random",label:"RANDOMIZE",detail:`thresh=${o}`,argBytes:2}),l+=2}else t.push({pos:s,raw:i,kind:"unknown",label:`$${i.toString(16).toUpperCase()}`,detail:"?",argBytes:1}),l+=1}}return t}(n.sndModSeqData,o,e):[],l=e=>{switch(e){case"setwave":case"newwave":return"#88ccff";case"end":return"#ff4444";case"loop":return"#44ff88";case"sustain":return"#ffaa44";case"vibrato":return"#ff88ff";case"setseq":return"#ffff44";case"wavemod":case"updwavemod":return"#44ffff";case"smppack":return"#88ff88";case"random":return"#ffaa88";case"note":return b;default:return"#666"}};return s.jsxDEV("div",{className:"flex flex-col gap-3 p-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 280px)"},children:0===e?s.jsxDEV("div",{className:`rounded-lg border p-3 ${C}`,children:s.jsxDEV("div",{className:"text-[9px] text-gray-600",children:"No SndModSeq data"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:531,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:530,columnNumber:11},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:`rounded-lg border p-3 ${C}`,children:[s.jsxDEV(h,{label:"Sound Modulation Sequences"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:537,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex items-center gap-2 flex-wrap",children:Array.from({length:e},(e,t)=>s.jsxDEV("button",{onClick:()=>p(t),className:"text-[9px] font-mono px-2 py-0.5 rounded border transition-colors",style:{borderColor:t===o?b:f,color:t===o?E:v,background:t===o?b:"transparent"},children:t},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:540,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:538,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:536,columnNumber:13},void 0),s.jsxDEV("div",{className:`rounded-lg border p-3 ${C}`,children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[s.jsxDEV(h,{label:`SndModSeq #${o}`},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:558,columnNumber:17},void 0),s.jsxDEV("button",{onClick:()=>d(e=>!e),className:"text-[9px] px-2 py-0.5 rounded border",style:{borderColor:f,color:v,background:"transparent"},children:a?"Hide":"Hex"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:559,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:557,columnNumber:15},void 0),a?s.jsxDEV("pre",{className:"text-[9px] font-mono overflow-x-auto p-2 rounded",style:{background:"#080400",color:"#888",border:`1px solid ${f}`},children:t(n.sndModSeqData.slice(64*o,64*o+64))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:568,columnNumber:17},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"flex font-mono text-[9px] border-b mb-1 pb-0.5",style:{borderColor:f,color:"#555"},children:[s.jsxDEV("span",{className:"w-6 text-center",children:"Pos"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:577,columnNumber:21},void 0),s.jsxDEV("span",{className:"w-8 text-center",children:"Hex"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:578,columnNumber:21},void 0),s.jsxDEV("span",{className:"w-24 text-center",children:"Cmd"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:579,columnNumber:21},void 0),s.jsxDEV("span",{className:"flex-1",children:"Detail"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:580,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:575,columnNumber:19},void 0),s.jsxDEV("div",{className:"overflow-y-auto",style:{maxHeight:"260px"},children:0===r.length?s.jsxDEV("div",{className:"text-[9px] text-gray-600 py-2",children:"Empty sequence"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:584,columnNumber:23},void 0):r.map((e,o)=>s.jsxDEV("div",{className:"flex items-center font-mono text-[9px] py-0.5",children:[s.jsxDEV("span",{className:"w-6 text-center text-gray-600",children:e.pos},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:588,columnNumber:27},void 0),s.jsxDEV("span",{className:"w-8 text-center text-gray-500",children:e.raw.toString(16).padStart(2,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:589,columnNumber:27},void 0),s.jsxDEV("span",{className:"w-24 text-center font-bold",style:{color:l(e.kind)},children:e.label},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:592,columnNumber:27},void 0),s.jsxDEV("span",{className:"flex-1 text-gray-400",children:e.detail},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:595,columnNumber:27},void 0)]},o,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:587,columnNumber:25},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:582,columnNumber:19},void 0),s.jsxDEV("div",{className:"mt-2 text-[9px] text-gray-600",children:"E2/E4=set/new wave · E3=vibrato · E7=jump seq · E8=sustain · E9=smp pack"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:600,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:573,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:556,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:534,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:528,columnNumber:7},void 0)})()]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/TFMXControls.tsx",lineNumber:621,columnNumber:5},void 0)};export{n as TFMXControls};
