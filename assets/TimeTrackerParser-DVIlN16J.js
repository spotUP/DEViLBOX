function n(n){const e=n instanceof Uint8Array?n:new Uint8Array(n);return!(e.length<4)&&(84===e[0]&&77===e[1]&&75===e[2]&&0!==e[3])}function e(e,t){const r=new Uint8Array(e);if(!n(r))throw new Error("Not a TimeTracker module");const o=t.split("/").pop()??t,a=o.replace(/^tmk\./i,"").replace(/\.tmk$/i,"")||o;let i=1,l=0;if(r.length>=10){i=r[3];const n=127&r[5];n>0&&(l=Math.min(n,127))}const s=l||1,m=Array.from({length:s},(n,e)=>({id:e+1,name:`Sample ${e+1}`,type:"synth",synthType:"Synth",effects:[],volume:0,pan:0})),u=Array.from({length:64},()=>({note:0,instrument:0,volume:0,effTyp:0,eff:0,effTyp2:0,eff2:0}));return{name:i>1?`${a} [TimeTracker](${i} subsongs)`:`${a} [TimeTracker]`,format:"MOD",patterns:[{id:"pattern-0",name:"Pattern 0",length:64,channels:Array.from({length:4},(n,e)=>({id:`channel-${e}`,name:`Channel ${e+1}`,muted:!1,solo:!1,collapsed:!1,volume:100,pan:0===e||3===e?-50:50,instrumentId:null,color:null,rows:u})),importMetadata:{sourceFormat:"MOD",sourceFile:t,importedAt:(new Date).toISOString(),originalChannelCount:4,originalPatternCount:1,originalInstrumentCount:l}}],instruments:m,songPositions:[0],songLength:1,restartPosition:0,numChannels:4,initialSpeed:6,initialBPM:125,linearPeriods:!1}}export{n as isTimeTrackerFormat,e as parseTimeTrackerFile};
