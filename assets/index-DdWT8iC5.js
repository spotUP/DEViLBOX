import{f as e,au as a,j as r,d as t,av as s,aw as o,Z as n,ax as i,ay as l,b as c,n as d}from"./index-DxMPGKEz.js";import{r as m,R as x}from"./vendor-utils-Cm-70yv0.js";import{u,a as h,D as g,c as b,S as p,v as f,s as y,K as v,P as j,b as N,C as w}from"./sortable.esm-lxC05b89.js";import{b as k,C,X as M,l as V,V as $,ba as D,S,b6 as P,bb as F,M as z,x as E,R as T,aC as R,bc as U,Z as W,bd as B,aZ as A,aE as H,aJ as q}from"./vendor-ui-C64XGON6.js";import"./vendor-react-LeNVipsj.js";import"./vendor-tone-MhHxAwwC.js";const O={drive:{name:"Drive",id:"drive",value:50,default:50,min:0,max:100,unit:"%",curve:"exponential"},tone:{name:"Tone",id:"tone",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},level:{name:"Level",id:"level",value:75,default:75,min:0,max:100,unit:"%",curve:"linear"},dryWet:{name:"Mix",id:"dryWet",value:100,default:100,min:0,max:100,unit:"%",curve:"linear"},presence:{name:"Presence",id:"presence",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},bass:{name:"Bass",id:"bass",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},mid:{name:"Mid",id:"mid",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},treble:{name:"Treble",id:"treble",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"}},I=[{type:"Compressor",label:"Compressor",category:"Dynamics"},{type:"EQ3",label:"3-Band EQ",category:"Dynamics"},{type:"Distortion",label:"Distortion",category:"Distortion"},{type:"BitCrusher",label:"Bit Crusher",category:"Distortion"},{type:"Chebyshev",label:"Chebyshev",category:"Distortion"},{type:"Reverb",label:"Reverb",category:"Time"},{type:"JCReverb",label:"JC Reverb",category:"Time"},{type:"Delay",label:"Delay",category:"Time"},{type:"FeedbackDelay",label:"Feedback Delay",category:"Time"},{type:"PingPongDelay",label:"Ping Pong Delay",category:"Time"},{type:"SpaceEcho",label:"Space Echo",category:"Time"},{type:"SpaceyDelayer",label:"Spacey Delayer",category:"Time"},{type:"RETapeEcho",label:"RE Tape Echo",category:"Time"},{type:"MVerb",label:"MVerb Plate",category:"Time"},{type:"SpringReverb",label:"Spring Reverb",category:"Time"},{type:"Leslie",label:"Leslie Speaker",category:"Modulation"},{type:"BiPhase",label:"Bi-Phase",category:"Modulation"},{type:"Chorus",label:"Chorus",category:"Modulation"},{type:"Phaser",label:"Phaser",category:"Modulation"},{type:"Tremolo",label:"Tremolo",category:"Modulation"},{type:"Vibrato",label:"Vibrato",category:"Modulation"},{type:"AutoFilter",label:"Auto Filter",category:"Modulation"},{type:"AutoPanner",label:"Auto Panner",category:"Modulation"},{type:"AutoWah",label:"Auto Wah",category:"Modulation"},{type:"DubFilter",label:"Dub Filter",category:"Filter"},{type:"MoogFilter",label:"Moog Filter",category:"Filter"},{type:"Filter",label:"Filter",category:"Filter"},{type:"PitchShift",label:"Pitch Shift",category:"Pitch"},{type:"FrequencyShifter",label:"Freq Shifter",category:"Pitch"},{type:"StereoWidener",label:"Stereo Widener",category:"Stereo"}];function L({effect:e,onToggle:a,onRemove:t,onEdit:s,onWetChange:o}){const{attributes:n,listeners:i,setNodeRef:l,transform:c,transition:d,isDragging:m}=N({id:e.id}),x={transform:w.Transform.toString(c),transition:d,opacity:m?.5:1};return r.jsx("div",{ref:l,style:x,className:`\n        bg-dark-bgSecondary border border-dark-border rounded-lg p-3 mb-2\n        ${m?"shadow-lg ring-2 ring-accent-primary":""}\n        ${e.enabled?"":"opacity-60"}\n      `,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{...n,...i,className:"text-text-muted hover:text-accent-primary cursor-grab active:cursor-grabbing p-1",title:"Drag to reorder",children:r.jsx(D,{size:16})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-sm text-text-primary",children:e.type}),r.jsx("div",{className:"text-xs text-text-muted",children:e.enabled?"Active":"Bypassed"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-text-muted",children:"WET"}),r.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>o(Number(e.target.value)),className:"w-16 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary\n                     [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3\n                     [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-accent-primary [&::-moz-range-thumb]:border-0"}),r.jsxs("span",{className:"text-xs text-accent-primary font-mono w-8 text-right",children:[e.wet,"%"]})]}),r.jsx("button",{onClick:s,className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:r.jsx(S,{size:14})}),r.jsx("button",{onClick:a,className:`\n            p-1.5 rounded transition-colors\n            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n          `,title:e.enabled?"Disable":"Enable",children:r.jsx(P,{size:14})}),r.jsx("button",{onClick:t,className:"p-1.5 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:r.jsx(M,{size:14})})]})})}const Q="master-fx-user-presets",J=({onEditEffect:t})=>{const[s,o]=m.useState(!1),[n,i]=m.useState(!1),[l,c]=m.useState(!1),[d,N]=m.useState(""),{masterEffects:w,addMasterEffect:D,removeMasterEffect:S,updateMasterEffect:P,reorderMasterEffects:F,setMasterEffects:z}=e(),E=m.useCallback(()=>{try{const e=localStorage.getItem(Q);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),T=m.useCallback(()=>{if(!d.trim())return;const e=E();e.push({name:d.trim(),effects:w.map(e=>({...e}))}),localStorage.setItem(Q,JSON.stringify(e)),N(""),c(!1)},[d,w,E]),R=m.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));z(a),i(!1)},[z]),U=m.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));z(a),i(!1)},[z]),W=m.useCallback(e=>{const a=E().filter(a=>a.name!==e);localStorage.setItem(Q,JSON.stringify(a))},[E]),B=E(),A=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),H=u(h(j),h(v,{coordinateGetter:y})),q=I.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{});return r.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-dark-bgSecondary border-b border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(k,{size:16,className:"text-accent-primary"}),r.jsx("span",{className:"font-medium text-sm text-text-primary",children:"Master Effects"}),r.jsxs("span",{className:"text-xs text-text-muted px-2 py-0.5 bg-dark-bg rounded",children:[w.length," FX"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>i(!n),className:"px-3 py-1 text-xs font-medium rounded bg-dark-bg text-text-primary\n                       hover:bg-dark-bgHover transition-colors flex items-center gap-1 border border-dark-border",children:["Presets ",r.jsx(C,{size:12})]}),n&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-80 overflow-y-auto",children:[B.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:"User Presets"}),B.map(e=>r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-dark-bgHover cursor-pointer group",children:[r.jsx("span",{onClick:()=>U(e),className:"text-sm text-text-primary flex-1",children:e.name}),r.jsx("button",{onClick:a=>{a.stopPropagation(),W(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:r.jsx(M,{size:12})})]},e.name)),r.jsx("div",{className:"border-t border-dark-border my-1"})]}),Object.entries(A).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:e}),a.map(e=>r.jsxs("div",{onClick:()=>R(e),className:"px-3 py-2 hover:bg-dark-bgHover cursor-pointer",children:[r.jsx("div",{className:"text-sm text-text-primary",children:e.name}),r.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),r.jsx("button",{onClick:()=>c(!0),className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:r.jsx(V,{size:14})}),r.jsx("button",{onClick:()=>o(!s),className:"px-3 py-1 text-xs font-medium rounded bg-accent-primary/10 text-accent-primary\n                     hover:bg-accent-primary/20 transition-colors",children:"+ Add Effect"})]})]}),l&&r.jsx("div",{className:"px-4 py-3 bg-dark-bgTertiary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",placeholder:"Preset name...",value:d,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&T(),"Escape"===e.key&&c(!1)},className:"flex-1 px-3 py-1.5 text-sm bg-dark-bg border border-dark-border rounded text-text-primary\n                       placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),r.jsx("button",{onClick:T,className:"px-3 py-1.5 text-xs font-medium rounded bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),r.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-xs font-medium rounded bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),s&&r.jsxs("div",{className:"p-4 bg-dark-bgTertiary border-b border-dark-border",children:[r.jsx("div",{className:"text-xs text-text-muted mb-3 font-medium",children:"Select Effect Type:"}),r.jsx("div",{className:"space-y-3",children:Object.entries(q).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-text-muted mb-1.5 uppercase tracking-wide",children:e}),r.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(({type:e,label:a})=>r.jsx("button",{onClick:()=>(D(e),void o(!1)),className:"px-2 py-1 text-xs rounded border border-dark-border bg-dark-bg\n                               hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                               transition-colors",children:a},e))})]},e))})]}),r.jsx("div",{className:"px-4 py-2 bg-dark-bgSecondary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-text-muted overflow-x-auto",children:[r.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),r.jsx("span",{children:"→"}),w.length>0?w.map((e,a)=>r.jsxs(x.Fragment,{children:[r.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<w.length-1&&r.jsx("span",{children:"→"})]},e.id)):r.jsx("span",{className:"italic text-text-muted",children:"direct"}),r.jsx("span",{children:"→"}),r.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[r.jsx($,{size:12})," OUTPUT"]})]})}),r.jsx("div",{className:"p-4",children:0===w.length?r.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No master effects. All audio passes through unchanged."}):r.jsx(g,{sensors:H,collisionDetection:b,onDragEnd:e=>{const{active:a,over:r}=e;if(r&&a.id!==r.id){const e=w.findIndex(e=>e.id===a.id),t=w.findIndex(e=>e.id===r.id);-1!==e&&-1!==t&&F(e,t)}},children:r.jsx(p,{items:w.map(e=>e.id),strategy:f,children:w.map(e=>r.jsx(L,{effect:e,onToggle:()=>(e=>{const a=w.find(a=>a.id===e);a&&P(e,{enabled:!a.enabled})})(e.id),onRemove:()=>{return a=e.id,void S(a);var a},onEdit:()=>(e=>{t&&t(e)})(e),onWetChange:a=>((e,a)=>{P(e,{wet:a})})(e.id,a)},e.id))})})}),r.jsx("div",{className:"px-4 pb-4",children:r.jsxs("div",{className:"text-xs text-text-muted p-3 bg-dark-bgSecondary rounded border border-dark-border",children:[r.jsx("strong",{children:"Tip:"})," Drag effects to reorder the signal chain. Order matters: compression before reverb sounds different than reverb before compression."]})})]})},G={drive:{...O.drive},tone:{...O.tone},level:{...O.level},dryWet:{...O.dryWet}},K={drive:{...O.drive},presence:{...O.presence},level:{...O.level},dryWet:{...O.dryWet}},X={drive:{...O.drive},bass:{...O.bass},mid:{...O.mid},treble:{...O.treble},presence:{...O.presence},level:{...O.level},dryWet:{...O.dryWet}},Z=[{index:0,name:"TS808",fullName:"Ibanez TS808 Tube Screamer",category:"overdrive",description:"Legendary mid-focused overdrive, smooth and warm",tags:["tubescreamer","classic","smooth","mid-boost","vintage"],parameters:G,characteristics:{gain:"medium",tone:"neutral",character:["warm","smooth","mid-focused","classic"]}},{index:1,name:"ProCo RAT",fullName:"ProCo RAT Distortion",category:"distortion",description:"Aggressive distortion with cutting edge and sustain",tags:["rat","distortion","aggressive","cutting","sustain"],parameters:G,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","saturated","edgy"]}},{index:2,name:"MT-2",fullName:"Boss MT-2 Metal Zone",category:"distortion",description:"Extreme high-gain distortion with active EQ",tags:["metal","high-gain","eq","heavy","modern"],parameters:X,characteristics:{gain:"extreme",tone:"bright",character:["heavy","saturated","aggressive","tight"]}},{index:3,name:"DOD 250",fullName:"DOD 250 Overdrive/Preamp",category:"overdrive",description:"Classic simple overdrive with transparent tone",tags:["dod","overdrive","transparent","simple","vintage"],parameters:{...G,tone:void 0},characteristics:{gain:"medium",tone:"neutral",character:["transparent","simple","responsive","dynamic"]}},{index:4,name:"Big Muff",fullName:"Electro-Harmonix Big Muff Pi",category:"distortion",description:"Thick, creamy fuzz with massive sustain",tags:["fuzz","muff","sustain","thick","vintage"],parameters:G,characteristics:{gain:"high",tone:"dark",character:["thick","woolly","sustaining","vintage"]}},{index:5,name:"MXR Dist+",fullName:"MXR Distortion+",category:"distortion",description:"Simple, raw distortion with lots of character",tags:["mxr","distortion","raw","simple"],parameters:{...G,tone:void 0},characteristics:{gain:"high",tone:"bright",character:["raw","edgy","simple","aggressive"]}},{index:6,name:"Bluesbreaker",fullName:"Marshall Bluesbreaker",category:"overdrive",description:"Legendary transparent amp-like overdrive",tags:["marshall","blues","transparent","amp-like","dynamic"],parameters:G,characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","amp-like","responsive"]}},{index:7,name:"Klon",fullName:"Klon Centaur",category:"overdrive",description:"Boutique transparent overdrive, highly sought after",tags:["klon","centaur","boutique","transparent","legendary"],parameters:G,characteristics:{gain:"medium",tone:"bright",character:["transparent","sparkle","boutique","clean"]}},{index:8,name:"Princeton",fullName:"Fender Princeton Reverb",category:"amplifier",description:"Classic clean Fender amp tone",tags:["fender","amp","clean","vintage","reverb"],parameters:K,characteristics:{gain:"low",tone:"bright",character:["clean","sparkle","classic","warm"]}},{index:9,name:"Plexi",fullName:"Marshall Plexi Super Lead",category:"amplifier",description:"Legendary British rock amp, crunchy and aggressive",tags:["marshall","plexi","rock","british","crunch"],parameters:X,characteristics:{gain:"high",tone:"bright",character:["crunchy","aggressive","british","rock"]}},{index:10,name:"Mesa Recto",fullName:"Mesa Boogie Dual Rectifier",category:"amplifier",description:"Modern high-gain metal amp",tags:["mesa","rectifier","metal","high-gain","modern"],parameters:X,characteristics:{gain:"extreme",tone:"dark",character:["heavy","tight","modern","crushing"]}},{index:11,name:"AC30",fullName:"Vox AC30",category:"amplifier",description:"British chime and jangle, clean to crunch",tags:["vox","ac30","british","jangle","chime"],parameters:K,characteristics:{gain:"medium",tone:"bright",character:["chime","jangle","british","sparkle"]}},{index:12,name:"Bassman",fullName:"Fender Bassman",category:"amplifier",description:"Classic bass amp that guitarists love",tags:["fender","bassman","vintage","clean","bass"],parameters:K,characteristics:{gain:"low",tone:"dark",character:["clean","warm","full","vintage"]}},{index:13,name:"JCM800",fullName:"Marshall JCM800",category:"amplifier",description:"80s British rock and metal tone",tags:["marshall","jcm800","80s","rock","metal"],parameters:X,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","tight","80s"]}},{index:14,name:"SLO100",fullName:"Soldano SLO-100",category:"amplifier",description:"Boutique high-gain with singing leads",tags:["soldano","slo","high-gain","boutique","lead"],parameters:X,characteristics:{gain:"extreme",tone:"bright",character:["singing","smooth","high-gain","boutique"]}},{index:15,name:"5150",fullName:"Peavey 5150",category:"amplifier",description:"Iconic metal amp, tight and aggressive",tags:["peavey","5150","metal","aggressive","modern"],parameters:X,characteristics:{gain:"extreme",tone:"bright",character:["tight","aggressive","metal","modern"]}},{index:16,name:"Dumble ODS",fullName:"Dumble Overdrive Special",category:"amplifier",description:"Legendary boutique amp, smooth and rich",tags:["dumble","boutique","smooth","overdrive","luxury"],parameters:X,characteristics:{gain:"medium",tone:"dark",character:["smooth","rich","boutique","singing"]}},{index:17,name:"Matchless DC30",fullName:"Matchless DC-30",category:"amplifier",description:"Boutique British-style clean to crunch",tags:["matchless","boutique","british","clean"],parameters:K,characteristics:{gain:"medium",tone:"bright",character:["boutique","clean","dynamic","sparkle"]}},{index:18,name:"Orange Rockerverb",fullName:"Orange Rockerverb",category:"amplifier",description:"British alternative rock tone",tags:["orange","british","alternative","rock"],parameters:K,characteristics:{gain:"high",tone:"neutral",character:["thick","british","alternative","punchy"]}},{index:19,name:"ENGL Powerball",fullName:"ENGL Powerball",category:"amplifier",description:"German high-gain metal machine",tags:["engl","metal","high-gain","german","modern"],parameters:X,characteristics:{gain:"extreme",tone:"bright",character:["tight","articulate","metal","modern"]}},{index:20,name:"Friedman BE-100",fullName:"Friedman BE-100",category:"amplifier",description:"Modern boutique high-gain",tags:["friedman","boutique","high-gain","modern"],parameters:X,characteristics:{gain:"extreme",tone:"bright",character:["tight","modern","boutique","versatile"]}},{index:21,name:"Timmy",fullName:"Paul Cochrane Timmy",category:"overdrive",description:"Transparent overdrive with separate bass/treble controls",tags:["timmy","transparent","overdrive","boutique"],parameters:{...G,bass:O.bass,treble:O.treble},characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","versatile","boutique"]}},{index:22,name:"Vertex",fullName:"Vertex Steel String",category:"overdrive",description:"Clean boost to light overdrive",tags:["vertex","clean","boost","transparent"],parameters:G,characteristics:{gain:"low",tone:"bright",character:["clean","transparent","boost","sparkle"]}},{index:23,name:"Fulltone OCD",fullName:"Fulltone Obsessive Compulsive Drive",category:"overdrive",description:"Versatile overdrive from sparkle to crunch",tags:["fulltone","ocd","versatile","overdrive"],parameters:G,characteristics:{gain:"medium",tone:"neutral",character:["versatile","dynamic","amp-like","responsive"]}},{index:24,name:"Horizon",fullName:"Horizon Devices Precision Drive",category:"overdrive",description:"Modern djent and metal tones",tags:["horizon","djent","metal","modern","tight"],parameters:G,characteristics:{gain:"high",tone:"bright",character:["tight","modern","djent","articulate"]}},{index:25,name:"Suhr Riot",fullName:"Suhr Riot Distortion",category:"distortion",description:"British-voiced distortion",tags:["suhr","riot","distortion","british"],parameters:G,characteristics:{gain:"high",tone:"bright",character:["british","aggressive","versatile","cutting"]}},{index:26,name:"Bogner Ecstasy",fullName:"Bogner Ecstasy Blue",category:"overdrive",description:"Boutique amp-in-a-box pedal",tags:["bogner","ecstasy","amp-in-a-box","boutique"],parameters:G,characteristics:{gain:"high",tone:"neutral",character:["boutique","versatile","amp-like","smooth"]}},{index:27,name:"Wampler Pinnacle",fullName:"Wampler Pinnacle",category:"distortion",description:"Brown sound high-gain distortion",tags:["wampler","pinnacle","brown-sound","high-gain"],parameters:G,characteristics:{gain:"extreme",tone:"dark",character:["brown-sound","high-gain","smooth","saturated"]}},{index:28,name:"Fortin 33",fullName:"Fortin 33",category:"overdrive",description:"Modern metal overdrive",tags:["fortin","metal","modern","tight"],parameters:G,characteristics:{gain:"high",tone:"bright",character:["tight","modern","metal","articulate"]}},{index:29,name:"Revv G3",fullName:"Revv G3 Purple",category:"distortion",description:"Modern high-gain distortion",tags:["revv","g3","high-gain","modern"],parameters:G,characteristics:{gain:"extreme",tone:"bright",character:["modern","tight","high-gain","aggressive"]}},{index:30,name:"Way Huge Pork Loin",fullName:"Way Huge Pork Loin",category:"overdrive",description:"Vintage-style overdrive",tags:["way-huge","pork-loin","vintage","overdrive"],parameters:G,characteristics:{gain:"medium",tone:"dark",character:["vintage","warm","smooth","thick"]}},{index:31,name:"Darkglass B7K",fullName:"Darkglass B7K Ultra",category:"distortion",description:"Modern bass distortion and preamp",tags:["darkglass","bass","distortion","modern"],parameters:X,characteristics:{gain:"high",tone:"bright",character:["bass","modern","tight","aggressive"]}},{index:32,name:"Tech 21 SansAmp",fullName:"Tech 21 SansAmp Bass Driver DI",category:"amplifier",description:"Classic bass amp simulation",tags:["tech21","sansamp","bass","di"],parameters:X,characteristics:{gain:"medium",tone:"neutral",character:["bass","classic","versatile","di"]}},{index:33,name:"Ampeg SVT",fullName:"Ampeg SVT Classic",category:"amplifier",description:"Legendary bass amp tone",tags:["ampeg","svt","bass","classic","vintage"],parameters:K,characteristics:{gain:"low",tone:"dark",character:["bass","classic","warm","full"]}},{index:34,name:"Virus Distortion",fullName:"Access Virus Hard Distortion",category:"distortion",description:"Digital synth-style distortion",tags:["virus","synth","digital","experimental"],parameters:G,characteristics:{gain:"extreme",tone:"bright",character:["digital","harsh","experimental","synth"]}},{index:35,name:"Filmosound",fullName:"Bell & Howell Filmosound",category:"amplifier",description:"Vintage tube amp from 1940s projectors",tags:["filmosound","vintage","tube","lo-fi"],parameters:K,characteristics:{gain:"low",tone:"dark",character:["vintage","lo-fi","warm","unique"]}},{index:36,name:"Gibson EH-185",fullName:"Gibson EH-185 Lap Steel Amp",category:"amplifier",description:"Vintage 1940s tube amp",tags:["gibson","vintage","tube","warm"],parameters:K,characteristics:{gain:"low",tone:"dark",character:["vintage","warm","tube","smooth"]}}];class Y{modelIndex;schema;constructor(e){this.modelIndex=e;const a=Z[e];this.schema=a?.parameters||{}}getAvailableParameters(){return Object.entries(this.schema).filter(([,e])=>void 0!==e).map(([e,a])=>({key:e,...a,implemented:this.isImplemented(e)}))}getParameter(e){const a=this.schema[e];return a?{...a,implemented:this.isImplemented(e)}:null}mapToCondition(e){return void 0!==e.drive?e.drive/100:void 0!==e.gain?e.gain/100:void 0!==e.tone?e.tone/100:.5}isImplemented(e){return["drive","gain","tone","bass","mid","treble","presence","level","output","dryWet"].includes(e)}getParameterCount(){return Object.keys(this.schema).length}getModelName(){const e=Z[this.modelIndex];return e?.name||"Unknown Model"}getModelFullName(){const e=Z[this.modelIndex];return e?.fullName||e?.name||"Unknown Model"}getModelCategory(){const e=Z[this.modelIndex];return e?.category||"effect"}hasEQ(){return!!(this.schema.bass||this.schema.mid||this.schema.treble)}getDefaultParameters(){const e={};return Object.entries(this.schema).forEach(([a,r])=>{r&&(e[a]=r.default)}),e}}const _=({bpmSync:e,syncDivision:a,onToggleSync:n,onChangeDivision:i})=>{const l=t(e=>e.bpm),c=1===e,d=m.useMemo(()=>c?s(l,a):null,[c,l,a]),x=m.useMemo(()=>{const e={};for(const a of o)(e[a.category]??=[]).push(a);return e},[]);return r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("button",{onClick:()=>n(!c),className:"flex items-center gap-1 px-2.5 py-1 rounded text-xs font-bold uppercase tracking-wide transition-colors "+(c?"bg-emerald-600 text-white":"bg-gray-800 text-gray-500 hover:bg-gray-700"),title:c?"BPM sync ON — click to disable":"Enable BPM sync",children:[r.jsx(F,{size:12}),"Sync"]}),c&&r.jsxs(r.Fragment,{children:[r.jsx("select",{value:a,onChange:e=>i(e.target.value),className:"bg-gray-800 text-gray-200 text-xs rounded px-2 py-1 border border-gray-700 focus:outline-none focus:border-emerald-500",children:Object.entries(x).map(([e,a])=>r.jsx("optgroup",{label:e,children:a.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))},e))}),null!==d&&r.jsx("span",{className:"text-[10px] text-emerald-400 font-mono tabular-nums",children:d<1e3?`${Math.round(d)}ms`:`${(d/1e3).toFixed(2)}s`})]})]})};function ee({color:e,title:a}){return r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-1 h-4 rounded-full",style:{backgroundColor:e}}),r.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:a})]})}function ae(e,a,r){const t=e.parameters[a];return"number"==typeof t?t:r}function re(e,a){const t=i(e.parameters),s=l(e.parameters);return r.jsx(_,{bpmSync:t?1:0,syncDivision:s,onToggleSync:e=>a("bpmSync",e?1:0),onChangeDivision:e=>a("syncDivision",e)})}const te=({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"time",.25),o=ae(e,"feedback",.5),l=i(e.parameters),c="PingPongDelay"===e.type;return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#3b82f6",title:c?"Ping Pong Delay":"Delay"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:l?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("time",e),label:"Time",color:"#3b82f6",formatValue:e=>`${Math.round(1e3*e)}ms`})}),r.jsx(n,{value:o,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#3b82f6",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),re(e,a)]})})},se=({effect:e,onUpdateWet:a})=>r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#6b7280",title:e.type}),r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:a,label:"Mix",size:"lg",color:"#6b7280",formatValue:e=>`${Math.round(e)}%`})}),r.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Use sliders in the expanded view for this effect type."})]})}),oe=["Hyperion","Krajeski","Stilson","Microtracker","Improved","Oberheim"],ne=["LP2","LP4","BP2","BP4","HP2","HP4","Notch"],ie=["Slow","Brake","Fast"],le={Distortion:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"drive",.4);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#ef4444",title:"Distortion"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("drive",e),label:"Drive",size:"lg",color:"#ef4444",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#f97316",formatValue:e=>`${Math.round(e)}%`})]})]})})},Reverb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"decay",1.5),o=ae(e,"preDelay",.01);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#6366f1",title:"Reverb"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:.1,max:10,onChange:e=>a("decay",e),label:"Decay",color:"#6366f1",formatValue:e=>`${e.toFixed(1)}s`}),r.jsx(n,{value:o,min:0,max:.5,onChange:e=>a("preDelay",e),label:"Pre-Delay",color:"#6366f1",formatValue:e=>`${Math.round(1e3*e)}ms`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}%`})]})]})})},Delay:te,FeedbackDelay:te,PingPongDelay:te,Chorus:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",1.5),o=ae(e,"depth",.7),l=ae(e,"delayTime",3.5),c=i(e.parameters);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#ec4899",title:"Chorus"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:c?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}Hz`})}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",size:"sm",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:l,min:2,max:20,onChange:e=>a("delayTime",e),label:"Delay",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}ms`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]}),re(e,a)]})})},Phaser:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",.5),o=ae(e,"octaves",3),i=ae(e,"baseFrequency",350);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#a855f7",title:"Phaser"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#a855f7",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#a855f7",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:i,min:50,max:1e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#a855f7",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#c084fc",formatValue:e=>`${Math.round(e)}%`})]})]})})},Tremolo:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",10),o=ae(e,"depth",.5);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f97316",title:"Tremolo"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#f97316",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#f97316",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})]})]})})},Vibrato:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",5),o=ae(e,"depth",.1);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#14b8a6",title:"Vibrato"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#14b8a6",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#14b8a6",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#2dd4bf",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoFilter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",1),o=ae(e,"baseFrequency",200),i=ae(e,"octaves",2.6);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#eab308",title:"Auto Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#eab308",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:20,max:2e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#eab308",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:i,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#eab308",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoPanner:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",1),o=ae(e,"depth",1);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#22c55e",title:"Auto Panner"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",color:"#22c55e",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#22c55e",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#4ade80",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoWah:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"baseFrequency",100),o=ae(e,"octaves",6),i=ae(e,"sensitivity",0),l=ae(e,"Q",2);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f43f5e",title:"Auto Wah"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:50,max:500,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:i,min:-40,max:0,onChange:e=>a("sensitivity",e),label:"Sens",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}dB`}),r.jsx(n,{value:l,min:0,max:10,onChange:e=>a("Q",e),label:"Q",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fb7185",formatValue:e=>`${Math.round(e)}%`})})})]})},BitCrusher:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"bits",4);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#84cc16",title:"Bit Crusher"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:1,max:16,onChange:e=>a("bits",Math.round(e)),label:"Bits",size:"lg",color:"#84cc16",formatValue:e=>`${Math.round(e)} bit`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#a3e635",formatValue:e=>`${Math.round(e)}%`})]})]})})},Chebyshev:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"order",50);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f59e0b",title:"Chebyshev Waveshaper"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:1,max:100,onChange:e=>a("order",Math.round(e)),label:"Order",size:"lg",color:"#f59e0b",formatValue:e=>Math.round(e).toString()}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},FrequencyShifter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",0);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#06b6d4",title:"Frequency Shifter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-1e3,max:1e3,onChange:e=>a("frequency",e),label:"Shift",size:"lg",color:"#06b6d4",bipolar:!0,formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#22d3ee",formatValue:e=>`${Math.round(e)}%`})]})]})})},PitchShift:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"pitch",0),o=ae(e,"windowSize",.1),i=ae(e,"feedback",0);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#8b5cf6",title:"Pitch Shift"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-12,max:12,onChange:e=>a("pitch",Math.round(e)),label:"Pitch",color:"#8b5cf6",bipolar:!0,formatValue:e=>`${Math.round(e)>0?"+":""}${Math.round(e)}st`}),r.jsx(n,{value:o,min:.01,max:.5,onChange:e=>a("windowSize",e),label:"Window",color:"#8b5cf6",formatValue:e=>`${Math.round(1e3*e)}ms`}),r.jsx(n,{value:i,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#a78bfa",formatValue:e=>`${Math.round(e)}%`})})})]})},Compressor:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"threshold",-24),o=ae(e,"ratio",12),i=ae(e,"attack",.003),l=ae(e,"release",.25);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#10b981",title:"Compressor"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-100,max:0,onChange:e=>a("threshold",e),label:"Threshold",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`}),r.jsx(n,{value:o,min:1,max:20,onChange:e=>a("ratio",e),label:"Ratio",size:"sm",color:"#10b981",formatValue:e=>`${e.toFixed(1)}:1`}),r.jsx(n,{value:i,min:0,max:1,onChange:e=>a("attack",e),label:"Attack",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`}),r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("release",e),label:"Release",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#34d399",formatValue:e=>`${Math.round(e)}%`})})})]})},EQ3:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"low",0),o=ae(e,"mid",0),i=ae(e,"high",0),l=ae(e,"lowFrequency",400),c=ae(e,"highFrequency",2500);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#3b82f6",title:"3-Band EQ"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-20,max:20,onChange:e=>a("low",e),label:"Low",color:"#ef4444",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),r.jsx(n,{value:o,min:-20,max:20,onChange:e=>a("mid",e),label:"Mid",color:"#eab308",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),r.jsx(n,{value:i,min:-20,max:20,onChange:e=>a("high",e),label:"High",color:"#3b82f6",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`})]})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#6b7280",title:"Crossover"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:l,min:20,max:1e3,onChange:e=>a("lowFrequency",e),label:"Low Freq",size:"sm",color:"#6b7280",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:c,min:1e3,max:1e4,onChange:e=>a("highFrequency",e),label:"High Freq",size:"sm",color:"#6b7280",formatValue:e=>`${(e/1e3).toFixed(1)}kHz`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#9ca3af",formatValue:e=>`${Math.round(e)}%`})]})]})]})},Filter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"frequency",350),o=ae(e,"Q",1),i=ae(e,"gain",0);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f97316",title:"Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:20,max:2e4,onChange:e=>a("frequency",e),label:"Frequency",color:"#f97316",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}kHz`:`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:.001,max:100,onChange:e=>a("Q",e),label:"Q",color:"#f97316",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:i,min:-40,max:40,onChange:e=>a("gain",e),label:"Gain",color:"#f97316",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})})})]})},JCReverb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"roomSize",.5);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#6366f1",title:"JC Reverb"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("roomSize",e),label:"Room Size",size:"lg",color:"#6366f1",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#818cf8",formatValue:e=>`${Math.round(e)}%`})]})]})})},StereoWidener:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"width",.5);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#ec4899",title:"Stereo Widener"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("width",e),label:"Width",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]})]})})},SpaceEcho:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"mode",4),o=ae(e,"rate",300),l=ae(e,"intensity",.5),c=ae(e,"echoVolume",.8),d=ae(e,"reverbVolume",.3),m=ae(e,"bass",0),x=ae(e,"treble",0),u=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#6366f1",title:"Echo"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:1,max:12,onChange:e=>a("mode",Math.round(e)),label:"Mode",color:"#6366f1",formatValue:e=>`${Math.round(e)}`}),r.jsx("div",{className:u?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:o,min:50,max:1e3,onChange:e=>a("rate",e),label:"Rate",color:"#6366f1",formatValue:e=>`${Math.round(e)}ms`})}),r.jsx(n,{value:l,min:0,max:1.2,onChange:e=>a("intensity",e),label:"Intensity",color:"#6366f1",formatValue:e=>`${(100*e).toFixed(0)}%`})]}),re(e,a)]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#818cf8",title:"Levels & EQ"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("echoVolume",e),label:"Echo Vol",color:"#818cf8",formatValue:e=>`${(100*e).toFixed(0)}%`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("reverbVolume",e),label:"Reverb Vol",color:"#818cf8",formatValue:e=>`${(100*e).toFixed(0)}%`}),r.jsx(n,{value:m,min:-20,max:20,onChange:e=>a("bass",e),label:"Bass",color:"#818cf8",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`}),r.jsx(n,{value:x,min:-20,max:20,onChange:e=>a("treble",e),label:"Treble",color:"#818cf8",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#a5b4fc",formatValue:e=>`${Math.round(e)}%`})})})]})},BiPhase:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"routing",0),o=ae(e,"rateA",.5),l=ae(e,"depthA",.6),c=ae(e,"rateB",4),d=ae(e,"depthB",.4),m=ae(e,"feedback",.3),x=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#a855f7",title:"Routing"}),r.jsxs("div",{className:"flex gap-2 justify-center mb-2",children:[r.jsx("button",{onClick:()=>a("routing",0),className:"px-4 py-1.5 text-xs font-medium rounded transition-colors "+(0===Math.round(s)?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:"Parallel"}),r.jsx("button",{onClick:()=>a("routing",1),className:"px-4 py-1.5 text-xs font-medium rounded transition-colors "+(1===Math.round(s)?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:"Series"})]})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#a855f7",title:"Phase A"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:x?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:o,min:.1,max:10,onChange:e=>a("rateA",e),label:"Rate A",color:"#a855f7",formatValue:e=>`${e.toFixed(1)}Hz`})}),r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("depthA",e),label:"Depth A",color:"#a855f7",formatValue:e=>`${(100*e).toFixed(0)}%`})]}),re(e,a)]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#c084fc",title:"Phase B"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:c,min:.1,max:10,onChange:e=>a("rateB",e),label:"Rate B",color:"#c084fc",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("depthB",e),label:"Depth B",color:"#c084fc",formatValue:e=>`${(100*e).toFixed(0)}%`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:m,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#a855f7",formatValue:e=>`${(100*e).toFixed(0)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#d8b4fe",formatValue:e=>`${Math.round(e)}%`})]})})]})},DubFilter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"cutoff",20),o=ae(e,"resonance",10),i=ae(e,"gain",1);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#22c55e",title:"Dub Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:20,max:1e4,onChange:e=>a("cutoff",e),label:"Cutoff",color:"#22c55e",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:0,max:100,onChange:e=>a("resonance",e),label:"Resonance",color:"#22c55e",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:i,min:.5,max:2,onChange:e=>a("gain",e),label:"Drive",color:"#22c55e",formatValue:e=>`${e.toFixed(2)}x`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#4ade80",formatValue:e=>`${Math.round(e)}%`})})})]})},TapeSaturation:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"drive",50),o=ae(e,"tone",12e3);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#ef4444",title:"Tape Saturation"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:100,onChange:e=>a("drive",e),label:"Drive",color:"#ef4444",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:o,min:2e3,max:2e4,onChange:e=>a("tone",e),label:"Tone",color:"#ef4444",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#f87171",formatValue:e=>`${Math.round(e)}%`})})})]})},SidechainCompressor:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"threshold",-24),o=ae(e,"ratio",4),i=ae(e,"attack",.003),l=ae(e,"release",.25),c=ae(e,"knee",6),d=ae(e,"sidechainGain",100);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#10b981",title:"Compressor"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-60,max:0,onChange:e=>a("threshold",e),label:"Threshold",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`}),r.jsx(n,{value:o,min:1,max:20,onChange:e=>a("ratio",e),label:"Ratio",color:"#10b981",formatValue:e=>`${e.toFixed(1)}:1`}),r.jsx(n,{value:c,min:0,max:40,onChange:e=>a("knee",e),label:"Knee",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`})]})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#34d399",title:"Envelope & Sidechain"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:i,min:.001,max:.5,onChange:e=>a("attack",e),label:"Attack",color:"#34d399",formatValue:e=>e>=.1?`${(1e3*e).toFixed(0)}ms`:`${(1e3*e).toFixed(1)}ms`}),r.jsx(n,{value:l,min:.01,max:1,onChange:e=>a("release",e),label:"Release",color:"#34d399",formatValue:e=>`${(1e3*e).toFixed(0)}ms`}),r.jsx(n,{value:d,min:0,max:100,onChange:e=>a("sidechainGain",e),label:"SC Gain",color:"#34d399",formatValue:e=>`${Math.round(e)}%`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#6ee7b7",formatValue:e=>`${Math.round(e)}%`})})})]})},SpaceyDelayer:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"firstTap",250),o=ae(e,"tapSize",150),l=ae(e,"feedback",40),c=ae(e,"multiTap",1),d=ae(e,"tapeFilter",0),m=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#8b5cf6",title:"Spacey Delayer"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:m?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:s,min:10,max:2e3,onChange:e=>a("firstTap",e),label:"First Tap",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}ms`})}),r.jsx(n,{value:o,min:10,max:1e3,onChange:e=>a("tapSize",e),label:"Tap Size",color:"#a78bfa",formatValue:e=>`${Math.round(e)}ms`}),r.jsx(n,{value:l,min:0,max:95,onChange:e=>a("feedback",e),label:"Feedback",color:"#7c3aed",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),re(e,a)]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#a78bfa",title:"Options"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>a("multiTap",c?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(c?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Multi-Tap ",c?"ON":"OFF"]}),r.jsxs("button",{onClick:()=>a("tapeFilter",d?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(d?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Tape Filter ",d?"ON":"OFF"]})]})]})]})},RETapeEcho:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"mode",3),o=ae(e,"repeatRate",.5),l=ae(e,"intensity",.5),c=ae(e,"echoVolume",.8),d=ae(e,"wow",0),m=ae(e,"flutter",0),x=ae(e,"dirt",0),u=ae(e,"inputBleed",0),h=ae(e,"loopAmount",0),g=ae(e,"playheadFilter",1),b=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#dc2626",title:"RE Tape Echo"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:b?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:100*o,min:0,max:100,onChange:e=>a("repeatRate",e/100),label:"Rate",color:"#dc2626",formatValue:e=>`${Math.round(e)}%`})}),r.jsx(n,{value:100*l,min:0,max:100,onChange:e=>a("intensity",e/100),label:"Intensity",color:"#ef4444",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*c,min:0,max:100,onChange:e=>a("echoVolume",e/100),label:"Echo Vol",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),re(e,a)]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f97316",title:"Tape Character"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:100*d,min:0,max:100,onChange:e=>a("wow",e/100),label:"Wow",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*m,min:0,max:100,onChange:e=>a("flutter",e/100),label:"Flutter",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*x,min:0,max:100,onChange:e=>a("dirt",e/100),label:"Dirt",color:"#ea580c",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*h,min:0,max:100,onChange:e=>a("loopAmount",e/100),label:"Tape Loop",color:"#a16207",formatValue:e=>`${Math.round(e)}%`})]})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#b91c1c",title:"Mode & Options"}),r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Echo Mode"}),r.jsx("div",{className:"grid grid-cols-6 gap-1",children:["Head 1","Head 2","Both","H1+FB","H2+FB","Both+FB"].map((e,t)=>r.jsx("button",{onClick:()=>a("mode",t),className:"px-2 py-1.5 rounded text-xs font-medium transition-colors "+(s===t?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>a("playheadFilter",g?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(g?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Head EQ ",g?"ON":"OFF"]}),r.jsxs("button",{onClick:()=>a("inputBleed",u?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(u?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Bleed ",u?"ON":"OFF"]})]})]})]})},MoogFilter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"cutoff",1e3),o=ae(e,"resonance",10),i=ae(e,"drive",1),l=ae(e,"model",0),c=ae(e,"filterMode",1);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f59e0b",title:"Model"}),r.jsx("div",{className:"grid grid-cols-3 gap-1 mb-3",children:oe.map((e,t)=>r.jsx("button",{onClick:()=>a("model",t),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(Math.round(l)===t?"bg-amber-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))}),0===Math.round(l)&&r.jsxs(r.Fragment,{children:[r.jsx(ee,{color:"#f59e0b",title:"Filter Mode (Hyperion)"}),r.jsx("div",{className:"grid grid-cols-4 gap-1",children:ne.map((e,t)=>r.jsx("button",{onClick:()=>a("filterMode",t),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(Math.round(c)===t?"bg-amber-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))})]})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f59e0b",title:"Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:20,max:2e4,onChange:e=>a("cutoff",e),label:"Cutoff",color:"#f59e0b",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:0,max:100,onChange:e=>a("resonance",e),label:"Resonance",color:"#f59e0b",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:i,min:.1,max:4,onChange:e=>a("drive",e),label:"Drive",color:"#f59e0b",formatValue:e=>`${e.toFixed(1)}x`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})})})]})},MVerb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"damping",.5),o=ae(e,"density",.5),i=ae(e,"bandwidth",.5),l=ae(e,"decay",.7),c=ae(e,"predelay",0),d=ae(e,"size",.8),m=ae(e,"gain",1),x=ae(e,"mix",.4),u=ae(e,"earlyMix",.5);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#7c3aed",title:"Reverb"}),r.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("decay",e),label:"Decay",color:"#7c3aed",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("size",e),label:"Size",color:"#7c3aed",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("damping",e),label:"Damp",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("density",e),label:"Density",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#a78bfa",title:"Character"}),r.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[r.jsx(n,{value:i,min:0,max:1,onChange:e=>a("bandwidth",e),label:"Bandwidth",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("predelay",e),label:"Pre-Delay",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:u,min:0,max:1,onChange:e=>a("earlyMix",e),label:"Early Mix",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:m,min:0,max:1,onChange:e=>a("gain",e),label:"Gain",color:"#c4b5fd",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:x,min:0,max:1,onChange:e=>a("mix",e),label:"Int. Mix",color:"#c4b5fd",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Wet",color:"#ddd6fe",formatValue:e=>`${Math.round(e)}%`})]})})]})},Leslie:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"speed",0),o=ae(e,"hornRate",6.8),i=ae(e,"drumRate",5.9),l=ae(e,"hornDepth",.7),c=ae(e,"drumDepth",.5),d=ae(e,"doppler",.5),m=ae(e,"width",.8),x=ae(e,"acceleration",.5),u=s<.25?0:s>.75?2:1;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#f97316",title:"Speed"}),r.jsx("div",{className:"grid grid-cols-3 gap-1 mb-3",children:ie.map((e,t)=>r.jsx("button",{onClick:()=>a("speed",0===t?0:1===t?.5:1),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(u===t?"bg-orange-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))}),r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:x,min:0,max:1,onChange:e=>a("acceleration",e),label:"Accel",color:"#f97316",formatValue:e=>`${Math.round(100*e)}%`})})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#fb923c",title:"Rotors"}),r.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[r.jsx(n,{value:o,min:.1,max:10,onChange:e=>a("hornRate",e),label:"Horn Hz",color:"#fb923c",formatValue:e=>`${e.toFixed(1)}`}),r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("hornDepth",e),label:"Horn Dep",color:"#fb923c",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:i,min:.1,max:8,onChange:e=>a("drumRate",e),label:"Drum Hz",color:"#fdba74",formatValue:e=>`${e.toFixed(1)}`}),r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("drumDepth",e),label:"Drum Dep",color:"#fdba74",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("doppler",e),label:"Doppler",color:"#fed7aa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:m,min:0,max:1,onChange:e=>a("width",e),label:"Width",color:"#fed7aa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Wet",color:"#fef3c7",formatValue:e=>`${Math.round(e)}%`})]})})]})},SpringReverb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ae(e,"decay",.6),o=ae(e,"damping",.4),i=ae(e,"tension",.5),l=ae(e,"mix",.35),c=ae(e,"drip",.5),d=ae(e,"diffusion",.7);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#059669",title:"Spring Tank"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("decay",e),label:"Decay",color:"#059669",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("damping",e),label:"Damp",color:"#059669",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:i,min:0,max:1,onChange:e=>a("tension",e),label:"Tension",color:"#10b981",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(ee,{color:"#34d399",title:"Character"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("drip",e),label:"Drip",color:"#34d399",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("diffusion",e),label:"Diffusion",color:"#34d399",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("mix",e),label:"Int. Mix",color:"#6ee7b7",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Wet",color:"#a7f3d0",formatValue:e=>`${Math.round(e)}%`})]})})]})}};function ce(e){return le[e]||se}const de=({effect:e,onUpdateParameter:a,onUpdateWet:t,onClose:s})=>{const o=ce(e.type),n={Distortion:r.jsx(W,{size:20,className:"text-white"}),Reverb:r.jsx(E,{size:20,className:"text-white"}),JCReverb:r.jsx(E,{size:20,className:"text-white"}),Delay:r.jsx(F,{size:20,className:"text-white"}),FeedbackDelay:r.jsx(F,{size:20,className:"text-white"}),PingPongDelay:r.jsx(F,{size:20,className:"text-white"}),Chorus:r.jsx(T,{size:20,className:"text-white"}),Phaser:r.jsx(T,{size:20,className:"text-white"}),Tremolo:r.jsx(A,{size:20,className:"text-white"}),Vibrato:r.jsx(A,{size:20,className:"text-white"}),Compressor:r.jsx(U,{size:20,className:"text-white"}),EQ3:r.jsx(S,{size:20,className:"text-white"}),Filter:r.jsx(S,{size:20,className:"text-white"}),StereoWidener:r.jsx(B,{size:20,className:"text-white"}),SpaceyDelayer:r.jsx(F,{size:20,className:"text-white"}),SpaceEcho:r.jsx(E,{size:20,className:"text-white"}),BiPhase:r.jsx(T,{size:20,className:"text-white"}),DubFilter:r.jsx(S,{size:20,className:"text-white"}),TapeSaturation:r.jsx(W,{size:20,className:"text-white"}),SidechainCompressor:r.jsx(U,{size:20,className:"text-white"}),RETapeEcho:r.jsx(R,{size:20,className:"text-white"}),MoogFilter:r.jsx(S,{size:20,className:"text-white"}),MVerb:r.jsx(E,{size:20,className:"text-white"}),Leslie:r.jsx(T,{size:20,className:"text-white"}),SpringReverb:r.jsx(E,{size:20,className:"text-white"})}[e.type]||r.jsx(z,{size:20,className:"text-white"}),i={Distortion:"from-red-600 to-orange-600",Reverb:"from-indigo-500 to-purple-600",JCReverb:"from-indigo-500 to-purple-600",Delay:"from-blue-500 to-cyan-600",FeedbackDelay:"from-blue-500 to-cyan-600",PingPongDelay:"from-blue-500 to-cyan-600",Chorus:"from-pink-500 to-rose-600",Phaser:"from-purple-500 to-violet-600",Tremolo:"from-orange-500 to-amber-600",Vibrato:"from-teal-500 to-emerald-600",Compressor:"from-green-500 to-emerald-600",EQ3:"from-blue-500 to-indigo-600",Filter:"from-orange-500 to-red-600",StereoWidener:"from-pink-500 to-fuchsia-600",SpaceyDelayer:"from-purple-500 to-violet-600",SpaceEcho:"from-indigo-500 to-violet-600",BiPhase:"from-purple-500 to-violet-600",DubFilter:"from-green-500 to-emerald-600",TapeSaturation:"from-red-500 to-rose-600",SidechainCompressor:"from-emerald-500 to-teal-600",RETapeEcho:"from-red-600 to-orange-600",MoogFilter:"from-amber-500 to-yellow-600",MVerb:"from-violet-600 to-purple-700",Leslie:"from-orange-500 to-amber-600",SpringReverb:"from-emerald-500 to-green-700"}[e.type]||"from-gray-500 to-gray-600";return r.jsxs("div",{className:"synth-editor-container bg-gradient-to-b from-[#1e1e1e] to-[#151515] rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"synth-editor-header px-4 py-3 bg-[#1a1a1a] flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${i}`,children:n}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-white",children:e.type}),r.jsxs("p",{className:"text-xs text-gray-400",children:[e.enabled?"Active":"Bypassed"," | Mix: ",e.wet,"%"]})]})]}),s&&r.jsx("button",{onClick:s,className:"p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:r.jsx($,{size:16})})]}),r.jsx("div",{className:"p-4",children:r.jsx(o,{effect:e,onUpdateParameter:a,onUpdateWet:t})})]})},me=({effect:e,onUpdateParameter:a,onUpdateWet:t,onClose:s})=>{m.useMemo(()=>"GenericEffectEditor"!==ce(e.type).name,[e.type]);const o=m.useMemo(()=>{if("neural"!==e.category||void 0===e.neuralModelIndex)return null;return new Y(e.neuralModelIndex).getAvailableParameters().map(e=>({name:e.name,key:e.key,min:0,max:100,step:1,unit:e.unit||"%",defaultValue:e.default,implemented:e.implemented}))},[e.category,e.neuralModelIndex]);return o?r.jsx(ue,{effect:e,parameters:o,onUpdateParameter:a,onUpdateWet:t,onClose:s}):r.jsx(de,{effect:e,onUpdateParameter:a,onUpdateWet:t,onClose:s})};function xe({color:e,title:a}){return r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-1 h-4 rounded-full",style:{backgroundColor:e}}),r.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:a})]})}const ue=({effect:e,parameters:a,onUpdateParameter:t,onUpdateWet:s,onClose:o})=>{const i=a=>{const r=e.parameters[a.key]??a.defaultValue;return"number"==typeof r?r:a.defaultValue},l=a.filter(e=>!1!==e.implemented),c=a.filter(e=>!1===e.implemented);return r.jsxs("div",{className:"synth-editor-container bg-gradient-to-b from-[#1e1e1e] to-[#151515] rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"synth-editor-header px-4 py-3 bg-[#1a1a1a] flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600",children:r.jsx($,{size:20,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-white",children:e.type}),r.jsxs("p",{className:"text-xs text-gray-400",children:["Neural Effect | ",e.enabled?"Active":"Bypassed"]})]})]}),o&&r.jsx("button",{onClick:o,className:"p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:r.jsx(M,{size:16})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[l.length>0&&r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(xe,{color:"#a855f7",title:"Parameters"}),r.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:l.map(e=>r.jsx(n,{value:i(e),min:e.min,max:e.max,onChange:a=>t(e.key,a),label:e.name,size:"sm",color:"#a855f7",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),c.length>0&&r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800 opacity-50",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(H,{size:14,className:"text-yellow-500"}),r.jsx("h3",{className:"text-sm font-bold text-yellow-500 uppercase tracking-wide",children:"Coming Soon"})]}),r.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:c.map(e=>r.jsx(n,{value:i(e),min:e.min,max:e.max,onChange:()=>{},label:e.name,size:"sm",color:"#6b7280",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),r.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[r.jsx(xe,{color:"#ec4899",title:"Output"}),r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(e)}%`})})]}),r.jsx("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-800",children:r.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"Neural effects use machine learning models for authentic amp/pedal emulation. Changes are applied in real-time."})})]})]})},he=[{category:"tonejs",type:"Compressor",label:"Compressor",group:"Dynamics",description:"Dynamic range compression with threshold, ratio, attack, and release"},{category:"tonejs",type:"EQ3",label:"3-Band EQ",group:"Dynamics",description:"Three-band equalizer with low, mid, and high frequency control"},{category:"tonejs",type:"Distortion",label:"Distortion",group:"Distortion",description:"Waveshaping distortion with drive control"},{category:"tonejs",type:"BitCrusher",label:"Bit Crusher",group:"Distortion",description:"Digital bit reduction for lo-fi effects"},{category:"tonejs",type:"Chebyshev",label:"Chebyshev",group:"Distortion",description:"Harmonic waveshaper distortion"},{category:"tonejs",type:"Reverb",label:"Reverb",group:"Reverb & Delay",description:"Convolution reverb with decay and pre-delay"},{category:"tonejs",type:"JCReverb",label:"JC Reverb",group:"Reverb & Delay",description:"Feedback comb filter reverb"},{category:"tonejs",type:"Delay",label:"Delay",group:"Reverb & Delay",description:"Simple delay with time and feedback"},{category:"tonejs",type:"FeedbackDelay",label:"Feedback Delay",group:"Reverb & Delay",description:"Delay with enhanced feedback control"},{category:"tonejs",type:"PingPongDelay",label:"Ping Pong Delay",group:"Reverb & Delay",description:"Stereo delay that bounces between left and right"},{category:"tonejs",type:"SpaceEcho",label:"Space Echo",group:"Reverb & Delay",description:"Roland RE-201 emulation with 3 heads and spring reverb"},{category:"tonejs",type:"SpaceyDelayer",label:"Spacey Delayer",group:"Reverb & Delay",description:"Multitap tape delay with configurable tap spacing (WASM)"},{category:"tonejs",type:"RETapeEcho",label:"RE Tape Echo",group:"Reverb & Delay",description:"Roland RE-150/201 tape echo with wow, flutter, and tape saturation (WASM)"},{category:"tonejs",type:"BiPhase",label:"Bi-Phase",group:"Modulation",description:"Dual-stage phaser with series/parallel routing"},{category:"tonejs",type:"Chorus",label:"Chorus",group:"Modulation",description:"Modulated delay for thickening sounds"},{category:"tonejs",type:"Phaser",label:"Phaser",group:"Modulation",description:"Sweeping notch filter effect"},{category:"tonejs",type:"Tremolo",label:"Tremolo",group:"Modulation",description:"Amplitude modulation for rhythmic pulsing"},{category:"tonejs",type:"Vibrato",label:"Vibrato",group:"Modulation",description:"Pitch modulation for warbling effects"},{category:"tonejs",type:"AutoPanner",label:"Auto Panner",group:"Modulation",description:"Automatic stereo panning modulation"},{category:"tonejs",type:"Filter",label:"Filter",group:"Filter",description:"Resonant filter with multiple types"},{category:"tonejs",type:"DubFilter",label:"Dub Filter",group:"Filter",description:"King Tubby-style resonant high-pass filter for dramatic sweeps"},{category:"tonejs",type:"AutoFilter",label:"Auto Filter",group:"Filter",description:"LFO-modulated filter for rhythmic sweeps"},{category:"tonejs",type:"AutoWah",label:"Auto Wah",group:"Filter",description:"Envelope-following wah effect"},{category:"wasm",type:"MoogFilter",label:"Moog Filter",group:"Filter",description:"6 analog-modeled Moog ladder filters (Hyperion, Krajeski, Stilson, Microtracker, Improved, Oberheim) via WASM"},{category:"wasm",type:"MVerb",label:"MVerb Plate",group:"Reverb & Delay",description:"MVerb plate reverb — lush algorithmic reverb with damping, density, and early/late reflections (WASM, GPL v3)"},{category:"wasm",type:"Leslie",label:"Leslie Speaker",group:"Modulation",description:"Rotary speaker cabinet — crossover, dual-rotor AM/doppler, speed ramping between chorale and tremolo (WASM)"},{category:"wasm",type:"SpringReverb",label:"Spring Reverb",group:"Reverb & Delay",description:"Classic dub spring tank — allpass diffusion, comb bank, metallic drip transients, tension control (WASM)"},{category:"tonejs",type:"PitchShift",label:"Pitch Shift",group:"Pitch",description:"Transpose audio up or down by semitones"},{category:"tonejs",type:"FrequencyShifter",label:"Frequency Shifter",group:"Pitch",description:"Ring modulation-style frequency shifting"},{category:"tonejs",type:"StereoWidener",label:"Stereo Widener",group:"Spatial",description:"Enhance stereo image width"},...Z.map(e=>({category:"neural",neuralModelIndex:e.index,label:e.name,group:"overdrive"===e.category?"Neural Overdrive":"distortion"===e.category?"Neural Distortion":"amplifier"===e.category?"Neural Amp":"Neural Effect",description:`${e.fullName} - ${e.description}`}))];function ge(){const e={};return he.forEach(a=>{e[a.group]||(e[a.group]=[]),e[a.group].push(a)}),e}const be="master-fx-user-presets",pe=({isOpen:t,onClose:s})=>{const[o,n]=m.useState(!1),[i,l]=m.useState(!1),[c,d]=m.useState(""),[N,w]=m.useState(null),{masterEffects:D,addMasterEffectConfig:S,removeMasterEffect:P,updateMasterEffect:F,reorderMasterEffects:z,setMasterEffects:E}=e(),T=u(h(j),h(v,{coordinateGetter:y})),R=m.useCallback(()=>{try{const e=localStorage.getItem(be);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),U=m.useCallback(()=>{if(!c.trim())return;const e=R();e.push({name:c.trim(),effects:D.map(e=>({...e}))}),localStorage.setItem(be,JSON.stringify(e)),d(""),l(!1)},[c,D,R]),W=m.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));E(a),n(!1)},[E]),B=m.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));E(a),n(!1)},[E]),A=m.useCallback(e=>{const a=R().filter(a=>a.name!==e);localStorage.setItem(be,JSON.stringify(a))},[R]),O=D.filter(e=>"neural"===e.category).length,I=m.useCallback(e=>{if("neural"===e.category&&O>=3){if(!confirm("⚠️ Performance Warning\n\nYou are adding a 4th neural effect to the master chain. Multiple neural effects can cause high CPU usage and audio glitches.\n\nConsider using Tone.js effects or reducing the neural effect count.\n\nContinue anyway?"))return}const a={id:`master-fx-${Date.now()}`,category:e.category,type:e.type||"Distortion",enabled:!0,wet:100,parameters:{},neuralModelIndex:e.neuralModelIndex,neuralModelName:"neural"===e.category?e.label:void 0};if("neural"===e.category&&void 0!==e.neuralModelIndex){const r=Z[e.neuralModelIndex];r?.parameters&&Object.entries(r.parameters).forEach(([e,r])=>{r&&(a.parameters[e]=r.default)})}S(a)},[O,S]),L=R(),Q=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),J=ge();return t?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:e=>{e.target===e.currentTarget&&s()},children:r.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1200px] flex flex-col overflow-hidden animate-scale-in",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(k,{size:20,className:"text-accent-primary"}),r.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Master Effects"}),r.jsxs("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:[D.length," FX"]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>n(!o),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2",children:["Presets ",r.jsx(C,{size:14})]}),o&&r.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:[L.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:"User Presets"}),L.map(e=>r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-dark-bgHover cursor-pointer group",children:[r.jsx("span",{onClick:()=>B(e),className:"text-sm text-text-primary flex-1",children:e.name}),r.jsx("button",{onClick:a=>{a.stopPropagation(),A(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:r.jsx(M,{size:14})})]},e.name)),r.jsx("div",{className:"border-t border-dark-border"})]}),Object.entries(Q).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>r.jsxs("div",{onClick:()=>W(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[r.jsx("div",{className:"text-sm text-text-primary",children:e.name}),r.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),r.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded-lg text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:r.jsx(V,{size:18})})]}),O>=3&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[r.jsx(H,{size:14,className:"text-yellow-500"}),r.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[O," neural effects - High CPU usage"]})]}),r.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:r.jsx(M,{size:24})})]}),i&&r.jsx("div",{className:"px-6 py-4 bg-dark-bgTertiary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"text",placeholder:"Preset name...",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&U(),"Escape"===e.key&&l(!1)},className:"flex-1 px-4 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                         placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),r.jsx("button",{onClick:U,className:"px-4 py-2 text-sm font-medium rounded-lg bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),r.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),r.jsx("div",{className:"px-6 py-3 bg-dark-bgSecondary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-3 text-sm font-mono text-text-muted overflow-x-auto",children:[r.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),r.jsx("span",{children:"→"}),D.length>0?D.map((e,a)=>r.jsxs(x.Fragment,{children:[r.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<D.length-1&&r.jsx("span",{children:"→"})]},e.id)):r.jsx("span",{className:"italic text-text-muted",children:"direct"}),r.jsx("span",{children:"→"}),r.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[r.jsx($,{size:14})," OUTPUT"]})]})}),r.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[r.jsxs("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary mb-3",children:"Effect Chain"}),r.jsx("p",{className:"text-xs text-text-muted",children:"Drag effects to reorder. Click to edit parameters."})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:0===D.length?r.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No master effects. Add effects from the panel on the right."}):r.jsx(g,{sensors:T,collisionDetection:b,onDragEnd:e=>{const{active:a,over:r}=e;if(r&&a.id!==r.id){const e=D.findIndex(e=>e.id===a.id),t=D.findIndex(e=>e.id===r.id);-1!==e&&-1!==t&&z(e,t)}},children:r.jsx(p,{items:D.map(e=>e.id),strategy:f,children:D.map(e=>r.jsx(fe,{effect:e,isSelected:N?.id===e.id,onSelect:()=>w(e),onToggle:()=>(e=>{const a=D.find(a=>a.id===e);a&&F(e,{enabled:!a.enabled})})(e.id),onRemove:()=>P(e.id),onWetChange:a=>((e,a)=>{F(e,{wet:a})})(e.id,a)},e.id))})})})]}),r.jsx("div",{className:"w-1/2 flex flex-col",children:N?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-text-primary",children:[N.type," Parameters"]}),r.jsx("p",{className:"text-xs text-text-muted",children:"Adjust effect settings"})]}),r.jsx("button",{onClick:()=>w(null),className:"text-xs text-text-muted hover:text-accent-primary transition-colors",children:"Back to Add"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsx(me,{effect:N,onUpdateParameter:(e,a)=>{const r={parameters:{...N.parameters,[e]:a}};F(N.id,r),w({...N,...r})},onUpdateWet:e=>{F(N.id,{wet:e}),w({...N,wet:e})}})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Add Effect"}),r.jsx("p",{className:"text-xs text-text-muted",children:"Select an effect to add to the chain"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsx("div",{className:"space-y-4",children:Object.entries(J).map(([e,a])=>r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-2",children:e}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>r.jsxs("button",{onClick:()=>I(e),className:"px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                       hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                       transition-colors text-left flex items-center justify-between gap-2",children:[r.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&r.jsx(q,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))})})]})})]})]})}):null};function fe({effect:e,isSelected:a,onSelect:t,onToggle:s,onRemove:o,onWetChange:n}){const{attributes:i,listeners:l,setNodeRef:c,transform:d,transition:m,isDragging:x}=N({id:e.id}),u={transform:w.Transform.toString(d),transition:m,opacity:x?.5:1};return r.jsx("div",{ref:c,style:u,className:`\n        bg-dark-bgSecondary border rounded-lg p-4 mb-3 cursor-pointer transition-all\n        ${x?"shadow-lg ring-2 ring-accent-primary":""}\n        ${e.enabled?"":"opacity-60"}\n        ${a?"border-accent-primary bg-accent-primary/5":"border-dark-border hover:border-dark-borderLight"}\n      `,onClick:t,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{...i,...l,className:"text-text-muted hover:text-accent-primary cursor-grab active:cursor-grabbing p-1",title:"Drag to reorder",onClick:e=>e.stopPropagation(),children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[r.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),r.jsx("circle",{cx:"4",cy:"8",r:"1.5"}),r.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),r.jsx("circle",{cx:"10",cy:"4",r:"1.5"}),r.jsx("circle",{cx:"10",cy:"8",r:"1.5"}),r.jsx("circle",{cx:"10",cy:"12",r:"1.5"})]})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-sm text-text-primary",children:e.neuralModelName||e.type}),"neural"===e.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[r.jsx(q,{size:10}),"Neural"]})]}),r.jsxs("div",{className:"text-xs text-text-muted",children:[e.enabled?"Active":"Bypassed"," • Wet: ",e.wet,"%"]})]}),r.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>n(Number(e.target.value)),className:"w-20 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                       [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                       [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary"})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),t()},className:"p-2 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:r.jsx(S,{size:16})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),s()},className:`\n              p-2 rounded transition-colors\n              ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n            `,title:e.enabled?"Disable":"Enable",children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),r.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),o()},className:"p-2 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:r.jsx(M,{size:16})})]})]})})}const ye=({isOpen:e,onClose:t})=>{const[s,o]=m.useState(null),[n,i]=m.useState(!1),{instruments:l,currentInstrumentId:x,addEffectConfig:u,removeEffect:h,updateEffect:g,updateInstrument:b}=c(),p=l.find(e=>e.id===x),f=m.useCallback(e=>{if(null===x)return;const a=e.effects.map((e,a)=>({...e,id:`instrument-fx-${Date.now()}-${a}`}));b(x,{effects:a}),i(!1),d.success(`Applied ${e.name} to ${p?.name}`)},[x,b,p?.name]);if(!p)return null;const y=p.effects||[],v=y.filter(e=>"neural"===e.category).length,j=ge();return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:e=>{e.target===e.currentTarget&&t()},children:r.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1200px] flex flex-col overflow-hidden animate-scale-in",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(k,{size:20,className:"text-accent-primary"}),r.jsxs("h2",{className:"text-lg font-bold text-text-primary",children:[p.name||`Instrument ${p.id}`," Effects"]}),r.jsx("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:p.synthType}),r.jsxs("span",{className:"text-[10px] text-accent-info px-2 py-1 bg-accent-info/10 rounded",children:[he.length," effects available"]}),r.jsxs("div",{className:"relative ml-2",children:[r.jsxs("button",{onClick:()=>i(!n),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2 border border-dark-border",children:["Presets ",r.jsx(C,{size:14})]}),n&&r.jsx("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:Object.entries(a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{})).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>r.jsxs("div",{onClick:()=>f(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[r.jsx("div",{className:"text-sm text-text-primary",children:e.name}),r.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))})]})]}),v>=3&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[r.jsx(H,{size:14,className:"text-yellow-500"}),r.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[v," neural effects - High CPU usage"]})]}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:r.jsx(M,{size:24})})]}),r.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[r.jsxs("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary mb-3",children:"Effect Chain"}),r.jsxs("p",{className:"text-xs text-text-muted",children:[y.length," effect",1!==y.length?"s":""," active",v>0&&` • ${v} neural`]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:0===y.length?r.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No effects. Add from the panel on the right →"}):y.map(e=>r.jsx("div",{className:`\n                      bg-dark-bgSecondary border rounded-lg p-4 mb-3 cursor-pointer transition-all\n                      ${e.enabled?"":"opacity-60"}\n                      ${s?.id===e.id?"border-accent-primary bg-accent-primary/5":"border-dark-border hover:border-dark-borderLight"}\n                    `,onClick:()=>o(e),children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-sm text-text-primary",children:e.neuralModelName||e.type}),"neural"===e.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[r.jsx(q,{size:10}),"Neural"]})]}),r.jsxs("div",{className:"text-xs text-text-muted",children:[e.enabled?"Active":"Bypassed"," • Wet: ",e.wet,"%"]})]}),r.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:a=>{return r=e.id,t=Number(a.target.value),void(null!==x&&g(x,r,{wet:t}));var r,t},className:"w-20 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary"})}),r.jsx("button",{onClick:a=>{a.stopPropagation(),o(e)},className:"p-2 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:r.jsx(S,{size:16})}),r.jsx("button",{onClick:a=>{a.stopPropagation(),(e=>{const a=y.find(a=>a.id===e);a&&null!==x&&g(x,e,{enabled:!a.enabled})})(e.id)},className:`\n                            p-2 rounded transition-colors\n                            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n                          `,title:e.enabled?"Disable":"Enable",children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),r.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),r.jsx("button",{onClick:a=>{var r;a.stopPropagation(),r=e.id,null!==x&&h(x,r)},className:"p-2 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:r.jsx(M,{size:16})})]})]})},e.id))})]}),r.jsx("div",{className:"w-1/2 flex flex-col",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-text-primary flex items-center gap-2",children:[s.neuralModelName||s.type," Parameters","neural"===s.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[r.jsx(q,{size:10}),"Neural"]})]}),r.jsx("p",{className:"text-xs text-text-muted",children:"Adjust effect settings"})]}),r.jsx("button",{onClick:()=>o(null),className:"text-xs text-text-muted hover:text-accent-primary transition-colors",children:"Back to Add"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsx(me,{effect:s,onUpdateParameter:(e,a)=>{const r={parameters:{...s.parameters,[e]:a}};null!==x&&g(x,s.id,r),o({...s,...r})},onUpdateWet:e=>{null!==x&&g(x,s.id,{wet:e}),o({...s,wet:e})}})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Add Effect"}),r.jsxs("p",{className:"text-xs text-text-muted",children:["All ",he.length," effects available (23 Tone.js + 37 Neural)"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsx("div",{className:"space-y-4",children:Object.entries(j).map(([e,a])=>r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-2",children:e}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>r.jsxs("button",{onClick:()=>(e=>{if(null===x)return;if("neural"===e.category&&v>=3&&!confirm("⚠️ Performance Warning\n\nYou are adding a 4th neural effect. Multiple neural effects can cause high CPU usage and audio glitches.\n\nConsider using Tone.js effects or reducing the neural effect count.\n\nContinue anyway?"))return;const a={id:`effect-${Date.now()}`,category:e.category,type:e.type||"Distortion",enabled:!0,wet:100,parameters:{},neuralModelIndex:e.neuralModelIndex,neuralModelName:"neural"===e.category?e.label:void 0};if("neural"===e.category&&void 0!==e.neuralModelIndex){const r=Z[e.neuralModelIndex];r?.parameters&&Object.entries(r.parameters).forEach(([e,r])=>{r&&(a.parameters[e]=r.default)})}u(x,a)})(e),className:"px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                       hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                       transition-colors text-left flex items-center justify-between gap-2",children:[r.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&r.jsx(q,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))})})]})})]})]})}):null};export{me as EffectParameterEditor,ye as InstrumentEffectsModal,pe as MasterEffectsModal,J as MasterEffectsPanel};
