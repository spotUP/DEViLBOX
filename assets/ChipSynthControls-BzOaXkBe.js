const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-zx6LJBPK.js","assets/vendor-react-DkDaD07v.js","assets/vendor-utils-XMmR-oGw.js","assets/vendor-tone-CADp_hfL.js","assets/vendor-ui-uomqNFY-.js","assets/index-Cnoi0D0R.css"])))=>i.map(i=>d[i]);
import{aG as e,aK as o,aL as n,j as t,aI as s,aH as r,_ as i}from"./index-zx6LJBPK.js";import{r as l}from"./vendor-utils-XMmR-oGw.js";import{V as m}from"./VowelEditor-DFGlM0K-.js";import"./vendor-react-DkDaD07v.js";import"./vendor-tone-CADp_hfL.js";import"./vendor-ui-uomqNFY-.js";const a=({synthType:a,parameters:c,onParamChange:d,onTextChange:p,onLoadPreset:u,onRomUpload:f,onSpeak:h})=>{const b="cyan-lineart"===e(e=>e.currentThemeId),x=l.useMemo(()=>o(a),[a]),[C,N]=l.useState(0),g=l.useRef(c);l.useEffect(()=>{g.current=c},[c]);const[y,v]=l.useState({}),E=l.useMemo(()=>{if(!x)return{};const e={};for(const o of x.parameters)e[o.group]||(e[o.group]=[]),e[o.group].push(o);return e},[x]),V=l.useCallback((e,o)=>{if("percent"===e.formatValue)return`${Math.round(100*o)}%`;if("int"===e.formatValue)return String(Math.round(o));if("hz"===e.formatValue)return`${Math.round(o)} Hz`;if("db"===e.formatValue)return`${o.toFixed(1)} dB`;if("seconds"===e.formatValue)return`${o.toFixed(3)}s`;if(e.options){const n=e.options.find(e=>e.value===Math.round(o));return n?n.label:String(Math.round(o))}return o.toFixed(2)},[]),D=l.useCallback(async(e,o)=>{const t=e.target.files?.[0];if(t&&f){if(t.name.toLowerCase().endsWith(".zip"))try{const e=new n,s=await e.loadAsync(t),r=[];s.forEach((e,o)=>{const n=e.toLowerCase().match(/\.(txt|md|pdf|url|inf)$/);o.dir||n||r.push({name:e,entry:o})}),r.sort((e,o)=>e.name.localeCompare(o.name,void 0,{numeric:!0,sensitivity:"base"}));for(let n=0;n<r.length;n++){const e=o+n,t=await r[n].entry.async("uint8array");f(e,t)}d("_romsLoaded",1)}catch(s){}else{const e=await t.arrayBuffer(),n=new Uint8Array(e);f(o,n),d("_romsLoaded",1)}e.target.value=""}},[f,d]);if(!x)return null;const S=b?"#00ffff":x.color,B=b?"#00ffff":x.color,L=b?"rgba(0, 20, 20, 0.4)":"rgba(0,0,0,0.3)",j=b?"#00ffff":"#e2e8f0",O=b?"#006060":"#94a3b8",U=b?"rgba(0, 255, 255, 0.2)":"rgba(255,255,255,0.08)",X=(e,o,n="")=>t.jsxDEV("div",{style:{background:L,border:`1px solid ${U}`,borderRadius:8,padding:"8px 12px",marginBottom:8},children:[t.jsxDEV("div",{style:{fontSize:10,fontWeight:600,color:S,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:8},children:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:330,columnNumber:7},void 0),t.jsxDEV("div",{style:{display:"flex",flexWrap:"wrap",gap:12,justifyContent:"flex-start",alignItems:"flex-end"},children:o.map(e=>((e,o="")=>{const n=o?`${o}${e.key}`:e.key,s=c[n]??e.default;if("toggle"===e.type)return t.jsxDEV("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[t.jsxDEV("button",{onClick:()=>d(n,s?0:1),style:{width:48,height:24,borderRadius:12,background:s?S:b?"#0a1a1a":"#334155",border:`1px solid ${s?S:U}`,cursor:"pointer",position:"relative",transition:"background 0.2s"},children:t.jsxDEV("div",{style:{width:18,height:18,borderRadius:9,background:b?"#030808":"#fff",position:"absolute",top:2,left:s?27:3,transition:"left 0.2s",boxShadow:s?`0 0 6px ${S}`:"none"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:144,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:134,columnNumber:11},void 0),t.jsxDEV("span",{style:{fontSize:10,color:O},children:e.label},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:153,columnNumber:11},void 0)]},n,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:133,columnNumber:9},void 0);if("text"===e.type){const o=String(c[n]??e.defaultText??""),s="speechText"===n&&h,r=y[n]??!1,l=()=>{if(s)if(r)v(e=>({...e,[n]:!1}));else try{i(async()=>{const{textToPhonemes:e}=await import("./index-zx6LJBPK.js").then(e=>e.e6);return{textToPhonemes:e}},__vite__mapDeps([0,1,2,3,4,5])).then(({textToPhonemes:e})=>{const t=e(o);t&&(p?.(n,t),v(e=>({...e,[n]:!0})))})}catch(e){}};return t.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:4,flex:"1 1 100%"},children:[t.jsxDEV("span",{style:{fontSize:10,color:O,textTransform:"uppercase",fontWeight:600},children:e.label},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:188,columnNumber:11},void 0),t.jsxDEV("div",{style:{display:"flex",gap:6},children:[t.jsxDEV("input",{type:"text",value:o,onChange:e=>p?.(n,e.target.value),onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&s&&h(o)},placeholder:e.placeholder||(r?"Phonemes: /HEH LOW/ ...":"Enter text to speak"),style:{background:b?"#041010":"#0d1117",color:b?"#00ffff":S,border:`1px solid ${r?"#ff6b00":U}`,borderRadius:6,padding:"8px 12px",fontSize:13,fontFamily:"Monaco, Menlo, monospace",outline:"none",flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:190,columnNumber:13},void 0),s&&t.jsxDEV(t.Fragment,{children:[t.jsxDEV("button",{onClick:l,style:{padding:"8px 16px",borderRadius:6,border:`1px solid ${r?"#ff6b00":S}44`,background:r?"#ff6b0020":`${S}18`,color:r?"#ff6b00":S,fontSize:11,fontWeight:700,cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.05em",whiteSpace:"nowrap",transition:"all 0.15s"},title:r?"Show normal text mode":"Convert to phonemes",children:r?"ðŸ”¤ Text":"ðŸ—£ Phonemes"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:215,columnNumber:17},void 0),t.jsxDEV("button",{onClick:()=>h(o),style:{padding:"8px 16px",borderRadius:6,border:`1px solid ${S}44`,background:`${S}18`,color:S,fontSize:11,fontWeight:700,cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.05em",whiteSpace:"nowrap",transition:"background 0.15s"},children:"â–¶ Speak"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:235,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:214,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:189,columnNumber:11},void 0)]},n,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:187,columnNumber:9},void 0)}if("vowelEditor"===e.type){const e=String(c.vowelSequence??""),o=e?e.split(",").filter(Boolean):[],s=Number(c.vowelLoopSingle??1);return t.jsxDEV("div",{style:{flex:"1 1 100%"},children:t.jsxDEV(m,{vowelSequence:o,loopSingle:s>=1,onChange:e=>p?.("vowelSequence",e.join(",")),onLoopToggle:e=>d("vowelLoopSingle",e?1:0),accentColor:S},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:267,columnNumber:11},void 0)},n,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:266,columnNumber:9},void 0)}return"select"===e.type&&e.options?t.jsxDEV("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[t.jsxDEV("select",{value:Math.round(Number(s)),onChange:e=>d(n,Number(e.target.value)),style:{background:b?"#041010":"#1e293b",color:j,border:`1px solid ${U}`,borderRadius:6,padding:"4px 8px",fontSize:11,cursor:"pointer",minWidth:80},children:e.options.map(e=>t.jsxDEV("option",{value:e.value,children:e.label},e.value,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:294,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:281,columnNumber:11},void 0),t.jsxDEV("span",{style:{fontSize:10,color:O},children:e.label},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:297,columnNumber:11},void 0)]},n,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:280,columnNumber:9},void 0):t.jsxDEV(r,{value:Number(s),min:e.min??0,max:e.max??1,step:e.step??.01,onChange:e=>d(n,e),label:e.label,color:B,size:"sm",defaultValue:e.default,logarithmic:e.logarithmic,bipolar:e.bipolar,formatValue:o=>V(e,o)},n,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:304,columnNumber:7},void 0)})(e,n))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:339,columnNumber:7},void 0)]},e,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:323,columnNumber:5},void 0),k=null!=x.operatorCount&&x.operatorCount>0&&x.operatorParams;return t.jsxDEV(s,{children:t.jsxDEV("div",{style:{padding:"8px 0"},children:[t.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[t.jsxDEV("span",{style:{fontSize:14,fontWeight:700,color:S},children:x.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:359,columnNumber:9},void 0),t.jsxDEV("span",{style:{fontSize:11,color:O},children:x.subtitle},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:362,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:358,columnNumber:7},void 0),x.romConfig&&f&&t.jsxDEV("div",{style:{background:L,border:"1px solid "+(c._romsLoaded?b?"rgba(0,255,128,0.3)":"rgba(34,197,94,0.3)":b?"rgba(255,100,100,0.3)":"rgba(239,68,68,0.3)"),borderRadius:8,padding:"8px 12px",marginBottom:8},children:[t.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[t.jsxDEV("div",{style:{fontSize:10,fontWeight:600,color:S,textTransform:"uppercase",letterSpacing:"0.05em"},children:"ROM Banks"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:377,columnNumber:13},void 0),t.jsxDEV("div",{style:{fontSize:9,fontWeight:600,padding:"2px 6px",borderRadius:4,background:c._romsLoaded?b?"rgba(0,255,128,0.15)":"rgba(34,197,94,0.15)":b?"rgba(255,100,100,0.15)":"rgba(239,68,68,0.15)",color:c._romsLoaded?b?"#00ff80":"#22c55e":b?"#ff6464":"#ef4444"},children:c._romsLoaded?"ROMS READY":"ROMS MISSING"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:385,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:376,columnNumber:11},void 0),t.jsxDEV("div",{style:{fontSize:9,color:O,marginBottom:8},children:["Expects: ",t.jsxDEV("span",{style:{fontFamily:"Monaco, Menlo, monospace",color:S},children:x.romConfig.requiredZip},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:400,columnNumber:22},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:399,columnNumber:11},void 0),t.jsxDEV("div",{className:"flex flex-wrap gap-2 items-center",children:[t.jsxDEV("label",{className:"w-full sm:w-auto",style:{fontSize:10,fontWeight:600,padding:"4px 10px",borderRadius:4,border:`1px solid ${S}33`,background:`${S}11`,color:S,cursor:"pointer",transition:"background 0.15s",textAlign:"center"},children:["UPLOAD ZIP",t.jsxDEV("input",{type:"file",accept:".zip",style:{display:"none"},onChange:e=>D(e,0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:415,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:403,columnNumber:13},void 0),Array.from({length:x.romConfig.bankCount},(e,o)=>t.jsxDEV("label",{style:{fontSize:9,padding:"3px 8px",borderRadius:4,border:`1px solid ${U}`,background:b?"#041010":"#1e293b",color:S,cursor:"pointer"},children:["BANK ",o,t.jsxDEV("input",{type:"file",style:{display:"none"},onChange:e=>D(e,o)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:433,columnNumber:17},void 0)]},o,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:423,columnNumber:15},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:402,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:369,columnNumber:9},void 0),x.presetCount>0&&t.jsxDEV("div",{style:{background:L,border:`1px solid ${U}`,borderRadius:8,padding:"8px 12px",marginBottom:8},children:[t.jsxDEV("div",{style:{fontSize:10,fontWeight:600,color:S,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:8},children:"Chip Presets"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:453,columnNumber:11},void 0),t.jsxDEV("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:Array.from({length:x.presetCount},(e,o)=>t.jsxDEV("button",{onClick:()=>u(o),style:{padding:"4px 10px",borderRadius:4,border:`1px solid ${c._program===o?S:U}`,background:c._program===o?`${S}22`:b?"#041010":"#1e293b",color:c._program===o?S:j,fontSize:11,cursor:"pointer",fontWeight:c._program===o?600:400,transition:"all 0.15s"},children:x.presetNames?.[o]??`Preset ${o+1}`},o,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:464,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:462,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:446,columnNumber:9},void 0),k&&t.jsxDEV("div",{style:{display:"flex",gap:2,marginBottom:8},children:[t.jsxDEV("button",{onClick:()=>N(0),style:{padding:"4px 12px",borderRadius:"6px 6px 0 0",border:`1px solid ${U}`,borderBottom:0===C?`2px solid ${S}`:`1px solid ${U}`,background:0===C?L:"transparent",color:0===C?S:O,fontSize:11,fontWeight:600,cursor:"pointer"},children:"Global"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:491,columnNumber:11},void 0),Array.from({length:x.operatorCount},(e,o)=>t.jsxDEV("button",{onClick:()=>N(o+1),style:{padding:"4px 12px",borderRadius:"6px 6px 0 0",border:`1px solid ${U}`,borderBottom:C===o+1?`2px solid ${S}`:`1px solid ${U}`,background:C===o+1?L:"transparent",color:C===o+1?S:O,fontSize:11,fontWeight:600,cursor:"pointer"},children:["Op ",o+1]},o+1,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:505,columnNumber:13},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:490,columnNumber:9},void 0),(!k||0===C)&&Object.entries(E).map(([e,o])=>X(e,o)),k&&C>0&&x.operatorParams&&(()=>{const e=x.operatorParams,o={};for(const n of e)o[n.group]||(o[n.group]=[]),o[n.group].push(n);return Object.entries(o).map(([e,o])=>X(e,o,`op${C}_`))})()]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:356,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/ChipSynthControls.tsx",lineNumber:355,columnNumber:5},void 0)};export{a as ChipSynthControls,a as default};
