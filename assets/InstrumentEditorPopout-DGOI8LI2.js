import{u as e,e as t,j as s}from"./index-zx6LJBPK.js";import{r as o}from"./vendor-utils-XMmR-oGw.js";import{U as n,E as r,T as i,S as m}from"./EffectChain-C3LgFJxX.js";import{M as u,C as d,c as l,S as c,d as a,e as p,K as N,f as x,g as b,h as E}from"./vendor-ui-uomqNFY-.js";import"./vendor-tone-CADp_hfL.js";import"./vendor-react-DkDaD07v.js";import"./useVisualizationAnimation-D37DdYyX.js";import"./sortable.esm-Nw3Rboz6.js";const v=()=>{const E=e(e=>e.instruments),v=e(e=>e.currentInstrumentId),D=e(e=>e.updateInstrument),V=e(e=>e.setCurrentInstrument),C=E.find(e=>e.id===v)||null;o.useEffect(()=>{},[]);const[h,j]=o.useState("sound"),[g,I]=o.useState(!0),[U,P]=o.useState(!1),y=[...E].sort((e,t)=>e.id-t.id),B=y.findIndex(e=>e.id===v),L=o.useCallback(()=>{B>0?V(y[B-1].id):y.length>0&&V(y[y.length-1].id)},[B,y,V]),O=o.useCallback(()=>{B<y.length-1?V(y[B+1].id):y.length>0&&V(y[0].id)},[B,y,V]),X=t(C?.synthType?C.synthType:"Sampler"),k=[{id:"sound",label:"Sound",icon:a},{id:"effects",label:"Effects",icon:p}];return C?s.jsxDEV("div",{className:"bg-dark-bg w-full h-screen flex flex-col overflow-hidden",children:[s.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-border bg-dark-bgSecondary shrink-0",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("button",{onClick:L,className:"p-1.5 rounded hover:bg-dark-bgTertiary text-text-muted hover:text-text-primary transition-colors",title:"Previous instrument",children:s.jsxDEV(d,{size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:92,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:87,columnNumber:11},void 0),s.jsxDEV("div",{className:`p-2 rounded-lg bg-dark-bg ${X?.color||"text-text-primary"}`,children:s.jsxDEV(f,{iconName:X.icon,size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:96,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:95,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("input",{type:"text",value:C.name,onChange:e=>D(C.id,{name:e.target.value}),className:"bg-transparent text-text-primary font-semibold text-lg focus:outline-none focus:ring-1 focus:ring-accent-primary rounded px-1 -ml-1"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:100,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-xs text-text-muted font-mono",children:["(",B+1,"/",y.length,")"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:106,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:99,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-text-muted",children:[X?.name||C.synthType," ",s.jsxDEV("span",{className:"opacity-50",children:"|"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:112,columnNumber:15},void 0)," ID:"," ",C.id.toString(16).toUpperCase().padStart(2,"0")]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:110,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:98,columnNumber:11},void 0),s.jsxDEV("button",{onClick:O,className:"p-1.5 rounded hover:bg-dark-bgTertiary text-text-muted hover:text-text-primary transition-colors",title:"Next instrument",children:s.jsxDEV(l,{size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:122,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:117,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:86,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:s.jsxDEV("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded bg-dark-bg hover:bg-dark-bgTertiary text-text-primary transition-colors text-sm border border-dark-border",title:"Save as preset",children:[s.jsxDEV(c,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:132,columnNumber:13},void 0),"Save"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:127,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:126,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:85,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex items-center gap-1 px-4 py-2 border-b border-dark-border bg-dark-bg shrink-0",children:k.map(e=>{const t=e.icon,o=h===e.id;return s.jsxDEV("button",{onClick:()=>j(e.id),className:`\n                flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border\n                ${o?"bg-dark-bgSecondary text-accent-primary border-accent-primary":"text-text-muted hover:text-text-primary hover:bg-dark-bgSecondary border-transparent"}\n              `,children:[s.jsxDEV(t,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:155,columnNumber:15},void 0),e.label]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:144,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:139,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex-1 overflow-y-auto scrollbar-modern",children:["sound"===h&&s.jsxDEV(n,{instrument:C,onChange:e=>{D(C.id,e)}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:165,columnNumber:11},void 0),"effects"===h&&s.jsxDEV("div",{className:"p-4",children:s.jsxDEV(r,{instrumentId:C.id,effects:C.effects||[]},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:176,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:175,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:163,columnNumber:7},void 0),s.jsxDEV("div",{className:"border-t border-dark-border shrink-0",children:[s.jsxDEV("button",{onClick:()=>I(!g),className:"w-full px-4 py-2 flex items-center justify-between text-sm text-text-muted hover:text-text-primary hover:bg-dark-bgHover transition-colors",children:[s.jsxDEV("span",{className:"flex items-center gap-2",children:[s.jsxDEV(N,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:191,columnNumber:13},void 0),"Test Keyboard"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:190,columnNumber:11},void 0),g?s.jsxDEV(x,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:194,columnNumber:27},void 0):s.jsxDEV(b,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:194,columnNumber:55},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:186,columnNumber:9},void 0),g&&s.jsxDEV("div",{className:"p-4 bg-dark-bgSecondary",children:s.jsxDEV(i,{instrument:C},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:199,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:198,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:185,columnNumber:7},void 0),U&&s.jsxDEV(m,{instrument:C,onClose:()=>P(!1)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:206,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:83,columnNumber:5},void 0):s.jsxDEV("div",{className:"flex items-center justify-center h-screen",style:{background:"#0b0909",color:"#f2f0f0"},children:s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV(u,{size:48,className:"mx-auto mb-4 opacity-50 text-gray-500"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:74,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-gray-400 mb-2",children:"No instrument selected"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:75,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-gray-500 text-sm",children:"Select an instrument in the main window"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:76,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:69,columnNumber:7},void 0)},f=({iconName:e,size:t})=>{const o=E[e]||u;return s.jsxDEV(o,{size:t},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/InstrumentEditorPopout.tsx",lineNumber:218,columnNumber:10},void 0)};export{v as InstrumentEditorPopout,v as default};
