import{g as i}from"./vendor-react-DkDaD07v.js";const e=(i,e=4294967295,H=79764919)=>{const t=new Int32Array(256);let s,n,r,o=e;for(s=0;s<256;s++){for(r=s<<24,n=8;n>0;--n)r=2147483648&r?r<<1^H:r<<1;t[s]=r}for(s=0;s<i.length;s++)o=o<<8^t[255&(o>>24^i[s])];return o},H=(i,H=e)=>{const t=i=>new Uint8Array(i.length/2).map((e,H)=>parseInt(i.substring(2*H,2*(H+1)),16)),s=i=>t(i)[0],n=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach((i,e)=>n.set(i,e));const r=new Uint8Array(i.length);let o,a,h,I=!1,c=0,l=42,d=i.length>13&&"dynEncode"===i.substring(0,9),u=0;var m;d&&(u=11,a=s(i.substring(9,u)),a<=1&&(u+=2,l=s(i.substring(11,u))),1===a&&(u+=8,m=i.substring(13,u),h=new DataView(t(m).buffer).getInt32(0,!0)));const p=256-l;for(let e=u;e<i.length;e++)if(o=i.charCodeAt(e),61!==o||I){if(92===o&&e<i.length-5&&d){const H=i.charCodeAt(e+1);117!==H&&85!==H||(o=parseInt(i.substring(e+2,e+6),16),e+=5)}if(o>255){const i=n.get(o);i&&(o=i+127)}I&&(I=!1,o-=64),r[c++]=o<l&&o>0?o+p:o-l}else I=!0;const g=r.subarray(0,c);if(d&&1===a){if(H(g)!==h){throw Error("Decode failed crc32 validation")}}return g};function t(){const i=Uint8Array,e=Float32Array;t.modules||Object.defineProperties(t,{modules:{value:new WeakMap},setModule:{value(i,e){t.modules.set(i,Promise.resolve(e))}},getModule:{value(i,e){let s=t.modules.get(i);return s||(e?s=WebAssembly.compile(H(e)):(e=i.wasm,s=t.inflateDynEncodeString(e).then(i=>WebAssembly.compile(i))),t.modules.set(i,s)),s}},concatFloat32:{value(i,H){let t=new e(H),s=0,n=0;for(;s<i.length;)t.set(i[s],n),n+=i[s++].length;return t}},getDecodedAudio:{value:(i,e,H,t,s)=>({errors:i,channelData:e,samplesDecoded:H,sampleRate:t,bitDepth:s})},getDecodedAudioMultiChannel:{value(i,e,H,s,n,r){let o,a,h=[];for(o=0;o<H;o++){const i=[];for(a=0;a<e.length;)i.push(e[a++][o]||[]);h.push(t.concatFloat32(i,s))}return t.getDecodedAudio(i,h,s,n,r)}},inflateDynEncodeString:{value:e=>(e=H(e),new Promise(H=>{const s=String.raw`dynEncode012804c7886d()((()>+*§§)§,§§§§)§+§§§)§+.-()(*)-+)(.7*§)i¸¸,3§(i¸¸,3/G+.¡*(,(,3+)2å:-),§H(P*DI*H(P*@I++hH)H*r,hH(H(P*<J,i)^*<H,H(P*4U((I-H(H*i0J,^*DH+H-H*I+H,I*4)33H(H*H)^*DH(H+H)^*@H+i§H)i§3æ*).§K(iHI/+§H,iHn,§H+i(H+i(rCJ0I,H*I-+hH,,hH(H-V)(i)J.H.W)(i)c)(H,i)I,H-i*I-4)33i(I.*hH(V)(H+n5(H(i*I-i(I,i)I.+hH,i*J+iHn,hi(I-i*I,+hH,H/H-c)(H,iFn,hi(I,+hH,H0n5-H*V)(J(,hH/H(i)J(H(V)(J(i)c)(H)H(i)H,c)(3H*i*I*H,i)I,4(3(-H(H,W)(H-I-H,i*I,4)3(3(3H,H-I1H+I,H.i)H1V)(J.i(v5(33H.-H(H,i(c)(H,i*I,4)333)-§i*I*+§H*iHn,hi73H,H(i)8(H+J+H)P*(H*V)(J-r,§H)P*,H.i)H+H,i)V)(-H*i*I*H+i)I+H-H.I.H,H-i)I,4)333Ã+)-§iø7i(^*(iü7I,*h+hH+iDn,h*hilI+i)I,+hH+,hH+iô7H,c)(i)H+i´8W)(H,I,H+i*I+4)-+hH(H)8*J-i(p5.*h*h*hH-i')u,hH(P*(J+,hH(P*0J,H(P*,n50H+H,H-b((3H(P*0i)I.4)3H-i¨*n5*H-iÅ*s,hi73H-i)J+V)&+I,H(H+V)æ,8(I.H(H*8*J-i(p51H-i)J+i¸7V)(H(H+iø7V)(8(J/H(P*0J+s,hi73H+H,H.J,I.H(P*(m5(H.H(P*,s5.+hH,m5*H(P*(J.H+H.H+H/U((b((H(H(P*0i)J+^*0H,i)I,4(3(3H(H.^*03H-i¨*o5)33i(73(3(3-H,H+i)c)(H,i*I,H+i)I+4)33i)I-3H-3!2)0§K(i2J,L(H,H(^*(H,H*^*4H,i(^*0H,i(^*DH,j(_*<H,H)P*(^*,H,H+P*(^*8*h*h+hH,i)8(I3i§I**h*h*h*h*h*h*hH,i*8(6+(),03H,j(_*@i*I-H,P*<J.i,J(H,P*8J/s50H,H.i+J0^*<i¦I*H.H,P*4J1J.U(*H.U((J2i')o5/H.U()I.H,H(^*<H0H1U((H.i0J.i§i0i')o5/H/H.H2J*H(J.q50H,P*0J/H*I-H,P*(J0,hH,P*,H-q,hi)I-423+hH*m5+H/H0H(H1U((b((H/i)I/H(i)I(H*i)I*4(3(3H,H.^*<H,H-^*04*3iØ1U((5+i(I(i¨7i1^*(i$6iè1^*(i°7iè6^*(i¬7iÈ6^*(+hH(iÈ*n,hiÈ*I(+hH(i¨,n,hi¨,I(+hH(iØ,n,hiØ,I(+hH(iè,o,hH,i-H(i0c)(H(i*I(4)33iè1i1H,i-iÈ*8)Bi(I(+hH(ido,hH,i-H(i-c)(H(i*I(4)33iÈ6iè6H,i-iF8)BiØ1i)b((41-H,i-H(i/c)(H(i*I(4)3(3(-H,i-H(i1c)(H(i*I(4)3(3(-H,i-H(i0c)(H(i*I(4)3(3(3H,H/^*0H,H(^*<3i(I*4*3H,H,i¸)^*TH,H,iø-^*PH,H,iX^*LH,H,i(^*HH,i-8(I(H,i-8(I-i¥I*H,i,8(I.H(iErH-iEr5)H(i©*I1H-i)I0i(i;H.i,J(i(H(i(rCJ(J*H*i;sCI*i¨1I-H(I/+hH/,hH,i-H-V)(i)H,i+8(c)(H/i)I/H-i*I-H*i)I*4)-H(i)i¨1I/+hH(H*o,hH,i-H/V)(i)i(c)(H/i*I/H(i)I(4)33i¤I*H,iø-H,i¸)H,i-i;8)5+H0H1I2i(I-+hH-H2p,hH,H,iP8*J*i(p5-H*i7u,hH,i-H-i)H*c)(H-i)I-4*3i(I/i+I.i+I(*h*h*hH*i86*(*)3H-m,hi£I*403H-i)H,W)-I/i*I(4)3i3I.i/I(3H2H,H(8(H.J(H-J.p,hi¢I*4.3H,i-H-i)I*+hH(,hH*H/c)(H*i*I*H(i)I(4)-H.I-4+3(3(33H,W)1m,hiI*4,3H,iø-H,i¸)H,i-H18)J(,hi¡I*H(i(p5,H1H,V)ú-H,V)ø-o5,3H,i(H,iXH,i-H1i)H08)J(,hi I*H(i(p5,H0H,V)H,V)o5,3H,H,iPH,iH8+I*4+3(3(3H,i$6i¬78+I*3H*H3m5(3i)I-H*i(r5)3H)H,P*0^*(H+H,P*<^*(H*I-3H,i2L(H-33Á)+(i¨03b+(,(-(.(/(0(1(2(3(5(7(9(;(?(C(G(K(S([(c(k({(((«(Ë(ë((*)(iø03O)()()()(*(*(*(*(+(+(+(+(,(,(,(,(-(-(-(-(i¨13M8(9(:(((0(/(1(.(2(-(3(,(4(+(5(*(6()(7(T7*S7US0U `;t.getModule(t,s).then(i=>WebAssembly.instantiate(i,{})).then(({exports:t})=>{const s=new Map(Object.entries(t)),n=s.get("puff"),r=s.get("memory").buffer,o=new i(r),a=new DataView(r);let h=s.get("__heap_base");const I=e.length,c=h;h+=4,a.setInt32(c,I,!0);const l=h;h+=I,o.set(e,l);const d=h;h+=4,a.setInt32(d,o.byteLength-h,!0),n(h,d,l,c),H(o.slice(h,h+a.getInt32(d,!0)))})}))}}),Object.defineProperty(this,"wasm",{enumerable:!0,get:()=>this._wasm}),this.getOutputChannels=(i,e,H)=>{let t=[],s=0;for(;s<e;)t.push(i.slice(s*H,s++*H+H));return t},this.allocateTypedArray=(i,e,H=!0)=>{const t=this._wasm.malloc(e.BYTES_PER_ELEMENT*i);return H&&this._pointers.add(t),{ptr:t,len:i,buf:new e(this._wasm.HEAP,t,i)}},this.free=()=>{this._pointers.forEach(i=>{this._wasm.free(i)}),this._pointers.clear()},this.codeToString=i=>{const e=[],H=new Uint8Array(this._wasm.HEAP);for(let t=H[i];0!==t;t=H[++i])e.push(t);return String.fromCharCode.apply(null,e)},this.addError=(i,e,H,t,s,n)=>{i.push({message:e,frameLength:H,frameNumber:t,inputBytes:s,outputSamples:n})},this.instantiate=(i,e)=>(e&&t.setModule(i,e),this._wasm=new i(t).instantiate(),this._pointers=new Set,this._wasm.ready.then(()=>this))}var s,n;const r=i(n?s:(n=1,s=Worker));class o extends((()=>globalThis.Worker||r)()){constructor(i,e,H,s){t.modules||new t;let n=t.modules.get(H);if(!n){let i,e="text/javascript",r=`'use strict';(${((i,e,H)=>{let t,s,n=new Promise(i=>{s=i});self.onmessage=({data:{id:r,command:o,data:a}})=>{let h,I=n,c={id:r};"init"===o?(Object.defineProperties(i,{WASMAudioDecoderCommon:{value:e},EmscriptenWASM:{value:H},module:{value:a.module},isWebWorker:{value:!0}}),t=new i(a.options),s()):"free"===o?t.free():"ready"===o?I=I.then(()=>t.ready):"reset"===o?I=I.then(()=>t.reset()):(Object.assign(c,t[o](Array.isArray(a)?a.map(i=>new Uint8Array(i)):new Uint8Array(a))),h=c.channelData?c.channelData.map(i=>i.buffer):[]),I.then(()=>self.postMessage(c,h))}}).toString()})(${H}, ${t}, ${s})`;try{i=void 0!==process.versions.node}catch{}n=i?`data:${e};base64,${Buffer.from(r).toString("base64")}`:URL.createObjectURL(new Blob([r],{type:e})),t.modules.set(H,n)}super(n,{name:e}),this._id=Number.MIN_SAFE_INTEGER,this._enqueuedOperations=new Map,this.onmessage=({data:i})=>{const{id:e,...H}=i;this._enqueuedOperations.get(e)(H),this._enqueuedOperations.delete(e)},new s(t).getModule().then(e=>{this.postToDecoder("init",{module:e,options:i})})}async postToDecoder(i,e){return new Promise(H=>{this.postMessage({command:i,id:this._id,data:e}),this._enqueuedOperations.set(this._id++,H)})}get ready(){return this.postToDecoder("ready")}async free(){await this.postToDecoder("free").finally(()=>{this.terminate()})}async reset(){await this.postToDecoder("reset")}}const a=(i,e)=>{Object.defineProperty(i,"name",{value:e})};export{t as W,o as a,a as b};
