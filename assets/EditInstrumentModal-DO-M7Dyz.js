import{u as e,aZ as t,j as s,e as r,a_ as n,aq as o,a$ as i,aU as m,b0 as d,b1 as l,b2 as a,b3 as c,b4 as u,b5 as b,b6 as p,b7 as x,b8 as N,b9 as v,av as E,ba as h,bb as f,bc as D,bd as V,be as y,bf as g,bg as C,bh as S,bi as B,t as j,bj as L,ad as O,bk as U,af as X,a9 as k,a7 as I}from"./index-zx6LJBPK.js";import{r as M,R as z}from"./vendor-utils-XMmR-oGw.js";import{T as w,E as T,S as F,U as P}from"./EffectChain-C3LgFJxX.js";import{H as A,X as $,c as K,M as H,h as W,I as q,C as R,S as G,J,d as Z,e as Y,l as _,K as Q,f as ee,g as te}from"./vendor-ui-uomqNFY-.js";import"./vendor-tone-CADp_hfL.js";import"./vendor-react-DkDaD07v.js";import"./useVisualizationAnimation-D37DdYyX.js";import"./sortable.esm-Nw3Rboz6.js";const se="devilbox-synth-selector-category",re="devilbox-synth-selector-search",ne="devilbox-synth-selector-scroll",oe=({onSelect:f,compact:D=!1})=>{const V=e(e=>e.currentInstrumentId),y=e(e=>e.instruments),g=e(e=>e.updateInstrument),C=y.find(e=>e.id===V)||null,[S,B]=M.useState(null),[j,L]=M.useState(null),[O,U]=M.useState(()=>{try{return localStorage.getItem(re)||""}catch{return""}}),[X,k]=M.useState(()=>{try{return localStorage.getItem(se)||null}catch{return null}}),I=M.useRef(null),z=M.useRef(!1);M.useEffect(()=>{try{X?localStorage.setItem(se,X):localStorage.removeItem(se)}catch{}},[X]),M.useEffect(()=>{try{O?localStorage.setItem(re,O):localStorage.removeItem(re)}catch{}},[O]);const w=M.useCallback(()=>{if(z.current)return;const e=I.current;if(e)try{localStorage.setItem(ne,String(e.scrollTop))}catch{}},[]);M.useEffect(()=>{const e=I.current;e&&requestAnimationFrame(()=>{if(z.current=!0,C?.synthType){const t=e.querySelector(`[data-synth-type="${C.synthType}"]`);if(t)return t.scrollIntoView({block:"center",behavior:"instant"}),void setTimeout(()=>{z.current=!1},100)}try{const t=localStorage.getItem(ne);t&&(e.scrollTop=parseInt(t,10)||0)}catch{}setTimeout(()=>{z.current=!1},100)})},[]);const T=M.useMemo(()=>{const e=O.toLowerCase().trim();return t.filter(e=>!X||e.id===X).map(t=>({...t,synths:t.synths.filter(t=>!(!t||!t.icon)&&(!e||(t.name.toLowerCase().includes(e)||t.shortName.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.bestFor.some(t=>t.toLowerCase().includes(e)))))})).filter(e=>e.synths.length>0)},[O,X]),F=M.useMemo(()=>T.reduce((e,t)=>e+t.synths.length,0),[T]),P=e=>{if(!e)return H;try{return W[e]||H}catch(t){return H}},R=e=>{if(!C)return;n.getInstance().invalidateInstrument(C.id);const t={synthType:e,name:r(e).name,tb303:void 0,drumMachine:void 0,chipSynth:void 0,pwmSynth:void 0,wavetable:void 0,granular:void 0,superSaw:void 0,polySynth:void 0,organ:void 0,stringMachine:void 0,formantSynth:void 0,furnace:void 0,chiptuneModule:void 0,wobbleBass:void 0,drumKit:void 0};switch(e){case"TB303":t.tb303={...E};break;case"DrumMachine":t.drumMachine={...v};break;case"ChipSynth":t.chipSynth={...N};break;case"PWMSynth":t.pwmSynth={...x};break;case"Wavetable":t.wavetable={...p};break;case"GranularSynth":t.granular={...b};break;case"SuperSaw":t.superSaw={...u};break;case"PolySynth":t.polySynth={...c};break;case"Organ":t.organ={...a};break;case"StringMachine":t.stringMachine={...l};break;case"FormantSynth":t.formantSynth={...d};break;case"Furnace":t.furnace={...m};break;case"ChiptuneModule":t.chiptuneModule={...h};break;case"WobbleBass":t.wobbleBass={...i};break;case"DrumKit":t.drumKit={...o}}g(C.id,t),f?.(e)};if(D){const e=T.flatMap(e=>e.synths),t=Array.from(new Map(e.map(e=>[e.type,e])).values());return s.jsxDEV("div",{className:"space-y-3",children:[s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(A,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-text-muted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:349,columnNumber:11},void 0),s.jsxDEV("input",{type:"text",placeholder:"Search synths...",value:O,onChange:e=>U(e.target.value),className:"w-full pl-8 pr-8 py-1.5 text-sm bg-dark-bgSecondary border border-dark-border rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:350,columnNumber:11},void 0),O&&s.jsxDEV("button",{onClick:()=>U(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary",children:s.jsxDEV($,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:362,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:358,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:348,columnNumber:9},void 0),s.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:t.map(e=>{const t=C?.synthType===e.type,r=P(e.icon);return s.jsxDEV("button",{"data-synth-type":e.type,onClick:()=>R(e.type),className:`\n                  flex items-center gap-2 p-2 rounded-lg border text-left transition-all\n                  ${t?"bg-accent-primary/15 border-accent-primary":"bg-dark-bgSecondary border-dark-border hover:border-text-muted"}\n                `,children:[s.jsxDEV(r,{size:14,className:e.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:386,columnNumber:17},void 0),s.jsxDEV("span",{className:"text-sm truncate "+(t?"text-accent-primary":"text-text-secondary"),children:e.shortName},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:387,columnNumber:17},void 0)]},e.type,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:374,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:368,columnNumber:9},void 0),0===t.length&&s.jsxDEV("div",{className:"text-center py-4 text-text-muted text-sm",children:['No synths found for "',O,'"']},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:397,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:346,columnNumber:7},void 0)}return s.jsxDEV("div",{ref:I,onScroll:w,className:"space-y-4 max-h-full overflow-y-auto",children:[s.jsxDEV("div",{className:"space-y-3 sticky top-0 bg-dark-bg pb-3 z-10",children:[s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:416,columnNumber:11},void 0),s.jsxDEV("input",{type:"text",placeholder:"Search synths by name, description, or use case...",value:O,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-10 py-2 text-sm bg-dark-bgSecondary border border-dark-border rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:417,columnNumber:11},void 0),O&&s.jsxDEV("button",{onClick:()=>U(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary",children:s.jsxDEV($,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:429,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:425,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:415,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex flex-wrap gap-1.5",children:[s.jsxDEV("button",{onClick:()=>k(null),className:"px-3 py-1 text-xs rounded-full border transition-all "+(null===X?"bg-accent-primary text-dark-bg border-accent-primary":"bg-dark-bgSecondary text-text-secondary border-dark-border hover:border-text-muted"),children:["All (",t.reduce((e,t)=>e+t.synths.filter(e=>e?.icon).length,0),")"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:436,columnNumber:11},void 0),t.map(e=>{const t=e.synths.filter(e=>e?.icon).length;return s.jsxDEV("button",{onClick:()=>k(X===e.id?null:e.id),className:"px-3 py-1 text-xs rounded-full border transition-all "+(X===e.id?"bg-accent-primary text-dark-bg border-accent-primary":"bg-dark-bgSecondary text-text-secondary border-dark-border hover:border-text-muted"),children:[e.name," (",t,")"]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:449,columnNumber:15},void 0)})]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:435,columnNumber:9},void 0),(O||X)&&s.jsxDEV("div",{className:"text-xs text-text-muted",children:["Showing ",F," synth",1!==F?"s":"",O&&` matching "${O}"`,X&&` in ${t.find(e=>e.id===X)?.name}`]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:466,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:413,columnNumber:7},void 0),T.map(e=>s.jsxDEV("div",{children:[s.jsxDEV("button",{onClick:()=>B(S===e.id?null:e.id),className:"w-full flex items-center justify-between mb-3 group",children:[s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary",children:e.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:485,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-xs text-text-muted",children:e.description},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:486,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:484,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("span",{className:"text-xs text-text-muted",children:e.synths.length},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:489,columnNumber:15},void 0),s.jsxDEV(K,{size:16,className:`\n                  text-text-muted transition-transform\n                  ${S===e.id?"rotate-90":""}\n                `},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:490,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:488,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:478,columnNumber:11},void 0),(S===e.id||null===S)&&s.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:e.synths.map(e=>((e,t)=>{if(!e||!e.icon)return null;const r=P(e.icon);return s.jsxDEV("div",{"data-synth-type":e.type,onClick:()=>R(e.type),onMouseEnter:()=>L(e.type),onMouseLeave:()=>L(null),className:`\n          relative p-4 rounded-lg border cursor-pointer transition-all\n          ${t?"bg-accent-primary/15 border-accent-primary":"bg-dark-bgSecondary border-dark-border hover:border-text-muted hover:bg-dark-bgHover"}\n        `,children:[t&&s.jsxDEV("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-accent-primary flex items-center justify-center",children:s.jsxDEV(q,{size:12,className:"text-dark-bg"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:303,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:302,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[s.jsxDEV("div",{className:`p-2 rounded-md bg-dark-bgTertiary ${e.color}`,children:s.jsxDEV(r,{size:18},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:310,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:309,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("h4",{className:"font-medium text-text-primary",children:e.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:313,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-text-muted",children:e.shortName},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:314,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:312,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:308,columnNumber:9},void 0),!D&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("p",{className:"text-sm text-text-secondary mb-2",children:e.description},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:321,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex flex-wrap gap-1",children:e.bestFor.slice(0,3).map(e=>s.jsxDEV("span",{className:"px-2 py-0.5 text-[10px] rounded-full bg-dark-bgTertiary text-text-muted",children:e},e,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:326,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:324,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:320,columnNumber:11},void 0)]},e.type,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:286,columnNumber:7},void 0)})(e,C?.synthType===e.type))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:502,columnNumber:13},void 0)]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:476,columnNumber:9},void 0)),0===T.length&&s.jsxDEV("div",{className:"text-center py-8 text-text-muted",children:[s.jsxDEV("p",{className:"text-sm",children:"No synths found"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:515,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-xs mt-1",children:"Try a different search term or category"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:516,columnNumber:11},void 0),s.jsxDEV("button",{onClick:()=>{U(""),k(null)},className:"mt-3 px-4 py-1.5 text-xs bg-dark-bgSecondary border border-dark-border rounded-lg hover:border-text-muted",children:"Clear filters"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:517,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:514,columnNumber:9},void 0),j&&s.jsxDEV("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 bg-dark-bgTertiary border border-dark-border rounded-lg p-3 shadow-xl z-50 max-w-sm",children:(()=>{const e=r(j);if(!e||!e.icon)return null;const t=P(e.icon);return s.jsxDEV("div",{className:"flex gap-3",children:[s.jsxDEV("div",{className:`p-2 rounded-md bg-dark-bg ${e.color}`,children:s.jsxDEV(t,{size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:536,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:535,columnNumber:17},void 0),s.jsxDEV("div",{children:[s.jsxDEV("h4",{className:"font-medium text-text-primary",children:e.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:539,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-xs text-text-secondary",children:e.description},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:540,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-[10px] text-text-muted mt-1",children:["Best for: ",e.bestFor.join(", ")]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:541,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:538,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:534,columnNumber:15},void 0)})()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:528,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/CategorizedSynthSelector.tsx",lineNumber:407,columnNumber:5},void 0)};const ie=({iconName:e,size:t})=>{const s=W[e]||H;return z.createElement(s,{size:t})},me=({isOpen:t,onClose:o,createMode:i=!1})=>{const m=e(e=>e.instruments),d=e(e=>e.currentInstrumentId),l=e(e=>e.createInstrument),a=e(e=>e.updateInstrument),c=e(e=>e.setPreviewInstrument),u=e(e=>e.setCurrentInstrument),b=m.find(e=>e.id===d)||null,[p,x]=M.useState(i),[N,v]=M.useState("Sampler"),[E,h]=M.useState(""),[y,g]=M.useState("Sampler"),[C,S]=M.useState(null),[B,O]=M.useState("sound"),[U,X]=M.useState(!0),[k,I]=M.useState(!1),[z,P]=M.useState(!1),[W,se]=M.useState(()=>{try{const e=localStorage.getItem("devilbox-editor-left-panel-collapsed");return null===e||"true"===e}catch{return!0}});M.useEffect(()=>{try{localStorage.setItem("devilbox-editor-left-panel-collapsed",String(W))}catch{}},[W]),M.useEffect(()=>{requestAnimationFrame(()=>{t&&i?(x(!0),v("Sampler"),g("Sampler"),S(le("Sampler"))):t&&!i&&(0===m.length?(x(!0),v("Sampler"),g("Sampler"),S(le("Sampler"))):b?(x(!1),S(null)):(x(!1),S(null),u(m[0].id)))})},[t,i,b,m,u]),M.useEffect(()=>{if(p&&C)return c(C),()=>c(null)},[p,C,c]);const re=()=>{c(null),x(!1),S(null),o()};M.useEffect(()=>{if(!t)return;const e=e=>{"Escape"===e.key&&(e.preventDefault(),re())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,re]);const ne=f.filter(e=>{if(!E.trim())return!0;const t=D[e],s=E.toLowerCase();return t.name.toLowerCase().includes(s)||t.shortName.toLowerCase().includes(s)||t.description.toLowerCase().includes(s)||t.bestFor.some(e=>e.toLowerCase().includes(s))}),me=()=>{c(null);const e=l();C&&a(e,{...C,name:y}),u(e),x(!1),S(null)},ae=M.useCallback(e=>{n.getInstance().invalidateInstrument(-1),S(t=>t?{...t,...e}:null)},[]),ce=()=>{x(!0),v("Sampler"),g("Sampler"),S(le("Sampler"))},ue=M.useCallback(()=>{O("sound")},[O]),be=[...m].sort((e,t)=>e.id-t.id),pe=be.findIndex(e=>e.id===d),xe=M.useCallback(()=>{pe>0?u(be[pe-1].id):be.length>0&&u(be[be.length-1].id)},[pe,be,u]),Ne=M.useCallback(()=>{pe<be.length-1?u(be[pe+1].id):be.length>0&&u(be[0].id)},[pe,be,u]);if(!t)return null;const ve=p?C:b,Ee=r(ve?.synthType?ve.synthType:"Sampler");if(p)return s.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:s.jsxDEV("div",{className:"w-full h-full bg-dark-bg flex flex-col overflow-hidden",children:[s.jsxDEV("div",{className:"flex items-center justify-between px-4 py-2 bg-dark-bgSecondary border-b border-dark-border shrink-0",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("div",{className:`p-1.5 rounded ${Ee.color} bg-dark-bgTertiary`,children:s.jsxDEV(ie,{iconName:Ee.icon,size:18},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:298,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:297,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("h2",{className:"text-text-primary font-bold text-sm",children:"CREATE INSTRUMENT"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:301,columnNumber:17},void 0),s.jsxDEV("input",{type:"text",value:y,onChange:e=>g(e.target.value),className:"px-3 py-1 text-sm bg-dark-bg border border-dark-border text-text-primary rounded focus:border-accent-primary focus:outline-none font-mono",placeholder:"Instrument name..."},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:302,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:300,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:296,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("button",{onClick:re,className:"flex items-center gap-1.5 px-4 py-2 bg-red-900/50 text-red-300 text-sm font-bold hover:bg-red-800/60 hover:text-red-200 transition-colors rounded border border-red-700",children:[s.jsxDEV($,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:316,columnNumber:17},void 0),"Cancel"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:312,columnNumber:15},void 0),s.jsxDEV("button",{onClick:me,disabled:!y.trim(),className:"flex items-center gap-1.5 px-4 py-2 bg-green-600 text-white text-sm font-bold hover:bg-green-500 transition-colors rounded disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsxDEV(q,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:324,columnNumber:17},void 0),"Add Instrument"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:319,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:311,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:295,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxDEV("div",{className:"w-64 shrink-0 bg-dark-bgSecondary border-r border-dark-border flex flex-col",children:[s.jsxDEV("div",{className:"p-2 border-b border-dark-border",children:s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(A,{size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-text-muted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:337,columnNumber:19},void 0),s.jsxDEV("input",{type:"text",value:E,onChange:e=>h(e.target.value),placeholder:"Search synths...",className:"w-full pl-7 pr-2 py-1.5 text-xs bg-dark-bg border border-dark-border text-text-primary rounded focus:border-accent-primary focus:outline-none"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:338,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:336,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:335,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex-1 overflow-y-auto scrollbar-modern",children:[ne.map(e=>{const t=D[e],o=N===e;return s.jsxDEV("button",{onClick:()=>(e=>{n.getInstance().invalidateInstrument(-1),v(e),S(le(e)),g(r(e).name)})(e),className:`\n                        w-full px-2 py-1.5 text-left transition-all flex items-center gap-2 border-b border-dark-border\n                        ${o?"bg-accent-primary text-dark-bg":"hover:bg-dark-bgTertiary"}\n                      `,children:[s.jsxDEV(ie,{iconName:t.icon,size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:366,columnNumber:23},void 0),s.jsxDEV("div",{className:"flex-1 min-w-0",children:[s.jsxDEV("div",{className:"font-bold text-xs truncate "+(o?"text-dark-bg":"text-text-primary"),children:t.shortName},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:368,columnNumber:25},void 0),s.jsxDEV("div",{className:"text-[10px] truncate "+(o?"text-dark-bg/70":"text-text-muted"),children:t.bestFor[0]},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:371,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:367,columnNumber:23},void 0)]},e,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:355,columnNumber:21},void 0)}),0===ne.length&&s.jsxDEV("div",{className:"text-center py-4 text-text-muted text-xs",children:"No synths found"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:379,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:349,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:333,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxDEV("div",{className:"flex-1 overflow-y-auto scrollbar-modern",children:C&&s.jsxDEV(de,{instrument:C,onChange:ae},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:391,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:389,columnNumber:15},void 0),s.jsxDEV("div",{className:"p-2 border-t border-dark-border bg-dark-bgSecondary shrink-0",children:C&&s.jsxDEV(w,{instrument:C},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:400,columnNumber:36},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:399,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:387,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:331,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:293,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:292,columnNumber:7},void 0);const he=[{id:"sound",label:"Sound",icon:Z},{id:"effects",label:"Effects",icon:Y}];return s.jsxDEV("div",{className:"fixed inset-0 z-50 bg-black/90",children:s.jsxDEV("div",{className:"bg-dark-bg w-full h-full flex flex-col overflow-hidden",children:[s.jsxDEV("div",{className:"flex h-full",children:[s.jsxDEV("div",{className:"border-r border-dark-border flex-shrink-0 bg-dark-bgSecondary transition-all duration-200 "+(W?"w-8":"w-52"),children:W?s.jsxDEV("button",{onClick:()=>se(!1),className:"w-full h-full flex items-start justify-center pt-3 text-text-muted hover:text-text-primary hover:bg-dark-bgTertiary transition-colors",title:"Show instrument list",children:s.jsxDEV(K,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:428,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:423,columnNumber:15},void 0):s.jsxDEV("div",{className:"h-full flex flex-col",children:[s.jsxDEV("div",{className:"flex items-center justify-between px-2 py-1 border-b border-dark-border",children:[s.jsxDEV("span",{className:"text-xs font-medium text-text-muted",children:"Instruments"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:434,columnNumber:19},void 0),s.jsxDEV("button",{onClick:()=>se(!0),className:"p-1 text-text-muted hover:text-text-primary hover:bg-dark-bgTertiary rounded transition-colors",title:"Hide instrument list",children:s.jsxDEV(R,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:440,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:435,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:433,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex-1 overflow-hidden",children:s.jsxDEV(V,{maxHeight:"100%",showActions:!0,onCreateNew:ce},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:444,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:443,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:432,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:420,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex-1 flex flex-col min-w-0",children:[b?s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-border bg-dark-bgSecondary",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("button",{onClick:xe,className:"p-1.5 rounded hover:bg-dark-bgTertiary text-text-muted hover:text-text-primary transition-colors",title:"Previous instrument",children:s.jsxDEV(R,{size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:467,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:462,columnNumber:21},void 0),s.jsxDEV("div",{className:`p-2 rounded-lg bg-dark-bg ${Ee?.color||"text-text-primary"}`,children:s.jsxDEV(ie,{iconName:Ee.icon,size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:471,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:470,columnNumber:21},void 0),s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("input",{type:"text",value:b.name,onChange:e=>a(b.id,{name:e.target.value}),className:"bg-transparent text-text-primary font-semibold text-lg focus:outline-none focus:ring-1 focus:ring-accent-primary rounded px-1 -ml-1"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:475,columnNumber:25},void 0),s.jsxDEV("span",{className:"text-xs text-text-muted font-mono",children:["(",pe+1,"/",be.length,")"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:481,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:474,columnNumber:23},void 0),s.jsxDEV("p",{className:"text-xs text-text-muted",children:[Ee?.name||b.synthType," ",s.jsxDEV("span",{className:"opacity-50",children:"|"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:486,columnNumber:74},void 0)," ID: ",b.id.toString(16).toUpperCase().padStart(2,"0")]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:485,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:473,columnNumber:21},void 0),s.jsxDEV("button",{onClick:Ne,className:"p-1.5 rounded hover:bg-dark-bgTertiary text-text-muted hover:text-text-primary transition-colors",title:"Next instrument",children:s.jsxDEV(K,{size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:496,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:491,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:460,columnNumber:19},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded bg-dark-bg hover:bg-dark-bgTertiary text-text-primary transition-colors text-sm border border-dark-border",title:"Change synth type",children:[s.jsxDEV(H,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:506,columnNumber:23},void 0),"Browse Synths"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:501,columnNumber:21},void 0),s.jsxDEV("button",{onClick:()=>I(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded bg-dark-bg hover:bg-dark-bgTertiary text-text-primary transition-colors text-sm border border-dark-border",title:"Save as preset",children:[s.jsxDEV(G,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:514,columnNumber:23},void 0),"Save"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:509,columnNumber:21},void 0),s.jsxDEV("button",{onClick:()=>{if(j.getState().instrumentEditorPoppedOut)return L("DEViLBOX â€” Instrument Editor"),void o();c(null),x(!1),S(null),o(),j.getState().setInstrumentEditorPoppedOut(!0)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded bg-dark-bg hover:bg-dark-bgTertiary text-text-primary transition-colors text-sm border border-dark-border",title:"Pop out to separate window",children:[s.jsxDEV(J,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:522,columnNumber:23},void 0),"Pop Out"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:517,columnNumber:21},void 0),s.jsxDEV("button",{onClick:re,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-dark-bg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary border border-dark-border",title:"Close (Escape)",children:[s.jsxDEV($,{size:18},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:530,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-sm font-medium",children:"Close"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:531,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:525,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:500,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:459,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-center gap-1 px-4 py-2 border-b border-dark-border bg-dark-bg",children:he.map(e=>{const t=e.icon,r=B===e.id;return s.jsxDEV("button",{onClick:()=>O(e.id),className:`\n                          flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border\n                          ${r?"bg-dark-bgSecondary text-accent-primary border-accent-primary":"text-text-muted hover:text-text-primary hover:bg-dark-bgSecondary border-transparent"}\n                        `,children:[s.jsxDEV(t,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:554,columnNumber:25},void 0),e.label]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:543,columnNumber:23},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:537,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex-1 overflow-y-auto scrollbar-modern",children:["sound"===B&&s.jsxDEV(de,{instrument:b,onChange:e=>a(b.id,e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:564,columnNumber:21},void 0),"effects"===B&&s.jsxDEV("div",{className:"p-4",children:s.jsxDEV(T,{instrumentId:b.id,effects:b.effects||[]},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:572,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:571,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:562,columnNumber:17},void 0),z&&s.jsxDEV("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-center justify-center",children:s.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-lg shadow-2xl w-[90%] max-w-4xl max-h-[85vh] flex flex-col",children:[s.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-border",children:[s.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary flex items-center gap-2",children:[s.jsxDEV(H,{size:20,className:"text-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:583,columnNumber:27},void 0),"Browse Synth Types"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:582,columnNumber:25},void 0),s.jsxDEV("button",{onClick:()=>P(!1),className:"p-1.5 rounded hover:bg-dark-bgHover text-text-muted hover:text-text-primary transition-colors",children:s.jsxDEV($,{size:18},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:590,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:586,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:581,columnNumber:23},void 0),s.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsxDEV(oe,{onSelect:e=>{ue(e),P(!1)}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:594,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:593,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:580,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:579,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:457,columnNumber:15},void 0):s.jsxDEV("div",{className:"flex-1 flex flex-col",children:[s.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-border bg-dark-bgSecondary",children:[s.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary",children:"Instrument Editor"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:609,columnNumber:19},void 0),s.jsxDEV("button",{onClick:re,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-dark-bg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary border border-dark-border",title:"Close (Escape)",children:[s.jsxDEV($,{size:18},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:615,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-sm font-medium",children:"Close"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:616,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:610,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:608,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV(H,{size:48,className:"mx-auto mb-4 opacity-50 text-text-muted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:621,columnNumber:21},void 0),s.jsxDEV("p",{className:"text-text-muted mb-2",children:"No instrument selected"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:622,columnNumber:21},void 0),s.jsxDEV("p",{className:"text-text-muted text-sm mb-4",children:"Select an instrument from the list or create a new one"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:623,columnNumber:21},void 0),s.jsxDEV("button",{onClick:ce,className:"flex items-center gap-2 px-4 py-2 bg-accent-primary rounded-lg text-text-inverse hover:bg-accent-primary/80 transition-colors mx-auto",children:[s.jsxDEV(_,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:628,columnNumber:23},void 0),"Create Instrument"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:624,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:620,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:619,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:607,columnNumber:15},void 0),b&&s.jsxDEV("div",{className:"border-t border-dark-border",children:[s.jsxDEV("button",{onClick:()=>X(!U),className:"w-full px-4 py-2 flex items-center justify-between text-sm text-text-muted hover:text-text-primary hover:bg-dark-bgHover transition-colors",children:[s.jsxDEV("span",{className:"flex items-center gap-2",children:[s.jsxDEV(Q,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:644,columnNumber:21},void 0),"Test Keyboard"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:643,columnNumber:19},void 0),U?s.jsxDEV(ee,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:647,columnNumber:35},void 0):s.jsxDEV(te,{size:14},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:647,columnNumber:63},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:639,columnNumber:17},void 0),U&&s.jsxDEV("div",{className:"p-4 bg-dark-bgSecondary",children:s.jsxDEV(w,{instrument:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:652,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:651,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:638,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:455,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:418,columnNumber:9},void 0),k&&b&&s.jsxDEV(F,{instrument:b,onClose:()=>I(!1)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:662,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:417,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:416,columnNumber:5},void 0)},de=({instrument:e,onChange:t})=>s.jsxDEV(P,{instrument:e,onChange:t},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/EditInstrumentModal.tsx",lineNumber:689,columnNumber:5},void 0);function le(e){const t={id:-1,name:r(e).name,type:"synth",synthType:e,volume:-6,pan:0,oscillator:B,envelope:S,filter:C,effects:[]};if("TB303"===e||"Buzz3o3"===e)t.tb303={...E},"Buzz3o3"===e&&(t.buzzmachine={...y,machineType:"OomekAggressor",parameters:{0:0,1:120,2:64,3:64,4:64,5:64,6:100,7:100}});else if(function(e){return"Furnace"===e||e.startsWith("Furnace")}(e)){t.furnace={...m};const s={Furnace:1,FurnaceOPN:0,FurnaceOPNA:13,FurnaceOPNB:14,FurnaceOPM:1,FurnaceOPL:2,FurnaceOPLL:23,FurnaceOPL4:26,FurnaceOPZ:24,FurnaceESFM:25,FurnaceNES:3,FurnaceGB:4,FurnaceC64:5,FurnaceSID6581:5,FurnaceSID8580:5,FurnaceAY:6,FurnacePSG:7,FurnaceTIA:8,FurnaceVERA:9,FurnaceSAA:10,FurnaceVIC:11,FurnaceLynx:12};void 0!==s[e]&&(t.furnace.chipType=s[e])}else if(function(e){return"Buzzmachine"===e||e.startsWith("Buzz")}(e)){t.buzzmachine={...y};const s={Buzzmachine:"ArguruDistortion",BuzzDTMF:"CyanPhaseDTMF",BuzzFreqBomb:"ElenzilFrequencyBomb",BuzzKick:"FSMKick",BuzzKickXP:"FSMKickXP",BuzzNoise:"JeskolaNoise",BuzzTrilok:"JeskolaTrilok",Buzz4FM2F:"MadBrain4FM2F",BuzzDynamite6:"MadBrainDynamite6",BuzzM3:"MakkM3",Buzz3o3:"OomekAggressor"};s[e]&&(t.buzzmachine.machineType=s[e])}else if("GranularSynth"===e)t.granular={...b};else if("DrumKit"===e)t.drumKit={...o};else if("Sam"===e)t.sam={...O};else if("V2"===e)t.v2={...U};else if("Sampler"!==e&&"Player"!==e&&"ChiptuneModule"!==e)switch(e){case"DrumMachine":t.drumMachine={...v};break;case"ChipSynth":t.chipSynth={...N};break;case"PWMSynth":t.pwmSynth={...x};break;case"Wavetable":t.wavetable={...p};break;case"SuperSaw":t.superSaw={...u};break;case"PolySynth":t.polySynth={...c};break;case"Organ":t.organ={...a};break;case"StringMachine":t.stringMachine={...l};break;case"FormantSynth":t.formantSynth={...d};break;case"WobbleBass":t.wobbleBass={...i};break;case"DubSiren":t.dubSiren={...I};break;case"SpaceLaser":t.spaceLaser={...k};break;case"Synare":t.synare={...X}}const s=t.furnace?.chipType,n=t.buzzmachine?.machineType,h=g(e);if(h){const o={...h};delete o.name,delete o.type,delete o.synthType,Object.assign(t,o),t.synthType=e,t.id=-1,t.name=r(e).name,void 0!==s&&t.furnace&&(t.furnace.chipType=s),n&&t.buzzmachine&&(t.buzzmachine.machineType=n)}return t}export{me as EditInstrumentModal};
