import{r}from"./vendor-utils-XMmR-oGw.js";function e({onFrame:e,enabled:n=!0,fps:u=30,idleThreshold:t=10}){const c=r.useRef(null),s=r.useRef(0),i=r.useRef(!1),f=r.useRef(0),a=r.useRef(e),l=r.useRef(1e3/u),o=r.useRef(t);return r.useEffect(()=>{a.current=e},[e]),r.useEffect(()=>{l.current=1e3/u},[u]),r.useEffect(()=>{o.current=t},[t]),r.useEffect(()=>{if(!n)return i.current=!1,void(null!==c.current&&(cancelAnimationFrame(c.current),c.current=null));i.current=!0,f.current=0,s.current=0;const r=e=>{if(!i.current)return;const n=e-s.current,u=l.current,t=f.current>o.current?2*u:u;if(n<t)return void(c.current=requestAnimationFrame(r));s.current=e-n%t;a.current(e)?f.current=0:f.current++,c.current=requestAnimationFrame(r)};return c.current=requestAnimationFrame(r),()=>{i.current=!1,null!==c.current&&(cancelAnimationFrame(c.current),c.current=null)}},[n]),{isAnimating:i,idleFrames:f}}export{e as u};
