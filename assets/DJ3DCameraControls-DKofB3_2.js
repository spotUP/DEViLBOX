import{r as e,R as t}from"./vendor-utils-XMmR-oGw.js";import{c as n,T as s,d as r,e as o,V as i,S as a,Q as A,O as c,b as B,P as l,f as u,g as C,h,i as d,L as m,j as p,F as f,k as E,C as F,l as G,m as M,D,M as I,I as g,n as R,o as b,p as H,q as T,r as J,s as O,t as L,N as P,v as x,w as y,x as v,y as S,z as U,A as K,E as w,G as N,H as _,J as Q,K as k,U as j,W as X,X as Y,Y as Z,Z as W,_ as V,$ as q,a0 as z,a1 as $,a2 as ee,a3 as te,a4 as ne,a5 as se,a6 as re,a7 as oe,a8 as ie,a9 as ae,aa as Ae,ab as ce,ac as Be,ad as le,ae as ue,af as Ce,ag as he,B as de,ah as me,ai as pe,a as fe,aj as Ee,ak as Fe,al as Ge,am as Me,u as De}from"./react-three-fiber.esm-DUbY8J_y.js";import{_ as Ie}from"./DJView-B1pcUmTm.js";import{j as ge}from"./index-zx6LJBPK.js";const Re=(()=>parseInt(n.replace(/\D+/g,"")))();function be(e,t){if(t===s)return e;if(t===r||t===o){let n=e.getIndex();if(null===n){const t=[],s=e.getAttribute("position");if(void 0===s)return e;for(let e=0;e<s.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const s=n.count-2,o=[];if(n)if(t===r)for(let e=1;e<=s;e++)o.push(n.getX(0)),o.push(n.getX(e)),o.push(n.getX(e+1));else for(let e=0;e<s;e++)e%2==0?(o.push(n.getX(e)),o.push(n.getX(e+1)),o.push(n.getX(e+2))):(o.push(n.getX(e+2)),o.push(n.getX(e+1)),o.push(n.getX(e)));o.length;const i=e.clone();return i.setIndex(o),i.clearGroups(),i}return e}var He=Object.defineProperty,Te=(e,t,n)=>(((e,t,n)=>{t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n),n);class Je{constructor(){Te(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,s=n.length;t<s;t++)n[t].call(this,e);e.target=null}}}var Oe=Object.defineProperty,Le=(e,t,n)=>(((e,t,n)=>{t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Pe=new h,xe=new d,ye=Math.cos(Math.PI/180*70),ve=(e,t)=>(e%t+t)%t;let Se=class extends Je{constructor(e,t){super(),Le(this,"object"),Le(this,"domElement"),Le(this,"enabled",!0),Le(this,"target",new i),Le(this,"minDistance",0),Le(this,"maxDistance",1/0),Le(this,"minZoom",0),Le(this,"maxZoom",1/0),Le(this,"minPolarAngle",0),Le(this,"maxPolarAngle",Math.PI),Le(this,"minAzimuthAngle",-1/0),Le(this,"maxAzimuthAngle",1/0),Le(this,"enableDamping",!1),Le(this,"dampingFactor",.05),Le(this,"enableZoom",!0),Le(this,"zoomSpeed",1),Le(this,"enableRotate",!0),Le(this,"rotateSpeed",1),Le(this,"enablePan",!0),Le(this,"panSpeed",1),Le(this,"screenSpacePanning",!0),Le(this,"keyPanSpeed",7),Le(this,"zoomToCursor",!1),Le(this,"autoRotate",!1),Le(this,"autoRotateSpeed",2),Le(this,"reverseOrbit",!1),Le(this,"reverseHorizontalOrbit",!1),Le(this,"reverseVerticalOrbit",!1),Le(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Le(this,"mouseButtons",{LEFT:u.ROTATE,MIDDLE:u.DOLLY,RIGHT:u.PAN}),Le(this,"touches",{ONE:C.ROTATE,TWO:C.DOLLY_PAN}),Le(this,"target0"),Le(this,"position0"),Le(this,"zoom0"),Le(this,"_domElementKeyEvents",null),Le(this,"getPolarAngle"),Le(this,"getAzimuthalAngle"),Le(this,"setPolarAngle"),Le(this,"setAzimuthalAngle"),Le(this,"getDistance"),Le(this,"getZoomScale"),Le(this,"listenToKeyEvents"),Le(this,"stopListenToKeyEvents"),Le(this,"saveState"),Le(this,"reset"),Le(this,"update"),Le(this,"connect"),Le(this,"dispose"),Le(this,"dollyIn"),Le(this,"dollyOut"),Le(this,"getScale"),Le(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=e=>{let t=ve(e,2*Math.PI),s=p.phi;s<0&&(s+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-s);2*Math.PI-r<r&&(t<s?t+=2*Math.PI:s+=2*Math.PI),f.phi=t-s,n.update()},this.setAzimuthalAngle=e=>{let t=ve(e,2*Math.PI),s=p.theta;s<0&&(s+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-s);2*Math.PI-r<r&&(t<s?t+=2*Math.PI:s+=2*Math.PI),f.theta=t-s,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",re),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",re),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),d=h.NONE},this.update=(()=>{const t=new i,r=new i(0,1,0),o=(new A).setFromUnitVectors(e.up,r),a=o.clone().invert(),B=new i,u=new A,C=2*Math.PI;return function(){const A=n.object.position;o.setFromUnitVectors(e.up,r),a.copy(o).invert(),t.copy(A).sub(n.target),t.applyQuaternion(o),p.setFromVector3(t),n.autoRotate&&d===h.NONE&&v(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(p.theta+=f.theta*n.dampingFactor,p.phi+=f.phi*n.dampingFactor):(p.theta+=f.theta,p.phi+=f.phi);let G=n.minAzimuthAngle,M=n.maxAzimuthAngle;isFinite(G)&&isFinite(M)&&(G<-Math.PI?G+=C:G>Math.PI&&(G-=C),M<-Math.PI?M+=C:M>Math.PI&&(M-=C),p.theta=G<=M?Math.max(G,Math.min(M,p.theta)):p.theta>(G+M)/2?Math.max(G,p.theta):Math.min(M,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(F,n.dampingFactor):n.target.add(F),n.zoomToCursor&&L||n.object.isOrthographicCamera?p.radius=j(p.radius):p.radius=j(p.radius*E),t.setFromSpherical(p),t.applyQuaternion(a),A.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,F.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),F.set(0,0,0));let D=!1;if(n.zoomToCursor&&L){let s=null;if(n.object instanceof l&&n.object.isPerspectiveCamera){const e=t.length();s=j(e*E);const r=e-s;n.object.position.addScaledVector(J,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new i(O.x,O.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/E)),n.object.updateProjectionMatrix(),D=!0;const r=new i(O.x,O.y,0);r.unproject(n.object),n.object.position.sub(r).add(e),n.object.updateMatrixWorld(),s=t.length()}else n.zoomToCursor=!1;null!==s&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(s).add(n.object.position):(Pe.origin.copy(n.object.position),Pe.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Pe.direction))<ye?e.lookAt(n.target):(xe.setFromNormalAndCoplanarPoint(n.object.up,n.target),Pe.intersectPlane(xe,n.target))))}else n.object instanceof c&&n.object.isOrthographicCamera&&(D=1!==E,D&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/E)),n.object.updateProjectionMatrix()));return E=1,L=!1,!!(D||B.distanceToSquared(n.object.position)>m||8*(1-u.dot(n.object.quaternion))>m)&&(n.dispatchEvent(s),B.copy(n.object.position),u.copy(n.object.quaternion),D=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",oe),n.domElement.addEventListener("pointerdown",ee),n.domElement.addEventListener("pointercancel",ne),n.domElement.addEventListener("wheel",se)},this.dispose=()=>{var e,t,s,r,o,i;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",oe),null==(t=n.domElement)||t.removeEventListener("pointerdown",ee),null==(s=n.domElement)||s.removeEventListener("pointercancel",ne),null==(r=n.domElement)||r.removeEventListener("wheel",se),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",te),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",ne),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",re)};const n=this,s={type:"change"},r={type:"start"},o={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=h.NONE;const m=1e-6,p=new a,f=new a;let E=1;const F=new i,G=new B,M=new B,D=new B,I=new B,g=new B,R=new B,b=new B,H=new B,T=new B,J=new i,O=new B;let L=!1;const P=[],x={};function y(){return Math.pow(.95,n.zoomSpeed)}function v(e){n.reverseOrbit||n.reverseHorizontalOrbit?f.theta+=e:f.theta-=e}function S(e){n.reverseOrbit||n.reverseVerticalOrbit?f.phi+=e:f.phi-=e}const U=(()=>{const e=new i;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),F.add(e)}})(),K=(()=>{const e=new i;return function(t,s){!0===n.screenSpacePanning?e.setFromMatrixColumn(s,1):(e.setFromMatrixColumn(s,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),F.add(e)}})(),w=(()=>{const e=new i;return function(t,s){const r=n.domElement;if(r&&n.object instanceof l&&n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let i=e.length();i*=Math.tan(n.object.fov/2*Math.PI/180),U(2*t*i/r.clientHeight,n.object.matrix),K(2*s*i/r.clientHeight,n.object.matrix)}else r&&n.object instanceof c&&n.object.isOrthographicCamera?(U(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),K(s*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):n.enablePan=!1}})();function N(e){n.object instanceof l&&n.object.isPerspectiveCamera||n.object instanceof c&&n.object.isOrthographicCamera?E=e:n.enableZoom=!1}function _(e){N(E/e)}function Q(e){N(E*e)}function k(e){if(!n.zoomToCursor||!n.domElement)return;L=!0;const t=n.domElement.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top,o=t.width,i=t.height;O.x=s/o*2-1,O.y=-r/i*2+1,J.set(O.x,O.y,1).unproject(n.object).sub(n.object.position).normalize()}function j(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function X(e){G.set(e.clientX,e.clientY)}function Y(e){I.set(e.clientX,e.clientY)}function Z(){if(1==P.length)G.set(P[0].pageX,P[0].pageY);else{const e=.5*(P[0].pageX+P[1].pageX),t=.5*(P[0].pageY+P[1].pageY);G.set(e,t)}}function W(){if(1==P.length)I.set(P[0].pageX,P[0].pageY);else{const e=.5*(P[0].pageX+P[1].pageX),t=.5*(P[0].pageY+P[1].pageY);I.set(e,t)}}function V(){const e=P[0].pageX-P[1].pageX,t=P[0].pageY-P[1].pageY,n=Math.sqrt(e*e+t*t);b.set(0,n)}function q(e){if(1==P.length)M.set(e.pageX,e.pageY);else{const t=ae(e),n=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);M.set(n,s)}D.subVectors(M,G).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(v(2*Math.PI*D.x/t.clientHeight),S(2*Math.PI*D.y/t.clientHeight)),G.copy(M)}function z(e){if(1==P.length)g.set(e.pageX,e.pageY);else{const t=ae(e),n=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);g.set(n,s)}R.subVectors(g,I).multiplyScalar(n.panSpeed),w(R.x,R.y),I.copy(g)}function $(e){const t=ae(e),s=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(s*s+r*r);H.set(0,o),T.set(0,Math.pow(H.y/b.y,n.zoomSpeed)),_(T.y),b.copy(H)}function ee(e){var t,s;!1!==n.enabled&&(0===P.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",te),null==(s=n.domElement)||s.ownerDocument.addEventListener("pointerup",ne)),function(e){P.push(e)}(e),"touch"===e.pointerType?function(e){switch(ie(e),P.length){case 1:switch(n.touches.ONE){case C.ROTATE:if(!1===n.enableRotate)return;Z(),d=h.TOUCH_ROTATE;break;case C.PAN:if(!1===n.enablePan)return;W(),d=h.TOUCH_PAN;break;default:d=h.NONE}break;case 2:switch(n.touches.TWO){case C.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&V(),n.enablePan&&W(),d=h.TOUCH_DOLLY_PAN;break;case C.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&V(),n.enableRotate&&Z(),d=h.TOUCH_DOLLY_ROTATE;break;default:d=h.NONE}break;default:d=h.NONE}d!==h.NONE&&n.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case u.DOLLY:if(!1===n.enableZoom)return;!function(e){k(e),b.set(e.clientX,e.clientY)}(e),d=h.DOLLY;break;case u.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;Y(e),d=h.PAN}else{if(!1===n.enableRotate)return;X(e),d=h.ROTATE}break;case u.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;X(e),d=h.ROTATE}else{if(!1===n.enablePan)return;Y(e),d=h.PAN}break;default:d=h.NONE}d!==h.NONE&&n.dispatchEvent(r)}(e))}function te(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(ie(e),d){case h.TOUCH_ROTATE:if(!1===n.enableRotate)return;q(e),n.update();break;case h.TOUCH_PAN:if(!1===n.enablePan)return;z(e),n.update();break;case h.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&$(e),n.enablePan&&z(e)}(e),n.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&$(e),n.enableRotate&&q(e)}(e),n.update();break;default:d=h.NONE}}(e):function(e){if(!1===n.enabled)return;switch(d){case h.ROTATE:if(!1===n.enableRotate)return;!function(e){M.set(e.clientX,e.clientY),D.subVectors(M,G).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(v(2*Math.PI*D.x/t.clientHeight),S(2*Math.PI*D.y/t.clientHeight)),G.copy(M),n.update()}(e);break;case h.DOLLY:if(!1===n.enableZoom)return;!function(e){H.set(e.clientX,e.clientY),T.subVectors(H,b),T.y>0?_(y()):T.y<0&&Q(y()),b.copy(H),n.update()}(e);break;case h.PAN:if(!1===n.enablePan)return;!function(e){g.set(e.clientX,e.clientY),R.subVectors(g,I).multiplyScalar(n.panSpeed),w(R.x,R.y),I.copy(g),n.update()}(e)}}(e))}function ne(e){var t,s,r;!function(e){delete x[e.pointerId];for(let t=0;t<P.length;t++)if(P[t].pointerId==e.pointerId)return void P.splice(t,1)}(e),0===P.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointermove",te),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointerup",ne)),n.dispatchEvent(o),d=h.NONE}function se(e){!1===n.enabled||!1===n.enableZoom||d!==h.NONE&&d!==h.ROTATE||(e.preventDefault(),n.dispatchEvent(r),function(e){k(e),e.deltaY<0?Q(y()):e.deltaY>0&&_(y()),n.update()}(e),n.dispatchEvent(o))}function re(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:w(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:w(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:w(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:w(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function oe(e){!1!==n.enabled&&e.preventDefault()}function ie(e){let t=x[e.pointerId];void 0===t&&(t=new B,x[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ae(e){const t=e.pointerId===P[0].pointerId?P[1]:P[0];return x[t.pointerId]}this.dollyIn=(e=y())=>{Q(e),n.update()},this.dollyOut=(e=y())=>{_(e),n.update()},this.getScale=()=>E,this.setScale=e=>{N(e),n.update()},this.getZoomScale=()=>y(),void 0!==t&&this.connect(t),this.update()}};function Ue(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let s=0,r=e.length;s<r;s++)t+=String.fromCharCode(e[s]);try{return decodeURIComponent(escape(t))}catch(n){return t}}const Ke="srgb",we="srgb-linear";class Ne extends m{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new Ye(e)}),this.register(function(e){return new Ze(e)}),this.register(function(e){return new st(e)}),this.register(function(e){return new rt(e)}),this.register(function(e){return new ot(e)}),this.register(function(e){return new Ve(e)}),this.register(function(e){return new qe(e)}),this.register(function(e){return new ze(e)}),this.register(function(e){return new $e(e)}),this.register(function(e){return new Xe(e)}),this.register(function(e){return new et(e)}),this.register(function(e){return new We(e)}),this.register(function(e){return new nt(e)}),this.register(function(e){return new tt(e)}),this.register(function(e){return new ke(e)}),this.register(function(e){return new it(e)}),this.register(function(e){return new at(e)})}load(e,t,n,s){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=p.extractUrlBase(e);o=p.resolveURL(t,this.path)}else o=p.extractUrlBase(e);this.manager.itemStart(e);const i=function(t){s&&s(t),r.manager.itemError(e),r.manager.itemEnd(e)},a=new f(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{r.parse(n,o,function(n){t(n),r.manager.itemEnd(e)},i)}catch(s){i(s)}},n,i)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const o={},i={};if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(Ue(new Uint8Array(e.slice(0,4)))===At){try{o[Qe.KHR_BINARY_GLTF]=new lt(e)}catch(A){return void(s&&s(A))}r=JSON.parse(o[Qe.KHR_BINARY_GLTF].content)}else r=JSON.parse(Ue(new Uint8Array(e)))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const a=new St(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](a);e.name,i[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let c=0;c<r.extensionsUsed.length;++c){const e=r.extensionsUsed[c],t=r.extensionsRequired||[];switch(e){case Qe.KHR_MATERIALS_UNLIT:o[e]=new je;break;case Qe.KHR_DRACO_MESH_COMPRESSION:o[e]=new ut(r,this.dracoLoader);break;case Qe.KHR_TEXTURE_TRANSFORM:o[e]=new Ct;break;case Qe.KHR_MESH_QUANTIZATION:o[e]=new ht;break;default:t.indexOf(e)>=0&&i[e]}}a.setExtensions(o),a.setPlugins(i),a.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,r){n.parse(e,t,s,r)})}}function _e(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Qe={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ke{constructor(e){this.parser=e,this.name=Qe.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let i;const a=new F(16777215);void 0!==o.color&&a.setRGB(o.color[0],o.color[1],o.color[2],we);const A=void 0!==o.range?o.range:0;switch(o.type){case"directional":i=new D(a),i.target.position.set(0,0,-1),i.add(i.target);break;case"point":i=new M(a),i.distance=A;break;case"spot":i=new G(a),i.distance=A,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,Ot(i,o),void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),s=Promise.resolve(i),t.cache.add(n,s),s}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],r=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return n._getNodeRef(t.cache,r,e)})}}class je{constructor(){this.name=Qe.KHR_MATERIALS_UNLIT}getMaterialType(){return X}extendParams(e,t,n){const s=[];e.color=new F(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],we),e.opacity=t[3]}void 0!==r.baseColorTexture&&s.push(n.assignTexture(e,"map",r.baseColorTexture,Ke))}return Promise.all(s)}}class Xe{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Ye{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new B(e,e)}return Promise.all(r)}}class Ze{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name];return t.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class We{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Ve{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new F(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],we)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ke)),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class qe{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class ze{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const i=o.attenuationColor||[1,1,1];return t.attenuationColor=(new F).setRGB(i[0],i[1],i[2],we),Promise.all(r)}}class $e{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class et{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const i=o.specularColorFactor||[1,1,1];return t.specularColor=(new F).setRGB(i[0],i[1],i[2],we),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Ke)),Promise.all(r)}}class tt{constructor(e){this.parser=e,this.name=Qe.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class nt{constructor(e){this.parser=e,this.name=Qe.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?E:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class st{constructor(e){this.parser=e,this.name=Qe.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class rt{constructor(e){this.parser=e,this.name=Qe.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],i=s.images[o.source];let a=n.textureLoader;if(i.uri){const e=n.options.manager.getHandler(i.uri);null!==e&&(a=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,o.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class ot{constructor(e){this.parser=e,this.name=Qe.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],i=s.images[o.source];let a=n.textureLoader;if(i.uri){const e=n.options.manager.getHandler(i.uri);null!==e&&(a=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,o.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class it{constructor(e){this.name=Qe.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],s=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(t){const n=e.byteOffset||0,s=e.byteLength||0,o=e.count,i=e.byteStride,a=new Uint8Array(t,n,s);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,i,a,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){const t=new ArrayBuffer(o*i);return r.decodeGltfBuffer(new Uint8Array(t),o,i,a,e.mode,e.filter),t})})}return null}}class at{constructor(e){this.name=Qe.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const s=t.meshes[n.mesh];for(const i of s.primitives)if(i.mode!==ft.TRIANGLES&&i.mode!==ft.TRIANGLE_STRIP&&i.mode!==ft.TRIANGLE_FAN&&void 0!==i.mode)return null;const r=n.extensions[this.name].attributes,o=[],a={};for(const i in r)o.push(this.parser.getDependency("accessor",r[i]).then(e=>(a[i]=e,a[i])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],s=e[0].count,r=[];for(const o of n){const e=new I,t=new i,n=new A,c=new i(1,1,1),B=new g(o.geometry,o.material,s);for(let r=0;r<s;r++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,r),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,r),a.SCALE&&c.fromBufferAttribute(a.SCALE,r),B.setMatrixAt(r,e.compose(t,n,c));for(const s in a)if("_COLOR_0"===s){const e=a[s];B.instanceColor=new R(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==s&&"ROTATION"!==s&&"SCALE"!==s&&o.geometry.setAttribute(s,a[s]);b.prototype.copy.call(B,o),this.parser.assignFinalMaterial(B),r.push(B)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const At="glTF",ct=1313821514,Bt=5130562;class lt{constructor(e){this.name=Qe.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Ue(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==At)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,s=new DataView(e,12);let r=0;for(;r<n;){const t=s.getUint32(r,!0);r+=4;const n=s.getUint32(r,!0);if(r+=4,n===ct){const n=new Uint8Array(e,12+r,t);this.content=Ue(n)}else if(n===Bt){const n=12+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ut{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Qe.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},a={},A={};for(const c in o){const e=Dt[c]||c.toLowerCase();i[e]=o[c]}for(const c in e.attributes){const t=Dt[c]||c.toLowerCase();if(void 0!==o[c]){const s=n.accessors[e.attributes[c]],r=Et[s.componentType];A[t]=r.name,a[t]=!0===s.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t,n){s.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],s=a[t];void 0!==s&&(n.normalized=s)}t(e)},i,A,we,n)})})}}class Ct{constructor(){this.name=Qe.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class ht{constructor(){this.name=Qe.KHR_MESH_QUANTIZATION}}class dt extends he{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,i=this.valueSize,a=2*i,A=3*i,c=s-t,B=(n-t)/c,l=B*B,u=l*B,C=e*A,h=C-A,d=-2*u+3*l,m=u-l,p=1-d,f=m-l+B;for(let E=0;E!==i;E++){const e=o[h+E+i],t=o[h+E+a]*c,n=o[C+E+i],s=o[C+E]*c;r[E]=p*e+f*t+d*n+m*s}return r}}const mt=new A;class pt extends dt{interpolate_(e,t,n,s){const r=super.interpolate_(e,t,n,s);return mt.fromArray(r).normalize().toArray(r),r}}const ft={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Et={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ft={9728:S,9729:v,9984:y,9985:x,9986:P,9987:L},Gt={33071:w,33648:K,10497:U},Mt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Dt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Re>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},It={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},gt={CUBICSPLINE:void 0,LINEAR:ae,STEP:ie},Rt="OPAQUE",bt="MASK",Ht="BLEND";function Tt(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new k({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ce})),e.DefaultMaterial}function Jt(e,t,n){for(const s in n.extensions)void 0===e[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=n.extensions[s])}function Ot(e,t){void 0!==t.extras&&"object"==typeof t.extras&&Object.assign(e.userData,t.extras)}function Lt(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,s=t.weights.length;n<s;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,s=n.length;t<s;t++)e.morphTargetDictionary[n[t]]=t}}}function Pt(e){let t;const n=e.extensions&&e.extensions[Qe.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+xt(n.attributes):e.indices+":"+xt(e.attributes)+":"+e.mode,void 0!==e.targets)for(let s=0,r=e.targets.length;s<r;s++)t+=":"+xt(e.targets[s]);return t}function xt(e){let t="";const n=Object.keys(e).sort();for(let s=0,r=n.length;s<r;s++)t+=n[s]+":"+e[n[s]]+";";return t}function yt(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const vt=new I;class St{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new _e,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||s&&r<98?this.textureLoader=new H(this.options.manager):this.textureLoader=new T(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new f(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const o={scene:t[0][s.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:s.asset,parser:n,userData:{}};return Jt(r,o,s),Ot(o,s),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(o)})).then(function(){for(const e of o.scenes)e.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const n=t[s].joints;for(let t=0,s=n.length;t<s;t++)e[n[t]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const t=e[s];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[s,o]of e.children.entries())r(o,t.children[s])};return r(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":s=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e)}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(s.map(function(t,s){return n.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Qe.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(e,r){n.load(p.resolveURL(t.uri,s.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,s=t.byteOffset||0;return e.slice(s,s+n)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse){const e=Mt[s.type],t=Et[s.componentType],n=!0===s.normalized,r=new t(s.count*e);return Promise.resolve(new J(r,e,n))}const r=[];return void 0!==s.bufferView?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(e){const r=e[0],o=Mt[s.type],i=Et[s.componentType],a=i.BYTES_PER_ELEMENT,A=a*o,c=s.byteOffset||0,B=void 0!==s.bufferView?n.bufferViews[s.bufferView].byteStride:void 0,l=!0===s.normalized;let u,C;if(B&&B!==A){const e=Math.floor(c/B),n="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count;let A=t.cache.get(n);A||(u=new i(r,e*B,s.count*B/a),A=new O(u,B/a),t.cache.add(n,A)),C=new Ae(A,o,c%B/a,l)}else u=null===r?new i(s.count*o):new i(r,c,s.count*o),C=new J(u,o,l);if(void 0!==s.sparse){const t=Mt.SCALAR,n=Et[s.sparse.indices.componentType],a=s.sparse.indices.byteOffset||0,A=s.sparse.values.byteOffset||0,c=new n(e[1],a,s.sparse.count*t),B=new i(e[2],A,s.sparse.count*o);null!==r&&(C=new J(C.array.slice(),C.itemSize,C.normalized));for(let e=0,s=c.length;e<s;e++){const t=c[e];if(C.setX(t,B[e*o]),o>=2&&C.setY(t,B[e*o+1]),o>=3&&C.setZ(t,B[e*o+2]),o>=4&&C.setW(t,B[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return C})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,r=t.images[s];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const s=this,r=this.json,o=r.textures[e],i=r.images[t],a=(i.uri||i.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const A=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=o.name||i.name||"",""===t.name&&"string"==typeof i.uri&&!1===i.uri.startsWith("data:image/")&&(t.name=i.uri);const n=(r.samplers||{})[o.sampler]||{};return t.magFilter=Ft[n.magFilter]||v,t.minFilter=Ft[n.minFilter]||L,t.wrapS=Gt[n.wrapS]||U,t.wrapT=Gt[n.wrapT]||U,s.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[a]=A,A}loadImageSource(e,t){const n=this,s=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const o=s.images[e],i=self.URL||self.webkitURL;let a=o.uri||"",A=!1;if(void 0!==o.bufferView)a=n.getDependency("bufferView",o.bufferView).then(function(e){A=!0;const t=new Blob([e],{type:o.mimeType});return a=i.createObjectURL(t),a});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(a).then(function(e){return new Promise(function(n,s){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new ce(e);t.needsUpdate=!0,n(t)}),t.load(p.resolveURL(e,r.path),o,void 0,s)})}).then(function(e){var t;return!0===A&&i.revokeObjectURL(a),Ot(e,o),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw e});return this.sourceCache[e]=c,c}assignTexture(e,t,n,s){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),r.extensions[Qe.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[Qe.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[Qe.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==s&&("number"==typeof s&&(s=3001===s?Ke:we),"colorSpace"in o?o.colorSpace=s:o.encoding=s===Ke?3001:3e3),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new N,_.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Q,_.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(s||r||o){let e="ClonedMaterial:"+n.uuid+":";s&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),s&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return k}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let o;const i={},a=[];if((r.extensions||{})[Qe.KHR_MATERIALS_UNLIT]){const e=s[Qe.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),a.push(e.extendParams(i,r,t))}else{const n=r.pbrMetallicRoughness||{};if(i.color=new F(1,1,1),i.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;i.color.setRGB(e[0],e[1],e[2],we),i.opacity=e[3]}void 0!==n.baseColorTexture&&a.push(t.assignTexture(i,"map",n.baseColorTexture,Ke)),i.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,i.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(a.push(t.assignTexture(i,"metalnessMap",n.metallicRoughnessTexture)),a.push(t.assignTexture(i,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),a.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,i)})))}!0===r.doubleSided&&(i.side=j);const A=r.alphaMode||Rt;if(A===Ht?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,A===bt&&(i.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==X&&(a.push(t.assignTexture(i,"normalMap",r.normalTexture)),i.normalScale=new B(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;i.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==X&&(a.push(t.assignTexture(i,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(i.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==X){const e=r.emissiveFactor;i.emissive=(new F).setRGB(e[0],e[1],e[2],we)}return void 0!==r.emissiveTexture&&o!==X&&a.push(t.assignTexture(i,"emissiveMap",r.emissiveTexture,Ke)),Promise.all(a).then(function(){const n=new o(i);return r.name&&(n.name=r.name),Ot(n,r),t.associations.set(n,{materials:e}),r.extensions&&Jt(s,n,r),n})}createUniqueName(e){const t=Y.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(e){return n[Qe.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return Ut(n,e,t)})}const o=[];for(let i=0,a=e.length;i<a;i++){const n=e[i],a=Pt(n),A=s[a];if(A)o.push(A.promise);else{let e;e=n.extensions&&n.extensions[Qe.KHR_DRACO_MESH_COMPRESSION]?r(n):Ut(new Z,n,t),s[a]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,s=this.extensions,i=n.meshes[e],a=i.primitives,A=[];for(let r=0,o=a.length;r<o;r++){const e=void 0===a[r].material?Tt(this.cache):this.getDependency("material",a[r].material);A.push(e)}return A.push(t.loadGeometries(a)),Promise.all(A).then(function(n){const A=n.slice(0,n.length-1),c=n[n.length-1],B=[];for(let u=0,C=c.length;u<C;u++){const n=c[u],l=a[u];let C;const h=A[u];if(l.mode===ft.TRIANGLES||l.mode===ft.TRIANGLE_STRIP||l.mode===ft.TRIANGLE_FAN||void 0===l.mode)C=!0===i.isSkinnedMesh?new W(n,h):new V(n,h),!0===C.isSkinnedMesh&&C.normalizeSkinWeights(),l.mode===ft.TRIANGLE_STRIP?C.geometry=be(C.geometry,o):l.mode===ft.TRIANGLE_FAN&&(C.geometry=be(C.geometry,r));else if(l.mode===ft.LINES)C=new q(n,h);else if(l.mode===ft.LINE_STRIP)C=new z(n,h);else if(l.mode===ft.LINE_LOOP)C=new $(n,h);else{if(l.mode!==ft.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+l.mode);C=new ee(n,h)}Object.keys(C.geometry.morphAttributes).length>0&&Lt(C,i),C.name=t.createUniqueName(i.name||"mesh_"+e),Ot(C,i),l.extensions&&Jt(s,C,l),t.assignFinalMaterial(C),B.push(C)}for(let s=0,r=B.length;s<r;s++)t.associations.set(B[s],{meshes:e,primitives:s});if(1===B.length)return i.extensions&&Jt(s,B[0],i),B[0];const l=new te;i.extensions&&Jt(s,l,i),t.associations.set(l,{meshes:e});for(let e=0,t=B.length;e<t;e++)l.add(B[e]);return l})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(s)return"perspective"===n.type?t=new l(ne.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===n.type&&(t=new c(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ot(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,r=t.joints.length;s<r;s++)n.push(this._loadNodeShallow(t.joints[s]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const t=e.pop(),n=e,s=[],r=[];for(let o=0,i=n.length;o<i;o++){const e=n[o];if(e){s.push(e);const n=new I;null!==t&&n.fromArray(t.array,16*o),r.push(n)}}return new se(s,r)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],i=[],a=[],A=[],c=[];for(let B=0,l=s.channels.length;B<l;B++){const e=s.channels[B],t=s.samplers[e.sampler],n=e.target,r=n.node,l=void 0!==s.parameters?s.parameters[t.input]:t.input,u=void 0!==s.parameters?s.parameters[t.output]:t.output;void 0!==n.node&&(o.push(this.getDependency("node",r)),i.push(this.getDependency("accessor",l)),a.push(this.getDependency("accessor",u)),A.push(t),c.push(n))}return Promise.all([Promise.all(o),Promise.all(i),Promise.all(a),Promise.all(A),Promise.all(c)]).then(function(e){const t=e[0],s=e[1],o=e[2],i=e[3],a=e[4],A=[];for(let r=0,c=t.length;r<c;r++){const e=t[r],c=s[r],B=o[r],l=i[r],u=a[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const C=n._createAnimationTracks(e,c,B,l,u);if(C)for(let t=0;t<C.length;t++)A.push(C[t])}return new re(r,void 0,A)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return void 0===s.mesh?null:n.getDependency("mesh",s.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=s.weights.length;t<n;t++)e.morphTargetInfluences[t]=s.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],s=t._loadNodeShallow(e),r=[],o=n.children||[];for(let a=0,A=o.length;a<A;a++)r.push(t.getDependency("node",o[a]));const i=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([s,Promise.all(r),i]).then(function(e){const t=e[0],n=e[1],s=e[2];null!==s&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(s,vt)});for(let r=0,o=n.length;r<o;r++)t.add(n[r]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",i=[],a=s._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return a&&i.push(a),void 0!==r.camera&&i.push(s.getDependency("camera",r.camera).then(function(e){return s._getNodeRef(s.cameraCache,r.camera,e)})),s._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){i.push(e)}),this.nodeCache[e]=Promise.all(i).then(function(t){let i;if(i=!0===r.isBone?new oe:t.length>1?new te:1===t.length?t[0]:new b,i!==t[0])for(let e=0,n=t.length;e<n;e++)i.add(t[e]);if(r.name&&(i.userData.name=r.name,i.name=o),Ot(i,r),r.extensions&&Jt(n,i,r),void 0!==r.matrix){const e=new I;e.fromArray(r.matrix),i.applyMatrix4(e)}else void 0!==r.translation&&i.position.fromArray(r.translation),void 0!==r.rotation&&i.quaternion.fromArray(r.rotation),void 0!==r.scale&&i.scale.fromArray(r.scale);return s.associations.has(i)||s.associations.set(i,{}),s.associations.get(i).nodes=e,i}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,r=new te;n.name&&(r.name=s.createUniqueName(n.name)),Ot(r,n),n.extensions&&Jt(t,r,n);const o=n.nodes||[],i=[];for(let a=0,A=o.length;a<A;a++)i.push(s.getDependency("node",o[a]));return Promise.all(i).then(function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return s.associations=(e=>{const t=new Map;for(const[n,r]of s.associations)(n instanceof _||n instanceof ce)&&t.set(n,r);return e.traverse(e=>{const n=s.associations.get(e);null!=n&&t.set(e,n)}),t})(r),r})}_createAnimationTracks(e,t,n,s,r){const o=[],i=e.name?e.name:e.uuid,a=[];let A;switch(It[r.path]===It.weights?e.traverse(function(e){e.morphTargetInfluences&&a.push(e.name?e.name:e.uuid)}):a.push(i),It[r.path]){case It.weights:A=le;break;case It.rotation:A=ue;break;case It.position:case It.scale:A=Be;break;default:if(1===n.itemSize)A=le;else A=Be}const c=void 0!==s.interpolation?gt[s.interpolation]:ae,B=this._getArrayFromAccessor(n);for(let l=0,u=a.length;l<u;l++){const e=new A(a[l]+"."+It[r.path],t.array,B,c);"CUBICSPLINE"===s.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=yt(t.constructor),n=new Float32Array(t.length);for(let s=0,r=t.length;s<r;s++)n[s]=t[s]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof ue?pt:dt)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Ut(e,t,n){const s=t.attributes,r=[];function o(t,s){return n.getDependency("accessor",t).then(function(t){e.setAttribute(s,t)})}for(const i in s){const t=Dt[i]||i.toLowerCase();t in e.attributes||r.push(o(s[i],t))}if(void 0!==t.indices&&!e.index){const s=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(s)}return Ot(e,t),function(e,t,n){const s=t.attributes,r=new de;if(void 0===s.POSITION)return;{const e=n.json.accessors[s.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return;if(r.set(new i(t[0],t[1],t[2]),new i(o[0],o[1],o[2])),e.normalized){const t=yt(Et[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new i,t=new i;for(let s=0,r=o.length;s<r;s++){const r=o[s];if(void 0!==r.POSITION){const s=n.json.accessors[r.POSITION],o=s.min,i=s.max;if(void 0!==o&&void 0!==i){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(i[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(i[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(i[2]))),s.normalized){const e=yt(Et[s.componentType]);t.multiplyScalar(e)}e.max(t)}}}r.expandByVector(e)}e.boundingBox=r;const a=new me;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){let s=!1,r=!1,o=!1;for(let c=0,B=t.length;c<B;c++){const e=t[c];if(void 0!==e.POSITION&&(s=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(o=!0),s&&r&&o)break}if(!s&&!r&&!o)return Promise.resolve(e);const i=[],a=[],A=[];for(let c=0,B=t.length;c<B;c++){const B=t[c];if(s){const t=void 0!==B.POSITION?n.getDependency("accessor",B.POSITION):e.attributes.position;i.push(t)}if(r){const t=void 0!==B.NORMAL?n.getDependency("accessor",B.NORMAL):e.attributes.normal;a.push(t)}if(o){const t=void 0!==B.COLOR_0?n.getDependency("accessor",B.COLOR_0):e.attributes.color;A.push(t)}}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(A)]).then(function(t){const n=t[0],i=t[1],a=t[2];return s&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=i),o&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}const Kt=new WeakMap;class wt extends m{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const r=new f(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const a in t.attributeTypes){const e=t.attributeTypes[a];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[a]=e.name)}const n=JSON.stringify(t);if(Kt.has(e)){const t=Kt.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,i=this._getWorker(r,o).then(n=>(s=n,new Promise((n,o)=>{s._callbacks[r]={resolve:n,reject:o},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return i.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),Kt.set(e,{key:n,promise:i}),i}_createGeometry(e){const t=new Z;e.index&&t.setIndex(new J(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],r=s.name,o=s.array,i=s.itemSize;t.setAttribute(r,new J(o,i))}return t}_loadLibrary(e,t){const n=new f(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,s)=>{n.load(e,t,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const s=Nt.toString(),r=["/* draco decoder */",n,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n)}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Nt(){let e,t;function n(e,t,n,s,r,o){const i=o.num_components(),a=n.num_points()*i,A=a*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),B=e._malloc(A);t.GetAttributeDataArrayForAllPoints(n,o,c,A,B);const l=new r(e.HEAPF32.buffer,B,a).slice();return e._free(B),{name:s,array:l,itemSize:i}}onmessage=function(s){const r=s.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":const s=r.buffer,o=r.taskConfig;t.then(e=>{const t=e.draco,i=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(s),s.byteLength);try{const e=function(e,t,s,r){const o=r.attributeIDs,i=r.attributeTypes;let a,A;const c=t.GetEncodedGeometryType(s);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,A=t.DecodeBufferToMesh(s,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,A=t.DecodeBufferToPointCloud(s,a)}if(!A.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+A.error_msg());const B={index:null,attributes:[]};for(const l in o){const s=self[i[l]];let A,c;if(r.useUniqueIDs)c=o[l],A=t.GetAttributeByUniqueId(a,c);else{if(c=t.GetAttributeId(a,e[o[l]]),-1===c)continue;A=t.GetAttribute(a,c)}B.attributes.push(n(e,t,a,l,s,A))}c===e.TRIANGULAR_MESH&&(B.index=function(e,t,n){const s=n.num_faces(),r=3*s,o=4*r,i=e._malloc(o);t.GetTrianglesUInt32Array(n,o,i);const a=new Uint32Array(e.HEAPF32.buffer,i,r).slice();return e._free(i),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),B}(t,i,a,o),s=e.attributes.map(e=>e.array.buffer);e.index&&s.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},s)}catch(A){self.postMessage({type:"error",id:r.id,error:A.message})}finally{t.destroy(a),t.destroy(i)}})}}}let _t;const Qt=()=>{if(_t)return _t;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let n,s="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(s="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");const r=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const s=e.charCodeAt(t);n[t]=s>96?s-71:s>64?s-65:s>47?s+4:s>46?63:62}let s=0;for(let r=0;r<e.length;++r)n[s++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,s)}(s),{}).then(e=>{n=e.instance,n.exports.__wasm_call_ctors()});function o(e,t,s,r,o,i){const a=n.exports.sbrk,A=s+3&-4,c=a(A*r),B=a(o.length),l=new Uint8Array(n.exports.memory.buffer);l.set(o,B);const u=e(c,s,r,B,o.length);if(0===u&&i&&i(c,A,r),t.set(l.subarray(c,c+s*r)),a(c-a(0)),0!==u)throw new Error(`Malformed buffer data: ${u}`)}const i={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},a={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return _t={ready:r,supported:!0,decodeVertexBuffer(e,t,s,r,a){o(n.exports.meshopt_decodeVertexBuffer,e,t,s,r,n.exports[i[a]])},decodeIndexBuffer(e,t,s,r){o(n.exports.meshopt_decodeIndexBuffer,e,t,s,r)},decodeIndexSequence(e,t,s,r){o(n.exports.meshopt_decodeIndexSequence,e,t,s,r)},decodeGltfBuffer(e,t,s,r,A,c){o(n.exports[a[A]],e,t,s,r,n.exports[i[c]])}},_t};let kt=null,jt="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Xt(e=!0,t=!0,n){return s=>{n&&n(s),e&&(kt||(kt=new wt),kt.setDecoderPath("string"==typeof e?e:jt),s.setDRACOLoader(kt)),t&&s.setMeshoptDecoder(Qt())}}const Yt=(e,t,n,s)=>pe(Ne,e,Xt(t,n,s));Yt.preload=(e,t,n,s)=>pe.preload(Ne,e,Xt(t,n,s)),Yt.clear=e=>pe.clear(Ne,e),Yt.setDecoderPath=e=>{jt=e};const Zt=e.forwardRef(({envMap:t,resolution:n=256,frames:s=1/0,makeDefault:r,children:o,...i},a)=>{const A=fe(({set:e})=>e),c=fe(({camera:e})=>e),B=fe(({size:e})=>e),l=e.useRef(null);e.useImperativeHandle(a,()=>l.current,[]);const u=e.useRef(null),C=function(t,n,s){const r=fe(e=>e.size),o=fe(e=>e.viewport),i="number"==typeof t?t:r.width*o.dpr,a=r.height*o.dpr,A=("number"==typeof t?s:t)||{},{samples:c=0,depth:B,...l}=A,u=null!=B?B:A.depthBuffer,C=e.useMemo(()=>{const e=new Ee(i,a,{minFilter:v,magFilter:v,type:Fe,...l});return u&&(e.depthTexture=new Ge(i,a,Me)),e.samples=c,e},[]);return e.useLayoutEffect(()=>{C.setSize(i,a),c&&(C.samples=c)},[c,C,i,a]),e.useEffect(()=>()=>C.dispose(),[]),C}(n);e.useLayoutEffect(()=>{i.manual||(l.current.aspect=B.width/B.height)},[B,i]),e.useLayoutEffect(()=>{l.current.updateProjectionMatrix()});let h=0,d=null;const m="function"==typeof o;return De(e=>{m&&(s===1/0||h<s)&&(u.current.visible=!1,e.gl.setRenderTarget(C),d=e.scene.background,t&&(e.scene.background=t),e.gl.render(e.scene,l.current),e.scene.background=d,e.gl.setRenderTarget(null),u.current.visible=!0,h++)}),e.useLayoutEffect(()=>{if(r){const e=c;return A(()=>({camera:l.current})),()=>A(()=>({camera:e}))}},[l,r,A]),e.createElement(e.Fragment,null,e.createElement("perspectiveCamera",Ie({ref:l},i),!m&&o),e.createElement("group",{ref:u},m&&o(C.texture)))}),Wt=e.forwardRef(({makeDefault:t,camera:n,regress:s,domElement:r,enableDamping:o=!0,keyEvents:i=!1,onChange:a,onStart:A,onEnd:c,...B},l)=>{const u=fe(e=>e.invalidate),C=fe(e=>e.camera),h=fe(e=>e.gl),d=fe(e=>e.events),m=fe(e=>e.setEvents),p=fe(e=>e.set),f=fe(e=>e.get),E=fe(e=>e.performance),F=n||C,G=r||d.connected||h.domElement,M=e.useMemo(()=>new Se(F),[F]);return De(()=>{M.enabled&&M.update()},-1),e.useEffect(()=>(i&&M.connect(!0===i?G:i),M.connect(G),()=>{M.dispose()}),[i,G,s,M,u]),e.useEffect(()=>{const e=e=>{u(),s&&E.regress(),a&&a(e)},t=e=>{A&&A(e)},n=e=>{c&&c(e)};return M.addEventListener("change",e),M.addEventListener("start",t),M.addEventListener("end",n),()=>{M.removeEventListener("start",t),M.removeEventListener("end",n),M.removeEventListener("change",e)}},[a,A,c,M,u,m]),e.useEffect(()=>{if(t){const e=f().controls;return p({controls:M}),()=>p({controls:e})}},[t,M]),e.createElement("primitive",Ie({ref:l,object:M,enableDamping:o},B))}),Vt=new WeakMap;const qt=({orbitRef:n,rotateSensitivity:s=.008,panSensitivity:r=.002,zoomSensitivity:o=.01})=>{const a=e.useRef(null),A=e.useRef({x:0,y:0}),[,c]=t.useState(!1);e.useEffect(()=>{const e=setTimeout(()=>c(!0),200);return()=>clearTimeout(e)},[]);const B=e.useCallback(()=>{const e=n.current;return e&&function(e){if(!Vt.has(e)){const{target:t,object:n}=e;Vt.set(e,{target:[t.x,t.y,t.z],position:[n.position.x,n.position.y,n.position.z]})}}(e),e},[n]),l=e.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),a.current=e,A.current={x:t.clientX,y:t.clientY},t.target.setPointerCapture(t.pointerId)},[]),u=e.useCallback(e=>{if(!a.current)return;e.preventDefault(),e.stopPropagation();const t=e.clientX-A.current.x,n=e.clientY-A.current.y;A.current={x:e.clientX,y:e.clientY};const c=B();if(c)switch(a.current){case"rotate":c.setAzimuthalAngle(c.getAzimuthalAngle()-t*s),c.setPolarAngle(c.getPolarAngle()+n*s),c.update();break;case"pan":{const e=c.object,s=new i;e.getWorldDirection(s);const o=(new i).crossVectors(e.up,s).normalize(),a=(new i).crossVectors(s,o).normalize(),A=o.multiplyScalar(t*r).addScaledVector(a,n*r);c.target.add(A),e.position.add(A),c.update();break}case"zoom":{const e=c.object.position.clone().sub(c.target).normalize();c.object.position.addScaledVector(e,n*o),c.update();break}}},[B,s,r,o]),C=e.useCallback(e=>{a.current&&(e.target.releasePointerCapture(e.pointerId),a.current=null)},[]),h=e.useCallback(()=>{const e=B();if(!e)return;const t=Vt.get(e);t&&(e.target.set(...t.target),e.object.position.set(...t.position),e.update())},[B]),d="w-10 h-10 flex items-center justify-center rounded bg-black/50 hover:bg-white/20 text-white/70 hover:text-white text-[10px] leading-tight select-none cursor-grab active:cursor-grabbing border border-white/10 transition-colors touch-none";return ge.jsxDEV("div",{className:"absolute bottom-1 right-1 flex flex-col gap-0.5 z-10 pointer-events-auto",onPointerDown:e=>e.stopPropagation(),children:[ge.jsxDEV("div",{className:d,title:"Drag to rotate",onPointerDown:e=>l("rotate",e),onPointerMove:u,onPointerUp:C,onPointerCancel:C,children:["",ge.jsxDEV("br",{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:145,columnNumber:10},void 0),"Orbit"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:138,columnNumber:7},void 0),ge.jsxDEV("div",{className:d,title:"Drag to pan",onPointerDown:e=>l("pan",e),onPointerMove:u,onPointerUp:C,onPointerCancel:C,children:["",ge.jsxDEV("br",{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:153,columnNumber:9},void 0),"Pan"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:146,columnNumber:7},void 0),ge.jsxDEV("div",{className:d,title:"Drag up/down to zoom",onPointerDown:e=>l("zoom",e),onPointerMove:u,onPointerUp:C,onPointerCancel:C,children:["",ge.jsxDEV("br",{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:161,columnNumber:10},void 0),"Zoom"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:154,columnNumber:7},void 0),ge.jsxDEV("button",{className:"w-10 h-6 flex items-center justify-center rounded bg-black/50 hover:bg-white/20 text-white/70 hover:text-white text-[10px] select-none cursor-pointer border border-white/10 transition-colors",title:"Reset camera",onClick:h,children:" Reset"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:162,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/dj/DJ3DCameraControls.tsx",lineNumber:134,columnNumber:5},void 0)};export{qt as C,Wt as O,Zt as P,Yt as u};
