const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-6ZwkBAMb.js","assets/webworkerAll-CX9i_uby.js","assets/index-zx6LJBPK.js","assets/vendor-react-DkDaD07v.js","assets/vendor-utils-XMmR-oGw.js","assets/vendor-tone-CADp_hfL.js","assets/vendor-ui-uomqNFY-.js","assets/index-Cnoi0D0R.css","assets/react-three-fiber.esm-DUbY8J_y.js","assets/DJKeyboardHandler-Dzr29xNs.js","assets/parseModuleToSong-BCo4MrbT.js","assets/ArrangementKeyboardShortcuts-DvPf7hcZ.js","assets/VJView-BexYXGXr.js","assets/WebGPURenderer-BFympvxU.js","assets/BufferResource-BWwoPS2R.js","assets/RenderTargetSystem-BARHEHRq.js","assets/WebGLRenderer-15owv4_n.js","assets/CanvasRenderer-jpCNdCRU.js","assets/DebugRenderer-DjjpUhQr.js"])))=>i.map(i=>d[i]);
import{_ as e,aG as t,j as i,ds as r,dt as n,du as o,bA as s,dv as a,t as l,bB as c,bE as A,b as u,dw as d,aQ as h,aF as g,s as f,w as p,dx as m,y as x,c as E,dy as C,dz as B,v as b,dA as I,x as y,dB as v,dC as w,dD as Q,dE as D,dF as N,dG as k,u as S,dH as P,dI as M,dJ as V,dK as _,av as L,bp as R,dL as U,dM as T,dN as O,dO as F,cu as G,dP as j,dQ as H,dR as X,dS as z,dT as J,dU as W,dV as K,dW as Y,ax as q,aw as Z,dX as $,dY as ee,dZ as te,d_ as ie,d$ as re,aR as ne,cX as oe,r as se}from"./index-zx6LJBPK.js";import{r as ae,c as le,R as ce}from"./vendor-utils-XMmR-oGw.js";import{aK as Ae,aP as ue,aQ as de}from"./react-three-fiber.esm-DUbY8J_y.js";import{g as he,r as ge}from"./vendor-react-DkDaD07v.js";import{now as fe}from"./vendor-tone-CADp_hfL.js";import{aZ as pe,V as me,aM as xe,C as Ee,c as Ce,l as Be}from"./vendor-ui-uomqNFY-.js";import{D as be,o as Ie,n as ye,m as ve,l as we,C as Qe,B as De,G as Ne,H as ke,I as Se,E as Pe,F as Me}from"./DJKeyboardHandler-Dzr29xNs.js";import{u as Ve}from"./ArrangementKeyboardShortcuts-DvPf7hcZ.js";import{V as _e}from"./VJView-BexYXGXr.js";var Le=(e=>(e.Application="application",e.WebGLPipes="webgl-pipes",e.WebGLPipesAdaptor="webgl-pipes-adaptor",e.WebGLSystem="webgl-system",e.WebGPUPipes="webgpu-pipes",e.WebGPUPipesAdaptor="webgpu-pipes-adaptor",e.WebGPUSystem="webgpu-system",e.CanvasSystem="canvas-system",e.CanvasPipesAdaptor="canvas-pipes-adaptor",e.CanvasPipes="canvas-pipes",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e.MaskEffect="mask-effect",e.BlendMode="blend-mode",e.TextureSource="texture-source",e.Environment="environment",e.ShapeBuilder="shape-builder",e.Batcher="batcher",e))(Le||{});const Re=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},Ue=(e,t)=>Re(e).priority??t,Te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Re).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...e){return e.map(Re).forEach(e=>{e.type.forEach(t=>{const i=this._addHandlers,r=this._queue;i[t]?i[t]?.(e):(r[t]=r[t]||[],r[t]?.push(e))})}),this},handle(e,t,i){const r=this._addHandlers,n=this._removeHandlers;if(r[e]||n[e])throw new Error(`Extension type ${e} already has a handler`);r[e]=t,n[e]=i;const o=this._queue;return o[e]&&(o[e]?.forEach(e=>t(e)),delete o[e]),this},handleByMap(e,t){return this.handle(e,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(e,t,i=-1){return this.handle(e,e=>{t.findIndex(t=>t.name===e.name)>=0||(t.push({name:e.name,value:e.ref}),t.sort((e,t)=>Ue(t.value,i)-Ue(e.value,i)))},e=>{const i=t.findIndex(t=>t.name===e.name);-1!==i&&t.splice(i,1)})},handleByList(e,t,i=-1){return this.handle(e,e=>{t.includes(e.ref)||(t.push(e.ref),t.sort((e,t)=>Ue(t,i)-Ue(e,i)))},e=>{const i=t.indexOf(e.ref);-1!==i&&t.splice(i,1)})},mixin(e,...t){for(const i of t)Object.defineProperties(e.prototype,Object.getOwnPropertyDescriptors(i))}},Oe={extension:{type:Le.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await e(()=>import("./browserAll-6ZwkBAMb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))}},Fe={extension:{type:Le.Environment,name:"webworker",priority:0},test:()=>"undefined"!=typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await e(()=>import("./webworkerAll-CX9i_uby.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]))}};class Ge{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new Ge(e??this._observer,this._x,this._y)}set(e=0,t=e){return this._x===e&&this._y===t||(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var je,He={exports:{}};const Xe=he((je||(je=1,function(e){var t=Object.prototype.hasOwnProperty,i="~";function r(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,o||e,s),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,r,n=[];if(0===this._eventsCount)return n;for(r in e=this._events)t.call(e,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},a.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,n,o,s){var a=i?i+e:e;if(!this._events[a])return!1;var l,c,A=this._events[a],u=arguments.length;if(A.fn){switch(A.once&&this.removeListener(e,A.fn,void 0,!0),u){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,t),!0;case 3:return A.fn.call(A.context,t,r),!0;case 4:return A.fn.call(A.context,t,r,n),!0;case 5:return A.fn.call(A.context,t,r,n,o),!0;case 6:return A.fn.call(A.context,t,r,n,o,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];A.fn.apply(A.context,l)}else{var d,h=A.length;for(c=0;c<h;c++)switch(A[c].once&&this.removeListener(e,A[c].fn,void 0,!0),u){case 1:A[c].fn.call(A[c].context);break;case 2:A[c].fn.call(A[c].context,t);break;case 3:A[c].fn.call(A[c].context,t,r);break;case 4:A[c].fn.call(A[c].context,t,r,n);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];A[c].fn.apply(A[c].context,l)}}return!0},a.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],A=a.length;l<A;l++)(a[l].fn!==t||n&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a}(He)),He.exports)),ze=2*Math.PI,Je=180/Math.PI,We=Math.PI/180;class Ke{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Ke(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Ye.x=0,Ye.y=0,Ye}}const Ye=new Ke;class qe{constructor(e=1,t=0,i=0,r=1,n=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=n,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,n,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=n,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Ke;const i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Ke;const i=this.a,r=this.b,n=this.c,o=this.d,s=this.tx,a=this.ty,l=1/(i*o+n*-r),c=e.x,A=e.y;return t.x=o*l*c+-n*l*A+(a*n-s*o)*l,t.y=i*l*A+-r*l*c+(-a*i+s*r)*l,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.a,n=this.c,o=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=n*t-this.d*i,this.d=n*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){const t=this.a,i=this.b,r=this.c,n=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*n,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*n,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*n+this.ty,this}appendFrom(e,t){const i=e.a,r=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,l=t.a,c=t.b,A=t.c,u=t.d;return this.a=i*l+r*A,this.b=i*c+r*u,this.c=n*l+o*A,this.d=n*c+o*u,this.tx=s*l+a*A+t.tx,this.ty=s*c+a*u+t.ty,this}setTransform(e,t,i,r,n,o,s,a,l){return this.a=Math.cos(s+l)*n,this.b=Math.sin(s+l)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,i=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,r=this.c,n=this.d,o=e.pivot,s=-Math.atan2(-r,n),a=Math.atan2(i,t),l=Math.abs(s+a);return l<1e-5||Math.abs(ze-l)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=a),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+n*n),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*i+o.y*n),e}invert(){const e=this.a,t=this.b,i=this.c,r=this.d,n=this.tx,o=e*r-t*i;return this.a=r/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(e*this.ty-t*n)/o,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new qe;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return $e.identity()}static get shared(){return Ze.identity()}}const Ze=new qe,$e=new qe,et=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],tt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],it=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],rt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],nt=[],ot=[],st=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];nt.push(t);for(let i=0;i<16;i++){const r=st(et[e]*et[i]+it[e]*tt[i]),n=st(tt[e]*et[i]+rt[e]*tt[i]),o=st(et[e]*it[i]+it[e]*rt[i]),s=st(tt[e]*it[i]+rt[e]*rt[i]);for(let e=0;e<16;e++)if(et[e]===r&&tt[e]===n&&it[e]===o&&rt[e]===s){t.push(e);break}}}for(let e=0;e<16;e++){const t=new qe;t.set(et[e],tt[e],it[e],rt[e],0,0),ot.push(t)}}();const at={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>et[e],uY:e=>tt[e],vX:e=>it[e],vY:e=>rt[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>nt[e][t],sub:(e,t)=>nt[e][at.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?at.S:at.N:2*Math.abs(t)<=Math.abs(e)?e>0?at.E:at.W:t>0?e>0?at.SE:at.SW:e>0?at.NE:at.NW,matrixAppendRotationInv:(e,t,i=0,r=0,n=0,o=0)=>{const s=ot[at.inv(t)],a=s.a,l=s.b,c=s.c,A=s.d,u=i-Math.min(0,a*n,c*o,a*n+c*o),d=r-Math.min(0,l*n,A*o,l*n+A*o),h=e.a,g=e.b,f=e.c,p=e.d;e.a=a*h+l*f,e.b=a*g+l*p,e.c=c*h+A*f,e.d=c*g+A*p,e.tx=u*h+d*f+e.tx,e.ty=u*g+d*p+e.ty},transformRectCoords:(e,t,i,r)=>{const{x:n,y:o,width:s,height:a}=e,{x:l,y:c,width:A,height:u}=t;return i===at.E?(r.set(n+l,o+c,s,a),r):i===at.S?r.set(A-o-a+l,n+c,a,s):i===at.W?r.set(A-n-s+l,u-o-a+c,s,a):i===at.N?r.set(o+l,u-n-s+c,a,s):r.set(n+l,o+c,s,a)}},lt=[new Ke,new Ke,new Ke,new Ke];class ct{constructor(e=0,t=0,i=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ct(0,0,0,0)}clone(){return new ct(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}strokeContains(e,t,i,r=.5){const{width:n,height:o}=this;if(n<=0||o<=0)return!1;const s=this.x,a=this.y,l=i*(1-r),c=i-l;return e>=s-l&&e<=s+n+l&&t>=a-l&&t<=a+o+l&&!(e>s+c&&e<s+n-c&&t>a+c&&t<a+o-c)}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const i=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>i}const i=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=i||o<=n)return!1;const s=lt[0].set(e.left,e.top),a=lt[1].set(e.left,e.bottom),l=lt[2].set(e.right,e.top),c=lt[3].set(e.right,e.bottom);if(l.x<=s.x||a.y<=s.y)return!1;const A=Math.sign(t.a*t.d-t.b*t.c);if(0===A)return!1;if(t.apply(s,s),t.apply(a,a),t.apply(l,l),t.apply(c,c),Math.max(s.x,a.x,l.x,c.x)<=i||Math.min(s.x,a.x,l.x,c.x)>=r||Math.max(s.y,a.y,l.y,c.y)<=n||Math.min(s.y,a.y,l.y,c.y)>=o)return!1;const u=A*(a.y-s.y),d=A*(s.x-a.x),h=u*i+d*n,g=u*r+d*n,f=u*i+d*o,p=u*r+d*o;if(Math.max(h,g,f,p)<=u*s.x+d*s.y||Math.min(h,g,f,p)>=u*c.x+d*c.y)return!1;const m=A*(s.y-l.y),x=A*(l.x-s.x),E=m*i+x*n,C=m*r+x*n,B=m*i+x*o,b=m*r+x*o;return!(Math.max(E,C,B,b)<=m*s.x+x*s.y||Math.min(E,C,B,b)>=m*c.x+x*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),n=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=n-r,this}getBounds(e){return e||(e=new ct),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,i=e.y,r=e.x+e.width,n=e.y+e.height;return t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height&&r>=this.x&&r<this.x+this.width&&n>=this.y&&n<this.y+this.height}set(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const At={default:-1};function ut(e="default"){return void 0===At[e]&&(At[e]=-1),++At[e]}const dt=new Set,ht="8.0.0",gt={quiet:!1,noColor:!1},ft=(e,t,i=3)=>{if(gt.quiet||dt.has(t))return;let r=(new Error).stack;"function"==typeof console.groupCollapsed&&gt.noColor;void 0===r||(r=r.split("\n").splice(i).join("\n")),dt.add(t)};Object.defineProperties(ft,{quiet:{get:()=>gt.quiet,set:e=>{gt.quiet=e},enumerable:!0,configurable:!1},noColor:{get:()=>gt.noColor,set:e=>{gt.noColor=e},enumerable:!0,configurable:!1}});const pt=()=>{};function mt(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function xt(e){return!(e&e-1||!e)}function Et(e){const t={};for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}const Ct=Object.create(null);const Bt=class e extends Xe{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...e.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){ft(0,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=function(e){const t=Ct[e];return void 0===t&&(Ct[e]=ut("resource")),t}(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Bt.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let bt=Bt;const It=class e extends Xe{constructor(t={}){super(),this.options=t,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=ut("textureSource"),this._resourceType="textureSource",this._resourceId=ut("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.viewDimension="2d",this.arrayLayerCount=1,this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...e.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.viewDimension=t.viewDimension??t.dimensions,this.arrayLayerCount=t.arrayLayerCount,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new bt(Et(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ut("resource"),this.emit("change",this),this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i||(i=this._resolution),e||(e=this.width),t||(t=this.height);const r=Math.round(e*i),n=Math.round(t*i);return this.width=r/i,this.height=n/i,this._resolution=i,(this.pixelWidth!==r||this.pixelHeight!==n)&&(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=n,this.emit("resize",this),this._resourceId=ut("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=xt(this.pixelWidth)&&xt(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};It.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",viewDimension:"2d",arrayLayerCount:1,mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let yt=It;class vt extends yt{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let i=e.format;i||(i=t instanceof Float32Array?"rgba32float":t instanceof Int32Array||t instanceof Uint32Array?"rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?"rgba16uint":(Int8Array,"bgra8unorm")),super({...e,resource:t,format:i}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}vt.extension=Le.TextureSource;const wt=new qe;class Qt{constructor(e,t){this.mapCoord=new qe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?e.width<10?0:.5:t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){void 0===t&&(t=e);const i=this.mapCoord;for(let r=0;r<e.length;r+=2){const n=e[r],o=e[r+1];t[r]=n*i.a+o*i.c+i.tx,t[r+1]=n*i.b+o*i.d+i.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const i=e.orig,r=e.trim;r&&(wt.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(wt));const n=e.source,o=this.uClampFrame,s=this.clampMargin/n._resolution,a=this.clampOffset/n._resolution;return o[0]=(e.frame.x+s+a)/n.width,o[1]=(e.frame.y+s+a)/n.height,o[2]=(e.frame.x+e.frame.width-s+a)/n.width,o[3]=(e.frame.y+e.frame.height-s+a)/n.height,this.uClampOffset[0]=this.clampOffset/n.pixelWidth,this.uClampOffset[1]=this.clampOffset/n.pixelHeight,this.isSimple=e.frame.width===n.width&&e.frame.height===n.height&&0===e.rotate,!0}}class Dt extends Xe{constructor({source:e,label:t,frame:i,orig:r,trim:n,defaultAnchor:o,defaultBorders:s,rotate:a,dynamic:l}={}){if(super(),this.uid=ut("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ct,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new yt,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:e,height:t}=this._source;this.frame.width=e,this.frame.height=t}this.orig=r||this.frame,this.trim=n,this.rotate=a??0,this.defaultAnchor=o,this.defaultBorders=s,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Qt(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:i,height:r}=this._source,n=t.x/i,o=t.y/r,s=t.width/i,a=t.height/r;let l=this.rotate;if(l){const t=s/2,i=a/2,r=n+t,c=o+i;l=at.add(l,at.NW),e.x0=r+t*at.uX(l),e.y0=c+i*at.uY(l),l=at.add(l,2),e.x1=r+t*at.uX(l),e.y1=c+i*at.uY(l),l=at.add(l,2),e.x2=r+t*at.uX(l),e.y2=c+i*at.uY(l),l=at.add(l,2),e.x3=r+t*at.uX(l),e.y3=c+i*at.uY(l)}else e.x0=n,e.y0=o,e.x1=n+s,e.y1=o,e.x2=n+s,e.y2=o+a,e.x3=n,e.y3=o+a}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return ft(0,"Texture.baseTexture is now Texture.source"),this._source}}function Nt(e,t,i){const{width:r,height:n}=i.orig,o=i.trim;if(o){const i=o.width,s=o.height;e.minX=o.x-t._x*r,e.maxX=e.minX+i,e.minY=o.y-t._y*n,e.maxY=e.minY+s}else e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*n,e.maxY=e.minY+n}Dt.EMPTY=new Dt({label:"EMPTY",source:new yt({label:"EMPTY"})}),Dt.EMPTY.destroy=pt,Dt.WHITE=new Dt({source:new vt({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),Dt.WHITE.destroy=pt;const kt=new qe;class St{constructor(e=1/0,t=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=kt,this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ct);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=kt,this}set(e,t,i,r){this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}addFrame(e,t,i,r,n){n||(n=this.matrix);const o=n.a,s=n.b,a=n.c,l=n.d,c=n.tx,A=n.ty;let u=this.minX,d=this.minY,h=this.maxX,g=this.maxY,f=o*e+a*t+c,p=s*e+l*t+A;f<u&&(u=f),p<d&&(d=p),f>h&&(h=f),p>g&&(g=p),f=o*i+a*t+c,p=s*i+l*t+A,f<u&&(u=f),p<d&&(d=p),f>h&&(h=f),p>g&&(g=p),f=o*e+a*r+c,p=s*e+l*r+A,f<u&&(u=f),p<d&&(d=p),f>h&&(h=f),p>g&&(g=p),f=o*i+a*r+c,p=s*i+l*r+A,f<u&&(u=f),p<d&&(d=p),f>h&&(h=f),p>g&&(g=p),this.minX=u,this.minY=d,this.maxX=h,this.maxY=g}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,i=this.minY,r=this.maxX,n=this.maxY,{a:o,b:s,c:a,d:l,tx:c,ty:A}=e;let u=o*t+a*i+c,d=s*t+l*i+A;this.minX=u,this.minY=d,this.maxX=u,this.maxY=d,u=o*r+a*i+c,d=s*r+l*i+A,this.minX=u<this.minX?u:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=d>this.maxY?d:this.maxY,u=o*t+a*n+c,d=s*t+l*n+A,this.minX=u<this.minX?u:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=d>this.maxY?d:this.maxY,u=o*r+a*n+c,d=s*r+l*n+A,this.minX=u<this.minX?u:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=d>this.maxY?d:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,i,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new St(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,r){let n=this.minX,o=this.minY,s=this.maxX,a=this.maxY;r||(r=this.matrix);const l=r.a,c=r.b,A=r.c,u=r.d,d=r.tx,h=r.ty;for(let g=t;g<i;g+=2){const t=e[g],i=e[g+1],r=l*t+A*i+d,f=c*t+u*i+h;n=r<n?r:n,o=f<o?f:o,s=r>s?r:s,a=f>a?f:a}this.minX=n,this.minY=o,this.maxX=s,this.maxY=a}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var Pt={grad:.9,turn:360,rad:360/(2*Math.PI)},Mt=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Vt=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},_t=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),e>i?i:e>t?e:t},Lt=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Rt=function(e){return{r:_t(e.r,0,255),g:_t(e.g,0,255),b:_t(e.b,0,255),a:_t(e.a)}},Ut=function(e){return{r:Vt(e.r),g:Vt(e.g),b:Vt(e.b),a:Vt(e.a,3)}},Tt=/^#([0-9a-f]{3,8})$/i,Ot=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ft=function(e){var t=e.r,i=e.g,r=e.b,n=e.a,o=Math.max(t,i,r),s=o-Math.min(t,i,r),a=s?o===t?(i-r)/s:o===i?2+(r-t)/s:4+(t-i)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:n}},Gt=function(e){var t=e.h,i=e.s,r=e.v,n=e.a;t=t/360*6,i/=100,r/=100;var o=Math.floor(t),s=r*(1-i),a=r*(1-(t-o)*i),l=r*(1-(1-t+o)*i),c=o%6;return{r:255*[r,a,s,s,l,r][c],g:255*[l,r,r,a,s,s][c],b:255*[s,s,l,r,r,a][c],a:n}},jt=function(e){return{h:Lt(e.h),s:_t(e.s,0,100),l:_t(e.l,0,100),a:_t(e.a)}},Ht=function(e){return{h:Vt(e.h),s:Vt(e.s),l:Vt(e.l),a:Vt(e.a,3)}},Xt=function(e){return Gt((i=(t=e).s,{h:t.h,s:(i*=((r=t.l)<50?r:100-r)/100)>0?2*i/(r+i)*100:0,v:r+i,a:t.a}));var t,i,r},zt=function(e){return{h:(t=Ft(e)).h,s:(n=(200-(i=t.s))*(r=t.v)/100)>0&&n<200?i*r/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,i,r,n},Jt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Kt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qt={string:[[function(e){var t=Tt.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Vt(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Vt(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Kt.exec(e)||Yt.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Rt({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Jt.exec(e)||Wt.exec(e);if(!t)return null;var i,r,n=jt({h:(i=t[1],r=t[2],void 0===r&&(r="deg"),Number(i)*(Pt[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return Xt(n)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,r=e.b,n=e.a,o=void 0===n?1:n;return Mt(t)&&Mt(i)&&Mt(r)?Rt({r:Number(t),g:Number(i),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,i=e.s,r=e.l,n=e.a,o=void 0===n?1:n;if(!Mt(t)||!Mt(i)||!Mt(r))return null;var s=jt({h:Number(t),s:Number(i),l:Number(r),a:Number(o)});return Xt(s)},"hsl"],[function(e){var t=e.h,i=e.s,r=e.v,n=e.a,o=void 0===n?1:n;if(!Mt(t)||!Mt(i)||!Mt(r))return null;var s,a=(s={h:Number(t),s:Number(i),v:Number(r),a:Number(o)},{h:Lt(s.h),s:_t(s.s,0,100),v:_t(s.v,0,100),a:_t(s.a)});return Gt(a)},"hsv"]]},Zt=function(e,t){for(var i=0;i<t.length;i++){var r=t[i][0](e);if(r)return[r,t[i][1]]}return[null,void 0]},$t=function(e,t){var i=zt(e);return{h:i.h,s:_t(i.s+100*t,0,100),l:i.l,a:i.a}},ei=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},ti=function(e,t){var i=zt(e);return{h:i.h,s:i.s,l:_t(i.l+100*t,0,100),a:i.a}},ii=function(){function e(e){this.parsed=function(e){return"string"==typeof e?Zt(e.trim(),qt.string):"object"==typeof e&&null!==e?Zt(e,qt.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Vt(ei(this.rgba),2)},e.prototype.isDark=function(){return ei(this.rgba)<.5},e.prototype.isLight=function(){return ei(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Ut(this.rgba)).r,i=e.g,r=e.b,o=(n=e.a)<1?Ot(Vt(255*n)):"","#"+Ot(t)+Ot(i)+Ot(r)+o;var e,t,i,r,n,o},e.prototype.toRgb=function(){return Ut(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Ut(this.rgba)).r,i=e.g,r=e.b,(n=e.a)<1?"rgba("+t+", "+i+", "+r+", "+n+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,n},e.prototype.toHsl=function(){return Ht(zt(this.rgba))},e.prototype.toHslString=function(){return t=(e=Ht(zt(this.rgba))).h,i=e.s,r=e.l,(n=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+n+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,n},e.prototype.toHsv=function(){return e=Ft(this.rgba),{h:Vt(e.h),s:Vt(e.s),v:Vt(e.v),a:Vt(e.a,3)};var e},e.prototype.invert=function(){return ri({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),ri($t(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),ri($t(this.rgba,-e))},e.prototype.grayscale=function(){return ri($t(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),ri(ti(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),ri(ti(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?ri({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Vt(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=zt(this.rgba);return"number"==typeof e?ri({h:e,s:t.s,l:t.l,a:t.a}):Vt(t.h)},e.prototype.isEqual=function(e){return this.toHex()===ri(e).toHex()},e}(),ri=function(e){return e instanceof ii?e:new ii(e)},ni=[];[function(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var n in i)r[i[n]]=n;var o={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var n,s,a=r[this.toHex()];if(a)return a;if(null==t?void 0:t.closest){var l=this.toRgb(),c=1/0,A="black";if(!o.length)for(var u in i)o[u]=new e(i[u]).toRgb();for(var d in i){var h=(n=l,s=o[d],Math.pow(n.r-s.r,2)+Math.pow(n.g-s.g,2)+Math.pow(n.b-s.b,2));h<c&&(c=h,A=d)}return A}},t.string.push([function(t){var r=t.toLowerCase(),n="transparent"===r?"#0000":i[r];return n?new e(n).toRgb():null},"name"])}].forEach(function(e){ni.indexOf(e)<0&&(e(ii,qt),ni.push(e))});const oi=class e{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set Color#value to null");null!==this._value&&this._isSourceEqual(this._value,t)||(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return"string"==typeof e||"number"==typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"==typeof e&&null!==e?{...e}:e}_isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if("number"===i||"string"===i||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((e,i)=>e===t[i]);if(null!==e&&null!==t){const i=Object.keys(e),r=Object.keys(t);return i.length===r.length&&i.every(i=>e[i]===t[i])}return e===t}toRgba(){const[e,t,i,r]=this._components;return{r:e,g:t,b:i,a:r}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(255*t),e[1]=Math.round(255*i),e[2]=Math.round(255*r),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,i,r,n]=this._components;return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,i,r]=this._components;return e[0]=t,e[1]=i,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){const[i,r,n,o]=e._temp.setValue(t)._components;return this._components[0]*=i,this._components[1]*=r,this._components[2]*=n,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,n=255&this._int;return t&&(i=i*e+.5|0,r=r*e+.5|0,n=n*e+.5|0),(255*e<<24)+(i<<16)+(r<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(t){let i,r,n,o;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215){i=(t>>16&255)/255,r=(t>>8&255)/255,n=(255&t)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[i,r,n,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[i,r,n,o=255]=t,i/=255,r/=255,n/=255,o/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){const i=e.HEX_PATTERN.exec(t);i&&(t=`#${i[2]}`)}const s=ri(t);s.isValid()&&(({r:i,g:r,b:n,a:o}=s.rgba),i/=255,r/=255,n/=255)}if(void 0===i)throw new Error(`Unable to convert color ${t}`);this._components[0]=i,this._components[1]=r,this._components[2]=n,this._components[3]=o,this._refreshInt()}_refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*i|0)}_clamp(e,t=0,i=1){return"number"==typeof e?Math.min(Math.max(e,t),i):(e.forEach((r,n)=>{e[n]=Math.min(Math.max(r,t),i)}),e)}static isColorLike(t){return"number"==typeof t||"string"==typeof t||t instanceof Number||t instanceof e||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||void 0!==t.r&&void 0!==t.g&&void 0!==t.b||void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.l||void 0!==t.h&&void 0!==t.s&&void 0!==t.l&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.v||void 0!==t.h&&void 0!==t.s&&void 0!==t.v&&void 0!==t.a}};oi.shared=new oi,oi._temp=new oi,oi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let si=oi;let ai=0;function li(...e){500!==ai&&ai++}const ci={_registeredResources:new Set,register(e){this._registeredResources.add(e)},unregister(e){this._registeredResources.delete(e)},release(){this._registeredResources.forEach(e=>e.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(e){return this._registeredResources.has(e)},reset(){this._registeredResources.clear()}};class Ai{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}const ui=new class{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Ai(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}};ci.register(ui);const di={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(e){"boolean"==typeof e&&!1===e?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(!0===e?{}:e))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(e){ft(0,"cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(e)}};function hi(e,t,i){const r=e.length;let n;if(t>=r||0===i)return;const o=r-(i=t+i>r?r-t:i);for(n=t;n<o;++n)e[n]=e[n+i];e.length=o}const gi={allowChildren:!0,removeChildren(e=0,t){const i=t??this.children.length,r=i-e,n=[];if(r>0&&r<=i){for(let r=i-1;r>=e;r--){const e=this.children[r];e&&(n.push(e),e.parent=null)}hi(this.children,e,i);const t=this.renderGroup||this.parentRenderGroup;t&&t.removeChildren(n);for(let e=0;e<n.length;++e){const t=n[e];t.parentRenderLayer?.detach(t),this.emit("childRemoved",t,this,e),n[e].emit("removed",this)}return n.length>0&&this._didViewChangeTick++,n}if(0===r&&0===this.children.length)return n;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(e){const t=this.getChildAt(e);return this.removeChild(t)},getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]},setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(e),this.addChildAt(e,t)},getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(e,t){this.allowChildren||ft(0,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(t<0||t>i.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${i.length}`);if(e.parent){const i=e.parent.children.indexOf(e);if(e.parent===this&&i===t)return e;-1!==i&&e.parent.children.splice(i,1)}t===i.length?i.push(e):i.splice(t,0,e),e.parent=this,e.didChange=!0,e._updateFlags=15;const r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(e),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",e,this,t),e.emit("added",this),e},swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=e;const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...e){return 1===e.length?this.reparentChildAt(e[0],this.children.length):(e.forEach(e=>this.reparentChildAt(e,this.children.length)),e[0])},reparentChildAt(e,t){if(e.parent===this)return this.setChildIndex(e,t),e;const i=e.worldTransform.clone();e.removeFromParent(),this.addChildAt(e,t);const r=this.worldTransform.clone();return r.invert(),i.prepend(r),e.setFromMatrix(i),e},replaceChild(e,t){e.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(e)),t.setFromMatrix(e.localTransform),t.updateLocalTransform(),this.removeChild(e)}},fi={collectRenderables(e,t,i){this.parentRenderLayer&&this.parentRenderLayer!==i||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(e,t,i):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,e):this.collectRenderablesWithEffects(e,t,i))},collectRenderablesSimple(e,t,i){const r=this.children,n=r.length;for(let o=0;o<n;o++)r[o].collectRenderables(e,t,i)},collectRenderablesWithEffects(e,t,i){const{renderPipes:r}=t;for(let n=0;n<this.effects.length;n++){const t=this.effects[n];r[t.pipe].push(t,this,e)}this.collectRenderablesSimple(e,t,i);for(let n=this.effects.length-1;n>=0;n--){const t=this.effects[n];r[t.pipe].pop(t,this,e)}}};class pi{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}const mi=new class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const i=this._tests[t];if(i.test(e))return ui.get(i.maskClass,e)}return e}returnMaskEffect(e){ui.return(e)}};Te.handleByList(Le.MaskEffect,mi._effectClasses);const xi={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0)},addEffect(e){-1===this.effects.indexOf(e)&&(this.effects.push(e),this.effects.sort((e,t)=>e.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(e){const t=this.effects.indexOf(e);-1!==t&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(e){const t=this._maskEffect;t?.mask!==e&&(t&&(this.removeEffect(t),mi.returnMaskEffect(t),this._maskEffect=null),null!=e&&(this._maskEffect=mi.getMaskEffect(e),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(e){this._maskOptions={...this._maskOptions,...e},e.mask&&(this.mask=e.mask),this._markStructureAsChanged()},set filters(e){!Array.isArray(e)&&e&&(e=[e]);const t=this._filterEffect||(this._filterEffect=new pi),i=e?.length>0,r=i!==t.filters?.length>0;e=Array.isArray(e)?e.slice(0):e,t.filters=Object.freeze(e),r&&(i?this.addEffect(t):(this.removeEffect(t),t.filters=e??null))},get filters(){return this._filterEffect?.filters},set filterArea(e){this._filterEffect||(this._filterEffect=new pi),this._filterEffect.filterArea=e},get filterArea(){return this._filterEffect?.filterArea}},Ei={label:null,get name(){return ft(0,"Container.name property has been removed, use Container.label instead"),this.label},set name(e){ft(0,"Container.name property has been removed, use Container.label instead"),this.label=e},getChildByName(e,t=!1){return this.getChildByLabel(e,t)},getChildByLabel(e,t=!1){const i=this.children;for(let r=0;r<i.length;r++){const t=i[r];if(t.label===e||e instanceof RegExp&&e.test(t.label))return t}if(t)for(let r=0;r<i.length;r++){const t=i[r].getChildByLabel(e,!0);if(t)return t}return null},getChildrenByLabel(e,t=!1,i=[]){const r=this.children;for(let n=0;n<r.length;n++){const t=r[n];(t.label===e||e instanceof RegExp&&e.test(t.label))&&i.push(t)}if(t)for(let n=0;n<r.length;n++)r[n].getChildrenByLabel(e,!0,i);return i}},Ci=ui.getPool(qe),Bi=ui.getPool(St),bi=new qe,Ii={getFastGlobalBounds(e,t){t||(t=new St),t.clear(),this._getGlobalBoundsRecursive(!!e,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const i=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(i.worldTransform),t},_getGlobalBoundsRecursive(e,t,i){let r=t;if(e&&this.parentRenderLayer&&this.parentRenderLayer!==i)return;if(7!==this.localDisplayStatus||!this.measurable)return;const n=!!this.effects.length;if((this.renderGroup||n)&&(r=Bi.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const e=this.bounds;r.addFrame(e.minX,e.minY,e.maxX,e.maxY,this.groupTransform)}const t=this.children;for(let n=0;n<t.length;n++)t[n]._getGlobalBoundsRecursive(e,r,i)}if(n){let e=!1;const i=this.renderGroup||this.parentRenderGroup;for(let t=0;t<this.effects.length;t++)this.effects[t].addBounds&&(e||(e=!0,r.applyMatrix(i.worldTransform)),this.effects[t].addBounds(r,!0));e&&r.applyMatrix(i.worldTransform.copyTo(bi).invert()),t.addBounds(r),Bi.return(r)}else this.renderGroup&&(t.addBounds(r,this.relativeGroupTransform),Bi.return(r))}};function yi(e,t,i){let r,n;return i.clear(),e.parent?t?r=e.parent.worldTransform:(n=Ci.get().identity(),r=wi(e,n)):r=qe.IDENTITY,vi(e,i,r,t),n&&Ci.return(n),i.isValid||i.set(0,0,0,0),i}function vi(e,t,i,r){if(!e.visible||!e.measurable)return;let n;r?n=e.worldTransform:(e.updateLocalTransform(),n=Ci.get(),n.appendFrom(e.localTransform,i));const o=t,s=!!e.effects.length;if(s&&(t=Bi.get().clear()),e.boundsArea)t.addRect(e.boundsArea,n);else{const i=e.bounds;i&&!i.isEmpty()&&(t.matrix=n,t.addBounds(i));for(let o=0;o<e.children.length;o++)vi(e.children[o],t,n,r)}if(s){for(let i=0;i<e.effects.length;i++)e.effects[i].addBounds?.(t);o.addBounds(t,qe.IDENTITY),Bi.return(t)}r||Ci.return(n)}function wi(e,t){const i=e.parent;return i&&(wi(i,t),i.updateLocalTransform(),t.append(i.localTransform)),t}function Qi(e,t){if(16777215===e||!t)return t;if(16777215===t||!e)return e;return(((e>>16&255)*(t>>16&255)/255|0)<<16)+(((e>>8&255)*(t>>8&255)/255|0)<<8)+((255&e)*(255&t)/255|0)}const Di=16777215;function Ni(e,t){return e===Di?t:t===Di?e:Qi(e,t)}function ki(e){return((255&e)<<16)+(65280&e)+(e>>16&255)}const Si={getGlobalAlpha(e){if(e)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,i=this.parent;for(;i;)t*=i.alpha,i=i.parent;return t},getGlobalTransform(e=new qe,t){if(t)return e.copyFrom(this.worldTransform);this.updateLocalTransform();const i=wi(this,Ci.get().identity());return e.appendFrom(this.localTransform,i),Ci.return(i),e},getGlobalTint(e){if(e)return this.renderGroup?ki(this.renderGroup.worldColor):this.parentRenderGroup?ki(Ni(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,i=this.parent;for(;i;)t=Ni(t,i.localColor),i=i.parent;return ki(t)}};function Pi(e,t,i){return t.clear(),i||(i=qe.IDENTITY),Mi(e,t,i,e,!0),t.isValid||t.set(0,0,0,0),t}function Mi(e,t,i,r,n){let o;if(n)o=Ci.get(),o=i.copyTo(o);else{if(!e.visible||!e.measurable)return;e.updateLocalTransform();const t=e.localTransform;o=Ci.get(),o.appendFrom(t,i)}const s=t,a=!!e.effects.length;if(a&&(t=Bi.get().clear()),e.boundsArea)t.addRect(e.boundsArea,o);else{e.renderPipeId&&(t.matrix=o,t.addBounds(e.bounds));const i=e.children;for(let e=0;e<i.length;e++)Mi(i[e],t,o,r,!1)}if(a){for(let i=0;i<e.effects.length;i++)e.effects[i].addLocalBounds?.(t,r);s.addBounds(t,qe.IDENTITY),Bi.return(t)}Ci.return(o)}function Vi(e,t){const i=e.children;for(let r=0;r<i.length;r++){const e=i[r],n=e.uid,o=(65535&e._didViewChangeTick)<<16|65535&e._didContainerChangeTick,s=t.index;t.data[s]===n&&t.data[s+1]===o||(t.data[t.index]=n,t.data[t.index+1]=o,t.didChange=!0),t.index=s+2,e.children.length&&Vi(e,t)}return t.didChange}const _i=new qe,Li={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(e,t){const i=Math.sign(this.scale.x)||1;this.scale.x=0!==t?e/t*i:i},_setHeight(e,t){const i=Math.sign(this.scale.y)||1;this.scale.y=0!==t?e/t*i:i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new St});const e=this._localBoundsCacheData;return e.index=1,e.didChange=!1,e.data[0]!==this._didViewChangeTick&&(e.didChange=!0,e.data[0]=this._didViewChangeTick),Vi(this,e),e.didChange&&Pi(this,e.localBounds,_i),e.localBounds},getBounds(e,t){return yi(this,e,t||new St)}},Ri={_onRender:null,set onRender(e){const t=this.renderGroup||this.parentRenderGroup;if(!e)return this._onRender&&t?.removeOnRender(this),void(this._onRender=null);this._onRender||t?.addOnRender(this),this._onRender=e},get onRender(){return this._onRender}},Ui={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Ti))}};function Ti(e,t){return e._zIndex-t._zIndex}const Oi={getGlobalPosition(e=new Ke,t=!1){return this.parent?this.parent.toGlobal(this._position,e,t):(e.x=this._position.x,e.y=this._position.y),e},toGlobal(e,t,i=!1){const r=this.getGlobalTransform(Ci.get(),i);return t=r.apply(e,t),Ci.return(r),t},toLocal(e,t,i,r){t&&(e=t.toGlobal(e,i,r));const n=this.getGlobalTransform(Ci.get(),r);return i=n.applyInverse(e,i),Ci.return(n),i}};class Fi{constructor(){this.uid=ut("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize}}let Gi=0;const ji=new class{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new bt(this.textureOptions)}createTexture(e,t,i){const r=new yt({...this.textureOptions,width:e,height:t,resolution:1,antialias:i,autoGarbageCollect:!1});return new Dt({source:r,label:"texturePool_"+Gi++})}getOptimalTexture(e,t,i=1,r){let n=Math.ceil(e*i-1e-6),o=Math.ceil(t*i-1e-6);n=mt(n),o=mt(o);const s=(n<<17)+(o<<1)+(r?1:0);this._texturePool[s]||(this._texturePool[s]=[]);let a=this._texturePool[s].pop();return a||(a=this.createTexture(n,o,r)),a.source._resolution=i,a.source.width=n/i,a.source.height=o/i,a.source.pixelWidth=n,a.source.pixelHeight=o,a.frame.x=0,a.frame.y=0,a.frame.width=e,a.frame.height=t,a.updateUvs(),this._poolKeyHash[a.uid]=s,a}getSameSizeTexture(e,t=!1){const i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,t)}returnTexture(e,t=!1){const i=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[i].push(e)}clear(e){if(e=!1!==e)for(const t in this._texturePool){const e=this._texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this._texturePool={}}};ci.register(ji);class Hi{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new qe,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Fi,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let i=0;i<t.length;i++){const e=t[i];e._updateFlags=15,this.addChild(e)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(ji.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup)return void this.addRenderGroupChild(e.renderGroup);e._onRender&&this.addOnRender(e);const t=e.children;for(let i=0;i<t.length;i++)this.addChild(t[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup)return void this._removeRenderGroupChild(e.renderGroup);const t=e.children;for(let i=0;i<t.length;i++)this.removeChild(t[i])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let i=0;i<t.length;i++)this._getChildren(t[i],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const i=e.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return 1&this._matrixDirty?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new qe),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return 2&this._matrixDirty?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new qe),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(4&this._matrixDirty))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new qe),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}const Xi=new Ge(null),zi=new Ge(null),Ji=new Ge(null,1,1),Wi=new Ge(null),Ki=1,Yi=2,qi=4;class Zi extends Xe{constructor(e={}){super(),this.uid=ut("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new qe,this.relativeGroupTransform=new qe,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ge(this,0,0),this._scale=Ji,this._pivot=zi,this._origin=Wi,this._skew=Xi,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],function(e,t,i={}){for(const r in t)i[r]||void 0===t[r]||(e[r]=t[r])}(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(e=>this.addChild(e)),e.parent?.addChild(this)}static mixin(e){ft(0,"Container.mixin is deprecated, please use extensions.mixin instead."),Te.mixin(Zi,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=4095&e}get _didChangeId(){return 4095&this._didContainerChangeTick|(4095&this._didViewChangeTick)<<12}addChild(...e){if(this.allowChildren||ft(0,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let t=0;t<e.length;t++)this.addChild(e[t]);return e[0]}const t=e[0],i=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),i&&(i.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,i&&i.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,0!==t._zIndex&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let t=0;t<e.length;t++)this.removeChild(e[t]);return e[0]}const t=e[0],i=this.children.indexOf(t);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,this.didChange||(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=ui.get(Hi,this),this.groupTransform=qe.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),ui.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new qe),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*Je}set angle(e){this.rotation=e*We}get pivot(){return this._pivot===zi&&(this._pivot=new Ge(this,0,0)),this._pivot}set pivot(e){this._pivot===zi&&(this._pivot=new Ge(this,0,0),this._origin!==Wi&&li()),"number"==typeof e?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Xi&&(this._skew=new Ge(this,0,0)),this._skew}set skew(e){this._skew===Xi&&(this._skew=new Ge(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Ji&&(this._scale=new Ge(this,1,1)),this._scale}set scale(e){this._scale===Ji&&(this._scale=new Ge(this,0,0)),"string"==typeof e&&(e=parseFloat(e)),"number"==typeof e?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Wi&&(this._origin=new Ge(this,0,0)),this._origin}set origin(e){this._origin===Wi&&(this._origin=new Ge(this,0,0),this._pivot!==zi&&li()),"number"==typeof e?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const i=this.getLocalBounds();"object"==typeof e?(t=e.height??e.width,e=e.width):t??(t=e),void 0!==e&&this._setWidth(e,i.width),void 0!==t&&this._setHeight(t,i.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set("number"==typeof e.x?e.x:this.position.x,"number"==typeof e.y?e.y:this.position.y),this.scale.set("number"==typeof e.scaleX?e.scaleX||1:this.scale.x,"number"==typeof e.scaleY?e.scaleY||1:this.scale.y),this.rotation="number"==typeof e.rotation?e.rotation:this.rotation,this.skew.set("number"==typeof e.skewX?e.skewX:this.skew.x,"number"==typeof e.skewY?e.skewY:this.skew.y),this.pivot.set("number"==typeof e.pivotX?e.pivotX:this.pivot.x,"number"==typeof e.pivotY?e.pivotY:this.pivot.y),this.origin.set("number"==typeof e.originX?e.originX:this.origin.x,"number"==typeof e.originY?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,i=this._scale,r=this._pivot,n=this._origin,o=this._position,s=i._x,a=i._y,l=r._x,c=r._y,A=-n._x,u=-n._y;t.a=this._cx*s,t.b=this._sx*s,t.c=this._cy*a,t.d=this._sy*a,t.tx=o._x-(l*t.a+c*t.c)+(A*t.a+u*t.c)-A,t.ty=o._y-(l*t.b+c*t.d)+(A*t.b+u*t.d)-u}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const t=si.shared.setValue(e??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=1,this._onUpdate())}get tint(){return ki(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=2,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(e){const t=e?2:0;(2&this.localDisplayStatus)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(e){const t=e?0:4;(4&this.localDisplayStatus)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(e){const t=e?1:0;(1&this.localDisplayStatus)!==t&&(this._updateFlags|=4,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;let t;this.destroyed=!0,this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();if(("boolean"==typeof e?e:e?.children)&&t)for(let i=0;i<t.length;++i)t[i].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}Te.mixin(Zi,gi,Ii,Oi,Ri,Li,xi,Ei,Ui,{cullArea:null,cullable:!1,cullableChildren:!0},di,Si,fi);class $i extends Zi{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new St(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=e.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:i,y:r}=e;return i>=t.minX&&i<=t.maxX&&r>=t.minY&&r<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(e){this.unload(),super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,i){const{renderPipes:r}=t;r.blendMode.pushBlendMode(this,this.groupBlendMode,e);const n=r[this.renderPipeId];n?.addRenderable&&n.addRenderable(this,e),this.didViewUpdate=!1;const o=this.children,s=o.length;for(let a=0;a<s;a++)o[a].collectRenderables(e,t,i);r.blendMode.popBlendMode(e)}}class er extends $i{constructor(e=Dt.EMPTY){e instanceof Dt&&(e={texture:e});const{texture:t=Dt.EMPTY,anchor:i,roundPixels:r,width:n,height:o,...s}=e;super({label:"Sprite",...s}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ge({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=r??!1,void 0!==n&&(this.width=n),void 0!==o&&(this.height=o)}static from(e,t=!1){return new er(e instanceof Dt?e:Dt.from(e,t))}set texture(e){e||(e=Dt.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Nt(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return ft(0,"Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,i=this._bounds,{width:r,height:n}=t.orig;i.minX=-e._x*r,i.maxX=i.minX+r,i.minY=-e._y*n,i.maxY=i.minY+n}destroy(e=!1){super.destroy(e);if("boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){"object"==typeof e?(t=e.height??e.width,e=e.width):t??(t=e),void 0!==e&&this._setWidth(e,this._texture.orig.width),void 0!==t&&this._setHeight(t,this._texture.orig.height)}}const tr=new St;function ir(e,t,i){const r=tr;e.measurable=!0,yi(e,i,r),t.addBoundsMask(r),e.measurable=!1}function rr(e,t,i){const r=Bi.get();e.measurable=!0;const n=Ci.get().identity();Pi(e,r,nr(e,i,n)),e.measurable=!1,t.addBoundsMask(r),Ci.return(n),Bi.return(r)}function nr(e,t,i){return e?(e!==t&&(nr(e.parent,t,i),e.updateLocalTransform(),i.append(e.localTransform)),i):(li(),i)}class or{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof er),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){null!==this.mask&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||ir(this.mask,e,t)}addLocalBounds(e,t){rr(this.mask,e,t)}containsPoint(e,t){return t(this.mask,e)}destroy(){this.reset()}static test(e){return e instanceof er}}or.extension=Le.MaskEffect;class sr{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return"number"==typeof e}}sr.extension=Le.MaskEffect;class ar{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){null!==this.mask&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){ir(this.mask,e,t)}addLocalBounds(e,t){rr(this.mask,e,t)}containsPoint(e,t){return t(this.mask,e)}destroy(){this.reset()}static test(e){return e instanceof Zi}}ar.extension=Le.MaskEffect;let lr={createCanvas:(e,t)=>{const i=document.createElement("canvas");return i.width=e,i.height=t,i},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")};const cr={get:()=>lr,set(e){lr=e}};class Ar extends yt{constructor(e){e.resource||(e.resource=cr.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),this.resource.width===this.pixelWidth&&this.resource.height===this.pixelHeight||(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){const r=super.resize(e,t,i);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Ar.extension=Le.TextureSource;class ur extends yt{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}ur.extension=Le.TextureSource;var dr=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(dr||{});class hr{constructor(e,t=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const gr=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new hr(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=dr.NORMAL){return this._addListener(new hr(e,t,i))}addOnce(e,t,i=dr.NORMAL){return this._addListener(new hr(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let i;if(t>this.lastTime){if(i=this.elapsedMS=t-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*e.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const i=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,i)/1e3,e.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){const t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){const t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};gr.targetFPMS=.06;let fr,pr=gr;async function mr(){return fr??(fr=(async()=>{const e=cr.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(e=>{const t=document.createElement("video");t.onloadeddata=()=>e(t),t.onerror=()=>e(null),t.autoplay=!1,t.crossOrigin="anonymous",t.preload="auto",t.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",t.load()});if(!t)return"premultiply-alpha-on-upload";const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const n=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,n),e.deleteFramebuffer(r),e.deleteTexture(i),e.getExtension("WEBGL_lose_context")?.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),fr}const xr=class e extends yt{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...e.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==t.autoPlay,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==t.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=pr.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await mr(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,void 0!==t.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(pr.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(pr.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(pr.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};xr.extension=Le.TextureSource,xr.defaultOptions={...yt.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},xr.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Er=xr;const Cr=(e,t,i=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(e=>"string"==typeof e||i?t(e):e):e);const Br=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||li(),t}set(e,t){const i=Cr(e);let r;for(let a=0;a<this.parsers.length;a++){const e=this.parsers[a];if(e.test(t)){r=e.getCacheableAssets(i,t);break}}const n=new Map(Object.entries(r||{}));r||i.forEach(e=>{n.set(e,t)});const o=[...n.keys()],s={cacheKeys:o,keys:i};i.forEach(e=>{this._cacheMap.set(e,s)}),o.forEach(e=>{const i=r?r[e]:t;this._cache.has(e)&&this._cache.get(e)!==i&&li(),this._cache.set(e,n.get(e))})}remove(e){if(!this._cacheMap.has(e))return void li();const t=this._cacheMap.get(e);t.cacheKeys.forEach(e=>{this._cache.delete(e)}),t.keys.forEach(e=>{this._cacheMap.delete(e)})}get parsers(){return this._parsers}},br=[];function Ir(e={}){const t=e&&e.resource,i=t?e.resource:e,r=t?e:{resource:e};for(let n=0;n<br.length;n++){const e=br[n];if(e.test(i))return new e(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}Te.handleByList(Le.TextureSource,br),Dt.from=function(e,t=!1){return"string"==typeof e?Br.get(e):e instanceof yt?new Dt({source:e}):function(e={},t=!1){const i=e&&e.resource,r=i?e.resource:e,n=i?e:{resource:e};if(!t&&Br.has(r))return Br.get(r);const o=new Dt({source:Ir(n)});return o.on("destroy",()=>{Br.has(r)&&Br.remove(r)}),t||Br.set(r,o),o}(e,t)},yt.from=Ir,Te.add(or,sr,ar,Er,ur,Ar,vt);var yr=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(yr||{});function vr(e){if("string"!=typeof e)throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function wr(e){return e.split("?")[0].split("#")[0]}const Qr={toPosix(e){return t="\\",i="/",e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i);var t,i},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),isBlobUrl:e=>e.startsWith("blob:"),hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){vr(e),e=this.toPosix(e);const t=/^file:\/\/\//.exec(e);if(t)return t[0];const i=/^[^/:]+:\/{0,2}/.exec(e);return i?i[0]:""},toAbsolute(e,t,i){if(vr(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;const r=wr(this.toPosix(t??cr.get().getBaseUrl())),n=wr(this.toPosix(i??this.rootname(r)));if((e=this.toPosix(e)).startsWith("/"))return Qr.join(n,e.slice(1));return this.isAbsolute(e)?e:this.join(r,e)},normalize(e){if(vr(e),0===e.length)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;let t="";const i=(e=this.toPosix(e)).startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const r=e.endsWith("/");return(e=function(e){let t="",i=0,r=-1,n=0,o=-1;for(let s=0;s<=e.length;++s){if(s<e.length)o=e.charCodeAt(s);else{if(47===o)break;o=47}if(47===o){if(r===s-1||1===n);else if(r!==s-1&&2===n){if(t.length<2||2!==i||46!==t.charCodeAt(t.length-1)||46!==t.charCodeAt(t.length-2))if(t.length>2){const e=t.lastIndexOf("/");if(e!==t.length-1){-1===e?(t="",i=0):(t=t.slice(0,e),i=t.length-1-t.lastIndexOf("/")),r=s,n=0;continue}}else if(2===t.length||1===t.length){t="",i=0,r=s,n=0;continue}}else t.length>0?t+=`/${e.slice(r+1,s)}`:t=e.slice(r+1,s),i=s-r-1;r=s,n=0}else 46===o&&-1!==n?++n:n=-1}return t}(e)).length>0&&r&&(e+="/"),i?`/${e}`:t+e},isAbsolute(e){return vr(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(...e){if(0===e.length)return".";let t;for(let i=0;i<e.length;++i){const r=e[i];if(vr(r),r.length>0)if(void 0===t)t=r;else{const n=e[i-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return void 0===t?".":this.normalize(t)},dirname(e){if(vr(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0);const i=47===t;let r=-1,n=!0;const o=this.getProtocol(e),s=e;for(let a=(e=e.slice(o.length)).length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!n){r=a;break}}else n=!1;return-1===r?i?"/":this.isUrl(s)?o+e:o:i&&1===r?"//":o+e.slice(0,r)},rootname(e){vr(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){const i=e.indexOf("/",t.length);t=-1!==i?e.slice(0,i):e,t.endsWith("/")||(t+="/")}return t},basename(e,t){vr(e),t&&vr(t),e=wr(this.toPosix(e));let i,r=0,n=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let s=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){const l=e.charCodeAt(i);if(47===l){if(!o){r=i+1;break}}else-1===a&&(o=!1,a=i+1),s>=0&&(l===t.charCodeAt(s)?-1===--s&&(n=i):(s=-1,n=a))}return r===n?n=a:-1===n&&(n=e.length),e.slice(r,n)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!o){r=i+1;break}}else-1===n&&(o=!1,n=i+1);return-1===n?"":e.slice(r,n)},extname(e){vr(e);let t=-1,i=0,r=-1,n=!0,o=0;for(let s=(e=wr(this.toPosix(e))).length-1;s>=0;--s){const a=e.charCodeAt(s);if(47!==a)-1===r&&(n=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!n){i=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===i+1?"":e.slice(t,r)},parse(e){vr(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let i=(e=wr(this.toPosix(e))).charCodeAt(0);const r=this.isAbsolute(e);let n;t.root=this.rootname(e),n=r||this.hasProtocol(e)?1:0;let o=-1,s=0,a=-1,l=!0,c=e.length-1,A=0;for(;c>=n;--c)if(i=e.charCodeAt(c),47!==i)-1===a&&(l=!1,a=c+1),46===i?-1===o?o=c:1!==A&&(A=1):-1!==o&&(A=-1);else if(!l){s=c+1;break}return-1===o||-1===a||0===A||1===A&&o===a-1&&o===s+1?-1!==a&&(t.base=t.name=0===s&&r?e.slice(1,a):e.slice(s,a)):(0===s&&r?(t.name=e.slice(1,o),t.base=e.slice(1,a)):(t.name=e.slice(s,o),t.base=e.slice(s,a)),t.ext=e.slice(o,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Dr(e,t,i,r,n){const o=t[i];for(let s=0;s<o.length;s++){const a=o[s];i<t.length-1?Dr(e.replace(r[i],a),t,i+1,r,n):n.push(e.replace(r[i],a))}}function Nr(e){const t=e.match(/\{(.*?)\}/g),i=[];if(t){const r=[];t.forEach(e=>{const t=e.substring(1,e.length-1).split(",");r.push(t)}),Dr(e,r,0,t,i)}else i.push(e);return i}const kr=e=>!Array.isArray(e);class Sr{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}}getAlias(e){const{alias:t,src:i}=e;return Cr(t||i,e=>"string"==typeof e?e:Array.isArray(e)?e.map(e=>e?.src??e):e?.src?e.src:e,!0)}addManifest(e){this._manifest&&li(),this._manifest=e,e.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(e,t){const i=[];let r=t;Array.isArray(t)||(r=Object.entries(t).map(([e,t])=>"string"==typeof t||Array.isArray(t)?{alias:e,src:t}:{alias:e,...t})),r.forEach(t=>{const r=t.src,n=t.alias;let o;if("string"==typeof n){const t=this._createBundleAssetId(e,n);i.push(t),o=[n,t]}else{const t=n.map(t=>this._createBundleAssetId(e,t));i.push(...t),o=[...n,...t]}this.add({...t,alias:o,src:r})}),this._bundles[e]=i}add(e){const t=[];let i;Array.isArray(e)?t.push(...e):t.push(e),i=e=>{this.hasKey(e)&&li()};Cr(t).forEach(e=>{const{src:t}=e;let{data:r,format:n,loadParser:o,parser:s}=e;const a=Cr(t).map(e=>"string"==typeof e?Nr(e):Array.isArray(e)?e:[e]),l=this.getAlias(e);Array.isArray(l)?l.forEach(i):i(l);const c=[],A=e=>{const t=this._parsers.find(t=>t.test(e));return{src:e,...t?.parse(e)}};a.forEach(t=>{t.forEach(t=>{let i={};if("object"!=typeof t?i=A(t):(r=t.data??r,n=t.format??n,(t.loadParser||t.parser)&&(o=t.loadParser??o,s=t.parser??s),i={...A(t.src),...t}),!l)throw new Error(`[Resolver] alias is undefined for this asset: ${i.src}`);i=this._buildResolvedAsset(i,{aliases:l,data:r,format:n,loadParser:o,parser:s,progressSize:e.progressSize}),c.push(i)})}),l.forEach(e=>{this._assetMap[e]=c})})}resolveBundle(e){const t=kr(e);e=Cr(e);const i={};return e.forEach(e=>{const t=this._bundles[e];if(t){const r=this.resolve(t),n={};for(const t in r){const i=r[t];n[this._extractAssetIdFromBundle(e,t)]=i}i[e]=n}}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if("string"!=typeof e){const e={};for(const i in t)e[i]=t[i].src;return e}return t.src}resolve(e){const t=kr(e);e=Cr(e);const i={};return e.forEach(e=>{if(!this._resolverHash[e])if(this._assetMap[e]){let t=this._assetMap[e];const i=this._getPreferredOrder(t);i?.priority.forEach(e=>{i.params[e].forEach(i=>{const r=t.filter(t=>!!t[e]&&t[e]===i);r.length&&(t=r)})}),this._resolverHash[e]=t[0]}else this._resolverHash[e]=this._buildResolvedAsset({alias:[e],src:e},{});i[e]=this._resolverHash[e]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[t],r=this._preferredOrder.find(e=>e.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;return`${e}${/\?/.test(e)?"&":"?"}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:i,data:r,loadParser:n,parser:o,format:s,progressSize:a}=t;return(this._basePath||this._rootPath)&&(e.src=Qr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=n??e.loadParser,e.parser=o??e.parser,e.format=s??e.format??e.src.split(".").pop().split("?").shift().split("#").shift(),void 0!==a&&(e.progressSize=a),e}}Sr.RETINA_PREFIX=/@([0-9\.]+)x/;const Pr=(e,t)=>{const i=t.split("?")[1];return i&&(e+=`?${i}`),e},Mr=class e{constructor(e,t){this.linkedSheets=[];let i=e;e?.source instanceof yt&&(i={texture:e,data:t});const{texture:r,data:n,cachePrefix:o=""}=i;this.cachePrefix=o,this._texture=r instanceof Dt?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=n;const s=parseFloat(n.meta.scale);s?(this.resolution=s,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}parseSync(){return this._processFrames(0,!0),this._processAnimations(),this.textures}_processFrames(t,i=!1){let r=t;const n=i?1/0:e.BATCH_SIZE;for(;r-t<n&&r<this._frameKeys.length;){const e=this._frameKeys[r],t=this._frames[e],i=t.frame;if(i){let r=null,n=null;const o=!1!==t.trimmed&&t.sourceSize?t.sourceSize:t.frame,s=new ct(0,0,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution);r=t.rotated?new ct(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.h)/this.resolution,Math.floor(i.w)/this.resolution):new ct(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution),!1!==t.trimmed&&t.spriteSourceSize&&(n=new ct(Math.floor(t.spriteSourceSize.x)/this.resolution,Math.floor(t.spriteSourceSize.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution)),this.textures[e]=new Dt({source:this.textureSource,frame:r,orig:s,trim:n,rotate:t.rotated?2:0,defaultAnchor:t.anchor,defaultBorders:t.borders,label:e.toString()})}r++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const r=e[t][i];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*e.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Mr.BATCH_SIZE=1e3;let Vr=Mr;const _r=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Lr(e,t,i){const r={};if(e.forEach(e=>{r[e]=t}),Object.keys(t.textures).forEach(e=>{r[`${t.cachePrefix}${e}`]=t.textures[e]}),!i){const i=Qr.dirname(e[0]);t.linkedSheets.forEach((e,n)=>{const o=Lr([`${i}/${t.data.meta.related_multi_packs[n]}`],e,!0);Object.assign(r,o)})}return r}const Rr={extension:Le.Asset,cache:{test:e=>e instanceof Vr,getCacheableAssets:(e,t)=>Lr(e,t,!1)},resolver:{extension:{type:Le.ResolveParser,name:"resolveSpritesheet"},test:e=>{const t=e.split("?")[0].split("."),i=t.pop(),r=t.pop();return"json"===i&&_r.includes(r)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(Sr.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:Le.LoadParser,priority:yr.Normal,name:"spritesheetLoader"},testParse:async(e,t)=>".json"===Qr.extname(t.src).toLowerCase()&&!!e.frames,async parse(e,t,i){const{texture:r,imageFilename:n,textureOptions:o,cachePrefix:s}=t?.data??{};let a,l=Qr.dirname(t.src);if(l&&l.lastIndexOf("/")!==l.length-1&&(l+="/"),r instanceof Dt)a=r;else{const r=Pr(l+(n??e.meta.image),t.src);a=(await i.load([{src:r,data:o}]))[r]}const c=new Vr({texture:a.source,data:e,cachePrefix:s});await c.parse();const A=e?.meta?.related_multi_packs;if(Array.isArray(A)){const e=[];for(const n of A){if("string"!=typeof n)continue;let r=l+n;t.data?.ignoreMultiPack||(r=Pr(r,t.src),e.push(i.load({src:r,data:{textureOptions:o,ignoreMultiPack:!0}})))}const r=await Promise.all(e);c.linkedSheets=r,r.forEach(e=>{e.linkedSheets=[c].concat(c.linkedSheets.filter(t=>t!==e))})}return c},async unload(e,t,i){await i.unload(e.textureSource._sourceOrigin),e.destroy(!1)}}};Te.add(Rr);const Ur=Object.create(null),Tr=Object.create(null);function Or(e,t){let i=Tr[e];return void 0===i&&(void 0===Ur[t]&&(Ur[t]=1),Tr[e]=i=Ur[t]++),i}let Fr,Gr;function jr(){if(!Fr||Fr?.isContextLost()){const e=cr.get().createCanvas();Fr=e.getContext("webgl",{})}return Fr}function Hr(){if(!Gr){Gr="mediump";const e=jr();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Gr=t.precision?"highp":"mediump"}}return Gr}const Xr={},zr={};const Jr={stripVersion:function(e,t){return t?e.replace("#version 300 es",""):e},ensurePrecision:function(e,t,i){const r=i?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if("precision"!==e.substring(0,9)){let n=i?t.requestedFragmentPrecision:t.requestedVertexPrecision;return"highp"===n&&"highp"!==r&&(n="mediump"),`precision ${n} float;\n${e}`}return"highp"!==r&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e},addProgramDefines:function(e,t,i){return t?e:i?`\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${e=e.replace("out vec4 finalColor;","")}\n        `:`\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${e}\n        `},setProgramName:function(e,{name:t="pixi-program"},i=!0){t=t.replace(/\s+/g,"-");const r=i?Xr:zr;return r[t+=i?"-fragment":"-vertex"]?(r[t]++,t+=`-${r[t]}`):r[t]=1,-1!==e.indexOf("#define SHADER_NAME")?e:`${`#define SHADER_NAME ${t}`}\n${e}`},insertVersion:function(e,t){return t?`#version 300 es\n${e}`:e}},Wr=Object.create(null),Kr=class e{constructor(t){const i=-1!==(t={...e.defaultOptions,...t}).fragment.indexOf("#version 300 es"),r={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:Hr()},setProgramName:{name:t.name},addProgramDefines:i,insertVersion:i};let n=t.fragment,o=t.vertex;Object.keys(Jr).forEach(e=>{const t=r[e];n=Jr[e](n,t,!0),o=Jr[e](o,t,!1)}),this.fragment=n,this.vertex=o,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=Or(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Wr[this._cacheKey]=null}static from(t){const i=`${t.vertex}:${t.fragment}`;return Wr[i]||(Wr[i]=new e(t),Wr[i]._cacheKey=i),Wr[i]}};Kr.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Yr=Kr;const qr={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Zr(e){return qr[e]??qr.float32}const $r={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",vec2i:"sint32x2",vec3i:"sint32x3",vec4i:"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",vec2u:"uint32x2",vec3u:"uint32x3",vec4u:"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"},en=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|\)|$)/g;function tn(e,t){let i;for(;null!==(i=en.exec(e));){const e=$r[i[3]]??"float32";t[i[2]]={location:parseInt(i[1],10),format:e,stride:Zr(e).stride,offset:0,instance:!1,start:0}}en.lastIndex=0}function rn(e){const t=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,n=/:\s*([\w<>]+)/,o=/(\w+)\s*:\s*([\w\<\>]+)/g,s=/struct\s+(\w+)/,a=e.match(/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g)?.map(e=>({group:parseInt(e.match(t)[1],10),binding:parseInt(e.match(i)[1],10),name:e.match(r)[2],isUniform:"<uniform>"===e.match(r)[1],type:e.match(n)[1]}));if(!a)return{groups:[],structs:[]};const l=e.match(/struct\s+(\w+)\s*{([^}]+)}/g)?.map(e=>{const t=e.match(s)[1],i=e.match(o).reduce((e,t)=>{const[i,r]=t.split(":");return e[i.trim()]=r.trim(),e},{});return i?{name:t,members:i}:null}).filter(({name:e})=>a.some(t=>t.type===e||t.type.includes(`<${e}>`)))??[];return{groups:a,structs:l}}var nn=(e=>(e[e.VERTEX=1]="VERTEX",e[e.FRAGMENT=2]="FRAGMENT",e[e.COMPUTE=4]="COMPUTE",e))(nn||{});const on=Object.create(null);class sn{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:i,layout:r,gpuLayout:n,name:o}=e;if(this.name=o,this.fragment=t,this.vertex=i,t.source===i.source){const e=rn(t.source);this.structsAndGroups=e}else{const e=rn(i.source),r=rn(t.source);this.structsAndGroups=function(e,t){const i=new Set,r=new Set;return{structs:[...e.structs,...t.structs].filter(e=>!i.has(e.name)&&(i.add(e.name),!0)),groups:[...e.groups,...t.groups].filter(e=>{const t=`${e.name}-${e.binding}`;return!r.has(t)&&(r.add(t),!0)})}}(e,r)}this.layout=r??function({groups:e}){const t=[];for(let i=0;i<e.length;i++){const r=e[i];t[r.group]||(t[r.group]={}),t[r.group][r.name]=r.binding}return t}(this.structsAndGroups),this.gpuLayout=n??function({groups:e}){const t=[];for(let i=0;i<e.length;i++){const r=e[i];t[r.group]||(t[r.group]=[]),r.isUniform?t[r.group].push({binding:r.binding,visibility:nn.VERTEX|nn.FRAGMENT,buffer:{type:"uniform"}}):"sampler"===r.type?t[r.group].push({binding:r.binding,visibility:nn.FRAGMENT,sampler:{type:"filtering"}}):"texture_2d"===r.type||r.type.startsWith("texture_2d<")?t[r.group].push({binding:r.binding,visibility:nn.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}}):"texture_2d_array"===r.type||r.type.startsWith("texture_2d_array<")?t[r.group].push({binding:r.binding,visibility:nn.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d-array",multisampled:!1}}):("texture_cube"===r.type||r.type.startsWith("texture_cube<"))&&t[r.group].push({binding:r.binding,visibility:nn.FRAGMENT,texture:{sampleType:"float",viewDimension:"cube",multisampled:!1}})}for(let i=0;i<t.length;i++)t[i]||(t[i]=[]);return t}(this.structsAndGroups),this.autoAssignGlobalUniforms=!(void 0===this.layout[0]?.globalUniforms),this.autoAssignLocalUniforms=!(void 0===this.layout[1]?.localUniforms),this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,i=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Or(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=function({source:e,entryPoint:t}){const i={},r=function(e){return e.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"")}(e),n=r.indexOf(`fn ${t}(`);if(-1===n)return i;const o=r.indexOf("->",n);if(-1===o)return i;const s=r.substring(n,o);if(tn(s,i),0===Object.keys(i).length){const e=s.match(/\(\s*\w+\s*:\s*(\w+)/);if(e){const t=e[1],n=new RegExp(`struct\\s+${t}\\s*\\{([^}]+)\\}`,"s"),o=r.match(n);o&&tn(o[1],i)}}return i}(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,on[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return on[t]||(on[t]=new sn(e),on[t]._cacheKey=t),on[t]}}const an=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],ln=an.reduce((e,t)=>(e[t]=!0,e),{});function cn(e,t){switch(e){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const An=class e{constructor(t,i){this._touched=0,this.uid=ut("uniform"),this._resourceType="uniformGroup",this._resourceId=ut("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...e.defaultOptions,...i},this.uniformStructures=t;const r={};for(const e in t){const i=t[e];if(i.name=e,i.size=i.size??1,!ln[i.type]){const e=i.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(e){const[,t,r]=e;throw new Error(`Uniform type ${i.type} is not supported. Use type: '${t}', size: ${r} instead.`)}throw new Error(`Uniform type ${i.type} is not supported. Supported uniform types are: ${an.join(", ")}`)}i.value??(i.value=cn(i.type,i.size)),r[e]=i.value}this.uniforms=r,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=Or(Object.keys(r).map(e=>`${e}-${t[e].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};An.defaultOptions={ubo:!1,isStatic:!1};let un=An;class dn{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const i in e){const r=e[i];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){const i=this.resources[t];e!==i&&(i&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e,t){const i=this.resources;for(const r in i)i[r]._gcLastUsed=e,i[r]._touched=t}destroy(){const e=this.resources;for(const t in e){const i=e[t];i?.off?.("change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const i in t)t[i]===e&&(t[i]=null)}else this._updateKey()}}var hn=(e=>(e[e.WEBGL=1]="WEBGL",e[e.WEBGPU=2]="WEBGPU",e[e.CANVAS=4]="CANVAS",e[e.BOTH=3]="BOTH",e))(hn||{});class gn extends Xe{constructor(e){super(),this.uid=ut("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:i,groups:r,resources:n,compatibleRenderers:o,groupMap:s}=e;this.gpuProgram=t,this.glProgram=i,void 0===o&&(o=0,t&&(o|=hn.WEBGPU),i&&(o|=hn.WEBGL)),this.compatibleRenderers=o;const a={};if(n||r||(n={}),n&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&r&&!s)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&r&&s)for(const l in s)for(const e in s[l]){const t=s[l][e];a[t]={group:l,binding:e,name:t}}else if(t&&r&&!s){const e=t.structsAndGroups.groups;s={},e.forEach(e=>{s[e.group]=s[e.group]||{},s[e.group][e.binding]=e.name,a[e.name]=e})}else if(n){if(r={},s={},t){t.structsAndGroups.groups.forEach(e=>{s[e.group]=s[e.group]||{},s[e.group][e.binding]=e.name,a[e.name]=e})}let e=0;for(const t in n)a[t]||(r[99]||(r[99]=new dn,this._ownedBindGroups.push(r[99])),a[t]={group:99,binding:e,name:t},s[99]=s[99]||{},s[99][e]=t,e++);for(const t in n){const e=t;let i=n[t];i.source||i._resourceType||(i=new un(i));const o=a[e];o&&(r[o.group]||(r[o.group]=new dn,this._ownedBindGroups.push(r[o.group])),r[o.group].setResource(i,o.binding))}}this.groups=r,this._uniformBindMap=s,this.resources=this._buildResourceAccessor(r,a)}addResource(e,t,i){var r,n;(r=this._uniformBindMap)[t]||(r[t]={}),(n=this._uniformBindMap[t])[i]||(n[i]=e),this.groups[t]||(this.groups[t]=new dn,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const i={};for(const r in t){const n=t[r];Object.defineProperty(i,n.name,{get:()=>e[n.group].getResource(n.binding),set(t){e[n.group].setResource(t,n.binding)}})}return i}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(e=>{e.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:i,...r}=e;let n,o;return t&&(n=sn.from(t)),i&&(o=Yr.from(i)),new gn({gpuProgram:n,glProgram:o,...r})}}const fn={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},pn=class e{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}set cullMode(e){"none"!==e?(this.culling=!0,this.clockwiseFrontFace="front"===e):this.culling=!1}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend="none"!==e,this._blendMode=e,this._blendModeId=fn[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new e;return t.depthTest=!1,t.blend=!0,t}};pn.default2d=pn.for2d();let mn=pn;const xn=class e extends gn{constructor(t){super(t={...e.defaultOptions,...t}),this.enabled=!0,this._state=mn.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,"boolean"==typeof t.antialias?this.antialias=t.antialias?"on":"off":this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource("uTexture",0,1),t.blendRequired&&this.addResource("uBackTexture",0,3)}apply(e,t,i,r){e.applyFilter(this,t,i,r)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(t){const{gpu:i,gl:r,...n}=t;let o,s;return i&&(o=sn.from(i)),r&&(s=Yr.from(r)),new e({gpuProgram:o,glProgram:s,...n})}};xn.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let En=xn;const Cn=[];let Bn;function bn(){if("boolean"==typeof Bn)return Bn;try{const e=new Function("param1","param2","param3","return param1[param2] === param3;");Bn=!0===e({a:"b"},"a","b")}catch(e){Bn=!1}return Bn}function In(e,t,i=2){const r=t&&t.length,n=r?t[0]*i:e.length;let o=yn(e,0,n,i,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(r&&(o=function(e,t,i,r){const n=[];for(let o=0,s=t.length;o<s;o++){const i=yn(e,t[o]*r,o<s-1?t[o+1]*r:e.length,r,!1);i===i.next&&(i.steiner=!0),n.push(_n(i))}n.sort(Sn);for(let o=0;o<n.length;o++)i=Pn(n[o],i);return i}(e,t,o,i)),e.length>80*i){a=e[0],l=e[1];let t=a,r=l;for(let o=i;o<n;o+=i){const i=e[o],n=e[o+1];i<a&&(a=i),n<l&&(l=n),i>t&&(t=i),n>r&&(r=n)}c=Math.max(t-a,r-l),c=0!==c?32767/c:0}return wn(o,s,i,a,l,c,0),s}function yn(e,t,i,r,n){let o;if(n===function(e,t,i,r){let n=0;for(let o=t,s=i-r;o<i;o+=r)n+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return n}(e,t,i,r)>0)for(let s=t;s<i;s+=r)o=zn(s/r|0,e[s],e[s+1],o);else for(let s=i-r;s>=t;s-=r)o=zn(s/r|0,e[s],e[s+1],o);return o&&On(o,o.next)&&(Jn(o),o=o.next),o}function vn(e,t){if(!e)return e;t||(t=e);let i,r=e;do{if(i=!1,r.steiner||!On(r,r.next)&&0!==Tn(r.prev,r,r.next))r=r.next;else{if(Jn(r),r=t=r.prev,r===r.next)break;i=!0}}while(i||r!==t);return t}function wn(e,t,i,r,n,o,s){if(!e)return;!s&&o&&function(e,t,i,r){let n=e;do{0===n.z&&(n.z=Vn(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){let t,i=1;do{let r,n=e;e=null;let o=null;for(t=0;n;){t++;let s=n,a=0;for(let e=0;e<i&&(a++,s=s.nextZ,s);e++);let l=i;for(;a>0||l>0&&s;)0!==a&&(0===l||!s||n.z<=s.z)?(r=n,n=n.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=s}o.nextZ=null,i*=2}while(t>1)}(n)}(e,r,n,o);let a=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Dn(e,r,n,o):Qn(e))t.push(l.i,e.i,c.i),Jn(e),e=c.next,a=c.next;else if((e=c)===a){s?1===s?wn(e=Nn(vn(e),t),t,i,r,n,o,2):2===s&&kn(e,t,i,r,n,o):wn(vn(e),t,i,r,n,o,1);break}}}function Qn(e){const t=e.prev,i=e,r=e.next;if(Tn(t,i,r)>=0)return!1;const n=t.x,o=i.x,s=r.x,a=t.y,l=i.y,c=r.y,A=Math.min(n,o,s),u=Math.min(a,l,c),d=Math.max(n,o,s),h=Math.max(a,l,c);let g=r.next;for(;g!==t;){if(g.x>=A&&g.x<=d&&g.y>=u&&g.y<=h&&Rn(n,a,o,l,s,c,g.x,g.y)&&Tn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Dn(e,t,i,r){const n=e.prev,o=e,s=e.next;if(Tn(n,o,s)>=0)return!1;const a=n.x,l=o.x,c=s.x,A=n.y,u=o.y,d=s.y,h=Math.min(a,l,c),g=Math.min(A,u,d),f=Math.max(a,l,c),p=Math.max(A,u,d),m=Vn(h,g,t,i,r),x=Vn(f,p,t,i,r);let E=e.prevZ,C=e.nextZ;for(;E&&E.z>=m&&C&&C.z<=x;){if(E.x>=h&&E.x<=f&&E.y>=g&&E.y<=p&&E!==n&&E!==s&&Rn(a,A,l,u,c,d,E.x,E.y)&&Tn(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,C.x>=h&&C.x<=f&&C.y>=g&&C.y<=p&&C!==n&&C!==s&&Rn(a,A,l,u,c,d,C.x,C.y)&&Tn(C.prev,C,C.next)>=0)return!1;C=C.nextZ}for(;E&&E.z>=m;){if(E.x>=h&&E.x<=f&&E.y>=g&&E.y<=p&&E!==n&&E!==s&&Rn(a,A,l,u,c,d,E.x,E.y)&&Tn(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=x;){if(C.x>=h&&C.x<=f&&C.y>=g&&C.y<=p&&C!==n&&C!==s&&Rn(a,A,l,u,c,d,C.x,C.y)&&Tn(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Nn(e,t){let i=e;do{const r=i.prev,n=i.next.next;!On(r,n)&&Fn(r,i,i.next,n)&&Hn(r,n)&&Hn(n,r)&&(t.push(r.i,i.i,n.i),Jn(i),Jn(i.next),i=e=n),i=i.next}while(i!==e);return vn(i)}function kn(e,t,i,r,n,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Un(s,e)){let a=Xn(s,e);return s=vn(s,s.next),a=vn(a,a.next),wn(s,t,i,r,n,o,0),void wn(a,t,i,r,n,o,0)}e=e.next}s=s.next}while(s!==e)}function Sn(e,t){let i=e.x-t.x;if(0===i&&(i=e.y-t.y,0===i)){i=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return i}function Pn(e,t){const i=function(e,t){let i=t;const r=e.x,n=e.y;let o,s=-1/0;if(On(e,i))return i;do{if(On(e,i.next))return i.next;if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){const e=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=r&&e>s&&(s=e,o=i.x<i.next.x?i:i.next,e===r))return o}i=i.next}while(i!==t);if(!o)return null;const a=o,l=o.x,c=o.y;let A=1/0;i=o;do{if(r>=i.x&&i.x>=l&&r!==i.x&&Ln(n<c?r:s,n,l,c,n<c?s:r,n,i.x,i.y)){const t=Math.abs(n-i.y)/(r-i.x);Hn(i,e)&&(t<A||t===A&&(i.x>o.x||i.x===o.x&&Mn(o,i)))&&(o=i,A=t)}i=i.next}while(i!==a);return o}(e,t);if(!i)return t;const r=Xn(i,e);return vn(r,r.next),vn(i,i.next)}function Mn(e,t){return Tn(e.prev,e,t.prev)<0&&Tn(t.next,e,e.next)<0}function Vn(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function _n(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function Ln(e,t,i,r,n,o,s,a){return(n-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(r-a)>=(i-s)*(t-a)&&(i-s)*(o-a)>=(n-s)*(r-a)}function Rn(e,t,i,r,n,o,s,a){return!(e===s&&t===a)&&Ln(e,t,i,r,n,o,s,a)}function Un(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Fn(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Hn(e,t)&&Hn(t,e)&&function(e,t){let i=e,r=!1;const n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(Tn(e.prev,e,t.prev)||Tn(e,t.prev,t))||On(e,t)&&Tn(e.prev,e,e.next)>0&&Tn(t.prev,t,t.next)>0)}function Tn(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function On(e,t){return e.x===t.x&&e.y===t.y}function Fn(e,t,i,r){const n=jn(Tn(e,t,i)),o=jn(Tn(e,t,r)),s=jn(Tn(i,r,e)),a=jn(Tn(i,r,t));return n!==o&&s!==a||(!(0!==n||!Gn(e,i,t))||(!(0!==o||!Gn(e,r,t))||(!(0!==s||!Gn(i,e,r))||!(0!==a||!Gn(i,t,r)))))}function Gn(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function jn(e){return e>0?1:e<0?-1:0}function Hn(e,t){return Tn(e.prev,e,e.next)<0?Tn(e,t,e.next)>=0&&Tn(e,e.prev,t)>=0:Tn(e,t,e.prev)<0||Tn(e,e.next,t)<0}function Xn(e,t){const i=Wn(e.i,e.x,e.y),r=Wn(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function zn(e,t,i,r){const n=Wn(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Jn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wn(e,t,i){return{i:e,x:t,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}Te.handleByNamedList(Le.Environment,Cn);const Kn=In.default||In;var Yn=(e=>(e[e.NONE=0]="NONE",e[e.COLOR=16384]="COLOR",e[e.STENCIL=1024]="STENCIL",e[e.DEPTH=256]="DEPTH",e[e.COLOR_DEPTH=16640]="COLOR_DEPTH",e[e.COLOR_STENCIL=17408]="COLOR_STENCIL",e[e.DEPTH_STENCIL=1280]="DEPTH_STENCIL",e[e.ALL=17664]="ALL",e))(Yn||{});class qn{constructor(e){this.items=[],this._name=e}emit(e,t,i,r,n,o,s,a){const{name:l,items:c}=this;for(let A=0,u=c.length;A<u;A++)c[A][l](e,t,i,r,n,o,s,a);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&this.items.splice(t,1),this}contains(e){return-1!==this.items.indexOf(e)}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}const Zn=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],$n=class e extends Xe{constructor(e){super(),this.tick=0,this.uid=ut("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...Zn,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(t={}){const i=!0===t.skipExtensionImports||!1===t.manageImports;await async function(e){if(!e)for(let t=0;t<Cn.length;t++){const e=Cn[t];if(e.value.test())return void(await e.value.load())}}(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const e in this._systemsHash){t={...this._systemsHash[e].constructor.defaultOptions,...t}}t={...e.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let e=0;e<this.runners.init.items.length;e++)await this.runners.init.items[e].init(t);this._initOptions=t}render(e,t){this.tick++;let i=e;if(i instanceof Zi&&(i={container:i},t&&(ft(0,"passing a second argument is deprecated, please use render options instead"),i.target=t.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const e=Array.isArray(i.clearColor)&&4===i.clearColor.length;i.clearColor=e?i.clearColor:si.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.visible&&(i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i))}resize(e,t,i){const r=this.view.resolution;this.view.resize(e,t,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),void 0!==i&&i!==r&&this.runners.resolutionChange.emit(i)}clear(e={}){e.target||(e.target=this.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Yn.ALL);const{clear:t,clearColor:i,target:r,mipLevel:n,layer:o}=e;si.shared.setValue(i??this.background.colorRgba),this.renderTarget.clear(r,t,si.shared.toArray(),n??0,o??0)}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(e=>{this.runners[e]=new qn(e)})}_addSystems(e){let t;for(t in e){const i=e[t];this._addSystem(i.value,i.name)}}_addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const r in this.runners)this.runners[r].add(i);return this}_addPipes(e,t){const i=t.reduce((e,t)=>(e[t.name]=t.value,e),{});e.forEach(e=>{const t=e.value,r=e.name,n=i[r];this.renderPipes[r]=new t(this,n?new n:null),this.runners.destroy.add(this.renderPipes[r])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(!0===e||"object"==typeof e&&e.releaseGlobalResources)&&ci.release(),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!bn())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};$n.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let eo,to,io=$n;function ro(e){return void 0!==eo||(eo=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:e??io.defaultOptions.failIfMajorPerformanceCaveat};try{if(!cr.get().getWebGLRenderingContext())return!1;let e=cr.get().createCanvas().getContext("webgl",t);const i=!!e?.getContextAttributes()?.stencil;if(e){const t=e.getExtension("WEBGL_lose_context");t&&t.loseContext()}return e=null,i}catch(i){return!1}})()),eo}async function no(e={}){return void 0!==to||(to=await(async()=>{const t=cr.get().getNavigator().gpu;if(!t)return!1;try{const i=await t.requestAdapter(e);return await i.requestDevice(),!0}catch(i){return!1}})()),to}const oo=["webgl","webgpu","canvas"];const so="8.16.0";class ao{static init(){globalThis.__PIXI_APP_INIT__?.(this,so)}static destroy(){}}ao.extension=Le.Application;class lo{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,so)}destroy(){this._renderer=null}}lo.extension={type:[Le.WebGLSystem,Le.WebGPUSystem],name:"initHook",priority:-10};class co{static init(e){Object.defineProperty(this,"resizeTo",{configurable:!0,set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this._cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:r}=this._resizeTo;e=i,t=r}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}co.extension=Le.Application;class Ao{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{configurable:!0,set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,dr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?pr.shared:new pr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Ao.extension=Le.Application,Te.add(co),Te.add(Ao);const uo=class t{constructor(...e){this.stage=new Zi,void 0!==e[0]&&ft(0,"Application constructor options are deprecated, please use Application.init() instead.")}async init(i){i={...i},this.stage||(this.stage=new Zi),this.renderer=await async function(t){let i,r=[];t.preference?(r.push(t.preference),oo.forEach(e=>{e!==t.preference&&r.push(e)})):r=oo.slice();let n={};for(let s=0;s<r.length;s++){const o=r[s];if("webgpu"===o&&await no()){const{WebGPURenderer:r}=await e(async()=>{const{WebGPURenderer:e}=await import("./WebGPURenderer-BFympvxU.js");return{WebGPURenderer:e}},__vite__mapDeps([13,14,15,2,3,4,5,6,7,8,9,10,11,12]));i=r,n={...t,...t.webgpu};break}if("webgl"===o&&ro(t.failIfMajorPerformanceCaveat??io.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:r}=await e(async()=>{const{WebGLRenderer:e}=await import("./WebGLRenderer-15owv4_n.js");return{WebGLRenderer:e}},__vite__mapDeps([16,14,15,2,3,4,5,6,7,8,9,10,11,12]));i=r,n={...t,...t.webgl};break}if("canvas"===o){const{CanvasRenderer:r}=await e(async()=>{const{CanvasRenderer:e}=await import("./CanvasRenderer-jpCNdCRU.js");return{CanvasRenderer:e}},__vite__mapDeps([17,15,2,3,4,5,6,7,8,9,10,11,12]));i=r,n={...t,...t.canvasOptions};break}}if(delete n.webgpu,delete n.webgl,delete n.canvasOptions,!i)throw new Error("No available renderer for the current environment");const o=new i;return await o.init(n),o}(i),t._plugins.forEach(e=>{e.init.call(this,i)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return ft(0,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,i=!1){const r=t._plugins.slice(0);r.reverse(),r.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null}};uo._plugins=[];let ho=uo;Te.handleByList(Le.Application,ho._plugins),Te.add(ao);const go={test:e=>"string"==typeof e&&e.startsWith("info face="),parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const u in t){const e=t[u].match(/^[a-z]+/gm)[0],r=t[u].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),n={};for(const t in r){const e=r[t].split("="),i=e[0],o=e[1].replace(/"/gm,""),s=parseFloat(o),a=isNaN(s)?o:s;n[i]=a}i[e].push(n)}const r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[n]=i.info,[o]=i.common,[s]=i.distanceField??[];s&&(r.distanceField={range:parseInt(s.distanceRange,10),type:s.fieldType}),r.fontSize=parseInt(n.size,10),r.fontFamily=n.face,r.lineHeight=parseInt(o.lineHeight,10);const a=i.page;for(let u=0;u<a.length;u++)r.pages.push({id:parseInt(a[u].id,10)||0,file:a[u].file});const l={};r.baseLineOffset=r.lineHeight-parseInt(o.base,10);const c=i.char;for(let u=0;u<c.length;u++){const e=c[u],t=parseInt(e.id,10);let i=e.letter??e.char??String.fromCharCode(t);"space"===i&&(i=" "),l[t]=i,r.chars[i]={id:t,page:parseInt(e.page,10)||0,x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xOffset:parseInt(e.xoffset,10),yOffset:parseInt(e.yoffset,10),xAdvance:parseInt(e.xadvance,10),kerning:{}}}const A=i.kerning||[];for(let u=0;u<A.length;u++){const e=parseInt(A[u].first,10),t=parseInt(A[u].second,10),i=parseInt(A[u].amount,10);r.chars[l[t]].kerning[l[e]]=i}return r}},fo={test(e){const t=e;return"string"!=typeof t&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},parse(e){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=e.getElementsByTagName("info")[0],r=e.getElementsByTagName("common")[0],n=e.getElementsByTagName("distanceField")[0];n&&(t.distanceField={type:n.getAttribute("fieldType"),range:parseInt(n.getAttribute("distanceRange"),10)});const o=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning");t.fontSize=parseInt(i.getAttribute("size"),10),t.fontFamily=i.getAttribute("face"),t.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let c=0;c<o.length;c++)t.pages.push({id:parseInt(o[c].getAttribute("id"),10)||0,file:o[c].getAttribute("file")});const l={};t.baseLineOffset=t.lineHeight-parseInt(r.getAttribute("base"),10);for(let c=0;c<s.length;c++){const e=s[c],i=parseInt(e.getAttribute("id"),10);let r=e.getAttribute("letter")??e.getAttribute("char")??String.fromCharCode(i);"space"===r&&(r=" "),l[i]=r,t.chars[r]={id:i,page:parseInt(e.getAttribute("page"),10)||0,x:parseInt(e.getAttribute("x"),10),y:parseInt(e.getAttribute("y"),10),width:parseInt(e.getAttribute("width"),10),height:parseInt(e.getAttribute("height"),10),xOffset:parseInt(e.getAttribute("xoffset"),10),yOffset:parseInt(e.getAttribute("yoffset"),10),xAdvance:parseInt(e.getAttribute("xadvance"),10),kerning:{}}}for(let c=0;c<a.length;c++){const e=parseInt(a[c].getAttribute("first"),10),i=parseInt(a[c].getAttribute("second"),10),r=parseInt(a[c].getAttribute("amount"),10);t.chars[l[i]].kerning[l[e]]=r}return t}},po={test:e=>!("string"!=typeof e||!e.match(/<font(\s|>)/))&&fo.test(cr.get().parseXML(e)),parse:e=>fo.parse(cr.get().parseXML(e))},mo=[".xml",".fnt"],xo={extension:{type:Le.CacheParser,name:"cacheBitmapFont"},test:e=>!!e?.pages&&!!e?.chars&&"string"==typeof e?.fontFamily,getCacheableAssets(e,t){const i={};return e.forEach(e=>{i[e]=t,i[`${e}-bitmap`]=t}),i[`${t.fontFamily}-bitmap`]=t,i}},Eo={extension:{type:Le.LoadParser,priority:yr.Normal},name:"loadBitmapFont",id:"bitmap-font",test:e=>mo.includes(Qr.extname(e).toLowerCase()),testParse:async e=>go.test(e)||po.test(e),async parse(t,i,r){const n=go.test(t)?go.parse(t):po.parse(t),{src:o}=i,{pages:s}=n,a=[],l=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let e=0;e<s.length;++e){const t=s[e].file;let i=Qr.join(Qr.dirname(o),t);i=Pr(i,o),a.push({src:i,data:l})}const[c,{BitmapFont:A}]=await Promise.all([r.load(a),e(()=>Promise.resolve().then(()=>KA),void 0)]);return new A({data:n,textures:a.map(e=>c[e.src])},o)},async load(e,t){const i=await cr.get().fetch(e);return await i.text()},async unload(e,t,i){await Promise.all(e.pages.map(e=>i.unload(e.texture.source._sourceOrigin))),e.destroy()}};class Co{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(e=>{this._assetList.push(e)}),this.verbose,this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const Bo={extension:{type:Le.CacheParser,name:"cacheTextureArray"},test:e=>Array.isArray(e)&&e.every(e=>e instanceof Dt),getCacheableAssets:(e,t)=>{const i={};return e.forEach(e=>{t.forEach((t,r)=>{i[e+(0===r?"":r+1)]=t})}),i}};async function bo(e){if("Image"in globalThis)return new Promise(t=>{const i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(e)).blob();await createImageBitmap(t)}catch(t){return!1}return!0}return!1}const Io={extension:{type:Le.DetectionParser,priority:1},test:async()=>bo("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async e=>[...e,"avif"],remove:async e=>e.filter(e=>"avif"!==e)},yo=["png","jpg","jpeg"],vo={extension:{type:Le.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...yo],remove:async e=>e.filter(e=>!yo.includes(e))},wo="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Qo(e){if(wo)return!1;return""!==document.createElement("video").canPlayType(e)}const Do={extension:{type:Le.DetectionParser,priority:0},test:async()=>Qo("video/mp4"),add:async e=>[...e,"mp4","m4v"],remove:async e=>e.filter(e=>"mp4"!==e&&"m4v"!==e)},No={extension:{type:Le.DetectionParser,priority:0},test:async()=>Qo("video/ogg"),add:async e=>[...e,"ogv"],remove:async e=>e.filter(e=>"ogv"!==e)},ko={extension:{type:Le.DetectionParser,priority:0},test:async()=>Qo("video/webm"),add:async e=>[...e,"webm"],remove:async e=>e.filter(e=>"webm"!==e)},So={extension:{type:Le.DetectionParser,priority:0},test:async()=>bo("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async e=>[...e,"webp"],remove:async e=>e.filter(e=>"webp"!==e)},Po=class e{constructor(){this.loadOptions={...e.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const i={promise:null,parser:null};return i.promise=(async()=>{let r=null,n=null;if((t.parser||t.loadParser)&&(n=this._parserHash[t.parser||t.loadParser],t.loadParser&&li(),n||li(t.parser||t.loadParser)),!n){for(let i=0;i<this.parsers.length;i++){const r=this.parsers[i];if(r.load&&r.test?.(e,t,this)){n=r;break}}if(!n)return li(),null}r=await n.load(e,t,this),i.parser=n;for(let e=0;e<this.parsers.length;e++){const n=this.parsers[e];n.parse&&n.parse&&await(n.testParse?.(r,t,this))&&(r=await n.parse(r,t,this)||r,i.parser=n)}return r})(),i}async load(t,i){this._parsersValidated||this._validateParsers();const r="function"==typeof i?{...e.defaultOptions,...this.loadOptions,onProgress:i}:{...e.defaultOptions,...this.loadOptions,...i||{}},{onProgress:n,onError:o,strategy:s,retryCount:a,retryDelay:l}=r;let c=0;const A={},u=kr(t),d=Cr(t,e=>({alias:[e],src:e,data:{}})),h=d.reduce((e,t)=>e+(t.progressSize||1),0),g=d.map(async e=>{const t=Qr.toAbsolute(e.src);A[e.src]||(await this._loadAssetWithRetry(t,e,{onProgress:n,onError:o,strategy:s,retryCount:a,retryDelay:l},A),c+=e.progressSize||1,n&&n(c/h))});return await Promise.all(g),u?A[d[0].src]:A}async unload(e){const t=Cr(e,e=>({alias:[e],src:e})).map(async e=>{const t=Qr.toAbsolute(e.src),i=this.promiseCache[t];if(i){const r=await i.promise;delete this.promiseCache[t],await(i.parser?.unload?.(r,e,this))}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(t.name||t.id?(e[t.name]||e[t.id])&&li(t.id):li(),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,i,r){let n=0;const{onError:o,strategy:s,retryCount:a,retryDelay:l}=i,c=e=>new Promise(t=>setTimeout(t,e));for(;;)try{return this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),void(r[t.src]=await this.promiseCache[e].promise)}catch(A){delete this.promiseCache[e],delete r[t.src],n++;if("retry"===s&&!("retry"!==s||n>a)){o&&o(A,t),await c(l);continue}if("skip"===s)return void(o&&o(A,t));o&&o(A,t);const i=new Error(`[Loader.load] Failed to load ${e}.\n${A}`);throw A instanceof Error&&A.stack&&(i.stack=A.stack),i}}};Po.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let Mo=Po;function Vo(e,t){if(Array.isArray(t)){for(const i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}function _o(e,t){const i=e.split("?")[0],r=Qr.extname(i).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}const Lo={extension:{type:Le.LoadParser,priority:yr.Low},name:"loadJson",id:"json",test:e=>Vo(e,"application/json")||_o(e,".json"),async load(e){const t=await cr.get().fetch(e);return await t.json()}},Ro={name:"loadTxt",id:"text",extension:{type:Le.LoadParser,priority:yr.Low,name:"loadTxt"},test:e=>Vo(e,"text/plain")||_o(e,".txt"),async load(e){const t=await cr.get().fetch(e);return await t.text()}},Uo=["normal","bold","100","200","300","400","500","600","700","800","900"],To=[".ttf",".otf",".woff",".woff2"],Oo=["font/ttf","font/otf","font/woff","font/woff2"],Fo=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;const Go=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function jo(e){return Go.test(e)?e:encodeURI(e)}const Ho={extension:{type:Le.LoadParser,priority:yr.Low},name:"loadWebFont",id:"web-font",test:e=>Vo(e,Oo)||_o(e,To),async load(e,t){const i=cr.get().getFontFaceSet();if(i){const r=[],n=t.data?.family??function(e){const t=Qr.extname(e),i=Qr.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1));let r=i.length>0;for(const o of i)if(!o.match(Fo)){r=!1;break}let n=i.join(" ");return r||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}(e),o=t.data?.weights?.filter(e=>Uo.includes(e))??["normal"],s=t.data??{};for(let t=0;t<o.length;t++){const a=o[t],l=new FontFace(n,`url(${jo(e)})`,{...s,weight:a});await l.load(),i.add(l),r.push(l)}if(Br.has(`${n}-and-url`)){Br.get(`${n}-and-url`).entries.push({url:e,faces:r})}else Br.set(`${n}-and-url`,{entries:[{url:e,faces:r}]});return 1===r.length?r[0]:r}return li(),null},unload(e){const t=Array.isArray(e)?e:[e],i=t[0].family,r=Br.get(`${i}-and-url`),n=r.entries.find(e=>e.faces.some(e=>-1!==t.indexOf(e)));n.faces=n.faces.filter(e=>-1===t.indexOf(e)),0===n.faces.length&&(r.entries=r.entries.filter(e=>e!==n)),t.forEach(e=>{cr.get().getFontFaceSet().delete(e)}),0===r.entries.length&&Br.remove(`${i}-and-url`)}};var Xo,zo;const Jo=he(function(){if(zo)return Xo;zo=1,Xo=function(r){var n=[];return r.replace(t,function(t,r,o){var s=r.toLowerCase();for(o=function(e){var t=e.match(i);return t?t.map(Number):[]}(o),"m"==s&&o.length>2&&(n.push([r].concat(o.splice(0,2))),s="l",r="m"==r?"l":"L");;){if(o.length==e[s])return o.unshift(r),n.push(o);if(o.length<e[s])throw new Error("malformed path data");n.push([r].concat(o.splice(0,e[s])))}}),n};var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi,i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;return Xo}());class Wo{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new Wo(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-e,n=this.y-t;return r*=r,n*=n,r+n<=i}strokeContains(e,t,i,r=.5){if(0===this.radius)return!1;const n=this.x-e,o=this.y-t,s=this.radius,a=(1-r)*i,l=Math.sqrt(n*n+o*o);return l<=s+a&&l>s-(i-a)}getBounds(e){return e||(e=new ct),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=2*this.radius,e.height=2*this.radius,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ko{constructor(e=0,t=0,i=0,r=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=r}clone(){return new Ko(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(e,t,i,r=.5){const{halfWidth:n,halfHeight:o}=this;if(n<=0||o<=0)return!1;const s=i*(1-r),a=i-s,l=n-a,c=o-a,A=n+s,u=o+s,d=e-this.x,h=t-this.y;return d*d/(l*l)+h*h/(c*c)>1&&d*d/(A*A)+h*h/(u*u)<=1}getBounds(e){return e||(e=new ct),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=2*this.halfWidth,e.height=2*this.halfHeight,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Yo(e,t,i,r,n,o){const s=n-i,a=o-r,l=s*s+a*a;let c,A,u=-1;0!==l&&(u=((e-i)*s+(t-r)*a)/l),u<0?(c=i,A=r):u>1?(c=n,A=o):(c=i+u*s,A=r+u*a);const d=e-c,h=t-A;return d*d+h*h}class qo{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){const e=[];for(let i=0,r=t.length;i<r;i++)e.push(t[i].x,t[i].y);t=e}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,i=t.length;for(let r=0;r<i;r+=2){const n=t[r],o=t[r+1];e+=(t[(r+2)%i]-n)*(t[(r+3)%i]+o)}return e<0}containsPolygon(e){const t=this.getBounds(void 0),i=e.getBounds(void 0);if(!t.containsRect(i))return!1;const r=e.points;for(let n=0;n<r.length;n+=2){const e=r[n],t=r[n+1];if(!this.contains(e,t))return!1}return!0}clone(){const e=this.points.slice(),t=new qo(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1;const r=this.points.length/2;for(let n=0,o=r-1;n<r;o=n++){const r=this.points[2*n],s=this.points[2*n+1],a=this.points[2*o],l=this.points[2*o+1];s>t!=l>t&&e<(t-s)/(l-s)*(a-r)+r&&(i=!i)}return i}strokeContains(e,t,i,r=.5){const n=i*i,o=n*(1-r),s=n-o,{points:a}=this,l=a.length-(this.closePath?0:2);for(let c=0;c<l;c+=2){const i=a[c],r=a[c+1],n=a[(c+2)%a.length],l=a[(c+3)%a.length];if(Yo(e,t,i,r,n,l)<=(Math.sign((n-i)*(t-r)-(l-r)*(e-i))<0?s:o))return!0}return!1}getBounds(e){e||(e=new ct);const t=this.points;let i=1/0,r=-1/0,n=1/0,o=-1/0;for(let s=0,a=t.length;s<a;s+=2){const e=t[s],a=t[s+1];i=e<i?e:i,r=e>r?e:r,n=a<n?a:n,o=a>o?a:o}return e.x=i,e.width=r-i,e.y=n,e.height=o-n,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return ft(0,"Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return ft(0,"Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Zo=(e,t,i,r,n,o,s)=>{const a=e-i,l=t-r,c=Math.sqrt(a*a+l*l);return c>=n-o&&c<=n+s};class $o{constructor(e=0,t=0,i=0,r=0,n=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=r,this.radius=n}getBounds(e){return e||(e=new ct),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new $o(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),n=t-(this.y+i);const o=i*i;if(r*r+n*n<=o)return!0;if(r=e-(this.x+this.width-i),r*r+n*n<=o)return!0;if(n=t-(this.y+this.height-i),r*r+n*n<=o)return!0;if(r=e-(this.x+i),r*r+n*n<=o)return!0}return!1}strokeContains(e,t,i,r=.5){const{x:n,y:o,width:s,height:a,radius:l}=this,c=i*(1-r),A=i-c,u=n+l,d=o+l,h=n+s,g=o+a;return(e>=n-c&&e<=n+A||e>=h-A&&e<=h+c)&&t>=d&&t<=d+(a-2*l)||((t>=o-c&&t<=o+A||t>=g-A&&t<=g+c)&&e>=u&&e<=u+(s-2*l)||(e<u&&t<d&&Zo(e,t,u,d,l,A,c)||e>h-l&&t<d&&Zo(e,t,h-l,d,l,A,c)||e>h-l&&t>g-l&&Zo(e,t,h-l,g-l,l,A,c)||e<u&&t>g-l&&Zo(e,t,u,g-l,l,A,c)))}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const es={};function ts(e,t,i){let r=2166136261;for(let n=0;n<t;n++)r^=e[n].uid,r=Math.imul(r,16777619),r>>>=0;return es[r]||function(e,t,i,r){const n={};let o=0;for(let a=0;a<r;a++){const i=a<t?e[a]:Dt.EMPTY.source;n[o++]=i.source,n[o++]=i.style}const s=new dn(n);return es[i]=s,s}(e,t,r,i)}class is{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function rs(e,t,i,r){if(i??(i=0),r??(r=Math.min(e.byteLength-i,t.byteLength)),7&i||7&r)if(3&i||3&r)new Uint8Array(t).set(new Uint8Array(e,i,r));else{const n=r/4;new Float32Array(t,0,n).set(new Float32Array(e,i,n))}else{const n=r/8;new Float64Array(t,0,n).set(new Float64Array(e,i,n))}}const ns={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var os=(e=>(e[e.DISABLED=0]="DISABLED",e[e.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",e[e.MASK_ACTIVE=2]="MASK_ACTIVE",e[e.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",e[e.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",e[e.NONE=5]="NONE",e))(os||{});function ss(e,t){return"no-premultiply-alpha"===t.alphaMode&&ns[e]||e}const as=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function ls(e){let t="";for(let i=0;i<e;++i)i>0&&(t+="\nelse "),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function cs(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const r=as.replace(/%forloop%/gi,ls(e));if(t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}}finally{t.deleteShader(i)}return e}let As=null;class us{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class ds{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new us,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null,this.elements=null}}const hs=[];let gs=0;function fs(){return gs>0?hs[--gs]:new ds}function ps(e){e.elements=null,hs[gs++]=e}ci.register({clear:()=>{if(hs.length>0)for(const e of hs)e&&e.destroy();hs.length=0,gs=0}});let ms=0;const xs=class e{constructor(t){this.uid=ut("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],(t={...e.defaultOptions,...t}).maxTextures||(ft(0,"maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=function(){if(As)return As;const e=jr();return As=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),As=cs(As,e),e.getExtension("WEBGL_lose_context")?.loseContext(),As}());const{maxTextures:i,attributesInitialSize:r,indicesInitialSize:n}=t;this.attributeBuffer=new is(4*r),this.indexBuffer=new Uint16Array(n),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)ps(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const i=e._batch.textures.ids[t._source.uid];return!(!i&&0!==i)&&(e._textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let i=fs(),r=i.textures;r.clear();const n=t[this.elementStart];let o=ss(n.blendMode,n.texture._source),s=n.topology;4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const a=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,c=this.indexBuffer;let A=this._batchIndexSize,u=this._batchIndexStart,d="startBatch",h=[];const g=this.maxTextures;for(let f=this.elementStart;f<this.elementSize;++f){const n=t[f];t[f]=null;const p=n.texture._source,m=ss(n.blendMode,p),x=o!==m||s!==n.topology;p._batchTick!==ms||x?(p._batchTick=ms,(r.count>=g||x)&&(this._finishBatch(i,u,A-u,r,o,s,e,d,h),d="renderBatch",u=A,o=m,s=n.topology,i=fs(),r=i.textures,r.clear(),h=[],++ms),n._textureId=p._textureBindLocation=r.count,r.ids[p.uid]=r.count,r.textures[r.count++]=p,n._batch=i,h.push(n),A+=n.indexSize,n.packAsQuad?(this.packQuadAttributes(n,a,l,n._attributeStart,n._textureId),this.packQuadIndex(c,n._indexStart,n._attributeStart/this.vertexSize)):(this.packAttributes(n,a,l,n._attributeStart,n._textureId),this.packIndex(n,c,n._indexStart,n._attributeStart/this.vertexSize))):(n._textureId=p._textureBindLocation,A+=n.indexSize,n.packAsQuad?(this.packQuadAttributes(n,a,l,n._attributeStart,n._textureId),this.packQuadIndex(c,n._indexStart,n._attributeStart/this.vertexSize)):(this.packAttributes(n,a,l,n._attributeStart,n._textureId),this.packIndex(n,c,n._indexStart,n._attributeStart/this.vertexSize)),n._batch=i,h.push(n))}r.count>0&&(this._finishBatch(i,u,A-u,r,o,s,e,d,h),u=A,++ms),this.elementStart=this.elementSize,this._batchIndexStart=u,this._batchIndexSize=A}_finishBatch(e,t,i,r,n,o,s,a,l){e.gpuBindGroup=null,e.bindGroup=null,e.action=a,e.batcher=this,e.textures=r,e.blendMode=n,e.topology=o,e.start=t,e.size=i,e.elements=l,++ms,this.batches[this.batchIndex++]=e,s.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){4*e<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*e)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,2*this.attributeBuffer.size),i=new is(t);rs(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){const t=this.indexBuffer;let i=Math.max(e,1.5*t.length);i+=i%2;const r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let n=0;n<t.length;n++)r[n]=t[n];else rs(t.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,t,i){e[t]=i+0,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3}packIndex(e,t,i,r){const n=e.indices,o=e.indexSize,s=e.indexOffset,a=e.attributeOffset;for(let l=0;l<o;l++)t[i++]=r+n[l+s]-a}destroy(e={}){if(null!==this.batches){for(let e=0;e<this.batchIndex;e++)ps(this.batches[e]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};xs.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Es=xs;var Cs=(e=>(e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE",e[e.STATIC=1024]="STATIC",e))(Cs||{});class Bs extends Xe{constructor(e){let{data:t,size:i}=e;const{usage:r,label:n,shrinkToFit:o}=e;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=ut("buffer"),this._resourceType="buffer",this._resourceId=ut("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i??(i=t?.byteLength);const s=!!t;this.descriptor={size:i,usage:r,mappedAtCreation:s,label:n},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Cs.STATIC)}set static(e){e?this.descriptor.usage|=Cs.STATIC:this.descriptor.usage&=~Cs.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e)return void(i&&this.emit("update",this));const r=this._data;this._data=e,this._dataInt32=null,r&&r.length===e.length||!this.shrinkToFit&&r&&e.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=ut("resource"),this.emit("change",this))}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function bs(e,t){if(!(e instanceof Bs)){let i=t?Cs.INDEX:Cs.VERTEX;e instanceof Array&&(t?(e=new Uint32Array(e),i=Cs.INDEX|Cs.COPY_DST):(e=new Float32Array(e),i=Cs.VERTEX|Cs.COPY_DST)),e=new Bs({data:e,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return e}class Is extends Xe{constructor(e={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=ut("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new St,this._boundsDirty=!0;const{attributes:t,indexBuffer:i,topology:r}=e;if(this.buffers=[],this.attributes={},t)for(const n in t)this.addAttribute(n,t[n]);this.instanceCount=e.instanceCount??1,i&&this.addIndex(i),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const i=function(e){return(e instanceof Bs||Array.isArray(e)||e.BYTES_PER_ELEMENT)&&(e={buffer:e}),e.buffer=bs(e.buffer,!1),e}(t);-1===this.buffers.indexOf(i.buffer)&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=bs(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,function(e,t,i){const r=e.getAttribute(t);if(!r)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const n=r.buffer.data;let o=1/0,s=1/0,a=-1/0,l=-1/0;const c=n.BYTES_PER_ELEMENT,A=(r.offset||0)/c,u=(r.stride||8)/c;for(let d=A;d<n.length;d+=u){const e=n[d],t=n[d+1];e>a&&(a=e),t>l&&(l=t),e<o&&(o=e),t<s&&(s=t)}return i.minX=o,i.minY=s,i.maxX=a,i.maxY=l,i}(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(e=>e.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const ys=new Float32Array(1),vs=new Uint32Array(1);class ws extends Is{constructor(){const e=new Bs({data:ys,label:"attribute-batch-buffer",usage:Cs.VERTEX|Cs.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:24,offset:0},aUV:{buffer:e,format:"float32x2",stride:24,offset:8},aColor:{buffer:e,format:"unorm8x4",stride:24,offset:16},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:24,offset:20}},indexBuffer:new Bs({data:vs,label:"index-batch-buffer",usage:Cs.INDEX|Cs.COPY_DST,shrinkToFit:!1})})}}function Qs(e,t,i){if(e)for(const r in e){const n=t[r.toLocaleLowerCase()];if(n){let t=e[r];"header"===r&&(t=t.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&n.push(`//----${i}----//`),n.push(t)}else li()}}const Ds=/\{\{(.*?)\}\}/g;function Ns(e){const t={};return(e.match(Ds)?.map(e=>e.replace(/[{()}]/g,""))??[]).forEach(e=>{t[e]=[]}),t}function ks(e,t){let i;const r=/@in\s+([^;]+);/g;for(;null!==(i=r.exec(e));)t.push(i[1])}function Ss(e,t,i=!1){const r=[];ks(t,r),e.forEach(e=>{e.header&&ks(e.header,r)});const n=r;i&&n.sort();const o=n.map((e,t)=>`       @location(${t}) ${e},`).join("\n");let s=t.replace(/@in\s+[^;]+;\s*/g,"");return s=s.replace("{{in}}",`\n${o}\n`),s}function Ps(e,t){let i;const r=/@out\s+([^;]+);/g;for(;null!==(i=r.exec(e));)t.push(i[1])}function Ms(e,t){let i=e;for(const r in t){const e=t[r];i=e.join("\n").length?i.replace(`{{${r}}}`,`//-----${r} START-----//\n${e.join("\n")}\n//----${r} FINISH----//`):i.replace(`{{${r}}}`,"")}return i}const Vs=Object.create(null),_s=new Map;let Ls=0;function Rs({template:e,bits:t}){const i=Ts(e,t);if(Vs[i])return Vs[i];const{vertex:r,fragment:n}=function(e,t){const i=t.map(e=>e.vertex).filter(e=>!!e),r=t.map(e=>e.fragment).filter(e=>!!e);let n=Ss(i,e.vertex,!0);n=function(e,t){const i=[];Ps(t,i),e.forEach(e=>{e.header&&Ps(e.header,i)});let r=0;const n=i.sort().map(e=>e.indexOf("builtin")>-1?e:`@location(${r++}) ${e}`).join(",\n"),o=i.sort().map(e=>{return`       var ${t=e,t.replace(/@.*?\s+/g,"")};`;var t}).join("\n"),s=`return VSOutput(\n            ${i.sort().map(e=>` ${function(e){const t=/\b(\w+)\s*:/g.exec(e);return t?t[1]:""}(e)}`).join(",\n")});`;let a=t.replace(/@out\s+[^;]+;\s*/g,"");return a=a.replace("{{struct}}",`\n${n}\n`),a=a.replace("{{start}}",`\n${o}\n`),a=a.replace("{{return}}",`\n${s}\n`),a}(i,n);const o=Ss(r,e.fragment,!0);return{vertex:n,fragment:o}}(e,t);return Vs[i]=Os(r,n,t),Vs[i]}function Us({template:e,bits:t}){const i=Ts(e,t);return Vs[i]||(Vs[i]=Os(e.vertex,e.fragment,t)),Vs[i]}function Ts(e,t){return t.map(e=>(_s.has(e)||_s.set(e,Ls++),_s.get(e))).sort((e,t)=>e-t).join("-")+e.vertex+e.fragment}function Os(e,t,i){const r=Ns(e),n=Ns(t);return i.forEach(e=>{Qs(e.vertex,r,e.name),Qs(e.fragment,n,e.name)}),{vertex:Ms(e,r),fragment:Ms(t,n)}}const Fs={name:"global-uniforms-bit",vertex:{header:"\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        "}},Gs={name:"global-uniforms-bit",vertex:{header:"\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        "}};function js({bits:e,name:t}){const i=Rs({template:{fragment:"\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n\n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n\n        {{start}}\n\n        var outColor:vec4<f32>;\n\n        {{main}}\n\n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n",vertex:"\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n\n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n"},bits:[Fs,...e]});return sn.from({name:t,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function Hs({bits:e,name:t}){return new Yr({name:t,...Us({template:{vertex:"\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n\n        {{start}}\n\n        vColor = vec4(1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n",fragment:"\n\n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n\n        {{start}}\n\n        vec4 outColor;\n\n        {{main}}\n\n        finalColor = outColor * vColor;\n\n        {{end}}\n    }\n"},bits:[Gs,...e]})})}const Xs={name:"color-bit",vertex:{header:"\n            @in aColor: vec4<f32>;\n        ",main:"\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        "}},zs={name:"color-bit",vertex:{header:"\n            in vec4 aColor;\n        ",main:"\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        "}},Js={};function Ws(e){const t=[];if(1===e)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let r=0;r<e;r++)t.push(`@group(1) @binding(${i++}) var textureSource${r+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${i++}) var textureSampler${r+1}: sampler;`)}return t.join("\n")}function Ks(e){const t=[];if(1===e)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let i=0;i<e;i++)i===e-1?t.push("  default:{"):t.push(`  case ${i}:{`),t.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join("\n")}function Ys(e){return Js[e]||(Js[e]={name:"texture-batch-bit",vertex:{header:"\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            "},fragment:{header:`\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${Ws(e)}\n            `,main:`\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${Ks(e)}\n            `}}),Js[e]}const qs={};function Zs(e){const t=[];for(let i=0;i<e;i++)i>0&&t.push("else"),i<e-1&&t.push(`if(vTextureId < ${i}.5)`),t.push("{"),t.push(`\toutColor = texture(uTextures[${i}], vUV);`),t.push("}");return t.join("\n")}function $s(e){return qs[e]||(qs[e]={name:"texture-batch-bit",vertex:{header:"\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            "},fragment:{header:`\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${e}];\n\n            `,main:`\n\n                ${Zs(e)}\n            `}}),qs[e]}const ea={name:"round-pixels-bit",vertex:{header:"\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}},ta={name:"round-pixels-bit",vertex:{header:"\n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}},ia={};function ra(e){let t=ia[e];if(t)return t;const i=new Int32Array(e);for(let r=0;r<e;r++)i[r]=r;return t=ia[e]=new un({uTextures:{value:i,type:"i32",size:e}},{isStatic:!0}),t}class na extends gn{constructor(e){super({glProgram:Hs({name:"batch",bits:[zs,$s(e),ta]}),gpuProgram:js({name:"batch",bits:[Xs,Ys(e),ea]}),resources:{batchSamplers:ra(e)}}),this.maxTextures=e}}let oa=null;const sa=class e extends Es{constructor(t){super(t),this.geometry=new ws,this.name=e.extension.name,this.vertexSize=6,oa??(oa=new na(t.maxTextures)),this.shader=oa}packAttributes(e,t,i,r,n){const o=n<<16|65535&e.roundPixels,s=e.transform,a=s.a,l=s.b,c=s.c,A=s.d,u=s.tx,d=s.ty,{positions:h,uvs:g}=e,f=e.color,p=e.attributeOffset,m=p+e.attributeSize;for(let x=p;x<m;x++){const e=2*x,n=h[e],s=h[e+1];t[r++]=a*n+c*s+u,t[r++]=A*s+l*n+d,t[r++]=g[e],t[r++]=g[e+1],i[r++]=f,i[r++]=o}}packQuadAttributes(e,t,i,r,n){const o=e.texture,s=e.transform,a=s.a,l=s.b,c=s.c,A=s.d,u=s.tx,d=s.ty,h=e.bounds,g=h.maxX,f=h.minX,p=h.maxY,m=h.minY,x=o.uvs,E=e.color,C=n<<16|65535&e.roundPixels;t[r+0]=a*f+c*m+u,t[r+1]=A*m+l*f+d,t[r+2]=x.x0,t[r+3]=x.y0,i[r+4]=E,i[r+5]=C,t[r+6]=a*g+c*m+u,t[r+7]=A*m+l*g+d,t[r+8]=x.x1,t[r+9]=x.y1,i[r+10]=E,i[r+11]=C,t[r+12]=a*g+c*p+u,t[r+13]=A*p+l*g+d,t[r+14]=x.x2,t[r+15]=x.y2,i[r+16]=E,i[r+17]=C,t[r+18]=a*f+c*p+u,t[r+19]=A*p+l*f+d,t[r+20]=x.x3,t[r+21]=x.y3,i[r+22]=E,i[r+23]=C}_updateMaxTextures(e){this.shader.maxTextures!==e&&(oa=new na(e),this.shader=oa)}destroy(){this.shader=null,super.destroy()}};sa.extension={type:[Le.Batcher],name:"default"};let aa=sa;class la{constructor(e){this.items=Object.create(null);const{renderer:t,type:i,onUnload:r,priority:n,name:o}=e;this._renderer=t,t.gc.addResourceHash(this,"items",i,n??0),this._onUnload=r,this.name=o}add(e){return!this.items[e.uid]&&(this.items[e.uid]=e,e.once("unload",this.remove,this),e._gcLastUsed=this._renderer.gc.now,!0)}remove(e,...t){if(!this.items[e.uid])return;const i=e._gpuData[this._renderer.uid];i&&(this._onUnload?.(e,...t),i.destroy(),e._gpuData[this._renderer.uid]=null,this.items[e.uid]=null)}removeAll(...e){Object.values(this.items).forEach(t=>t&&this.remove(t,...e))}destroy(...e){this.removeAll(...e),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function ca(e,t,i,r,n){const o=t.a,s=t.b,a=t.c,l=t.d,c=t.tx,A=t.ty;i||(i=0),r||(r=2),n||(n=e.length/r-i);let u=i*r;for(let d=0;d<n;d++){const t=e[u],i=e[u+1];e[u]=o*t+a*i+c,e[u+1]=s*t+l*i+A,u+=r}}const Aa=new qe;class ua{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|65280&e|(255&e)<<16,i=this.renderable;return i?Qi(t,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):t+(255*this.alpha<<24)}get transform(){return this.renderable?.groupTransform||Aa}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const da={extension:{type:Le.ShapeBuilder,name:"circle"},build(e,t){let i,r,n,o,s,a;if("circle"===e.type){const t=e;if(s=a=t.radius,s<=0)return!1;i=t.x,r=t.y,n=o=0}else if("ellipse"===e.type){const t=e;if(s=t.halfWidth,a=t.halfHeight,s<=0||a<=0)return!1;i=t.x,r=t.y,n=o=0}else{const t=e,l=t.width/2,c=t.height/2;i=t.x+l,r=t.y+c,s=a=Math.max(0,Math.min(t.radius,Math.min(l,c))),n=l-s,o=c-a}if(n<0||o<0)return!1;const l=Math.ceil(2.3*Math.sqrt(s+a)),c=8*l+(n?4:0)+(o?4:0);if(0===c)return!1;if(0===l)return t[0]=t[6]=i+n,t[1]=t[3]=r+o,t[2]=t[4]=i-n,t[5]=t[7]=r-o,!0;let A=0,u=4*l+(n?2:0)+2,d=u,h=c,g=n+s,f=o,p=i+g,m=i-g,x=r+f;if(t[A++]=p,t[A++]=x,t[--u]=x,t[--u]=m,o){const e=r-f;t[d++]=m,t[d++]=e,t[--h]=e,t[--h]=p}for(let C=1;C<l;C++){const e=Math.PI/2*(C/l),c=n+Math.cos(e)*s,g=o+Math.sin(e)*a,f=i+c,p=i-c,m=r+g,x=r-g;t[A++]=f,t[A++]=m,t[--u]=m,t[--u]=p,t[d++]=p,t[d++]=x,t[--h]=x,t[--h]=f}g=n,f=o+a,p=i+g,m=i-g,x=r+f;const E=r-f;return t[A++]=p,t[A++]=x,t[--h]=E,t[--h]=p,n&&(t[A++]=m,t[A++]=x,t[--h]=E,t[--h]=m),!0},triangulate(e,t,i,r,n,o){if(0===e.length)return;let s=0,a=0;for(let A=0;A<e.length;A+=2)s+=e[A],a+=e[A+1];s/=e.length/2,a/=e.length/2;let l=r;t[l*i]=s,t[l*i+1]=a;const c=l++;for(let A=0;A<e.length;A+=2)t[l*i]=e[A],t[l*i+1]=e[A+1],A>0&&(n[o++]=l,n[o++]=c,n[o++]=l-1),l++;n[o++]=c+1,n[o++]=c,n[o++]=l-1}},ha={...da,extension:{...da.extension,name:"ellipse"}},ga={...da,extension:{...da.extension,name:"roundedRectangle"}},fa=1e-4;function pa(e,t,i,r,n,o,s,a){let l,c;s?(l=r,c=-i):(l=-r,c=i);const A=e-i*n+l,u=t-r*n+c,d=e+i*o+l,h=t+r*o+c;return a.push(A,u),a.push(d,h),2}function ma(e,t,i,r,n,o,s,a){const l=i-e,c=r-t;let A=Math.atan2(l,c),u=Math.atan2(n-e,o-t);a&&A<u?A+=2*Math.PI:!a&&A>u&&(u+=2*Math.PI);let d=A;const h=u-A,g=Math.abs(h),f=Math.sqrt(l*l+c*c),p=1+(15*g*Math.sqrt(f)/Math.PI|0),m=h/p;if(d+=m,a){s.push(e,t),s.push(i,r);for(let i=1,r=d;i<p;i++,r+=m)s.push(e,t),s.push(e+Math.sin(r)*f,t+Math.cos(r)*f);s.push(e,t),s.push(n,o)}else{s.push(i,r),s.push(e,t);for(let i=1,r=d;i<p;i++,r+=m)s.push(e+Math.sin(r)*f,t+Math.cos(r)*f),s.push(e,t);s.push(n,o),s.push(e,t)}return 2*p}function xa(e,t,i,r,n,o){const s=fa;if(0===e.length)return;const a=t;let l=a.alignment;if(.5!==t.alignment){let t=function(e){const t=e.length;if(t<6)return 1;let i=0;for(let r=0,n=e[t-2],o=e[t-1];r<t;r+=2){const t=e[r],s=e[r+1];i+=(t-n)*(s+o),n=t,o=s}return i<0?-1:1}(e);l=(l-.5)*t+.5}const c=new Ke(e[0],e[1]),A=new Ke(e[e.length-2],e[e.length-1]),u=r,d=Math.abs(c.x-A.x)<s&&Math.abs(c.y-A.y)<s;if(u){e=e.slice(),d&&(e.pop(),e.pop(),A.set(e[e.length-2],e[e.length-1]));const t=.5*(c.x+A.x),i=.5*(A.y+c.y);e.unshift(t,i),e.push(t,i)}const h=n,g=e.length/2;let f=e.length;const p=h.length/2,m=a.width/2,x=m*m,E=a.miterLimit*a.miterLimit;let C=e[0],B=e[1],b=e[2],I=e[3],y=0,v=0,w=-(B-I),Q=C-b,D=0,N=0,k=Math.sqrt(w*w+Q*Q);w/=k,Q/=k,w*=m,Q*=m;const S=2*(1-l),P=2*l;u||("round"===a.cap?f+=ma(C-w*(S-P)*.5,B-Q*(S-P)*.5,C-w*S,B-Q*S,C+w*P,B+Q*P,h,!0)+2:"square"===a.cap&&(f+=pa(C,B,w,Q,S,P,!0,h))),h.push(C-w*S,B-Q*S),h.push(C+w*P,B+Q*P);for(let M=1;M<g-1;++M){C=e[2*(M-1)],B=e[2*(M-1)+1],b=e[2*M],I=e[2*M+1],y=e[2*(M+1)],v=e[2*(M+1)+1],w=-(B-I),Q=C-b,k=Math.sqrt(w*w+Q*Q),w/=k,Q/=k,w*=m,Q*=m,D=-(I-v),N=b-y,k=Math.sqrt(D*D+N*N),D/=k,N/=k,D*=m,N*=m;const t=b-C,i=B-I,r=b-y,n=v-I,o=t*r+i*n,s=i*r-n*t,l=s<0;if(Math.abs(s)<.001*Math.abs(o)){h.push(b-w*S,I-Q*S),h.push(b+w*P,I+Q*P),o>=0&&("round"===a.join?f+=ma(b,I,b-w*S,I-Q*S,b-D*S,I-N*S,h,!1)+4:f+=2,h.push(b-D*P,I-N*P),h.push(b+D*S,I+N*S));continue}const c=(-w+C)*(-Q+I)-(-w+b)*(-Q+B),A=(-D+y)*(-N+I)-(-D+b)*(-N+v),u=(t*A-r*c)/s,d=(n*c-i*A)/s,g=(u-b)*(u-b)+(d-I)*(d-I),p=b+(u-b)*S,V=I+(d-I)*S,_=b-(u-b)*P,L=I-(d-I)*P,R=l?S:P;g<=Math.min(t*t+i*i,r*r+n*n)+R*R*x?"bevel"===a.join||g/x>E?(l?(h.push(p,V),h.push(b+w*P,I+Q*P),h.push(p,V),h.push(b+D*P,I+N*P)):(h.push(b-w*S,I-Q*S),h.push(_,L),h.push(b-D*S,I-N*S),h.push(_,L)),f+=2):"round"===a.join?l?(h.push(p,V),h.push(b+w*P,I+Q*P),f+=ma(b,I,b+w*P,I+Q*P,b+D*P,I+N*P,h,!0)+4,h.push(p,V),h.push(b+D*P,I+N*P)):(h.push(b-w*S,I-Q*S),h.push(_,L),f+=ma(b,I,b-w*S,I-Q*S,b-D*S,I-N*S,h,!1)+4,h.push(b-D*S,I-N*S),h.push(_,L)):(h.push(p,V),h.push(_,L)):(h.push(b-w*S,I-Q*S),h.push(b+w*P,I+Q*P),"round"===a.join?f+=l?ma(b,I,b+w*P,I+Q*P,b+D*P,I+N*P,h,!0)+2:ma(b,I,b-w*S,I-Q*S,b-D*S,I-N*S,h,!1)+2:"miter"===a.join&&g/x<=E&&(l?(h.push(_,L),h.push(_,L)):(h.push(p,V),h.push(p,V)),f+=2),h.push(b-D*S,I-N*S),h.push(b+D*P,I+N*P),f+=2)}C=e[2*(g-2)],B=e[2*(g-2)+1],b=e[2*(g-1)],I=e[2*(g-1)+1],w=-(B-I),Q=C-b,k=Math.sqrt(w*w+Q*Q),w/=k,Q/=k,w*=m,Q*=m,h.push(b-w*S,I-Q*S),h.push(b+w*P,I+Q*P),u||("round"===a.cap?f+=ma(b-w*(S-P)*.5,I-Q*(S-P)*.5,b-w*S,I-Q*S,b+w*P,I+Q*P,h,!1)+2:"square"===a.cap&&(f+=pa(b,I,w,Q,S,P,!1,h)));for(let M=p;M<f+p-2;++M)C=h[2*M],B=h[2*M+1],b=h[2*(M+1)],I=h[2*(M+1)+1],y=h[2*(M+2)],v=h[2*(M+2)+1],Math.abs(C*(I-v)+b*(v-B)+y*(B-I))<1e-8||o.push(M,M+1,M+2)}function Ea(e,t,i,r,n,o,s){const a=Kn(e,t,2);if(!a)return;for(let c=0;c<a.length;c+=3)o[s++]=a[c]+n,o[s++]=a[c+1]+n,o[s++]=a[c+2]+n;let l=n*r;for(let c=0;c<e.length;c+=2)i[l]=e[c],i[l+1]=e[c+1],l+=r}const Ca=[],Ba={extension:{type:Le.ShapeBuilder,name:"polygon"},build(e,t){for(let i=0;i<e.points.length;i++)t[i]=e.points[i];return!0},triangulate(e,t,i,r,n,o){Ea(e,Ca,t,i,r,n,o)}},ba={extension:{type:Le.ShapeBuilder,name:"rectangle"},build(e,t){const i=e,r=i.x,n=i.y,o=i.width,s=i.height;return o>0&&s>0&&(t[0]=r,t[1]=n,t[2]=r+o,t[3]=n,t[4]=r+o,t[5]=n+s,t[6]=r,t[7]=n+s,!0)},triangulate(e,t,i,r,n,o){let s=0;t[(r*=i)+s]=e[0],t[r+s+1]=e[1],s+=i,t[r+s]=e[2],t[r+s+1]=e[3],s+=i,t[r+s]=e[6],t[r+s+1]=e[7],s+=i,t[r+s]=e[4],t[r+s+1]=e[5],s+=i;const a=r/i;n[o++]=a,n[o++]=a+1,n[o++]=a+2,n[o++]=a+1,n[o++]=a+3,n[o++]=a+2}},Ia={extension:{type:Le.ShapeBuilder,name:"triangle"},build:(e,t)=>(t[0]=e.x,t[1]=e.y,t[2]=e.x2,t[3]=e.y2,t[4]=e.x3,t[5]=e.y3,!0),triangulate(e,t,i,r,n,o){let s=0;t[(r*=i)+s]=e[0],t[r+s+1]=e[1],s+=i,t[r+s]=e[2],t[r+s+1]=e[3],s+=i,t[r+s]=e[4],t[r+s+1]=e[5];const a=r/i;n[o++]=a,n[o++]=a+1,n[o++]=a+2}},ya=[{offset:0,color:"white"},{offset:1,color:"black"}],va=class e{constructor(...t){this.uid=ut("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let i=function(e){let t=e[0]??{};("number"==typeof t||e[1])&&(ft(0,"use options object instead"),t={type:"linear",start:{x:e[0],y:e[1]},end:{x:e[2],y:e[3]},textureSpace:e[4],textureSize:e[5]??wa.defaultLinearOptions.textureSize});return t}(t);i={..."radial"===i.type?e.defaultRadialOptions:e.defaultLinearOptions,...Et(i)},this._textureSize=i.textureSize,this._wrapMode=i.wrapMode,"radial"===i.type?(this.center=i.center,this.outerCenter=i.outerCenter??this.center,this.innerRadius=i.innerRadius,this.outerRadius=i.outerRadius,this.scale=i.scale,this.rotation=i.rotation):(this.start=i.start,this.end=i.end),this.textureSpace=i.textureSpace,this.type=i.type,i.colorStops.forEach(e=>{this.addColorStop(e.offset,e.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:si.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:i,y:r}=this.end,n=i-e,o=r-t;const s=n<0||o<0;if("clamp-to-edge"===this._wrapMode){if(n<0){const t=e;e=i,i=t,n*=-1}if(o<0){const e=t;t=r,r=e,o*=-1}}const a=this.colorStops.length?this.colorStops:ya,l=this._textureSize,{canvas:c,context:A}=Da(l,1),u=s?A.createLinearGradient(this._textureSize,0,0,0):A.createLinearGradient(0,0,this._textureSize,0);Qa(u,a),A.fillStyle=u,A.fillRect(0,0,l,1),this.texture=new Dt({source:new ur({resource:c,addressMode:this._wrapMode})});const d=Math.sqrt(n*n+o*o),h=Math.atan2(o,n),g=new qe;g.scale(d/l,1),g.rotate(h),g.translate(e,t),"local"===this.textureSpace&&g.scale(l,l),this.transform=g}buildGradient(){this.texture||this._tick++,"linear"===this.type?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:ya,t=this._textureSize,{canvas:i,context:r}=Da(t,t),{x:n,y:o}=this.center,{x:s,y:a}=this.outerCenter,l=this.innerRadius,c=this.outerRadius,A=s-c,u=a-c,d=t/(2*c),h=(n-A)*d,g=(o-u)*d,f=r.createRadialGradient(h,g,l*d,(s-A)*d,(a-u)*d,c*d);Qa(f,e),r.fillStyle=e[e.length-1].color,r.fillRect(0,0,t,t),r.fillStyle=f,r.translate(h,g),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-h,-g),r.fillRect(0,0,t,t),this.texture=new Dt({source:new ur({resource:i,addressMode:this._wrapMode})});const p=new qe;p.scale(1/d,1/d),p.translate(A,u),"local"===this.textureSpace&&p.scale(t,t),this.transform=p}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};va.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"},va.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let wa=va;function Qa(e,t){for(let i=0;i<t.length;i++){const r=t[i];e.addColorStop(r.offset,r.color)}}function Da(e,t){const i=cr.get().createCanvas(e,t),r=i.getContext("2d");return{canvas:i,context:r}}const Na=new qe,ka=new ct;function Sa(e,t,i,r){const n=t.matrix?e.copyFrom(t.matrix).invert():e.identity();if("local"===t.textureSpace){const e=i.getBounds(ka);t.width&&e.pad(t.width);const{x:r,y:o}=e,s=1/e.width,a=1/e.height,l=-r*s,c=-o*a,A=n.a,u=n.b,d=n.c,h=n.d;n.a*=s,n.b*=s,n.c*=a,n.d*=a,n.tx=l*A+c*d+n.tx,n.ty=l*u+c*h+n.ty}else n.translate(t.texture.frame.x,t.texture.frame.y),n.scale(1/t.texture.source.width,1/t.texture.source.height);const o=t.texture.source.style;return t.fill instanceof wa||"clamp-to-edge"!==o.addressMode||(o.addressMode="repeat",o.update()),r&&n.append(Na.copyFrom(r).invert()),n}const Pa={};Te.handleByMap(Le.ShapeBuilder,Pa),Te.add(ba,Ba,Ia,da,ha,ga);const Ma=new ct,Va=new qe;function _a(e,t,i){const r=[],n=Pa.rectangle,o=Ma;o.x=e.dx,o.y=e.dy,o.width=e.dw,o.height=e.dh;const s=e.transform;if(!n.build(o,r))return;const{vertices:a,uvs:l,indices:c}=i,A=c.length,u=a.length/2;s&&ca(r,s),n.triangulate(r,a,2,u,c,A);const d=e.image,h=d.uvs;l.push(h.x0,h.y0,h.x1,h.y1,h.x3,h.y3,h.x2,h.y2);const g=ui.get(ua);g.indexOffset=A,g.indexSize=c.length-A,g.attributeOffset=u,g.attributeSize=a.length/2-u,g.baseColor=e.style,g.alpha=e.alpha,g.texture=d,g.geometryData=i,t.push(g)}function La(e,t,i,r,n){const{vertices:o,uvs:s,indices:a}=n;e.shapePrimitives.forEach(({shape:e,transform:l,holes:c})=>{const A=[],u=Pa[e.type];if(!u.build(e,A))return;const d=a.length,h=o.length/2;let g="triangle-list";if(l&&ca(A,l),i){const i=e.closePath??!0,r=t;r.pixelLine?(!function(e,t,i,r){const n=fa;if(0===e.length)return;const o=e[0],s=e[1],a=e[e.length-2],l=e[e.length-1],c=t||Math.abs(o-a)<n&&Math.abs(s-l)<n,A=i,u=e.length/2,d=A.length/2;for(let h=0;h<u;h++)A.push(e[2*h]),A.push(e[2*h+1]);for(let h=0;h<u-1;h++)r.push(d+h,d+h+1);c&&r.push(d+u-1,d)}(A,i,o,a),g="line-list"):xa(A,r,0,i,o,a)}else if(c){const e=[],t=A.slice();(function(e){const t=[];for(let i=0;i<e.length;i++){const r=e[i].shape,n=[];Pa[r.type].build(r,n)&&t.push(n)}return t})(c).forEach(i=>{e.push(t.length/2),t.push(...i)}),Ea(t,e,o,2,h,a,d)}else u.triangulate(A,o,2,h,a,d);const f=s.length/2,p=t.texture;if(p!==Dt.WHITE){const i=Sa(Va,t,e,l);!function(e,t,i,r,n,o,s,a=null){let l=0;i*=t,n*=o;const c=a.a,A=a.b,u=a.c,d=a.d,h=a.tx,g=a.ty;for(;l<s;){const s=e[i],a=e[i+1];r[n]=c*s+u*a+h,r[n+1]=A*s+d*a+g,n+=o,i+=t,l++}}(o,2,h,s,f,2,o.length/2-h,i)}else!function(e,t,i,r){let n=0;for(t*=i;n<r;)e[t]=0,e[t+1]=0,t+=i,n++}(s,f,2,o.length/2-h);const m=ui.get(ua);m.indexOffset=d,m.indexSize=a.length-d,m.attributeOffset=h,m.attributeSize=o.length/2-h,m.baseColor=t.color,m.alpha=t.alpha,m.texture=p,m.geometryData=n,m.topology=g,r.push(m)})}class Ra{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(e=>{ui.return(e)}),this.graphicsData&&ui.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class Ua{constructor(){this.instructions=new Fi}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new aa({maxTextures:t}),this.instructions.reset()}get geometry(){return ft(0,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Ta=class e{constructor(e){this._renderer=e,this._managedContexts=new la({renderer:e,type:"resource",name:"graphicsContext"})}init(t){e.defaultOptions.bezierSmoothness=t?.bezierSmoothness??e.defaultOptions.bezierSmoothness}getContextRenderData(e){return e._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const t=!!e._gpuData[this._renderer.uid],i=e._gpuData[this._renderer.uid]||this._initContext(e);if(e.dirty||!t){t&&i.reset(),function(e,t){const{geometryData:i,batches:r}=t;r.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let n=0;n<e.instructions.length;n++){const t=e.instructions[n];if("texture"===t.action)_a(t.data,r,i);else if("fill"===t.action||"stroke"===t.action){const e="stroke"===t.action,n=t.data.path.shapePath,o=t.data.style,s=t.data.hole;e&&s&&La(s.shapePath,o,!0,r,i),s&&(n.shapePrimitives[n.shapePrimitives.length-1].holes=s.shapePath.shapePrimitives),La(n,o,e,r,i)}}}(e,i);const r=e.batchMode;e.customShader||"no-batch"===r?i.isBatchable=!1:i.isBatchable="auto"!==r||i.geometryData.vertices.length<400,e.dirty=!1}return i}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const t=ui.get(Ua,{maxTextures:this._renderer.limits.maxBatchableTextures}),i=e._gpuData[this._renderer.uid],{batches:r,geometryData:n}=i;i.graphicsData=t;const o=n.vertices.length,s=n.indices.length;for(let A=0;A<r.length;A++)r[A].applyTransform=!1;const a=t.batcher;a.ensureAttributeBuffer(o),a.ensureIndexBuffer(s),a.begin();for(let A=0;A<r.length;A++){const e=r[A];a.add(e)}a.finish(t.instructions);const l=a.geometry;l.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),l.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const c=a.batches;for(let A=0;A<c.length;A++){const e=c[A];e.bindGroup=ts(e.textures.textures,e.textures.count,this._renderer.limits.maxBatchableTextures)}return t}_initContext(e){const t=new Ra;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};Ta.extension={type:[Le.WebGLSystem,Le.WebGPUSystem],name:"graphicsContext"},Ta.defaultOptions={bezierSmoothness:.5};let Oa=Ta;const Fa=1.1920929e-7;function Ga(e,t,i,r,n,o,s,a,l,c){let A=(1-Math.min(.99,Math.max(0,c??Oa.defaultOptions.bezierSmoothness)))/1;return A*=A,function(e,t,i,r,n,o,s,a,l,c){ja(e,t,i,r,n,o,s,a,l,c,0),l.push(s,a)}(t,i,r,n,o,s,a,l,e,A),e}function ja(e,t,i,r,n,o,s,a,l,c,A){if(A>8)return;const u=(e+i)/2,d=(t+r)/2,h=(i+n)/2,g=(r+o)/2,f=(n+s)/2,p=(o+a)/2,m=(u+h)/2,x=(d+g)/2,E=(h+f)/2,C=(g+p)/2,B=(m+E)/2,b=(x+C)/2;if(A>0){let A=s-e,u=a-t;const d=Math.abs((i-s)*u-(r-a)*A),h=Math.abs((n-s)*u-(o-a)*A);if(d>Fa&&h>Fa){if((d+h)*(d+h)<=c*(A*A+u*u))return void l.push(B,b)}else if(d>Fa){if(d*d<=c*(A*A+u*u))return void l.push(B,b)}else if(h>Fa){if(h*h<=c*(A*A+u*u))return void l.push(B,b)}else if(A=B-(e+s)/2,u=b-(t+a)/2,A*A+u*u<=c)return void l.push(B,b)}ja(e,t,u,d,m,x,B,b,l,c,A+1),ja(B,b,E,C,f,p,s,a,l,c,A+1)}function Ha(e,t,i,r,n,o,s,a){let l=(1-Math.min(.99,Math.max(0,a??Oa.defaultOptions.bezierSmoothness)))/1;return l*=l,function(e,t,i,r,n,o,s,a){Xa(s,e,t,i,r,n,o,a,0),s.push(n,o)}(t,i,r,n,o,s,e,l),e}function Xa(e,t,i,r,n,o,s,a,l){if(l>8)return;const c=(t+r)/2,A=(i+n)/2,u=(r+o)/2,d=(n+s)/2,h=(c+u)/2,g=(A+d)/2;let f=o-t,p=s-i;const m=Math.abs((r-o)*p-(n-s)*f);if(m>1.1920929e-7){if(m*m<=a*(f*f+p*p))return void e.push(h,g)}else if(f=h-(t+o)/2,p=g-(i+s)/2,f*f+p*p<=a)return void e.push(h,g);Xa(e,t,i,c,A,h,g,a,l+1),Xa(e,h,g,u,d,o,s,a,l+1)}function za(e,t,i,r,n,o,s,a){let l=Math.abs(n-o);(!s&&n>o||s&&o>n)&&(l=2*Math.PI-l),a||(a=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(l/Math.PI))));let c=l/(a=Math.max(a,3)),A=n;c*=s?-1:1;for(let u=0;u<a+1;u++){const n=t+Math.cos(A)*r,o=i+Math.sin(A)*r;e.push(n,o),A+=c}}const Ja=2*Math.PI,Wa={centerX:0,centerY:0,ang1:0,ang2:0},Ka=({x:e,y:t},i,r,n,o,s,a,l)=>{const c=n*(e*=i)-o*(t*=r),A=o*e+n*t;return l.x=c+s,l.y=A+a,l};function Ya(e,t){const i=-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),r=1.5707963267948966===t?.551915024494:i,n=Math.cos(e),o=Math.sin(e),s=Math.cos(e+t),a=Math.sin(e+t);return[{x:n-o*r,y:o+n*r},{x:s+a*r,y:a-s*r},{x:s,y:a}]}const qa=(e,t,i,r)=>{let n=e*i+t*r;return n>1&&(n=1),n<-1&&(n=-1),(e*r-t*i<0?-1:1)*Math.acos(n)};function Za(e,t,i,r,n,o,s,a=0,l=0,c=0){if(0===o||0===s)return;const A=Math.sin(a*Ja/360),u=Math.cos(a*Ja/360),d=u*(t-r)/2+A*(i-n)/2,h=-A*(t-r)/2+u*(i-n)/2;if(0===d&&0===h)return;o=Math.abs(o),s=Math.abs(s);const g=Math.pow(d,2)/Math.pow(o,2)+Math.pow(h,2)/Math.pow(s,2);g>1&&(o*=Math.sqrt(g),s*=Math.sqrt(g)),((e,t,i,r,n,o,s,a,l,c,A,u,d)=>{const h=Math.pow(n,2),g=Math.pow(o,2),f=Math.pow(A,2),p=Math.pow(u,2);let m=h*g-h*p-g*f;m<0&&(m=0),m/=h*p+g*f,m=Math.sqrt(m)*(s===a?-1:1);const x=m*n/o*u,E=m*-o/n*A,C=c*x-l*E+(e+i)/2,B=l*x+c*E+(t+r)/2,b=(A-x)/n,I=(u-E)/o,y=(-A-x)/n,v=(-u-E)/o,w=qa(1,0,b,I);let Q=qa(b,I,y,v);0===a&&Q>0&&(Q-=Ja),1===a&&Q<0&&(Q+=Ja),d.centerX=C,d.centerY=B,d.ang1=w,d.ang2=Q})(t,i,r,n,o,s,l,c,A,u,d,h,Wa);let{ang1:f,ang2:p}=Wa;const{centerX:m,centerY:x}=Wa;let E=Math.abs(p)/(Ja/4);Math.abs(1-E)<1e-7&&(E=1);const C=Math.max(Math.ceil(E),1);p/=C;let B=e[e.length-2],b=e[e.length-1];const I={x:0,y:0};for(let y=0;y<C;y++){const t=Ya(f,p),{x:i,y:r}=Ka(t[0],o,s,u,A,m,x,I),{x:n,y:a}=Ka(t[1],o,s,u,A,m,x,I),{x:l,y:c}=Ka(t[2],o,s,u,A,m,x,I);Ga(e,B,b,i,r,n,a,l,c),B=l,b=c,f+=p}}const $a=new ct;class el{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new St,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const i=this._currentPoly.points,r=i[i.length-2],n=i[i.length-1];return r===e&&n===t||i.push(e,t),this}arc(e,t,i,r,n,o){this._ensurePoly(!1);return za(this._currentPoly.points,e,t,i,r,n,o),this}arcTo(e,t,i,r,n){this._ensurePoly();return function(e,t,i,r,n,o){const s=e[e.length-2],a=e[e.length-1]-i,l=s-t,c=n-i,A=r-t,u=Math.abs(a*A-l*c);if(u<1e-8||0===o)return void(e[e.length-2]===t&&e[e.length-1]===i||e.push(t,i));const d=a*a+l*l,h=c*c+A*A,g=a*c+l*A,f=o*Math.sqrt(d)/u,p=o*Math.sqrt(h)/u,m=f*g/d,x=p*g/h,E=f*A+p*l,C=f*c+p*a,B=l*(p+m),b=a*(p+m),I=A*(f+x),y=c*(f+x);za(e,E+t,C+i,o,Math.atan2(b-C,B-E),Math.atan2(y-C,I-E),l*c>A*a)}(this._currentPoly.points,e,t,i,r,n),this}arcToSvg(e,t,i,r,n,o,s){return Za(this._currentPoly.points,this._currentPoly.lastX,this._currentPoly.lastY,o,s,e,t,i,r,n),this}bezierCurveTo(e,t,i,r,n,o,s){this._ensurePoly();const a=this._currentPoly;return Ga(this._currentPoly.points,a.lastX,a.lastY,e,t,i,r,n,o,s),this}quadraticCurveTo(e,t,i,r,n){this._ensurePoly();const o=this._currentPoly;return Ha(this._currentPoly.points,o.lastX,o.lastY,e,t,i,r,n),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0)).transform(t);const i=this.shapePrimitives,r=i.length;for(let n=0;n<e.instructions.length;n++){const t=e.instructions[n];this[t.action](...t.data)}if(e.checkForHoles&&i.length-r>1){let e=null;for(let t=r;t<i.length;t++){const r=i[t];if("polygon"===r.shape.type){const n=r.shape,o=e?.shape;o&&o.containsPolygon(n)?(e.holes||(e.holes=[]),e.holes.push(r),i.copyWithin(t,t+1),i.length--,t--):e=r}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,r,n){return this.drawShape(new ct(e,t,i,r),n),this}circle(e,t,i,r){return this.drawShape(new Wo(e,t,i),r),this}poly(e,t,i){const r=new qo(e);return r.closePath=t,this.drawShape(r,i),this}regularPoly(e,t,i,r,n=0,o){r=Math.max(0|r,3);const s=-1*Math.PI/2+n,a=2*Math.PI/r,l=[];for(let c=0;c<r;c++){const r=s-c*a;l.push(e+i*Math.cos(r),t+i*Math.sin(r))}return this.poly(l,!0,o),this}roundPoly(e,t,i,r,n,o=0,s){if(r=Math.max(0|r,3),n<=0)return this.regularPoly(e,t,i,r,o);const a=i*Math.sin(Math.PI/r)-.001;n=Math.min(n,a);const l=-1*Math.PI/2+o,c=2*Math.PI/r,A=(r-2)*Math.PI/r/2;for(let u=0;u<r;u++){const r=u*c+l,o=e+i*Math.cos(r),a=t+i*Math.sin(r),d=r+Math.PI+A,h=r-Math.PI-A,g=o+n*Math.cos(d),f=a+n*Math.sin(d),p=o+n*Math.cos(h),m=a+n*Math.sin(h);0===u?this.moveTo(g,f):this.lineTo(g,f),this.quadraticCurveTo(o,a,p,m,s)}return this.closePath()}roundShape(e,t,i=!1,r){return e.length<3?this:(i?function(e,t,i,r){const n=(e,t)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),o=(e,t,i)=>({x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}),s=t.length;for(let a=0;a<s;a++){const l=t[(a+1)%s],c=l.radius??i;if(c<=0){0===a?e.moveTo(l.x,l.y):e.lineTo(l.x,l.y);continue}const A=t[a],u=t[(a+2)%s],d=n(A,l);let h;h=d<1e-4?l:o(l,A,Math.min(d/2,c)/d);const g=n(u,l);let f;f=g<1e-4?l:o(l,u,Math.min(g/2,c)/g),0===a?e.moveTo(h.x,h.y):e.lineTo(h.x,h.y),e.quadraticCurveTo(l.x,l.y,f.x,f.y,r)}}(this,e,t,r):function(e,t,i){const r=(e,t)=>{const i=t.x-e.x,r=t.y-e.y,n=Math.sqrt(i*i+r*r);return{len:n,nx:i/n,ny:r/n}},n=(t,i)=>{0===t?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y)};let o=t[t.length-1];for(let s=0;s<t.length;s++){const a=t[s%t.length],l=a.radius??i;if(l<=0){n(s,a),o=a;continue}const c=t[(s+1)%t.length],A=r(a,o),u=r(a,c);if(A.len<1e-4||u.len<1e-4){n(s,a),o=a;continue}let d=Math.asin(A.nx*u.ny-A.ny*u.nx),h=1,g=!1;A.nx*u.nx-A.ny*-u.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,h=-1,g=!0):d>0&&(h=-1,g=!0);const f=d/2;let p,m=Math.abs(Math.cos(f)*l/Math.sin(f));m>Math.min(A.len/2,u.len/2)?(m=Math.min(A.len/2,u.len/2),p=Math.abs(m*Math.sin(f)/Math.cos(f))):p=l;const x=a.x+u.nx*m+-u.ny*p*h,E=a.y+u.ny*m+u.nx*p*h,C=Math.atan2(A.ny,A.nx)+Math.PI/2*h,B=Math.atan2(u.ny,u.nx)-Math.PI/2*h;0===s&&e.moveTo(x+Math.cos(C)*p,E+Math.sin(C)*p),e.arc(x,E,p,C,B,g),o=a}}(this,e,t),this.closePath())}filletRect(e,t,i,r,n){if(0===n)return this.rect(e,t,i,r);const o=Math.min(i,r)/2,s=Math.min(o,Math.max(-o,n)),a=e+i,l=t+r,c=s<0?-s:0,A=Math.abs(s);return this.moveTo(e,t+A).arcTo(e+c,t+c,e+A,t,A).lineTo(a-A,t).arcTo(a-c,t+c,a,t+A,A).lineTo(a,l-A).arcTo(a-c,l-c,e+i-A,l,A).lineTo(e+A,l).arcTo(e+c,l-c,e,l-A,A).closePath()}chamferRect(e,t,i,r,n,o){if(n<=0)return this.rect(e,t,i,r);const s=Math.min(n,Math.min(i,r)/2),a=e+i,l=t+r,c=[e+s,t,a-s,t,a,t+s,a,l-s,a-s,l,e+s,l,e,l-s,e,t+s];for(let A=c.length-1;A>=2;A-=2)c[A]===c[A-2]&&c[A-1]===c[A-3]&&c.splice(A-1,2);return this.poly(c,!0,o)}ellipse(e,t,i,r,n){return this.drawShape(new Ko(e,t,i,r),n),this}roundRect(e,t,i,r,n,o){return this.drawShape(new $o(e,t,i,r,n),o),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),i=new qo,i.points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new qo,e)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let t=e.shape.x,i=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const r=e.transform,n=t;t=r.a*t+r.c*i+r.tx,i=r.b*n+r.d*i+r.ty}this._currentPoly.points.push(t,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let i=0;i<t.length;i++){const r=t[i],n=r.shape.getBounds($a);r.transform?e.addRect(n,r.transform):e.addRect(n)}return e}}class tl{constructor(e,t=!1){this.instructions=[],this.uid=ut("graphicsPath"),this._dirty=!0,this.checkForHoles=t,"string"==typeof e?function(e,t){const i=Jo(e),r=[];let n=null,o=0,s=0;for(let a=0;a<i.length;a++){const e=i[a],l=e[0],c=e;switch(l){case"M":o=c[1],s=c[2],t.moveTo(o,s);break;case"m":o+=c[1],s+=c[2],t.moveTo(o,s);break;case"H":o=c[1],t.lineTo(o,s);break;case"h":o+=c[1],t.lineTo(o,s);break;case"V":s=c[1],t.lineTo(o,s);break;case"v":s+=c[1],t.lineTo(o,s);break;case"L":o=c[1],s=c[2],t.lineTo(o,s);break;case"l":o+=c[1],s+=c[2],t.lineTo(o,s);break;case"C":o=c[5],s=c[6],t.bezierCurveTo(c[1],c[2],c[3],c[4],o,s);break;case"c":t.bezierCurveTo(o+c[1],s+c[2],o+c[3],s+c[4],o+c[5],s+c[6]),o+=c[5],s+=c[6];break;case"S":o=c[3],s=c[4],t.bezierCurveToShort(c[1],c[2],o,s);break;case"s":t.bezierCurveToShort(o+c[1],s+c[2],o+c[3],s+c[4]),o+=c[3],s+=c[4];break;case"Q":o=c[3],s=c[4],t.quadraticCurveTo(c[1],c[2],o,s);break;case"q":t.quadraticCurveTo(o+c[1],s+c[2],o+c[3],s+c[4]),o+=c[3],s+=c[4];break;case"T":o=c[1],s=c[2],t.quadraticCurveToShort(o,s);break;case"t":o+=c[1],s+=c[2],t.quadraticCurveToShort(o,s);break;case"A":o=c[6],s=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],o,s);break;case"a":o+=c[6],s+=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],o,s);break;case"Z":case"z":t.closePath(),r.length>0&&(n=r.pop(),n?(o=n.startX,s=n.startY):(o=0,s=0)),n=null;break;default:li()}"Z"!==l&&"z"!==l&&null===n&&(n={startX:o,startY:s},r.push(n))}}(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new el(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,i,r,n){const o=this.instructions[this.instructions.length-1],s=this.getLastPoint(Ke.shared);let a=0,l=0;if(o&&"bezierCurveTo"===o.action){a=o.data[2],l=o.data[3];const e=s.x,t=s.y;a=e+(e-a),l=t+(t-l)}else a=s.x,l=s.y;return this.instructions.push({action:"bezierCurveTo",data:[a,l,e,t,i,r,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,i){const r=this.instructions[this.instructions.length-1],n=this.getLastPoint(Ke.shared);let o=0,s=0;if(r&&"quadraticCurveTo"===r.action){o=r.data[0],s=r.data[1];const e=n.x,t=n.y;o=e+(e-o),s=t+(t-s)}else o=n.x,s=n.y;return this.instructions.push({action:"quadraticCurveTo",data:[o,s,e,t,i]}),this._dirty=!0,this}rect(e,t,i,r,n){return this.instructions.push({action:"rect",data:[e,t,i,r,n]}),this._dirty=!0,this}circle(e,t,i,r){return this.instructions.push({action:"circle",data:[e,t,i,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,r,n,o,s){n||(n=r/2);const a=-1*Math.PI/2+o,l=2*i,c=2*Math.PI/l,A=[];for(let u=0;u<l;u++){const i=u%2?n:r,o=u*c+a;A.push(e+i*Math.cos(o),t+i*Math.sin(o))}return this.poly(A,!0,s),this}clone(e=!1){const t=new tl;if(t.checkForHoles=this.checkForHoles,e)for(let i=0;i<this.instructions.length;i++){const e=this.instructions[i];t.instructions.push({action:e.action,data:e.data.slice()})}else t.instructions=this.instructions.slice();return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,i=e.b,r=e.c,n=e.d,o=e.tx,s=e.ty;let a=0,l=0,c=0,A=0,u=0,d=0,h=0,g=0;for(let f=0;f<this.instructions.length;f++){const p=this.instructions[f],m=p.data;switch(p.action){case"moveTo":case"lineTo":a=m[0],l=m[1],m[0]=t*a+r*l+o,m[1]=i*a+n*l+s;break;case"bezierCurveTo":c=m[0],A=m[1],u=m[2],d=m[3],a=m[4],l=m[5],m[0]=t*c+r*A+o,m[1]=i*c+n*A+s,m[2]=t*u+r*d+o,m[3]=i*u+n*d+s,m[4]=t*a+r*l+o,m[5]=i*a+n*l+s;break;case"quadraticCurveTo":c=m[0],A=m[1],a=m[2],l=m[3],m[0]=t*c+r*A+o,m[1]=i*c+n*A+s,m[2]=t*a+r*l+o,m[3]=i*a+n*l+s;break;case"arcToSvg":a=m[5],l=m[6],h=m[0],g=m[1],m[0]=t*h+r*g,m[1]=i*h+n*g,m[5]=t*a+r*l+o,m[6]=i*a+n*l+s;break;case"circle":m[4]=il(m[3],e);break;case"rect":m[4]=il(m[4],e);break;case"ellipse":m[8]=il(m[8],e);break;case"roundRect":m[5]=il(m[5],e);break;case"addPath":m[0].transform(e);break;case"poly":m[2]=il(m[2],e);break;default:li(p.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;"closePath"===i.action;){if(t--,t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e)}return e}}function il(e,t){return e?e.prepend(t):t.clone()}function rl(e,t,i){const r=e.getAttribute(t);return r?Number(r):i}function nl(e){const t=rl(e,"x1",0),i=rl(e,"y1",0),r=rl(e,"x2",1),n=rl(e,"y2",0),o=e.getAttribute("gradientUnits")||"objectBoundingBox",s=new wa(t,i,r,n,"objectBoundingBox"===o?"local":"global");for(let a=0;a<e.children.length;a++){const t=e.children[a],i=rl(t,"offset",0),r=si.shared.setValue(t.getAttribute("stop-color")).toNumber();s.addColorStop(i,r)}return s}function ol(e){return li(),new wa(0,0,1,0)}function sl(e){const t=e.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const al={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function ll(e,t){const i=e.getAttribute("style"),r={},n={},o={strokeStyle:r,fillStyle:n,useFill:!1,useStroke:!1};for(const s in al){const i=e.getAttribute(s);i&&cl(t,o,s,i.trim())}if(i){const e=i.split(";");for(let i=0;i<e.length;i++){const r=e[i].trim(),[n,s]=r.split(":");al[n]&&cl(t,o,n,s.trim())}}return{strokeStyle:o.useStroke?r:null,fillStyle:o.useFill?n:null,useFill:o.useFill,useStroke:o.useStroke}}function cl(e,t,i,r){switch(i){case"stroke":if("none"!==r){if(r.startsWith("url(")){const i=sl(r);t.strokeStyle.fill=e.defs[i]}else t.strokeStyle.color=si.shared.setValue(r).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(r);break;case"fill":if("none"!==r){if(r.startsWith("url(")){const i=sl(r);t.fillStyle.fill=e.defs[i]}else t.fillStyle.color=si.shared.setValue(r).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(r);break;case"stroke-opacity":t.strokeStyle.alpha=Number(r);break;case"opacity":t.fillStyle.alpha=Number(r),t.strokeStyle.alpha=Number(r)}}function Al(e){const t=e.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const i=t.map(Number),r=[],n=[];for(let l=0;l<i.length;l+=2)l+1<i.length&&(r.push(i[l]),n.push(i[l+1]));if(0===r.length||0===n.length)return 0;const o=Math.min(...r),s=Math.max(...r),a=Math.min(...n);return(s-o)*(Math.max(...n)-a)}function ul(e,t){const i=new tl(e,!1);for(const r of i.instructions)t.instructions.push(r)}function dl(e,t){if("string"==typeof e){const t=document.createElement("div");t.innerHTML=e.trim(),e=t.querySelector("svg")}const i={context:t,defs:{},path:new tl};!function(e,t){const i=e.querySelectorAll("defs");for(let r=0;r<i.length;r++){const e=i[r];for(let i=0;i<e.children.length;i++){const r=e.children[i];switch(r.nodeName.toLowerCase()){case"lineargradient":t.defs[r.id]=nl(r);break;case"radialgradient":t.defs[r.id]=ol()}}}}(e,i);const r=e.children,{fillStyle:n,strokeStyle:o}=ll(e,i);for(let s=0;s<r.length;s++){const e=r[s];"defs"!==e.nodeName.toLowerCase()&&hl(e,i,n,o)}return t}function hl(e,t,i,r){const n=e.children,{fillStyle:o,strokeStyle:s}=ll(e,t);o&&i?i={...i,...o}:o&&(i=o),s&&r?r={...r,...s}:s&&(r=s);const a=!i&&!r;let l,c,A,u,d,h,g,f,p,m,x,E,C,B,b,I,y;switch(a&&(i={color:0}),e.nodeName.toLowerCase()){case"path":{B=e.getAttribute("d");const n=e.getAttribute("fill-rule"),o=B.split(/(?=[Mm])/).filter(e=>e.trim().length>0),s="evenodd"===n,a=o.length>1;if(s&&a){const e=o.map(e=>({path:e,area:Al(e)}));e.sort((e,t)=>t.area-e.area);const n=o.length>3||!function(e){if(e.length<=2)return!0;const t=e.map(e=>e.area).sort((e,t)=>t-e),[i,r]=t,n=t[t.length-1];return!(i/r>3&&r/n<2)}(e);if(n)for(let o=0;o<e.length;o++){const n=e[o],s=0===o;t.context.beginPath();const a=new tl(void 0,!0);ul(n.path,a),t.context.path(a),s?(i&&t.context.fill(i),r&&t.context.stroke(r)):t.context.cut()}else for(let o=0;o<e.length;o++){const n=e[o],s=o%2==1;t.context.beginPath();const a=new tl(void 0,!0);ul(n.path,a),t.context.path(a),s?t.context.cut():(i&&t.context.fill(i),r&&t.context.stroke(r))}}else{b=new tl(B,!n||"evenodd"===n),t.context.path(b),i&&t.context.fill(i),r&&t.context.stroke(r)}break}case"circle":g=rl(e,"cx",0),f=rl(e,"cy",0),p=rl(e,"r",0),t.context.ellipse(g,f,p,p),i&&t.context.fill(i),r&&t.context.stroke(r);break;case"rect":l=rl(e,"x",0),c=rl(e,"y",0),I=rl(e,"width",0),y=rl(e,"height",0),m=rl(e,"rx",0),x=rl(e,"ry",0),m||x?t.context.roundRect(l,c,I,y,m||x):t.context.rect(l,c,I,y),i&&t.context.fill(i),r&&t.context.stroke(r);break;case"ellipse":g=rl(e,"cx",0),f=rl(e,"cy",0),m=rl(e,"rx",0),x=rl(e,"ry",0),t.context.beginPath(),t.context.ellipse(g,f,m,x),i&&t.context.fill(i),r&&t.context.stroke(r);break;case"line":A=rl(e,"x1",0),u=rl(e,"y1",0),d=rl(e,"x2",0),h=rl(e,"y2",0),t.context.beginPath(),t.context.moveTo(A,u),t.context.lineTo(d,h),r&&t.context.stroke(r);break;case"polygon":C=e.getAttribute("points"),E=C.match(/-?\d+/g).map(e=>parseInt(e,10)),t.context.poly(E,!0),i&&t.context.fill(i),r&&t.context.stroke(r);break;case"polyline":C=e.getAttribute("points"),E=C.match(/-?\d+/g).map(e=>parseInt(e,10)),t.context.poly(E,!1),r&&t.context.stroke(r);break;case"g":case"svg":break;default:li(e.nodeName)}a&&(i=null);for(let v=0;v<n.length;v++)hl(n[v],t,i,r)}const gl={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class fl{constructor(e,t){this.uid=ut("fillPattern"),this._tick=0,this.transform=new qe,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=gl[t].addressModeU,e.source.style.addressModeV=gl[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}function pl(e){return e instanceof fl}function ml(e){return e instanceof wa}function xl(e,t,i){return e.fill=t,e.color=16777215,e.texture=t.texture,e.matrix=t.transform,{...i,...e}}function El(e,t,i){return t.buildGradient(),e.fill=t,e.color=16777215,e.texture=t.texture,e.matrix=t.transform,e.textureSpace=t.textureSpace,{...i,...e}}function Cl(e,t){if(null==e)return null;const i={},r=e;return function(e){return si.isColorLike(e)}(e)?function(e,t,i){const r=si.shared.setValue(t??0);return e.color=r.toNumber(),e.alpha=1===r.alpha?i.alpha:r.alpha,e.texture=Dt.WHITE,{...i,...e}}(i,e,t):function(e){return e instanceof Dt}(e)?function(e,t,i){return e.texture=t,{...i,...e}}(i,e,t):pl(e)?xl(i,e,t):ml(e)?El(i,e,t):r.fill&&pl(r.fill)?xl(r,r.fill,t):r.fill&&ml(r.fill)?El(r,r.fill,t):function(e,t){const i={...t,...e},r=si.shared.setValue(i.color);return i.alpha*=r.alpha,i.color=r.toNumber(),i}(r,t)}function Bl(e,t){const{width:i,alignment:r,miterLimit:n,cap:o,join:s,pixelLine:a,...l}=t,c=Cl(e,l);return c?{width:i,alignment:r,miterLimit:n,cap:o,join:s,pixelLine:a,...c}:null}const bl=new Ke,Il=new qe,yl=class e extends Xe{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=ut("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new tl,this._transform=new qe,this._fillStyle={...e.defaultFillStyle},this._strokeStyle={...e.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new St,this._boundsDirty=!0}clone(){const t=new e;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Cl(t,e.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Bl(t,e.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Cl(t,e.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Cl(t,e.defaultStrokeStyle),this}texture(e,t,i,r,n,o){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:r||0,dw:n||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t||0===t?si.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new tl,this}fill(t,i){let r;const n=this.instructions[this.instructions.length-1];return r=0===this._tick&&"stroke"===n?.action?n.data.path:this._activePath.clone(),r?(null!=t&&(void 0!==i&&"number"==typeof t&&(ft(0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:i}),this._fillStyle=Cl(t,e.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Ke.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(t){let i;const r=this.instructions[this.instructions.length-1];return i=0===this._tick&&"fill"===r?.action?r.data.path:this._activePath.clone(),i?(null!=t&&(this._strokeStyle=Bl(t,e.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&("stroke"===t.action||"fill"===t.action)){if(!t.data.hole){t.data.hole=i;break}t.data.hole.addPath(i)}}return this._initNextPathLocation(),this}arc(e,t,i,r,n,o){this._tick++;const s=this._transform;return this._activePath.arc(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty,i,r,n,o),this}arcTo(e,t,i,r,n){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,n),this}arcToSvg(e,t,i,r,n,o,s){this._tick++;const a=this._transform;return this._activePath.arcToSvg(e,t,i,r,n,a.a*o+a.c*s+a.tx,a.b*o+a.d*s+a.ty),this}bezierCurveTo(e,t,i,r,n,o,s){this._tick++;const a=this._transform;return this._activePath.bezierCurveTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,a.a*n+a.c*o+a.tx,a.b*n+a.d*o+a.ty,s),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,i,r){return this._tick++,this._activePath.ellipse(e,t,i,r,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;const i=this._transform,r=this._activePath.instructions,n=i.a*e+i.c*t+i.tx,o=i.b*e+i.d*t+i.ty;return 1===r.length&&"moveTo"===r[0].action?(r[0].data[0]=n,r[0].data[1]=o,this):(this._activePath.moveTo(n,o),this)}quadraticCurveTo(e,t,i,r,n){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,n),this}rect(e,t,i,r){return this._tick++,this._activePath.rect(e,t,i,r,this._transform.clone()),this}roundRect(e,t,i,r,n){return this._tick++,this._activePath.roundRect(e,t,i,r,n,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,r,n=0,o){return this._tick++,this._activePath.regularPoly(e,t,i,r,n,o),this}roundPoly(e,t,i,r,n,o){return this._tick++,this._activePath.roundPoly(e,t,i,r,n,o),this}roundShape(e,t,i,r){return this._tick++,this._activePath.roundShape(e,t,i,r),this}filletRect(e,t,i,r,n){return this._tick++,this._activePath.filletRect(e,t,i,r,n),this}chamferRect(e,t,i,r,n,o){return this._tick++,this._activePath.chamferRect(e,t,i,r,n,o),this}star(e,t,i,r,n=0,o=0){return this._tick++,this._activePath.star(e,t,i,r,n,o,this._transform.clone()),this}svg(e){return this._tick++,dl(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,r,n,o){return e instanceof qe?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,r,n,o),this)}transform(e,t,i,r,n,o){return e instanceof qe?(this._transform.append(e),this):(Il.set(e,t,i,r,n,o),this._transform.append(Il),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,this.dirty||(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const i=this.instructions[t],r=i.action;if("fill"===r){const t=i.data;e.addBounds(t.path.bounds)}else if("texture"===r){const t=i.data;e.addFrame(t.dx,t.dy,t.dx+t.dw,t.dy+t.dh,t.transform)}if("stroke"===r){const t=i.data,r=t.style.alignment,n=t.style.width*(1-r),o=t.path.bounds;e.addFrame(o.minX-n,o.minY-n,o.maxX+n,o.maxY+n)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let i=!1;for(let r=0;r<t.length;r++){const n=t[r],o=n.data,s=o.path;if(!n.action||!s)continue;const a=o.style,l=s.shapePath.shapePrimitives;for(let t=0;t<l.length;t++){const r=l[t].shape;if(!a||!r)continue;const s=l[t].transform,c=s?s.applyInverse(e,bl):e;if("fill"===n.action)i=r.contains(c.x,c.y);else{const e=a;i=r.strokeContains(c.x,c.y,e.width,e.alignment)}const A=o.hole;if(A){const e=A.shapePath?.shapePrimitives;if(e)for(let t=0;t<e.length;t++)e[t].shape.contains(c.x,c.y)&&(i=!1)}if(i)return!0}}return i}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners();if("boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(t)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(t))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};yl.defaultFillStyle={color:16777215,alpha:1,texture:Dt.WHITE,matrix:null,fill:null,textureSpace:"local"},yl.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Dt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let vl=yl;function wl(e,t=1){const i=Sr.RETINA_PREFIX?.exec(e);return i?parseFloat(i[1]):t}function Ql(e,t,i){e.label=i,e._sourceOrigin=i;const r=new Dt({source:e,label:i}),n=()=>{delete t.promiseCache[i],Br.has(i)&&Br.remove(i)};return r.source.once("destroy",()=>{t.promiseCache[i]&&(li(),n())}),r.once("destroy",()=>{e.destroyed||(li(),n())}),r}const Dl={extension:{type:Le.LoadParser,priority:yr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test:e=>Vo(e,"image/svg+xml")||_o(e,".svg"),async load(e,t,i){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?async function(e){const t=await cr.get().fetch(e),i=await t.text(),r=new vl;return r.svg(i),r}(e):async function(e,t,i,r){const n=await cr.get().fetch(e),o=cr.get().createImage();o.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await n.text())}`,o.crossOrigin=r,await o.decode();const s=t.data?.width??o.width,a=t.data?.height??o.height,l=t.data?.resolution||wl(e),c=Math.ceil(s*l),A=Math.ceil(a*l),u=cr.get().createCanvas(c,A),d=u.getContext("2d");d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(o,0,0,s*l,a*l);const{parseAsGraphicsContext:h,...g}=t.data??{};return Ql(new ur({resource:u,alphaMode:"premultiply-alpha-on-upload",resolution:l,...g}),i,e)}(e,t,i,this.config.crossOrigin)},unload(e){e.destroy(!0)}};let Nl=null,kl=class{constructor(){Nl||(Nl=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n    async function checkImageBitmap() {\n      try {\n        if (typeof createImageBitmap !== "function") return false;\n        const response = await fetch(WHITE_PNG);\n        const imageBlob = await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\n      } catch (_e) {\n        return false;\n      }\n    }\n    void checkImageBitmap().then((result) => {\n      self.postMessage(result);\n    });\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(Nl)}};kl.revokeObjectURL=function(){Nl&&(URL.revokeObjectURL(Nl),Nl=null)};let Sl=null;class Pl{constructor(){Sl||(Sl=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    async function loadImageBitmap(url, alphaMode) {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n      }\n      const imageBlob = await response.blob();\n      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);\n    }\n    self.onmessage = async (event) => {\n      try {\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\n        self.postMessage({\n          data: imageBitmap,\n          uuid: event.data.uuid,\n          id: event.data.id\n        }, [imageBitmap]);\n      } catch (e) {\n        self.postMessage({\n          error: e,\n          uuid: event.data.uuid,\n          id: event.data.id\n        });\n      }\n    };\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(Sl)}}Pl.revokeObjectURL=function(){Sl&&(URL.revokeObjectURL(Sl),Sl=null)};let Ml,Vl=0;const _l=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new kl;t.addEventListener("message",i=>{t.terminate(),kl.revokeObjectURL(),e(i.data)})})),this._isImageBitmapSupported}loadImageBitmap(e,t){return this._run("loadImageBitmap",[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){void 0===Ml&&(Ml=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<Ml&&(this._createdWorkers++,e=(new Pl).worker,e.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(void 0!==e.error?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const i=new Promise((i,r)=>{this._queue.push({id:e,arguments:t,resolve:i,reject:r})});return this._next(),i}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),i=t.id;this._resolveHash[Vl]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Vl++,id:i})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}},Ll=[".jpeg",".jpg",".png",".webp",".avif"],Rl=["image/jpeg","image/png","image/webp","image/avif"];const Ul={name:"loadTextures",id:"texture",extension:{type:Le.LoadParser,priority:yr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:e=>Vo(e,Rl)||_o(e,Ll),async load(e,t,i){let r=null;r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await _l.isImageBitmapSupported()?await _l.loadImageBitmap(e,t):await async function(e,t){const i=await cr.get().fetch(e);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${i.status} ${i.statusText}`);const r=await i.blob();return"premultiplied-alpha"===t?.data?.alphaMode?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}(e,t):await new Promise((t,i)=>{r=cr.get().createImage(),r.crossOrigin=this.config.crossOrigin,r.src=e,r.complete?t(r):(r.onload=()=>{t(r)},r.onerror=i)});return Ql(new ur({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||wl(e),...t.data}),i,e)},unload(e){e.destroy(!0)}},Tl=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Ol,Fl;function Gl(e,t,i){void 0!==i||t.startsWith("data:")?!1!==i&&(e.crossOrigin="string"==typeof i?i:"anonymous"):e.crossOrigin=function(e,t=globalThis.location){if(e.startsWith("data:"))return"";t||(t=globalThis.location);const i=new URL(e,document.baseURI);if(i.hostname!==t.hostname||i.port!==t.port||i.protocol!==t.protocol)return"anonymous";return""}(t)}const jl={name:"loadVideo",id:"video",extension:{type:Le.LoadParser,name:"loadVideo"},test(e){if(!Ol||!Fl){const{validVideoExtensions:e,validVideoMime:t}=function(){const e=[],t=[];for(const i of Tl){const r=Er.MIME_TYPES[i.substring(1)]||`video/${i.substring(1)}`;Qo(r)&&(e.push(i),t.includes(r)||t.push(r))}return{validVideoExtensions:e,validVideoMime:t}}();Ol=e,Fl=t}const t=Vo(e,Fl),i=_o(e,Ol);return t||i},async load(e,t,i){const r={...Er.defaultOptions,resolution:t.data?.resolution||wl(e),alphaMode:t.data?.alphaMode||await mr(),...t.data},n=document.createElement("video"),o={preload:!1!==r.autoLoad?"auto":void 0,"webkit-playsinline":!1!==r.playsinline?"":void 0,playsinline:!1!==r.playsinline?"":void 0,muted:!0===r.muted?"":void 0,loop:!0===r.loop?"":void 0,autoplay:!1!==r.autoPlay?"":void 0};Object.keys(o).forEach(e=>{const t=o[e];void 0!==t&&n.setAttribute(e,t)}),!0===r.muted&&(n.muted=!0),Gl(n,e,r.crossorigin);const s=document.createElement("source");let a;if(r.mime)a=r.mime;else if(e.startsWith("data:"))a=e.slice(5,e.indexOf(";"));else if(!e.startsWith("blob:")){const t=e.split("?")[0].slice(e.lastIndexOf(".")+1).toLowerCase();a=Er.MIME_TYPES[t]||`video/${t}`}return s.src=e,a&&(s.type=a),new Promise((o,a)=>{async function l(){const s=new Er({...r,resource:n});var a;A(),t.data.preload&&await(a=n,new Promise((e,t)=>{function i(){n(),e()}function r(e){n(),t(e)}function n(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",r)}a.addEventListener("canplaythrough",i),a.addEventListener("error",r),a.load()})),o(Ql(s,i,e))}function c(e){A(),a(e)}function A(){n.removeEventListener("canplay",l),n.removeEventListener("error",c),s.removeEventListener("error",c)}r.preload&&!r.autoPlay&&n.load(),n.addEventListener("canplay",l),n.addEventListener("error",c),s.addEventListener("error",c),n.appendChild(s)})},unload(e){e.destroy(!0)}},Hl={extension:{type:Le.ResolveParser,name:"resolveTexture"},test:Ul.test,parse:e=>({resolution:parseFloat(Sr.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})},Xl={extension:{type:Le.ResolveParser,priority:-2,name:"resolveJson"},test:e=>Sr.RETINA_PREFIX.test(e)&&e.endsWith(".json"),parse:Hl.parse};const zl=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Sr,this.loader=new Mo,this.cache=Br,this._backgroundLoader=new Co(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized)return void li();if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;"string"==typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}const t=e.texturePreference?.resolution??1,i="number"==typeof t?[t]:t,r=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:i}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const i=kr(e),r=Cr(e).map(e=>{if("string"!=typeof e){const t=this.resolver.getAlias(e);return t.some(e=>!this.resolver.hasKey(e))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e}),n=this.resolver.resolve(r),o=await this._mapLoadToResolve(n,t);return i?o[r[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;"string"==typeof e&&(i=!0,e=[e]);const r=this.resolver.resolveBundle(e),n={},o=Object.keys(r);let s=0;const a=[],l=o.map((e,i)=>{const o=r[e],l=Object.values(o),c=[...new Set(l.flat())].reduce((e,t)=>e+(t.progressSize||1),0);return a.push(0),s+=c,this._mapLoadToResolve(o,e=>{a[i]=e*c,t?.(a.reduce((e,t)=>e+t,0)/s)}).then(t=>{n[e]=t})});return await Promise.all(l),i?n[e[0]]:n}async backgroundLoad(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(e=>{this._backgroundLoader.add(Object.values(e))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return Br.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=Br.get(e[i]);return t}async _mapLoadToResolve(e,t){const i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const r=await this.loader.load(i,t);this._backgroundLoader.active=!0;const n={};return i.forEach(e=>{const t=r[e.src],i=[e.src];e.alias&&i.push(...e.alias),i.forEach(e=>{n[e]=t}),Br.set(i,t)}),n}async unload(e){this._initialized||await this.init();const t=Cr(e).map(e=>"string"!=typeof e?e.src:e),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Cr(e);const t=this.resolver.resolveBundle(e),i=Object.keys(t).map(e=>this._unloadFromResolved(t[e]));await Promise.all(i)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(e=>{Br.remove(e.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((e,i)=>t.indexOf(e)===i),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(t=>t in e).forEach(i=>{t.config[i]=e[i]})})}};Te.handleByList(Le.LoadParser,zl.loader.parsers).handleByList(Le.ResolveParser,zl.resolver.parsers).handleByList(Le.CacheParser,zl.cache.parsers).handleByList(Le.DetectionParser,zl.detections),Te.add(Bo,vo,Io,So,Do,No,ko,Lo,Ro,Ho,Dl,Ul,jl,Eo,xo,Hl,Xl);const Jl={loader:Le.LoadParser,resolver:Le.ResolveParser,cache:Le.CacheParser,detection:Le.DetectionParser};Te.handle(Le.Asset,e=>{const t=e.ref;Object.entries(Jl).filter(([e])=>!!t[e]).forEach(([e,i])=>Te.add(Object.assign(t[e],{extension:t[e].extension??i})))},e=>{const t=e.ref;Object.keys(Jl).filter(e=>!!t[e]).forEach(e=>Te.remove(t[e]))});class Wl{constructor(){this.isBatchable=!1}reset(){this.isBatchable=!1,this.context=null,this.graphicsData&&(this.graphicsData.destroy(),this.graphicsData=null)}destroy(){this.reset()}}class Kl{constructor(){this.instructions=new Fi}init(){this.instructions.reset()}destroy(){this.instructions.destroy(),this.instructions=null}}const Yl=class e{constructor(e){this._renderer=e,this._managedContexts=new la({renderer:e,type:"resource",name:"graphicsContext"})}init(t){e.defaultOptions.bezierSmoothness=t?.bezierSmoothness??e.defaultOptions.bezierSmoothness}getContextRenderData(e){return this.getGpuContext(e).graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const t=e._gpuData,i=!!t[this._renderer.uid],r=t[this._renderer.uid]||this._initContext(e);return!e.dirty&&i||(i&&r.reset(),r.isBatchable=!1,e.dirty=!1),r}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const t=new Kl;return this.getGpuContext(e).graphicsData=t,t.init(),t}_initContext(e){const t=new Wl;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};Yl.extension={type:[Le.CanvasSystem],name:"graphicsContext"},Yl.defaultOptions={bezierSmoothness:.5};let ql=Yl;class Zl{constructor(e,t){this.state=mn.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new la({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){return!1}addRenderable(e,t){this._managedGraphics.add(e),this.renderer.renderPipes.batch.break(t),t.add(e)}updateRenderable(e){}execute(e){e.isRenderable&&this._adaptor.execute(this,e)}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null}}function $l(e,t,i){const r=(e>>24&255)/255;t[i++]=(255&e)/255*r,t[i++]=(e>>8&255)/255*r,t[i++]=(e>>16&255)/255*r,t[i++]=r}Zl.extension={type:[Le.CanvasPipes],name:"graphics"};class ec{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{ui.return(e)}),this.batches.length=0}}class tc{constructor(e,t){this.state=mn.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new la({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){const t=e.context,i=!!e._gpuData,r=this.renderer.graphicsContext.updateGpuContext(t);return!(!r.isBatchable&&i===r.isBatchable)}addRenderable(e,t){const i=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),i.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){const t=this._getGpuDataForRenderable(e).batches;for(let i=0;i<t.length;i++){const e=t[i];e._batcher.updateElement(e)}}execute(e){if(!e.isRenderable)return;const t=this.renderer,i=e.context;if(!t.graphicsContext.getGpuContext(i).batches.length)return;const r=i.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const n=r.resources.localUniforms.uniforms;n.uTransformMatrix=e.groupTransform,n.uRound=t._roundPixels|e._roundPixels,$l(e.groupColorAlpha,n.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const t=this._getGpuDataForRenderable(e),i=this.renderer.graphicsContext.updateGpuContext(e.context);t.destroy(),i.isBatchable&&this._updateBatchesForRenderable(e,t)}_addToBatcher(e,t){const i=this.renderer.renderPipes.batch,r=this._getGpuDataForRenderable(e).batches;for(let n=0;n<r.length;n++){const e=r[n];i.addToBatch(e,t)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){const t=new ec;return e._gpuData[this.renderer.uid]=t,this._managedGraphics.add(e),t}_updateBatchesForRenderable(e,t){const i=e.context,r=this.renderer.graphicsContext.getGpuContext(i),n=this.renderer._roundPixels|e._roundPixels;t.batches=r.batches.map(t=>{const i=ui.get(ua);return t.copyTo(i),i.renderable=e,i.roundPixels=n,i})}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}tc.extension={type:[Le.WebGLPipes,Le.WebGPUPipes],name:"graphics"},Te.add(Zl),Te.add(tc),Te.add(ql),Te.add(Oa);class ic extends $i{constructor(e){e instanceof vl&&(e={context:e});const{context:t,roundPixels:i,...r}=e||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",t?this.context=t:(this.context=this._ownedContext=new vl,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(e){e!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=e,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):!0!==e&&!0!==e?.context||this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_onTouch(e){this._gcLastUsed=e,this._context._gcLastUsed=e}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){if(e)return new ic(this._context.clone());this._ownedContext=null;return new ic(this._context)}lineStyle(e,t,i){ft(0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return e&&(r.width=e),t&&(r.color=t),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(e,t){ft(0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return void 0!==e&&(i.color=e),void 0!==t&&(i.alpha=t),this.context.fillStyle=i,this}endFill(){ft(0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return e.width===vl.defaultStrokeStyle.width&&e.color===vl.defaultStrokeStyle.color&&e.alpha===vl.defaultStrokeStyle.alpha||this.context.stroke(),this}drawCircle(...e){return ft(0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return ft(0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return ft(0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return ft(0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return ft(0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return ft(0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const rc=class e extends Is{constructor(...t){let i=t[0]??{};i instanceof Float32Array&&(ft(0,"use new MeshGeometry({ positions, uvs, indices }) instead"),i={positions:i,uvs:t[1],indices:t[2]}),i={...e.defaultOptions,...i};const r=i.positions||new Float32Array([0,0,1,0,1,1,0,1]);let n=i.uvs;n||(n=i.positions?new Float32Array(r.length):new Float32Array([0,0,1,0,1,1,0,1]));const o=i.indices||new Uint32Array([0,1,2,0,2,3]),s=i.shrinkBuffersToFit;super({attributes:{aPosition:{buffer:new Bs({data:r,label:"attribute-mesh-positions",shrinkToFit:s,usage:Cs.VERTEX|Cs.COPY_DST}),format:"float32x2",stride:8,offset:0},aUV:{buffer:new Bs({data:n,label:"attribute-mesh-uvs",shrinkToFit:s,usage:Cs.VERTEX|Cs.COPY_DST}),format:"float32x2",stride:8,offset:0}},indexBuffer:new Bs({data:o,label:"index-mesh-buffer",shrinkToFit:s,usage:Cs.INDEX|Cs.COPY_DST}),topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};rc.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let nc,oc=rc;class sc{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){const e=this.geometry.getBuffer("aUV"),t=e.data;let i=t;const r=this.texture.textureMatrix;return r.isSimple||(i=this._transformedUvs,this._textureMatrixUpdateId===r._updateID&&this._uvUpdateId===e._updateID||((!i||i.length<t.length)&&(i=this._transformedUvs=new Float32Array(t.length)),this._textureMatrixUpdateId=r._updateID,this._uvUpdateId=e._updateID,r.multiplyUvs(t,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}class ac{constructor({matrix:e,observer:t}={}){this.dirty=!0,this._matrix=e??new qe,this.observer=t,this.position=new Ge(this,0,0),this.scale=new Ge(this,1,1),this.pivot=new Ge(this,0,0),this.skew=new Ge(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const e=this._matrix;return this.dirty?(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1,e):e}_onUpdate(e){this.dirty=!0,e===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}}function lc(e){const t=cr.get().createCanvas(6,1),i=t.getContext("2d");return i.fillStyle=e,i.fillRect(0,0,6,1),t}function cc(){if(void 0!==nc)return nc;try{const e=lc("#ff00ff"),t=lc("#ffff00"),i=cr.get().createCanvas(6,1).getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(e,0,0),i.drawImage(t,2,0);const r=i.getImageData(2,0,1,1);if(r){const e=r.data;nc=255===e[0]&&0===e[1]&&0===e[2]}else nc=!1}catch(e){nc=!1}return nc}const Ac={canvas:null,convertTintToImage:!1,cacheStepsPerColorChannel:8,canUseMultiply:cc(),tintMethod:null,_canvasSourceCache:new WeakMap,_unpremultipliedCache:new WeakMap,getCanvasSource:e=>{const t=e.source,i=t?.resource;if(!i)return null;const r="premultiplied-alpha"===t.alphaMode,n=t.resourceWidth??t.pixelWidth,o=t.resourceHeight??t.pixelHeight,s=n!==t.pixelWidth||o!==t.pixelHeight;if(r){if((i instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&i instanceof OffscreenCanvas)&&!s)return i;const e=Ac._unpremultipliedCache.get(t);if(e?.resourceId===t._resourceId)return e.canvas}if(i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||i instanceof Uint16Array||i instanceof Int16Array||i instanceof Uint32Array||i instanceof Int32Array||i instanceof Float32Array||i instanceof ArrayBuffer){const e=Ac._canvasSourceCache.get(t);if(e?.resourceId===t._resourceId)return e.canvas;const r=cr.get().createCanvas(t.pixelWidth,t.pixelHeight),n=r.getContext("2d"),o=n.createImageData(t.pixelWidth,t.pixelHeight),s=o.data,a=i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength);if("bgra8unorm"===t.format)for(let t=0;t<s.length&&t+3<a.length;t+=4)s[t]=a[t+2],s[t+1]=a[t+1],s[t+2]=a[t],s[t+3]=a[t+3];else s.set(a.subarray(0,s.length));return n.putImageData(o,0,0),Ac._canvasSourceCache.set(t,{canvas:r,resourceId:t._resourceId}),r}if(r){const e=cr.get().createCanvas(t.pixelWidth,t.pixelHeight),r=e.getContext("2d",{willReadFrequently:!0});e.width=t.pixelWidth,e.height=t.pixelHeight,r.drawImage(i,0,0);const n=r.getImageData(0,0,e.width,e.height),o=n.data;for(let t=0;t<o.length;t+=4){const e=o[t+3];if(e>0){const i=255/e;o[t]=Math.min(255,o[t]*i+.5),o[t+1]=Math.min(255,o[t+1]*i+.5),o[t+2]=Math.min(255,o[t+2]*i+.5)}}return r.putImageData(n,0,0),Ac._unpremultipliedCache.set(t,{canvas:e,resourceId:t._resourceId}),e}if(s){const e=Ac._canvasSourceCache.get(t);if(e?.resourceId===t._resourceId)return e.canvas;const r=cr.get().createCanvas(t.pixelWidth,t.pixelHeight),n=r.getContext("2d");return r.width=t.pixelWidth,r.height=t.pixelHeight,n.drawImage(i,0,0),Ac._canvasSourceCache.set(t,{canvas:r,resourceId:t._resourceId}),r}return i},getTintedCanvas:(e,t)=>{const i=e.texture,r=si.shared.setValue(t).toHex(),n=i.tintCache||(i.tintCache={}),o=n[r],s=i.source._resourceId;if(o?.tintId===s)return o;const a=o&&"getContext"in o?o:cr.get().createCanvas();return Ac.tintMethod(i,t,a),a.tintId=s,n[r]=a,n[r]},getTintedPattern:(e,t)=>{const i=si.shared.setValue(t).toHex(),r=e.patternCache||(e.patternCache={}),n=e.source._resourceId;let o=r[i];if(o?.tintId===n)return o;Ac.canvas||(Ac.canvas=cr.get().createCanvas()),Ac.tintMethod(e,t,Ac.canvas);return o=Ac.canvas.getContext("2d").createPattern(Ac.canvas,"repeat"),o.tintId=n,r[i]=o,o},applyPatternTransform:(e,t,i=!0)=>{if(!t)return;const r=e;if(!r.setTransform)return;const n=globalThis.DOMMatrix;if(!n)return;const o=new n([t.a,t.b,t.c,t.d,t.tx,t.ty]);r.setTransform(i?o.inverse():o)},tintWithMultiply:(e,t,i)=>{const r=i.getContext("2d"),n=e.frame.clone(),o=e.source._resolution??e.source.resolution??1,s=e.rotate;n.x*=o,n.y*=o,n.width*=o,n.height*=o;const a=at.isVertical(s),l=a?n.height:n.width,c=a?n.width:n.height;i.width=Math.ceil(l),i.height=Math.ceil(c),r.save(),r.fillStyle=si.shared.setValue(t).toHex(),r.fillRect(0,0,l,c),r.globalCompositeOperation="multiply";const A=Ac.getCanvasSource(e);A?(s&&Ac._applyInverseRotation(r,s,n.width,n.height),r.drawImage(A,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(A,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()):r.restore()},tintWithOverlay:(e,t,i)=>{const r=i.getContext("2d"),n=e.frame.clone(),o=e.source._resolution??e.source.resolution??1,s=e.rotate;n.x*=o,n.y*=o,n.width*=o,n.height*=o;const a=at.isVertical(s),l=a?n.height:n.width,c=a?n.width:n.height;i.width=Math.ceil(l),i.height=Math.ceil(c),r.save(),r.globalCompositeOperation="copy",r.fillStyle=si.shared.setValue(t).toHex(),r.fillRect(0,0,l,c),r.globalCompositeOperation="destination-atop";const A=Ac.getCanvasSource(e);A?(s&&Ac._applyInverseRotation(r,s,n.width,n.height),r.drawImage(A,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()):r.restore()},tintWithPerPixel:(e,t,i)=>{const r=i.getContext("2d"),n=e.frame.clone(),o=e.source._resolution??e.source.resolution??1,s=e.rotate;n.x*=o,n.y*=o,n.width*=o,n.height*=o;const a=at.isVertical(s),l=a?n.height:n.width,c=a?n.width:n.height;i.width=Math.ceil(l),i.height=Math.ceil(c),r.save(),r.globalCompositeOperation="copy";const A=Ac.getCanvasSource(e);if(!A)return void r.restore();s&&Ac._applyInverseRotation(r,s,n.width,n.height),r.drawImage(A,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore();const u=t>>16&255,d=t>>8&255,h=255&t,g=r.getImageData(0,0,l,c),f=g.data;for(let p=0;p<f.length;p+=4)f[p]=f[p]*u/255,f[p+1]=f[p+1]*d/255,f[p+2]=f[p+2]*h/255;r.putImageData(g,0,0)},_applyInverseRotation:(e,t,i,r)=>{const n=at.inv(t),o=at.uX(n),s=at.uY(n),a=at.vX(n),l=at.vY(n),c=-Math.min(0,o*i,a*r,o*i+a*r),A=-Math.min(0,s*i,l*r,s*i+l*r);e.transform(o,s,a,l,c,A)}};Ac.tintMethod=Ac.canUseMultiply?Ac.tintWithMultiply:Ac.tintWithPerPixel;const uc=new qe,dc=new qe,hc=[new Ke,new Ke,new Ke,new Ke];class gc{constructor(e){this._renderer=e}validateRenderable(e){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}updateRenderable(e){}execute(e){const t=this._renderer,i=t.canvasContext,r=i.activeContext;r.save(),i.setBlendMode(e.groupBlendMode);const n=t.globalUniforms.globalUniformData?.worldColor??4294967295,o=e.groupColorAlpha,s=(n>>>24&255)/255*((o>>>24&255)/255)*(t.filter?.alphaMultiplier??1);if(s<=0)return void r.restore();r.globalAlpha=s;const a=ki(Qi(16777215&o,16777215&n)),l=e.texture,c=Ac.getTintedPattern(l,a),A=e.width,u=e.height,d=e.groupTransform,h=l.source._resolution??l.source.resolution??1;dc.copyFrom(e._tileTransform.matrix),e.applyAnchorToTexture||dc.translate(-e.anchor.x*A,-e.anchor.y*u),dc.scale(1/h,1/h),uc.identity(),uc.prepend(dc),uc.prepend(d);const g=t._roundPixels|e._roundPixels;i.setContextTransform(uc,1===g),r.fillStyle=c;const f=e.anchor.x*-A,p=e.anchor.y*-u;hc[0].set(f,p),hc[1].set(f+A,p),hc[2].set(f+A,p+u),hc[3].set(f,p+u);for(let m=0;m<4;m++)dc.applyInverse(hc[m],hc[m]);r.beginPath(),r.moveTo(hc[0].x,hc[0].y);for(let m=1;m<4;m++)r.lineTo(hc[m].x,hc[m].y);r.closePath(),r.fill(),r.restore()}destroy(){this._renderer=null}}gc.extension={type:[Le.CanvasPipes],name:"tilingSprite"};const fc={name:"local-uniform-bit",vertex:{header:"\n\n            struct LocalUniforms {\n                uTransformMatrix:mat3x3<f32>,\n                uColor:vec4<f32>,\n                uRound:f32,\n            }\n\n            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        ",main:"\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        ",end:"\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        "}},pc={...fc,vertex:{...fc.vertex,header:fc.vertex.header.replace("group(1)","group(2)")}},mc={name:"local-uniform-bit",vertex:{header:"\n\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        ",main:"\n            vColor *= uColor;\n            modelMatrix = uTransformMatrix;\n        ",end:"\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        "}},xc={name:"tiling-bit",vertex:{header:"\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        ",main:"\n            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;\n\n            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;\n        "},fragment:{header:"\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        ",main:"\n\n            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);\n            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;\n            var unclamped = coord;\n            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);\n\n            var bias = 0.;\n\n            if(unclamped.x == coord.x && unclamped.y == coord.y)\n            {\n                bias = -32.;\n            }\n\n            outColor = textureSampleBias(uTexture, uSampler, coord, bias);\n        "}},Ec={name:"tiling-bit",vertex:{header:"\n            uniform mat3 uTextureTransform;\n            uniform vec4 uSizeAnchor;\n\n        ",main:"\n            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;\n\n            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;\n        "},fragment:{header:"\n            uniform sampler2D uTexture;\n            uniform mat3 uMapCoord;\n            uniform vec4 uClampFrame;\n            uniform vec2 uClampOffset;\n        ",main:"\n\n        vec2 coord = vUV + ceil(uClampOffset - vUV);\n        coord = (uMapCoord * vec3(coord, 1.0)).xy;\n        vec2 unclamped = coord;\n        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0\n\n        "}};let Cc,Bc;class bc extends gn{constructor(){Cc??(Cc=js({name:"tiling-sprite-shader",bits:[fc,xc,ea]})),Bc??(Bc=Hs({name:"tiling-sprite-shader",bits:[mc,Ec,ta]}));const e=new un({uMapCoord:{value:new qe,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new qe,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:Bc,gpuProgram:Cc,resources:{localUniforms:new un({uTransformMatrix:{value:new qe,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:Dt.EMPTY.source,uSampler:Dt.EMPTY.source.style}})}updateUniforms(e,t,i,r,n,o){const s=this.resources.tilingUniforms,a=o.width,l=o.height,c=o.textureMatrix,A=s.uniforms.uTextureTransform;A.set(i.a*a/e,i.b*a/t,i.c*l/e,i.d*l/t,i.tx/e,i.ty/t),A.invert(),s.uniforms.uMapCoord=c.mapCoord,s.uniforms.uClampFrame=c.uClampFrame,s.uniforms.uClampOffset=c.uClampOffset,s.uniforms.uTextureTransform=A,s.uniforms.uSizeAnchor[0]=e,s.uniforms.uSizeAnchor[1]=t,s.uniforms.uSizeAnchor[2]=r,s.uniforms.uSizeAnchor[3]=n,o&&(this.resources.uTexture=o.source,this.resources.uSampler=o.source.style)}}const Ic=new class extends oc{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}};class yc{constructor(){this.canBatch=!0,this.geometry=new oc({indices:Ic.indices.slice(),positions:Ic.positions.slice(),uvs:Ic.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}}class vc{constructor(e){this._state=mn.default2d,this._renderer=e,this._managedTilingSprites=new la({renderer:e,type:"renderable",name:"tilingSprite"})}validateRenderable(e){const t=this._getTilingSpriteData(e),i=t.canBatch;this._updateCanBatch(e);const r=t.canBatch;if(r&&r===i){const{batchableMesh:i}=t;return!i._batcher.checkAndUpdateTexture(i,e.texture)}return i!==r}addRenderable(e,t){const i=this._renderer.renderPipes.batch;this._updateCanBatch(e);const r=this._getTilingSpriteData(e),{geometry:n,canBatch:o}=r;if(o){r.batchableMesh||(r.batchableMesh=new sc);const o=r.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),o.geometry=n,o.renderable=e,o.transform=e.groupTransform,o.setTexture(e._texture)),o.roundPixels=this._renderer._roundPixels|e._roundPixels,i.addToBatch(o,t)}else i.break(t),r.shader||(r.shader=new bc),this.updateRenderable(e),t.add(e)}execute(e){const t=this._renderer,{shader:i}=this._getTilingSpriteData(e);i.groups[0]=t.globalUniforms.bindGroup;const r=i.resources.localUniforms.uniforms;r.uTransformMatrix=e.groupTransform,r.uRound=t._roundPixels|e._roundPixels,$l(e.groupColorAlpha,r.uColor,0),this._state.blendMode=ss(e.groupBlendMode,e.texture._source),t.encoder.draw({geometry:Ic,shader:i,state:this._state})}updateRenderable(e){const t=this._getTilingSpriteData(e),{canBatch:i}=t;if(i){const{batchableMesh:i}=t;e.didViewUpdate&&this._updateBatchableMesh(e),i._batcher.updateElement(i)}else if(e.didViewUpdate){const{shader:i}=t;i.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}_getTilingSpriteData(e){return e._gpuData[this._renderer.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){const t=new yc;return t.renderable=e,e._gpuData[this._renderer.uid]=t,this._managedTilingSprites.add(e),t}_updateBatchableMesh(e){const t=this._getTilingSpriteData(e),{geometry:i}=t,r=e.texture.source.style;"repeat"!==r.addressMode&&(r.addressMode="repeat",r.update()),function(e,t){const i=e.texture,r=i.frame.width,n=i.frame.height;let o=0,s=0;e.applyAnchorToTexture&&(o=e.anchor.x,s=e.anchor.y),t[0]=t[6]=-o,t[2]=t[4]=1-o,t[1]=t[3]=-s,t[5]=t[7]=1-s;const a=qe.shared;a.copyFrom(e._tileTransform.matrix),a.tx/=e.width,a.ty/=e.height,a.invert(),a.scale(e.width/r,e.height/n),function(e,t,i,r){let n=0;const o=e.length/t,s=r.a,a=r.b,l=r.c,c=r.d,A=r.tx,u=r.ty;for(i*=t;n<o;){const r=e[i],o=e[i+1];e[i]=s*r+l*o+A,e[i+1]=a*r+c*o+u,i+=t,n++}}(t,2,0,a)}(e,i.uvs),function(e,t){const i=e.anchor.x,r=e.anchor.y;t[0]=-i*e.width,t[1]=-r*e.height,t[2]=(1-i)*e.width,t[3]=-r*e.height,t[4]=(1-i)*e.width,t[5]=(1-r)*e.height,t[6]=-i*e.width,t[7]=(1-r)*e.height}(e,i.positions)}destroy(){this._managedTilingSprites.destroy(),this._renderer=null}_updateCanBatch(e){const t=this._getTilingSpriteData(e),i=e.texture;let r=!0;return this._renderer.type===hn.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=i.textureMatrix.isSimple&&(r||i.source.isPowerOfTwo),t.canBatch}}vc.extension={type:[Le.WebGLPipes,Le.WebGPUPipes],name:"tilingSprite"},Te.add(gc),Te.add(vc);const wc=class e extends $i{constructor(...t){let i=t[0]||{};i instanceof Dt&&(i={texture:i}),t.length>1&&(ft(0,"use new TilingSprite({ texture, width:100, height:100 }) instead"),i.width=t[1],i.height=t[2]),i={...e.defaultOptions,...i};const{texture:r,anchor:n,tilePosition:o,tileScale:s,tileRotation:a,width:l,height:c,applyAnchorToTexture:A,roundPixels:u,...d}=i??{};super({label:"TilingSprite",...d}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Ge({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=A,this.texture=r,this._width=l??r.width,this._height=c??r.height,this._tileTransform=new ac({observer:{_onUpdate:()=>this.onViewUpdate()}}),n&&(this.anchor=n),this.tilePosition=o,this.tileScale=s,this.tileRotation=a,this.roundPixels=u??!1}static from(t,i={}){return new e("string"==typeof t?{texture:Br.get(t),...i}:{texture:t,...i})}get uvRespectAnchor(){return ft(0,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){ft(0,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){"number"==typeof e?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=Dt.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,t){"object"==typeof e&&(t=e.height??e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){const e=this._bounds,t=this._anchor,i=this._width,r=this._height;e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*r,e.maxY=e.minY+r}containsPoint(e){const t=this._width,i=this._height,r=-t*this._anchor._x;let n=0;return e.x>=r&&e.x<=r+t&&(n=-i*this._anchor._y,e.y>=n&&e.y<=n+i)}destroy(e=!1){super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null;if("boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};wc.defaultOptions={texture:Dt.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let Qc=wc;class Dc extends $i{constructor(e,t){const{text:i,resolution:r,style:n,anchor:o,width:s,height:a,roundPixels:l,...c}=e;super({...c}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=i??"",this.style=n,this.resolution=r??null,this.allowChildren=!1,this._anchor=new Ge({_onUpdate:()=>{this.onViewUpdate()}}),o&&(this.anchor=o),this.roundPixels=l??!1,void 0!==s&&(this.width=s),void 0!==a&&(this.height=a)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=null===e,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){"object"==typeof e?(t=e.height??e.width,e=e.width):t??(t=e),void 0!==e&&this._setWidth(e,this.bounds.width),void 0!==t&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,i=this.bounds.height,r=-t*this.anchor.x;let n=0;return e.x>=r&&e.x<=r+t&&(n=-i*this.anchor.y,e.y>=n&&e.y<=n+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,("boolean"==typeof e?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function Nc(e,t){let i=e[0]??{};return("string"==typeof i||e[1])&&(ft(0,`use new ${t}({ text: "hi!", style }) instead`),i={text:i,style:e[1]}),i}const kc=new class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const i=cr.get().createCanvas();i.width=e,i.height=t;const r=i.getContext("2d");return{canvas:i,context:r}}getOptimalCanvasAndContext(e,t,i=1){e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6);const r=((e=mt(e))<<17)+((t=mt(t))<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let n=this._canvasPool[r].pop();return n||(n=this._createCanvasAndContext(e,t)),n}returnCanvasAndContext(e){const t=e.canvas,{width:i,height:r}=t,n=(i<<17)+(r<<1);e.context.resetTransform(),e.context.clearRect(0,0,i,r),this._canvasPool[n].push(e)}clear(){this._canvasPool={}}};ci.register(kc);let Sc=null,Pc=null;function Mc(e,t,i){for(let r=0,n=4*i*t;r<t;++r,n+=4)if(0!==e[n+3])return!1;return!0}function Vc(e,t,i,r,n){const o=4*t;for(let s=r,a=r*o+4*i;s<=n;++s,a+=o)if(0!==e[a+3])return!1;return!0}function _c(...e){let t=e[0];t.canvas||(t={canvas:e[0],resolution:e[1]});const{canvas:i}=t,r=Math.min(t.resolution??1,1),n=t.width??i.width,o=t.height??i.height;let s=t.output;if(function(e,t){Sc||(Sc=cr.get().createCanvas(256,128),Pc=Sc.getContext("2d",{willReadFrequently:!0}),Pc.globalCompositeOperation="copy",Pc.globalAlpha=1),(Sc.width<e||Sc.height<t)&&(Sc.width=mt(e),Sc.height=mt(t))}(n,o),!Pc)throw new TypeError("Failed to get canvas 2D context");Pc.drawImage(i,0,0,n,o,0,0,n*r,o*r);const a=Pc.getImageData(0,0,n,o).data;let l=0,c=0,A=n-1,u=o-1;for(;c<o&&Mc(a,n,c);)++c;if(c===o)return ct.EMPTY;for(;Mc(a,n,u);)--u;for(;Vc(a,n,l,c,u);)++l;for(;Vc(a,n,A,c,u);)--A;return++A,++u,Pc.globalCompositeOperation="source-over",Pc.strokeRect(l,c,A-l,u-c),Pc.globalCompositeOperation="copy",s??(s=new ct),s.set(l/r,c/r,(A-l)/r,(u-c)/r),s}class Lc{constructor(e=0,t=0,i=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=i,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){const t=new Array(e.length);for(let i=0;i<e.length;i++){const r=e[i];t[i]=[r,this.get(r)]}return t}evict(e=!1){if(e||this.size>0){const e=this.first;delete this.items[e.key],0===--this.size?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(void 0!==t)return this.ttl>0&&t.expiry<=Date.now()?void this.delete(e):(this.moveToEnd(t),t.value)}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,null!==this.last&&(this.last.next=e),this.last=e,null===this.first&&(this.first=e))}keys(){const e=new Array(this.size);let t=this.first,i=0;for(;null!==t;)e[i++]=t.key,t=t.next;return e}setWithEvicted(e,t,i=this.resetTtl){let r=null;if(this.has(e))this.set(e,t,!0,i);else{this.max>0&&this.size===this.max&&(r={...this.first},this.evict(!0));let i=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};1===++this.size?this.first=i:this.last.next=i,this.last=i}return r}set(e,t,i=!1,r=this.resetTtl){let n=this.items[e];return i||void 0!==n?(n.value=t,!1===i&&r&&(n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(n)):(this.max>0&&this.size===this.max&&this.evict(!0),n=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},1===++this.size?this.first=n:this.last.next=n,this.last=n),this}values(e=this.keys()){const t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=this.get(e[i]);return t}}function Rc(e=1e3,t=0,i=!1){if(isNaN(e)||e<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if("boolean"!=typeof i)throw new TypeError("Invalid resetTtl value");return new Lc(e,t,i)}function Uc(e){return!!e.tagStyles&&Object.keys(e.tagStyles).length>0}function Tc(e){return e.includes("<")}function Oc(e,t){return e.clone().assign(t)}const Fc=new Set([10,13]),Gc=new Set([9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]),jc=/(\r\n|\r|\n)/,Hc=/(?:\r\n|\r|\n)/;function Xc(e){return"string"==typeof e&&Fc.has(e.charCodeAt(0))}function zc(e,t){return"string"==typeof e&&Gc.has(e.charCodeAt(0))}function Jc(e){return"normal"===e||"pre-line"===e}function Wc(e){return"normal"===e}function Kc(e){if("string"!=typeof e)return"";let t=e.length-1;for(;t>=0&&zc(e[t]);)t--;return t<e.length-1?e.slice(0,t+1):e}function Yc(e){const t=[],i=[];if("string"!=typeof e)return t;for(let r=0;r<e.length;r++){const n=e[r],o=e[r+1];zc(n)||Xc(n)?(i.length>0&&(t.push(i.join("")),i.length=0),"\r"===n&&"\n"===o?(t.push("\r\n"),r++):t.push(n)):i.push(n)}return i.length>0&&t.push(i.join("")),t}function qc(e,t,i,r){const n=i(e),o=[];for(let s=0;s<n.length;s++){let i=n[s],a=i,l=1;for(;n[s+l];){const o=n[s+l];if(r(a,o,e,s,t))break;i+=o,a=o,l++}s+=l-1,o.push(i)}return o}const Zc=/\r\n|\r|\n/g;function $c(e,t,i,r,n,o,s,a){const l=function(e,t){const i=[],r=t.tagStyles;if(!Uc(t)||!Tc(e))return i.push({text:e,style:t}),i;const n=[t],o=[];let s="",a=0;for(;a<e.length;){const t=e[a];if("<"===t){const l=e.indexOf(">",a);if(-1===l){s+=t,a++;continue}const c=e.slice(a+1,l);if(c.startsWith("/")){const t=c.slice(1).trim();if(o.length>0&&o[o.length-1]===t){s.length>0&&(i.push({text:s,style:n[n.length-1]}),s=""),n.pop(),o.pop(),a=l+1;continue}s+=e.slice(a,l+1),a=l+1;continue}{const t=c.trim();if(r[t]){s.length>0&&(i.push({text:s,style:n[n.length-1]}),s="");const e=Oc(n[n.length-1],r[t]);n.push(e),o.push(t),a=l+1;continue}s+=e.slice(a,l+1),a=l+1;continue}}s+=t,a++}return s.length>0&&i.push({text:s,style:n[n.length-1]}),i}(e,t);if(Wc(t.whiteSpace))for(let y=0;y<l.length;y++){const e=l[y];l[y]={text:e.text.replace(Zc," "),style:e.style}}const c=[];let A=[];for(const y of l){const e=y.text.split(jc);for(let t=0;t<e.length;t++){const i=e[t];"\r\n"===i||"\r"===i||"\n"===i?(c.push(A),A=[]):i.length>0&&A.push({text:i,style:y.style})}}(A.length>0||0===c.length)&&c.push(A);const u=i?function(e,t,i,r,n,o){const{letterSpacing:s,whiteSpace:a,wordWrapWidth:l,breakWords:c}=t,A=Jc(a),u=l+s,d={};let h="";const g=(e,t)=>{const n=`${e}|${t.styleKey}`;let o=d[n];if(void 0===o){const s=t._fontString;s!==h&&(i.font=s,h=s),o=r(e,t.letterSpacing,i)+t.letterSpacing,d[n]=o}return o},f=[];for(const p of e){const e=eA(p),t=f.length,i=t=>{let i=0,r=t;do{const{token:t,style:n}=e[r];i+=g(t,n),r++}while(r<e.length&&e[r].continuesFromPrevious);return i},r=t=>{const i=[];let r=t;do{i.push({token:e[r].token,style:e[r].style}),r++}while(r<e.length&&e[r].continuesFromPrevious);return i};let s=[],a=0,l=!A,d=null;const h=()=>{d&&d.text.length>0&&s.push(d),d=null},m=()=>{if(h(),s.length>0){const e=s[s.length-1];e.text=Kc(e.text),0===e.text.length&&s.pop()}f.push(s),s=[],a=0,l=!1};for(let p=0;p<e.length;p++){const{token:t,style:x,continuesFromPrevious:E}=e[p],C=g(t,x);if(A){const e=zc(t),i=d?.text[d.text.length-1]??s[s.length-1]?.text.slice(-1)??"",r=!!i&&zc(i);if(e&&r)continue}const B=!E,b=B?i(p):C;if(b>u&&B)if(a>0&&m(),c){const e=r(p);for(let t=0;t<e.length;t++){const i=e[t].token,r=e[t].style,s=qc(i,c,o,n);for(const e of s){const t=g(e,r);t+a>u&&m(),d&&d.style===r?d.text+=e:(h(),d={text:e,style:r}),a+=t}}p+=e.length-1}else{const e=r(p);h(),f.push(e.map(e=>({text:e.token,style:e.style}))),l=!1,p+=e.length-1}else if(b+a>u&&B){if(zc(t)){l=!1;continue}m(),d={text:t,style:x},a=C}else if(E&&!c)d&&d.style===x?d.text+=t:(h(),d={text:t,style:x}),a+=C;else{const e=zc(t);if(0===a&&e&&!l)continue;d&&d.style===x?d.text+=t:(h(),d={text:t,style:x}),a+=C}}if(h(),s.length>0){const e=s[s.length-1];e.text=Kc(e.text),0===e.text.length&&s.pop()}(s.length>0||f.length===t)&&f.push(s)}return f}(c,t,r,n,s,a):c,d=[],h=[],g=[],f=[],p=[];let m=0;const x=o(t._fontString);0===x.fontSize&&(x.fontSize=t.fontSize,x.ascent=t.fontSize);let E="",C=!!t.dropShadow;for(const y of u){let e=0,i=x.ascent,s=x.descent,a="";for(const t of y){const l=t.style._fontString,c=o(l);l!==E&&(r.font=l,E=l);e+=n(t.text,t.style.letterSpacing,r),i=Math.max(i,c.ascent),s=Math.max(s,c.descent),a+=t.text,!C&&t.style.dropShadow&&(C=!0)}0===y.length&&(i=x.ascent,s=x.descent),d.push(e),h.push(i),g.push(s),p.push(a);const l=t.lineHeight||i+s;f.push(l+t.leading),m=Math.max(m,e)}const B=t._stroke?.width||0,b=(i&&"left"!==t.align&&"justify"!==t.align?Math.max(m,t.wordWrapWidth):m)+B+(t.dropShadow?t.dropShadow.distance:0);let I=0;for(let y=0;y<f.length;y++)I+=f[y];I=Math.max(I,f[0]+B);return{width:b,height:I+(t.dropShadow?t.dropShadow.distance:0),lines:p,lineWidths:d,lineHeight:(t.lineHeight||x.fontSize)+t.leading,maxLineWidth:m,fontProperties:x,runsByLine:u,lineAscents:h,lineDescents:g,lineHeights:f,hasDropShadow:C}}function eA(e){const t=[];let i=!1;for(const r of e){const e=Yc(r.text);let n=!0;for(const o of e){const e=zc(o)||Xc(o),s=n&&i&&!e;t.push({token:o,style:r.style,continuesFromPrevious:s}),i=!e,n=!1}}return t}const tA={willReadFrequently:!0};function iA(e,t,i,r,n){let o=i[e];return"number"!=typeof o&&(o=n(e,t,r)+t,i[e]=o),o}const rA={willReadFrequently:!0},nA=class e{static get experimentalLetterSpacingSupported(){let t=e._experimentalLetterSpacingSupported;if(void 0===t){const i=cr.get().getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return t}constructor(e,t,i,r,n,o,s,a,l,c){this.text=e,this.style=t,this.width=i,this.height=r,this.lines=n,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=l,c&&(this.runsByLine=c.runsByLine,this.lineAscents=c.lineAscents,this.lineDescents=c.lineDescents,this.lineHeights=c.lineHeights,this.hasDropShadow=c.hasDropShadow)}static measureText(t=" ",i,r=e._canvas,n=i.wordWrap){const o=`${t}-${i.styleKey}-wordWrap-${n}`;if(e._measurementCache.has(o))return e._measurementCache.get(o);if(Uc(i)&&Tc(t)){const r=$c(t,i,n,e._context,e._measureText,e.measureFont,e.canBreakChars,e.wordWrapSplit),s=new e(t,i,r.width,r.height,r.lines,r.lineWidths,r.lineHeight,r.maxLineWidth,r.fontProperties,{runsByLine:r.runsByLine,lineAscents:r.lineAscents,lineDescents:r.lineDescents,lineHeights:r.lineHeights,hasDropShadow:r.hasDropShadow});return e._measurementCache.set(o,s),s}const s=i._fontString,a=e.measureFont(s);0===a.fontSize&&(a.fontSize=i.fontSize,a.ascent=i.fontSize,a.descent=0);const l=e._context;l.font=s;const c=(n?e._wordWrap(t,i,r):t).split(Hc),A=new Array(c.length);let u=0;for(let E=0;E<c.length;E++){const t=e._measureText(c[E],i.letterSpacing,l);A[E]=t,u=Math.max(u,t)}const d=i._stroke?.width??0,h=i.lineHeight||a.fontSize,g=e._getAlignWidth(u,i,n),f=e._adjustWidthForStyle(g,i),p=Math.max(h,a.fontSize+d)+(c.length-1)*(h+i.leading),m=e._adjustHeightForStyle(p,i),x=new e(t,i,f,m,c,A,h+i.leading,u,a);return e._measurementCache.set(o,x),x}static _adjustWidthForStyle(e,t){let i=e+(t._stroke?.width||0);return t.dropShadow&&(i+=t.dropShadow.distance),i}static _adjustHeightForStyle(e,t){let i=e;return t.dropShadow&&(i+=t.dropShadow.distance),i}static _getAlignWidth(e,t,i){return i&&"left"!==t.align&&"justify"!==t.align?Math.max(e,t.wordWrapWidth):e}static _measureText(t,i,r){let n=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(r.letterSpacing=`${i}px`,r.textLetterSpacing=`${i}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));const o=r.measureText(t);let s=o.width;const a=-(o.actualBoundingBoxLeft??0);let l=(o.actualBoundingBoxRight??0)-a;if(s>0)if(n)s-=i,l-=i;else{const r=(e.graphemeSegmenter(t).length-1)*i;s+=r,l+=r}return Math.max(s,l)}static _wordWrap(t,i,r=e._canvas){return function(e,t,i,r,n,o,s){const a=i.getContext("2d",tA);a.font=t._fontString;let l=0,c="";const A=[],u=Object.create(null),{letterSpacing:d,whiteSpace:h}=t,g=Jc(h),f=Wc(h);let p=!g;const m=t.wordWrapWidth+d,x=Yc(e);for(let C=0;C<x.length;C++){let e=x[C];if(Xc(e)){if(!f){A.push(Kc(c)),p=!g,c="",l=0;continue}e=" "}if(g){const t=zc(e),i=zc(c[c.length-1]);if(t&&i)continue}const i=iA(e,d,u,a,r);if(i>m)if(""!==c&&(A.push(Kc(c)),c="",l=0),n(e,t.breakWords)){const i=qc(e,t.breakWords,s,o);for(const e of i){const t=iA(e,d,u,a,r);t+l>m&&(A.push(Kc(c)),p=!1,c="",l=0),c+=e,l+=t}}else c.length>0&&(A.push(Kc(c)),c="",l=0),A.push(Kc(e)),p=!1,c="",l=0;else i+l>m&&(p=!1,A.push(Kc(c)),c="",l=0),(c.length>0||!zc(e)||p)&&(c+=e,l+=i)}const E=Kc(c);return E.length>0&&A.push(E),A.join("\n")}(t,i,r,e._measureText,e.canBreakWords,e.canBreakChars,e.wordWrapSplit)}static isBreakingSpace(e,t){return zc(e)}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,r,n){return!0}static wordWrapSplit(t){return e.graphemeSegmenter(t)}static measureFont(t){if(e._fonts[t])return e._fonts[t];const i=e._context;i.font=t;const r=i.measureText(e.METRICS_STRING+e.BASELINE_SYMBOL),n=r.actualBoundingBoxAscent??0,o=r.actualBoundingBoxDescent??0,s={ascent:n,descent:o,fontSize:n+o};return e._fonts[t]=s,s}static clearMetrics(t=""){t?delete e._fonts[t]:e._fonts={}}static get _canvas(){if(!e.__canvas){let i;try{const t=new OffscreenCanvas(0,0),r=t.getContext("2d",rA);if(r?.measureText)return e.__canvas=t,t;i=cr.get().createCanvas()}catch(t){i=cr.get().createCanvas()}i.width=i.height=10,e.__canvas=i}return e.__canvas}static get _context(){return e.__context||(e.__context=e._canvas.getContext("2d",rA)),e.__context}};nA.METRICS_STRING="|q",nA.BASELINE_SYMBOL="M",nA.BASELINE_MULTIPLIER=1.4,nA.HEIGHT_MULTIPLIER=2,nA.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const e=new Intl.Segmenter;return t=>{const i=e.segment(t),r=[];let n=0;for(const e of i)r[n++]=e.segment;return r}}return e=>[...e]})(),nA.experimentalLetterSpacing=!1,nA._fonts={},nA._measurementCache=Rc(1e3);let oA=nA;const sA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function aA(e){const t="number"==typeof e.fontSize?`${e.fontSize}px`:e.fontSize;let i=e.fontFamily;Array.isArray(e.fontFamily)||(i=e.fontFamily.split(","));for(let r=i.length-1;r>=0;r--){let e=i[r].trim();/([\"\'])[^\'\"]+\1/.test(e)||sA.includes(e)||(e=`"${e}"`),i[r]=e}return`${e.fontStyle} ${e.fontVariant} ${e.fontWeight} ${t} ${i.join(",")}`}const lA=1e5;function cA(e,t,i,r=0,n=0,o=0){if(e.texture===Dt.WHITE&&!e.fill)return si.shared.setValue(e.color).setAlpha(e.alpha??1).toHexa();if(!e.fill){const i=t.createPattern(e.texture.source.resource,"repeat"),r=e.matrix.copyTo(qe.shared);return r.scale(e.texture.source.pixelWidth,e.texture.source.pixelHeight),i.setTransform(r),i}if(e.fill instanceof fl){const i=e.fill,r=t.createPattern(i.texture.source.resource,"repeat"),n=i.transform.copyTo(qe.shared);return n.scale(i.texture.source.pixelWidth,i.texture.source.pixelHeight),r.setTransform(n),r}if(e.fill instanceof wa){const s=e.fill,a="linear"===s.type,l="local"===s.textureSpace;let c,A=1,u=1;l&&i&&(A=i.width+r,u=i.height+r);let d=!1;if(a){const{start:e,end:i}=s;c=t.createLinearGradient(e.x*A+n,e.y*u+o,i.x*A+n,i.y*u+o),d=Math.abs(i.x-e.x)<Math.abs(.1*(i.y-e.y))}else{const{center:e,innerRadius:i,outerCenter:r,outerRadius:a}=s;c=t.createRadialGradient(e.x*A+n,e.y*u+o,i*A,r.x*A+n,r.y*u+o,a*A)}if(d&&l&&i){const e=i.lineHeight/u;for(let t=0;t<i.lines.length;t++){const n=(t*i.lineHeight+r/2)/u;s.colorStops.forEach(t=>{let i=n+t.offset*e;i=Math.max(0,Math.min(1,i)),c.addColorStop(Math.floor(i*lA)/lA,si.shared.setValue(t.color).toHex())})}}else s.colorStops.forEach(e=>{c.addColorStop(e.offset,si.shared.setValue(e.color).toHex())});return c}return li(),"red"}const AA=new ct;const uA=new class{getCanvasAndContext(e){const{text:t,style:i,resolution:r=1}=e,n=i._getFinalPadding(),o=oA.measureText(t||" ",i),s=Math.ceil(Math.ceil(Math.max(1,o.width)+2*n)*r),a=Math.ceil(Math.ceil(Math.max(1,o.height)+2*n)*r),l=kc.getOptimalCanvasAndContext(s,a);this._renderTextToCanvas(i,n,r,l,o);return{canvasAndContext:l,frame:i.trim?_c({canvas:l.canvas,width:s,height:a,resolution:1,output:AA}):AA.set(0,0,s,a)}}returnCanvasAndContext(e){kc.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,i,r,n){if(n.runsByLine&&n.runsByLine.length>0)return void this._renderTaggedTextToCanvas(n,e,t,i,r);const{canvas:o,context:s}=r,a=aA(e),l=n.lines,c=n.lineHeight,A=n.lineWidths,u=n.maxLineWidth,d=n.fontProperties,h=o.height;if(s.resetTransform(),s.scale(i,i),s.textBaseline=e.textBaseline,e._stroke?.width){const t=e._stroke;s.lineWidth=t.width,s.miterLimit=t.miterLimit,s.lineJoin=t.join,s.lineCap=t.cap}let g,f;s.font=a;const p=e.dropShadow?2:1,m=e.wordWrap?e.wordWrapWidth:u,x=(e._stroke?.width??0)/2;let E=(c-d.fontSize)/2;c-d.fontSize<0&&(E=0);for(let C=0;C<p;++C){const o=e.dropShadow&&0===C,a=o?Math.ceil(Math.max(1,h)+2*t):0,u=a*i;if(o)this._setupDropShadow(s,e,i,u);else{const i=e._gradientBounds,r=e._gradientOffset;if(i){const o={width:i.width,height:i.height,lineHeight:i.height,lines:n.lines};this._setFillAndStrokeStyles(s,e,o,t,x,r?.x??0,r?.y??0)}else r?this._setFillAndStrokeStyles(s,e,n,t,x,r.x,r.y):this._setFillAndStrokeStyles(s,e,n,t,x);s.shadowColor="black"}for(let i=0;i<l.length;i++)g=x,f=x+i*c+d.ascent+E,g+=this._getAlignmentOffset(A[i],m,e.align),e._stroke?.width&&this._drawLetterSpacing(l[i],e,r,g+t,f+t-a,!0),void 0!==e._fill&&this._drawLetterSpacing(l[i],e,r,g+t,f+t-a)}}_renderTaggedTextToCanvas(e,t,i,r,n){const{canvas:o,context:s}=n,{runsByLine:a,lineWidths:l,maxLineWidth:c,lineAscents:A,lineHeights:u,hasDropShadow:d}=e,h=o.height;s.resetTransform(),s.scale(r,r),s.textBaseline=t.textBaseline;const g=d?2:1,f=t.wordWrap?t.wordWrapWidth:c,p=(t._stroke?.width??0)/2,m=[];for(let x=0;x<a.length;x++){const e=a[x],t=[];for(const i of e){const e=aA(i.style);s.font=e,t.push({width:oA._measureText(i.text,i.style.letterSpacing,s),font:e})}m.push(t)}for(let x=0;x<g;++x){const e=d&&0===x,o=e?Math.ceil(Math.max(1,h)+2*i):0,c=o*r;e||(s.shadowColor="black");let g=p;for(let d=0;d<a.length;d++){const h=a[d],x=l[d],E=A[d],C=u[d],B=m[d];let b=p;b+=this._getAlignmentOffset(x,f,t.align);const I=g+E;let y=b+i;for(let t=0;t<h.length;t++){const a=h[t],{width:l,font:A}=B[t];if(s.font=A,s.textBaseline=a.style.textBaseline,a.style._stroke?.width){const t=a.style._stroke;if(s.lineWidth=t.width,s.miterLimit=t.miterLimit,s.lineJoin=t.join,s.lineCap=t.cap,e){if(!a.style.dropShadow){y+=l;continue}this._setupDropShadow(s,a.style,r,c)}else{const e=oA.measureFont(A),r=a.style.lineHeight||e.fontSize,n={width:l,height:r,lineHeight:r,lines:[a.text]};s.strokeStyle=cA(t,s,n,2*i,y-i,g)}this._drawLetterSpacing(a.text,a.style,n,y,I+i-o,!0)}y+=l}y=b+i;for(let t=0;t<h.length;t++){const a=h[t],{width:l,font:A}=B[t];if(s.font=A,s.textBaseline=a.style.textBaseline,void 0!==a.style._fill){if(e){if(!a.style.dropShadow){y+=l;continue}this._setupDropShadow(s,a.style,r,c)}else{const e=oA.measureFont(A),t=a.style.lineHeight||e.fontSize,r={width:l,height:t,lineHeight:t,lines:[a.text]};s.fillStyle=cA(a.style._fill,s,r,2*i,y-i,g)}this._drawLetterSpacing(a.text,a.style,n,y,I+i-o,!1)}y+=l}g+=C}}}_setFillAndStrokeStyles(e,t,i,r,n,o=0,s=0){if(e.fillStyle=t._fill?cA(t._fill,e,i,2*r,o,s):null,t._stroke?.width){const a=n+2*r;e.strokeStyle=cA(t._stroke,e,i,a,o,s)}}_setupDropShadow(e,t,i,r){e.fillStyle="black",e.strokeStyle="black";const n=t.dropShadow,o=n.color,s=n.alpha;e.shadowColor=si.shared.setValue(o).setAlpha(s).toRgbaString();const a=n.blur*i,l=n.distance*i;e.shadowBlur=a,e.shadowOffsetX=Math.cos(n.angle)*l,e.shadowOffsetY=Math.sin(n.angle)*l+r}_getAlignmentOffset(e,t,i){return"right"===i?t-e:"center"===i?(t-e)/2:0}_drawLetterSpacing(e,t,i,r,n,o=!1){const{context:s}=i,a=t.letterSpacing;let l=!1;if(oA.experimentalLetterSpacingSupported&&(oA.experimentalLetterSpacing?(s.letterSpacing=`${a}px`,s.textLetterSpacing=`${a}px`,l=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px")),0===a||l)return void(o?s.strokeText(e,r,n):s.fillText(e,r,n));let c=r;const A=oA.graphemeSegmenter(e);let u=s.measureText(e).width,d=0;for(let h=0;h<A.length;++h){const e=A[h];o?s.strokeText(e,c,n):s.fillText(e,c,n);let t="";for(let i=h+1;i<A.length;++i)t+=A[i];d=s.measureText(t).width,c+=u-d+a,u=d}}},dA=class e extends Xe{constructor(t={}){super(),this.uid=ut("textStyle"),this._tick=0,this._cachedFontString=null,function(e){const t=e;if("boolean"==typeof t.dropShadow&&t.dropShadow){const i=hA.defaultDropShadow;e.dropShadow={alpha:t.dropShadowAlpha??i.alpha,angle:t.dropShadowAngle??i.angle,blur:t.dropShadowBlur??i.blur,color:t.dropShadowColor??i.color,distance:t.dropShadowDistance??i.distance}}if(void 0!==t.strokeThickness){ft(0,"strokeThickness is now a part of stroke");const i=t.stroke;let r={};if(si.isColorLike(i))r.color=i;else if(i instanceof wa||i instanceof fl)r.fill=i;else{if(!Object.hasOwnProperty.call(i,"color")&&!Object.hasOwnProperty.call(i,"fill"))throw new Error("Invalid stroke value.");r=i}e.stroke={...r,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(ft(0,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||0===t.fill.length)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&li();const i=new wa({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),r=t.fillGradientStops.slice(),n=t.fill.map(e=>si.shared.setValue(e).toNumber());r.forEach((e,t)=>{i.addColorStop(e,n[t])}),e.fill={fill:i}}}(t);t instanceof e&&(t=t._toObject());const i={...e.defaultTextStyle,...t};for(const e in i){this[e]=i[e]}this._tagStyles=t.tagStyles??void 0,this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=null!==t&&"object"==typeof t?this._createProxy({...e.defaultDropShadow,...t}):t?this._createProxy({...e.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize="string"==typeof e?parseInt(e,10):e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...vl.defaultFillStyle,...e},()=>{this._fill=Cl({...this._originalFill},vl.defaultFillStyle)})),this._fill=Cl(0===e?"black":e,vl.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...vl.defaultStrokeStyle,...e},()=>{this._stroke=Bl({...this._originalStroke},vl.defaultStrokeStyle)})),this._stroke=Bl(e,vl.defaultStrokeStyle),this.update())}get tagStyles(){return this._tagStyles}set tagStyles(e){this._tagStyles!==e&&(this._tagStyles=e??void 0,this.update())}update(){this._tick++,this._cachedFontString=null,this.emit("update",this)}reset(){const t=e.defaultTextStyle;for(const e in t)this[e]=t[e]}assign(e){for(const t in e){this[t]=e[t]}return this}get styleKey(){return`${this.uid}-${this._tick}`}get _fontString(){return null===this._cachedFontString&&(this._cachedFontString=aA(this)),this._cachedFontString}_toObject(){return{align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill?{...this._fill}:void 0,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke?{...this._stroke}:void 0,textBaseline:this.textBaseline,trim:this.trim,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0,tagStyles:this._tagStyles?{...this._tagStyles}:void 0}}clone(){return new e(this._toObject())}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){this.removeAllListeners();if("boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(t),this._originalFill?.texture&&this._originalFill.texture.destroy(t),this._stroke?.texture&&this._stroke.texture.destroy(t),this._originalStroke?.texture&&this._originalStroke.texture.destroy(t)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(e,i,r)=>(e[i]===r||(e[i]=r,t?.(i,r),this.update()),!0)})}_isFillStyle(e){return null!==(e??null)&&!(si.isColorLike(e)||e instanceof wa||e instanceof fl)}};dA.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},dA.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let hA=dA;class gA{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){this.reset()}}class fA extends gA{}class pA{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new la({renderer:e,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"canvasText"})}resolutionChange(){for(const e in this._managedTexts.items){const t=this._managedTexts.items[e];t?._autoResolution&&t.onViewUpdate()}}validateRenderable(e){const t=this._getGpuText(e),i=e.styleKey;return t.currentKey!==i||e._didTextUpdate}addRenderable(e,t){const i=this._getGpuText(e);if(e._didTextUpdate){const t=e._autoResolution?this._renderer.resolution:e.resolution;i.currentKey===e.styleKey&&e._resolution===t||this._updateGpuText(e),e._didTextUpdate=!1,function(e,t){const{texture:i,bounds:r}=e,n=t._style._getFinalPadding();Nt(r,t._anchor,i);const o=t._anchor._x*n*2,s=t._anchor._y*n*2;r.minX-=n-o,r.minY-=n-s,r.maxX-=n-o,r.maxY-=n-s}(i,e)}this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){const t=this._getGpuText(e);t._batcher.updateElement(t)}_updateGpuText(e){const t=this._getGpuText(e);t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,t.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e.styleKey}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new fA;return t.currentKey="--",t.renderable=e,t.transform=e.groupTransform,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){const t=e._gpuData[this._renderer.uid];if(!t)return;const{canvasText:i}=this._renderer;i.getReferenceCount(t.currentKey)>0?i.decreaseReferenceCount(t.currentKey):t.texture&&i.returnTexture(t.texture)}destroy(){this._managedTexts.destroy(),this._renderer=null}}pA.extension={type:[Le.WebGLPipes,Le.WebGPUPipes,Le.CanvasPipes],name:"text"};const mA=new St;class xA{constructor(e,t){this._activeTextures={},this._renderer=e,this._retainCanvasContext=t}getTexture(e,t,i,r){"string"==typeof e&&(ft(0,"CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:i,resolution:t}),e.style instanceof hA||(e.style=new hA(e.style)),e.textureStyle instanceof bt||(e.textureStyle=new bt(e.textureStyle)),"string"!=typeof e.text&&(e.text=e.text.toString());const{text:n,style:o,textureStyle:s}=e,a=e.resolution??this._renderer.resolution,{frame:l,canvasAndContext:c}=uA.getCanvasAndContext({text:n,style:o,resolution:a}),A=function(e,t,i,r){const n=mA;n.minX=0,n.minY=0,n.maxX=e.width/r|0,n.maxY=e.height/r|0;const o=ji.getOptimalTexture(n.width,n.height,r,!1);return o.source.uploadMethodId="image",o.source.resource=e,o.source.alphaMode="premultiply-alpha-on-upload",o.frame.width=t/r,o.frame.height=i/r,o.source.emit("update",o.source),o.updateUvs(),o}(c.canvas,l.width,l.height,a);if(s&&(A.source.style=s),o.trim&&(l.pad(o.padding),A.frame.copyFrom(l),A.frame.scale(1/a),A.updateUvs()),o.filters){const e=this._applyFilters(A,o.filters);return this.returnTexture(A),uA.returnCanvasAndContext(c),e}return this._renderer.texture.initSource(A._source),this._retainCanvasContext||uA.returnCanvasAndContext(c),A}returnTexture(e){const t=e.source,i=t.resource;if(this._retainCanvasContext&&i?.getContext){const e=i.getContext("2d");e&&uA.returnCanvasAndContext({canvas:i,context:e})}t.resource=null,t.uploadMethodId="unknown",t.alphaMode="no-premultiply-alpha",ji.returnTexture(e,!0)}renderTextToCanvas(){ft(0,"CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;const i=this.getTexture({text:e.text,style:e.style,resolution:e._resolution,textureStyle:e.textureStyle});return this._activeTextures[t]={texture:i,usageCount:1},i}decreaseReferenceCount(e){const t=this._activeTextures[e];t&&(t.usageCount--,0===t.usageCount&&(this.returnTexture(t.texture),this._activeTextures[e]=null))}getReferenceCount(e){return this._activeTextures[e]?.usageCount??0}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}_applyFilters(e,t){const i=this._renderer.renderTarget.renderTarget,r=this._renderer.filter.generateFilteredTexture({texture:e,filters:t});return this._renderer.renderTarget.bind(i,!1),r}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexture(this._activeTextures[e].texture);this._activeTextures=null}}class EA extends xA{constructor(e){super(e,!0)}}EA.extension={type:[Le.CanvasSystem],name:"canvasText"};class CA extends xA{constructor(e){super(e,!1)}}CA.extension={type:[Le.WebGLSystem,Le.WebGPUSystem],name:"canvasText"},Te.add(EA),Te.add(CA),Te.add(pA);class BA extends Xe{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return ft(0,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return ft(0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return ft(0,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return ft(0,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return ft(0,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,e&&(this.pages.forEach(e=>e.texture.destroy(!0)),this.pages=null)}}const bA=class e extends BA{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const i={...e.defaultOptions,...t};this._textureSize=i.textureSize,this._mipmap=i.mipmap;const r=i.style.clone();i.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=Dt.WHITE,r._fill.fill=null),this.applyFillAsTint=i.overrideFill;const n=r.fontSize;r.fontSize=this.baseMeasurementFontSize;const o=aA(r);i.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/n):r.fontSize=this.baseRenderedFontSize=n,this._style=r,this._skipKerning=i.skipKerning??!1,this.resolution=i.resolution??1,this._padding=i.padding??4,i.textureStyle&&(this._textureStyle=i.textureStyle instanceof bt?i.textureStyle:new bt(i.textureStyle)),this.fontMetrics=oA.measureFont(o),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(e){const t=oA.graphemeSegmenter(e).filter(e=>!this._currentChars.includes(e)).filter((e,t,i)=>i.indexOf(e)===t);if(!t.length)return;let i;this._currentChars=[...this._currentChars,...t],i=-1===this._currentPageIndex?this._nextPage():this.pages[this._currentPageIndex];let{canvas:r,context:n}=i.canvasAndContext,o=i.texture.source;const s=this._style;let a=this._currentX,l=this._currentY,c=this._currentMaxCharHeight;const A=this.baseRenderedFontSize/this.baseMeasurementFontSize,u=this._padding*A;let d=!1;const h=r.width/this.resolution,g=r.height/this.resolution;for(let f=0;f<t.length;f++){const e=t[f],i=oA.measureText(e,s,r,!1);i.lineHeight=i.height;const p=i.width*A,m=Math.ceil(("italic"===s.fontStyle?2:1)*p)+2*u,x=i.height*A+2*u;if(d=!1,"\n"!==e&&"\r"!==e&&"\t"!==e&&" "!==e&&(d=!0,c=Math.ceil(Math.max(x,c))),a+m>h&&(l+=c,c=x,a=0,l+c>g)){o.update();const e=this._nextPage();r=e.canvasAndContext.canvas,n=e.canvasAndContext.context,o=e.texture.source,a=0,l=0,c=0}const E=p/A-(s.dropShadow?.distance??0)-(s._stroke?.width??0);if(this.chars[e]={id:e.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:E,kerning:{}},d){this._drawGlyph(n,i,a+u,l+u,A,s);const t=o.width*A,r=o.height*A,c=new ct(a/t*o.width,l/r*o.height,m/t*o.width,x/r*o.height);this.chars[e].texture=new Dt({source:o,frame:c}),a+=Math.ceil(m)}}o.update(),this._currentX=a,this._currentY=l,this._currentMaxCharHeight=c,this._skipKerning&&this._applyKerning(t,n)}get pageTextures(){return ft(0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const i=this._measureCache;for(let r=0;r<e.length;r++){const n=e[r];for(let e=0;e<this._currentChars.length;e++){const r=this._currentChars[e];let o=i[n];o||(o=i[n]=t.measureText(n).width);let s=i[r];s||(s=i[r]=t.measureText(r).width);let a=t.measureText(n+r).width,l=a-(o+s);l&&(this.chars[n].kerning[r]=l),a=t.measureText(n+r).width,l=a-(o+s),l&&(this.chars[r].kerning[n]=l)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=kc.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new Dt({source:new ur({resource:t.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(r.source.style=this._textureStyle);const n={canvasAndContext:t,texture:r};return this.pages[this._currentPageIndex]=n,n}_setupContext(e,t,i){t.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=aA(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const r=t._stroke,n=r?.width??0;if(r&&(e.lineWidth=n,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=cA(r,e)),t._fill&&(e.fillStyle=cA(t._fill,e)),t.dropShadow){const r=t.dropShadow,n=si.shared.setValue(r.color).toArray(),o=r.blur*i,s=r.distance*i;e.shadowColor=`rgba(${255*n[0]},${255*n[1]},${255*n[2]},${r.alpha})`,e.shadowBlur=o,e.shadowOffsetX=Math.cos(r.angle)*s,e.shadowOffsetY=Math.sin(r.angle)*s}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,i,r,n,o){const s=t.text,a=t.fontProperties,l=o._stroke,c=(l?.width??0)*n,A=i+c/2,u=r-c/2,d=a.descent*n,h=t.lineHeight*n;let g=!1;o.stroke&&c&&(g=!0,e.strokeText(s,A,u+h-d));const{shadowBlur:f,shadowOffsetX:p,shadowOffsetY:m}=e;o._fill&&(g&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(s,A,u+h-d)),g&&(e.shadowBlur=f,e.shadowOffsetX=p,e.shadowOffsetY=m)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:i}=this.pages[e];kc.returnCanvasAndContext(t),i.destroy(!0)}this.pages=null}};bA.defaultOptions={textureSize:512,style:new hA,mipmap:!0};let IA=bA;function yA(e,t,i,r){const n={width:0,height:0,offsetY:0,scale:t.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};n.offsetY=i.baseLineOffset;let o=n.lines[0],s=null,a=!0;const l={width:0,start:0,index:0,positions:[],chars:[]},c=i.baseMeasurementFontSize/t.fontSize,A=t.letterSpacing*c,u=t.wordWrapWidth*c,d=t.lineHeight?t.lineHeight*c:i.lineHeight,h=t.wordWrap&&t.breakWords,g=e=>{const t=o.width;for(let i=0;i<l.index;i++){const r=e.positions[i];o.chars.push(e.chars[i]),o.charPositions.push(r+t)}o.width+=e.width,a=!1,l.width=0,l.index=0,l.chars.length=0},f=()=>{let e=o.chars.length-1;if(r){let t=o.chars[e];for(;" "===t;)o.width-=i.chars[t].xAdvance,t=o.chars[--e]}n.width=Math.max(n.width,o.width),o={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,n.lines.push(o),n.height+=d},p=e=>e-A>u;for(let m=0;m<e.length+1;m++){let r;const n=m===e.length;n||(r=e[m]);const c=i.chars[r]||i.chars[" "];if(/(?:\s)/.test(r)||"\r"===r||"\n"===r||n){if(!a&&t.wordWrap&&p(o.width+l.width)?(f(),g(l),n||o.charPositions.push(0)):(l.start=o.width,g(l),n||o.charPositions.push(0)),"\r"===r||"\n"===r)f();else if(!n){const e=c.xAdvance+(c.kerning[s]||0)+A;o.width+=e,o.spaceWidth=e,o.spacesIndex.push(o.charPositions.length),o.chars.push(r)}}else{const e=c.kerning[s]||0,t=c.xAdvance+e+A;h&&p(o.width+l.width+t)&&(g(l),f()),l.positions[l.index++]=l.width+e,l.chars.push(r),l.width+=t}s=r}return f(),"center"===t.align?function(e){for(let t=0;t<e.lines.length;t++){const i=e.lines[t],r=e.width/2-i.width/2;for(let e=0;e<i.charPositions.length;e++)i.charPositions[e]+=r}}(n):"right"===t.align?function(e){for(let t=0;t<e.lines.length;t++){const i=e.lines[t],r=e.width-i.width;for(let e=0;e<i.charPositions.length;e++)i.charPositions[e]+=r}}(n):"justify"===t.align&&function(e){const t=e.width;for(let i=0;i<e.lines.length;i++){const r=e.lines[i];let n=0,o=r.spacesIndex[n++],s=0;const a=r.spacesIndex.length,l=(t-r.width)/a;for(let e=0;e<r.charPositions.length;e++)e===o&&(o=r.spacesIndex[n++],s+=l),r.charPositions[e]+=s}}(n),n}let vA=0;const wA=new class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=Rc(1e3)}getFont(e,t){let i=`${t.fontFamily}-bitmap`,r=!0;if(t._fill.fill&&!t._stroke?(i+=t._fill.fill.styleKey,r=!1):(t._stroke||t.dropShadow)&&(i=`${t.styleKey}-bitmap`,r=!1),!Br.has(i)){const e=Object.create(t);e._lineHeight=0;const n=new IA({style:e,overrideFill:r,overrideSize:!0,...this.defaultOptions});vA++,vA>50&&li(),n.once("destroy",()=>{vA--,Br.remove(i)}),Br.set(i,n)}const n=Br.get(i);return n.ensureCharacters?.(e),n}getLayout(e,t,i=!0){const r=this.getFont(e,t),n=`${e}-${t.styleKey}-${i}`;if(this.measureCache.has(n))return this.measureCache.get(n);const o=yA(oA.graphemeSegmenter(e),t,r,i);return this.measureCache.set(n,o),o}measureText(e,t,i=!0){return this.getLayout(e,t,i)}install(...e){let t=e[0];"string"==typeof t&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},ft(0,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=t?.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const r=t.style,n=r instanceof hA?r:new hA(r),o=t.dynamicFill??this._canUseTintForStyle(n),s=new IA({style:n,overrideFill:o,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),a=function(e){if(""===e)return[];"string"==typeof e&&(e=[e]);const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];if(Array.isArray(r)){if(2!==r.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(0===r[0].length||0===r[1].length)throw new Error("[BitmapFont]: Invalid character delimiter.");const e=r[0].charCodeAt(0),i=r[1].charCodeAt(0);if(i<e)throw new Error("[BitmapFont]: Invalid character range.");for(let r=e,n=i;r<=n;r++)t.push(String.fromCharCode(r))}else t.push(...Array.from(r))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(t.chars);return s.ensureCharacters(a.join("")),Br.set(`${i}-bitmap`,s),s.once("destroy",()=>Br.remove(`${i}-bitmap`)),s}uninstall(e){const t=`${e}-bitmap`,i=Br.get(t);i&&i.destroy()}_canUseTintForStyle(e){return!(e._stroke||e.dropShadow&&0!==e.dropShadow.color||e._fill.fill||16777215!==e._fill.color)}};class QA extends ic{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class DA{constructor(e){this._renderer=e,this._managedBitmapTexts=new la({renderer:e,type:"renderable",priority:-2,name:"bitmapText"})}validateRenderable(e){const t=this._getGpuBitmapText(e);return this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){const i=this._getGpuBitmapText(e);NA(e,i),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,i)),this._renderer.renderPipes.graphics.addRenderable(i,t),i.context.customShader&&this._updateDistanceField(e)}updateRenderable(e){const t=this._getGpuBitmapText(e);NA(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){const{context:i}=t,r=wA.getFont(e.text,e._style);if(i.clear(),"none"!==r.distanceField.type){const e=this.getSdfShader();e&&(i.customShader||(i.customShader=e))}const n=oA.graphemeSegmenter(e.text),o=e._style;let s=r.baseLineOffset;const a=yA(n,o,r,!0),l=o.padding,c=a.scale;let A=a.width,u=a.height+a.offsetY;o._stroke&&(A+=o._stroke.width/c,u+=o._stroke.width/c),i.translate(-e._anchor._x*A-l,-e._anchor._y*u-l).scale(c,c);const d=r.applyFillAsTint?o._fill.color:16777215;let h=r.fontMetrics.fontSize,g=r.lineHeight;o.lineHeight&&(h=o.fontSize/c,g=o.lineHeight/c);let f=(g-h)/2;f-r.baseLineOffset<0&&(f=0);for(let p=0;p<a.lines.length;p++){const e=a.lines[p];for(let t=0;t<e.charPositions.length;t++){const n=e.chars[t],o=r.chars[n];if(o?.texture){const r=o.texture;i.texture(r,d,Math.round(e.charPositions[t]+o.xOffset),Math.round(s+o.yOffset+f),r.orig.width,r.orig.height)}}s+=g}}_getGpuBitmapText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new QA;return e._gpuData[this._renderer.uid]=t,this._updateContext(e,t),this._managedBitmapTexts.add(e),t}_updateDistanceField(e){const t=this._getGpuBitmapText(e).context,i=e._style.fontFamily,r=Br.get(`${i}-bitmap`),{a:n,b:o,c:s,d:a}=e.groupTransform,l=Math.sqrt(n*n+o*o),c=Math.sqrt(s*s+a*a),A=(Math.abs(l)+Math.abs(c))/2,u=r.baseRenderedFontSize/e._style.fontSize,d=A*r.distanceField.range*(1/u);t.customShader.resources.localUniforms.uniforms.uDistance=d}destroy(){this._managedBitmapTexts.destroy(),this._renderer=null,this._managedBitmapTexts=null}}function NA(e,t){t.groupTransform=e.groupTransform,t.groupColorAlpha=e.groupColorAlpha,t.groupColor=e.groupColor,t.groupBlendMode=e.groupBlendMode,t.globalDisplayStatus=e.globalDisplayStatus,t.groupTransform=e.groupTransform,t.localDisplayStatus=e.localDisplayStatus,t.groupAlpha=e.groupAlpha,t._roundPixels=e._roundPixels}class kA extends DA{getSdfShader(){return null}}kA.extension={type:[Le.CanvasPipes],name:"bitmapText"};const SA={name:"local-uniform-msdf-bit",vertex:{header:"\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32,\n                uRound:f32,\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        ",main:"\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        ",end:"\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        "},fragment:{header:"\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n         ",main:"\n            outColor = vec4<f32>(calculateMSDFAlpha(outColor, vColor, localUniforms.uDistance));\n        "}},PA={name:"local-uniform-msdf-bit",vertex:{header:"\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        ",main:"\n            vColor *= uColor;\n            modelMatrix *= uTransformMatrix;\n        ",end:"\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        "},fragment:{header:"\n            uniform float uDistance;\n         ",main:"\n            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));\n        "}},MA={name:"msdf-bit",fragment:{header:"\n            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {\n\n                // MSDF\n                var median = msdfColor.r + msdfColor.g + msdfColor.b -\n                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                var screenPxDistance = distance * (median - 0.5);\n                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));\n                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);\n                var coverage: f32 = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n\n            }\n        "}},VA={name:"msdf-bit",fragment:{header:"\n            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {\n\n                // MSDF\n                float median = msdfColor.r + msdfColor.g + msdfColor.b -\n                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                float screenPxDistance = distance * (median - 0.5);\n                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));\n                float gamma = mix(1.0, 1.0 / 2.2, luma);\n                float coverage = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n            }\n        "}};let _A,LA;class RA extends gn{constructor(e){const t=new un({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new qe,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});_A??(_A=js({name:"sdf-shader",bits:[Xs,Ys(e),SA,MA,ea]})),LA??(LA=Hs({name:"sdf-shader",bits:[zs,$s(e),PA,VA,ta]})),super({glProgram:LA,gpuProgram:_A,resources:{localUniforms:t,batchSamplers:ra(e)}})}}class UA extends DA{getSdfShader(){return new RA(this._renderer.limits.maxBatchableTextures)}}UA.extension={type:[Le.WebGLPipes,Le.WebGPUPipes],name:"bitmapText"},Te.add(kA),Te.add(UA);const TA=class e extends oc{constructor(...e){super({});let t=e[0]??{};"number"==typeof t&&(ft(0,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),t={width:t,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(t)}build(t){t={...e.defaultOptions,...t},this.verticesX=this.verticesX??t.verticesX,this.verticesY=this.verticesY??t.verticesY,this.width=this.width??t.width,this.height=this.height??t.height;const i=this.verticesX*this.verticesY,r=[],n=[],o=[],s=this.verticesX-1,a=this.verticesY-1,l=this.width/s,c=this.height/a;for(let e=0;e<i;e++){const t=e%this.verticesX,i=e/this.verticesX|0;r.push(t*l,i*c),n.push(t/s,i/a)}const A=s*a;for(let e=0;e<A;e++){const t=e%s,i=e/s|0,r=i*this.verticesX+t,n=i*this.verticesX+t+1,a=(i+1)*this.verticesX+t,l=(i+1)*this.verticesX+t+1;o.push(r,n,a,n,l,a)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint32Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};TA.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let OA=TA;class FA{constructor(e){this._renderer=e}validateRenderable(e){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}updateRenderable(e){}execute(e){const t=this._renderer,i=t.canvasContext,r=i.activeContext;r.save();const n=e.groupTransform,o=t._roundPixels|e._roundPixels;i.setContextTransform(n,1===o),i.setBlendMode(e.groupBlendMode);const s=t.globalUniforms.globalUniformData?.worldColor??4294967295,a=e.groupColorAlpha,l=(s>>>24&255)/255*((a>>>24&255)/255)*(t.filter?.alphaMultiplier??1);if(l<=0)return void r.restore();r.globalAlpha=l;const c=ki(Qi(16777215&a,16777215&s)),A=e.texture,u=Ac.getCanvasSource(A);if(!u)return void r.restore();const d=i.smoothProperty,h="nearest"!==A.source.style.scaleMode;r[d]!==h&&(r[d]=h);const g=16777215!==c||0!==A.rotate,f=g?Ac.getTintedCanvas({texture:A},c):u,{leftWidth:p,topHeight:m,rightWidth:x,bottomHeight:E,width:C,height:B}=e,b=p+x,I=m+E,y=Math.min(b>C?C/b:1,I>B?B/I:1,1),v=p*y,w=x*y,Q=m*y,D=E*y,N=Math.max(0,C-v-w),k=Math.max(0,B-Q-D),S=e.anchor,P=A.source._resolution??A.source.resolution??1;let M=A.frame.x*P,V=A.frame.y*P;const _=-S.x*C,L=-S.y*B,R=p*P,U=m*P,T=x*P,O=E*P;let F=A.frame.width*P,G=A.frame.height*P;g&&(M=0,V=0,F=f.width,G=f.height),r.drawImage(f,M,V,R,U,_,L,v,Q),r.drawImage(f,M+R,V,F-R-T,U,_+v,L,N,Q),r.drawImage(f,M+F-T,V,T,U,_+C-w,L,w,Q),r.drawImage(f,M,V+U,R,G-U-O,_,L+Q,v,k),r.drawImage(f,M+R,V+U,F-R-T,G-U-O,_+v,L+Q,N,k),r.drawImage(f,M+F-T,V+U,T,G-U-O,_+C-w,L+Q,w,k),r.drawImage(f,M,V+G-O,R,O,_,L+B-D,v,D),r.drawImage(f,M+R,V+G-O,F-R-T,O,_+v,L+B-D,N,D),r.drawImage(f,M+F-T,V+G-O,T,O,_+C-w,L+B-D,w,D),r.restore()}destroy(){this._renderer=null}}FA.extension={type:[Le.CanvasPipes],name:"nineSliceSprite"};const GA=class e extends OA{constructor(t={}){super({width:(t={...e.defaultOptions,...t}).width,height:t.height,verticesX:4,verticesY:4}),this.update(t)}update(e){this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=e.anchor?.x,this._anchorY=e.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:t,height:i,_leftWidth:r,_rightWidth:n,_topHeight:o,_bottomHeight:s,_anchorX:a,_anchorY:l}=this,c=r+n,A=t>c?1:t/c,u=o+s,d=i>u?1:i/u,h=Math.min(A,d),g=a*t,f=l*i;e[0]=e[8]=e[16]=e[24]=-g,e[2]=e[10]=e[18]=e[26]=r*h-g,e[4]=e[12]=e[20]=e[28]=t-n*h-g,e[6]=e[14]=e[22]=e[30]=t-g,e[1]=e[3]=e[5]=e[7]=-f,e[9]=e[11]=e[13]=e[15]=o*h-f,e[17]=e[19]=e[21]=e[23]=i-s*h-f,e[25]=e[27]=e[29]=e[31]=i-f,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const t=1/this._originalWidth,i=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};GA.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let jA=GA;class HA extends sc{constructor(){super(),this.geometry=new jA}destroy(){this.geometry.destroy()}}class XA{constructor(e){this._renderer=e,this._managedSprites=new la({renderer:e,type:"renderable",name:"nineSliceSprite"})}addRenderable(e,t){const i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){const t=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){const t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const t=e._gpuData[this._renderer.uid]=new HA,i=t;return i.renderable=e,i.transform=e.groupTransform,i.texture=e._texture,i.roundPixels=this._renderer._roundPixels|e._roundPixels,this._managedSprites.add(e),e.didViewUpdate||this._updateBatchableSprite(e,i),t}destroy(){this._managedSprites.destroy(),this._renderer=null}}XA.extension={type:[Le.WebGLPipes,Le.WebGPUPipes],name:"nineSliceSprite"},Te.add(FA),Te.add(XA);const zA=class e extends $i{constructor(t){t instanceof Dt&&(t={texture:t});const{width:i,height:r,anchor:n,leftWidth:o,rightWidth:s,topHeight:a,bottomHeight:l,texture:c,roundPixels:A,...u}=t;super({label:"NineSliceSprite",...u}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=o??c?.defaultBorders?.left??jA.defaultOptions.leftWidth,this._topHeight=a??c?.defaultBorders?.top??jA.defaultOptions.topHeight,this._rightWidth=s??c?.defaultBorders?.right??jA.defaultOptions.rightWidth,this._bottomHeight=l??c?.defaultBorders?.bottom??jA.defaultOptions.bottomHeight,this._width=i??c.width??jA.defaultOptions.width,this._height=r??c.height??jA.defaultOptions.height,this.allowChildren=!1,this.texture=c??e.defaultOptions.texture,this.roundPixels=A??!1,this._anchor=new Ge({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,t){"object"==typeof e&&(t=e.height??e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=Dt.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){super.destroy(e);if("boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}updateBounds(){const e=this._bounds,t=this._anchor,i=this._width,r=this._height;e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*r,e.maxY=e.minY+r}};zA.defaultOptions={texture:Dt.EMPTY};let JA=zA;class WA extends BA{constructor(e,t){super();const{textures:i,data:r}=e;Object.keys(r.pages).forEach(e=>{const t=r.pages[parseInt(e,10)],n=i[t.id];this.pages.push({texture:n})}),Object.keys(r.chars).forEach(e=>{const t=r.chars[e],{frame:n,source:o,rotate:s}=i[t.page],a=at.transformRectCoords(t,n,s,new ct),l=new Dt({frame:a,orig:new ct(0,0,t.width,t.height),source:o,rotate:s});this.chars[e]={id:e.codePointAt(0),xOffset:t.xOffset,yOffset:t.yOffset,xAdvance:t.xAdvance,kerning:t.kerning??{},texture:l}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){wA.install(e)}static uninstall(e){wA.uninstall(e)}}const KA=Object.freeze(Object.defineProperty({__proto__:null,BitmapFont:WA},Symbol.toStringTag,{value:"Module"}));Te.add(Oe,Fe);var YA,qA,ZA={exports:{}},$A={};var eu=(qA||(qA=1,ZA.exports=(YA||(YA=1,$A.ConcurrentRoot=1,$A.ContinuousEventPriority=8,$A.DefaultEventPriority=32,$A.DiscreteEventPriority=2,$A.IdleEventPriority=268435456,$A.LegacyRoot=0,$A.NoEventPriority=0),$A)),ZA.exports);const tu=ae.createContext({}),iu=tu.Provider;function ru(e,t){const i=Object.getPrototypeOf(e),r=Object.getOwnPropertyDescriptor(i,t);return!(void 0===r||r.writable||r.set)}tu.Consumer;const nu={currentUpdatePriority:eu.DefaultEventPriority,unmountQueue:new Set};function ou(e,...t){}function su(e,t={}){const i=e;return i.__pixireact=Object.assign({filters:[],parent:null,root:null,type:""},t),i}var au="0.0.0-development";function lu(e,t,i){t instanceof En&&(t.__pixireact.parent=e,"number"==typeof i?e.__pixireact.filters.splice(i,0,t):e.__pixireact.filters.push(t),e.filters=e.__pixireact.filters)}function cu(e,t){t&&(t instanceof Zi?e.addChild(t):t instanceof En&&lu(e,t))}const Au=Object.freeze({onclick:"onClick",onglobalmousemove:"onGlobalMouseMove",onglobalpointermove:"onGlobalPointerMove",onglobaltouchmove:"onGlobalTouchMove",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onmouseupoutside:"onMouseUpOutside",onpointercancel:"onPointerCancel",onpointerdown:"onPointerDown",onpointerenter:"onPointerEnter",onpointerleave:"onPointerLeave",onpointermove:"onPointerMove",onpointerout:"onPointerOut",onpointerover:"onPointerOver",onpointertap:"onPointerTap",onpointerup:"onPointerUp",onpointerupoutside:"onPointerUpOutside",onrightclick:"onRightClick",onrightdown:"onRightDown",onrightup:"onRightUp",onrightupoutside:"onRightUpOutside",ontap:"onTap",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchendoutside:"onTouchEndOutside",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"}),uu=Object.freeze({onClick:"onclick",onGlobalMouseMove:"onglobalmousemove",onGlobalPointerMove:"onglobalpointermove",onGlobalTouchMove:"onglobaltouchmove",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseUpOutside:"onmouseupoutside",onPointerCancel:"onpointercancel",onPointerDown:"onpointerdown",onPointerEnter:"onpointerenter",onPointerLeave:"onpointerleave",onPointerMove:"onpointermove",onPointerOut:"onpointerout",onPointerOver:"onpointerover",onPointerTap:"onpointertap",onPointerUp:"onpointerup",onPointerUpOutside:"onpointerupoutside",onRightClick:"onrightclick",onRightDown:"onrightdown",onRightUp:"onrightup",onRightUpOutside:"onrightupoutside",onTap:"ontap",onTouchCancel:"ontouchcancel",onTouchEnd:"ontouchend",onTouchEndOutside:"ontouchendoutside",onTouchMove:"ontouchmove",onTouchStart:"ontouchstart",onWheel:"onwheel"});function du(e){return Array.isArray(e)}function hu(e,t,i={arrays:"reference",objects:"reference",strict:!0}){const{arrays:r,objects:n,strict:o}=i;if(typeof e!=typeof t||!!e!=!!t)return!1;if(function(e){return"string"==typeof e}(e)||function(e){return"number"==typeof e}(e))return e===t;const s=function(e){if(e!==Object(e))return!1;if(du(e))return!1;if("function"==typeof e)return!1;return!0}(e);if(s&&"reference"===n)return e===t;const a=du(e);if(a&&"reference"===r)return e===t;if((a||s)&&e===t)return!0;let l;for(l in e)if(!(l in t))return!1;let c=e;if(o&&(c=t),s&&"shallow"===r&&"shallow"===n)for(l in c){if(!hu(e[l],t[l],{strict:o,objects:"reference"}))return!1}else for(l in c)if(e[l]!==t[l])return!1;if(gu(l)){if(a&&0===e.length&&0===t.length)return!0;if(s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}function gu(e){return void 0===e}const fu=Object.freeze(["children","key","ref"]);function pu(e,t=[]){return function(e,t=[]){return Object.entries(e).reduce((e,[i,r])=>(t.includes(i)||(e[i]=r),e),{})}(e,fu.concat(t))}function mu(e,t={},i=!1){const r=pu(e),n=pu(t),o=Object.entries(r),s=[];if(i){const e=Object.keys(n);let t=0;for(;t<e.length;){const i=e[t];!(i in r)&&o.unshift([i,"__defaultremove"]),t+=1}}return o.forEach(([e,t])=>{if(hu(t,n[e]))return;if(e in uu)return void s.push([e,t,!0,[]]);let i=[];e.includes("-")&&(i=e.split("-")),s.push([e,t,!1,i]);for(const n in r){const t=r[n];n.startsWith(`${e}-`)&&s.push([n,t,!1,n.split("-")])}}),{changes:s}}const xu=new Map,Eu={};function Cu(e,t){if(e){const i=e[t];if(!gu(i)&&null!==i)return i}return e}function Bu(e,t){const{__pixireact:i={},...r}=e;let n;var o;n=(o=t)&&o.changes?t:mu(t,r);const{changes:s}=n;let a=0;for(;a<s.length;){const t=s[a];let r=!1,n=t[0],o=t[1];const l=t[2],c=t[3];let A=e,u=A[n];if("draw"===n&&"function"==typeof o&&(e instanceof ic?o(e):(r=!0,ou(0,i.type))),n in Au){const e=n;r=!0,Eu[n]||(Eu[n]=!0,ou(0,Au[e]))}if(!r){if(c.length&&(u=c.reduce(Cu,A),!u||!u.set)){const[e,...t]=c.reverse();A=t.reverse().reduce(Cu,A),n=e}if("__defaultremove"===o)if(A instanceof Zi){let e=xu.get(A.constructor);e||(e=A.constructor,e=new e,xu.set(A.constructor,e)),o=e[n]}else o=0;if(l&&i){const e=uu[n];o?A[e]=o:delete A[e]}else ru(A,n)||(A[n]=o)}a+=1}return e}const bu=Object.freeze([...Object.keys(Au),"draw"]),Iu={};function yu(e,t){return t.toLowerCase()}var vu,wu,Qu,Du,Nu={exports:{}},ku={exports:{}},Su={exports:{}},Pu={};function Mu(){return wu||(wu=1,Su.exports=(vu||(vu=1,e=Pu,function(){function t(){if(v){var t=e.unstable_now();D=t;var i=!0;try{e:{C=!1,B&&(B=!1,I(w),w=-1),E=!0;var o=x;try{t:{for(s(t),m=r(g);null!==m&&!(m.expirationTime>t&&l());){var c=m.callback;if("function"==typeof c){m.callback=null,x=m.priorityLevel;var u=c(m.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof u){m.callback=u,s(t),i=!0;break t}m===r(g)&&n(g),s(t)}else n(g);m=r(g)}if(null!==m)i=!0;else{var d=r(f);null!==d&&A(a,d.startTime-t),i=!1}}break e}finally{m=null,x=o,E=!1}i=void 0}}finally{i?N():v=!1}}}function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var r=i-1>>>1,n=e[r];if(!(0<o(n,t)))break e;e[r]=t,e[i]=n,i=r}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var r=0,n=e.length,s=n>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,A=e[c];if(0>o(l,i))c<n&&0>o(A,l)?(e[r]=A,e[c]=i,r=c):(e[r]=l,e[a]=i,r=a);else{if(!(c<n&&0>o(A,i)))break e;e[r]=A,e[c]=i,r=c}}}return t}function o(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}function s(e){for(var t=r(f);null!==t;){if(null===t.callback)n(f);else{if(!(t.startTime<=e))break;n(f),t.sortIndex=t.expirationTime,i(g,t)}t=r(f)}}function a(e){if(B=!1,s(e),!C)if(null!==r(g))C=!0,c();else{var t=r(f);null!==t&&A(a,t.startTime-e)}}function l(){return!(e.unstable_now()-D<Q)}function c(){v||(v=!0,N())}function A(t,i){w=b(function(){t(e.unstable_now())},i)}if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error()),e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var g=[],f=[],p=1,m=null,x=3,E=!1,C=!1,B=!1,b="function"==typeof setTimeout?setTimeout:null,I="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null,v=!1,w=-1,Q=5,D=-1;if("function"==typeof y)var N=function(){y(t)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,S=k.port2;k.port1.onmessage=t,N=function(){S.postMessage(null)}}else N=function(){b(t,0)};e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){C||E||(C=!0,c())},e.unstable_forceFrameRate=function(e){0>e||125<e||(Q=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(g)},e.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var i=x;x=t;try{return e()}finally{x=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=x;x=e;try{return t()}finally{x=i}},e.unstable_scheduleCallback=function(t,n,o){var s=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:p++,callback:n,priorityLevel:t,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>s?(t.sortIndex=o,i(f,t),null===r(g)&&t===r(f)&&(B?(I(w),w=-1):B=!0,A(a,o-s))):(t.sortIndex=l,i(g,t),C||E||(C=!0,c())),t},e.unstable_shouldYield=l,e.unstable_wrapCallback=function(e){var t=x;return function(){var i=x;x=t;try{return e.apply(this,arguments)}finally{x=i}}},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()),Pu)),Su.exports;var e}function Vu(){return Qu||(Qu=1,(e=ku).exports=function(e){function t(e,t){for(e=e.memoizedState;null!==e&&0<t;)e=e.next,t--;return e}function i(e,t,r,n){if(r>=t.length)return n;var o=t[r],s=ka(e)?e.slice():ra({},e);return s[o]=i(e[o],t,r+1,n),s}function r(e,t,i){if(t.length===i.length){for(var r=0;r<i.length-1;r++)if(t[r]!==i[r])return;return n(e,t,i,0)}}function n(e,t,i,r){var o=t[r],s=ka(e)?e.slice():ra({},e);return r+1===t.length?(s[i[r]]=s[o],ka(s)?s.splice(o,1):delete s[o]):s[o]=n(e[o],t,i,r+1),s}function o(e,t,i){var r=t[i],n=ka(e)?e.slice():ra({},e);return i+1===t.length?(ka(n)?n.splice(r,1):delete n[r],n):(n[r]=o(e[r],t,i+1),n)}function s(){return!1}function a(){return null}function l(e,t,i,r){return new Qs(e,t,i,r)}function c(e,t){e.context===Fc&&(Fs(t,e,null,null),jo())}function A(e,t){if(null!==rf){var i=t.staleFamilies;t=t.updatedFamilies,cs(),ws(e.current,t,i),jo()}}function u(e){rf=e}function d(){}function h(){}function g(e){var t=[];return e.forEach(function(e){t.push(e)}),t.sort().join(", ")}function f(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ca&&e[Ca]||e["@@iterator"])?e:null}function p(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===Ba?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case aa:return"Fragment";case sa:return"Portal";case ca:return"Profiler";case la:return"StrictMode";case ga:return"Suspense";case fa:return"SuspenseList"}if("object"==typeof e)switch(e.tag,e.$$typeof){case da:return(e.displayName||"Context")+".Provider";case ua:return(e._context.displayName||"Context")+".Consumer";case ha:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case pa:return null!==(t=e.displayName||null)?t:p(e.type)||"Memo";case ma:t=e._payload,e=e._init;try{return p(e(t))}catch(i){}}return null}function m(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t._context.displayName||"Context")+".Consumer";case 10:return(t.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 26:case 27:case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return p(t);case 8:return t===la?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;break;case 29:if(null!=(t=e._debugInfo))for(var i=t.length-1;0<=i;i--)if("string"==typeof t[i].name)return t[i].name;if(null!==e.return)return m(e.return)}return null}function x(){}function E(e){if(void 0===ya)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ya=t&&t[1]||"",va=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+ya+e+va}function C(e,t){if(!e||wa)return"";var i,r=Qa.get(e);if(void 0!==r)return r;wa=!0,r=Error.prepareStackTrace,Error.prepareStackTrace=void 0,i=ba.H,ba.H=null,function(){if(0===Ia){Js=console.log,Ws=console.info,Ks=console.warn,Ys=console.error,qs=console.group,Zs=console.groupCollapsed,$s=console.groupEnd;var e={configurable:!0,enumerable:!0,value:x,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Ia++}();try{var n={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(n){var r=n}Reflect.construct(e,[],i)}else{try{i.call()}catch(o){r=o}e.call(i.prototype)}}else{try{throw Error()}catch(s){r=s}(i=e())&&"function"==typeof i.catch&&i.catch(function(){})}}catch(a){if(a&&r&&"string"==typeof a.stack)return[a.stack,r.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var c=a.split("\n"),A=l.split("\n");for(s=o=0;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;for(;s<A.length&&!A[s].includes("DetermineComponentFrameRoot");)s++;if(o===c.length||s===A.length)for(o=c.length-1,s=A.length-1;1<=o&&0<=s&&c[o]!==A[s];)s--;for(;1<=o&&0<=s;o--,s--)if(c[o]!==A[s]){if(1!==o||1!==s)do{if(o--,0>--s||c[o]!==A[s]){var u="\n"+c[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),"function"==typeof e&&Qa.set(e,u),u}}while(1<=o&&0<=s);break}}}finally{wa=!1,ba.H=i,function(){if(0===--Ia){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ra({},e,{value:Js}),info:ra({},e,{value:Ws}),warn:ra({},e,{value:Ks}),error:ra({},e,{value:Ys}),group:ra({},e,{value:qs}),groupCollapsed:ra({},e,{value:Zs}),groupEnd:ra({},e,{value:$s})})}}(),Error.prepareStackTrace=r}return c=(c=e?e.displayName||e.name:"")?E(c):"","function"==typeof e&&Qa.set(e,c),c}function B(e){switch(e.tag){case 26:case 27:case 5:return E(e.type);case 16:return E("Lazy");case 13:return E("Suspense");case 19:return E("SuspenseList");case 0:case 15:return e=C(e.type,!1);case 11:return e=C(e.type.render,!1);case 1:return e=C(e.type,!0);default:return""}}function b(e){try{var t="";do{t+=B(e);var i=e._debugInfo;if(i)for(var r=i.length-1;0<=r;r--){var n=i[r];if("string"==typeof n.name){var o=t,s=n.env;t=o+E(n.name+(s?" ["+s+"]":""))}}e=e.return}while(e);return t}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}function I(){return null===Da?"":b(Da)}function y(e,t,i,r,n,o,s){var a=Da;ba.getCurrentStack=null===e?null:I,Na=!1,Da=e;try{return t(i,r,n,o,s)}finally{Da=a}throw Error("runWithFiberInDEV should never be called in production. This is a bug in React.")}function v(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function w(e){if(v(e)!==e)throw Error("Unable to find node on an unmounted component.")}function Q(e){var t=e.alternate;if(!t){if(null===(t=v(e)))throw Error("Unable to find node on an unmounted component.");return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(null===n)break;var o=n.alternate;if(null===o){if(null!==(r=n.return)){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return w(n),e;if(o===r)return w(n),t;o=o.sibling}throw Error("Unable to find node on an unmounted component.")}if(i.return!==r.return)i=n,r=o;else{for(var s=!1,a=n.child;a;){if(a===i){s=!0,i=n,r=o;break}if(a===r){s=!0,r=n,i=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===i){s=!0,i=o,r=n;break}if(a===r){s=!0,r=o,i=n;break}a=a.sibling}if(!s)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(i.alternate!==r)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(3!==i.tag)throw Error("Unable to find node on an unmounted component.");return i.stateNode.current===i?e:t}function D(e){return null!==(e=Q(e))?N(e):null}function N(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=N(e)))return t;e=e.sibling}return null}function k(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=k(e)))return t;e=e.sibling}return null}function S(e){return{current:e}}function P(e,t){0>Oc||(Tc[Oc],e.current=Uc[Oc],Uc[Oc]=null,Tc[Oc]=null,Oc--)}function M(e,t,i){Oc++,Uc[Oc]=e.current,Tc[Oc]=i,e.current=t}function V(e){return 1&e?"SyncHydrationLane":2&e?"Sync":4&e?"InputContinuousHydration":8&e?"InputContinuous":16&e?"DefaultHydration":32&e?"Default":64&e?"TransitionHydration":4194176&e?"Transition":62914560&e?"Retry":67108864&e?"SelectiveHydration":134217728&e?"IdleHydration":268435456&e?"Idle":536870912&e?"Offscreen":1073741824&e?"Deferred":void 0}function _(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function L(e,t){var i=e.pendingLanes;if(0===i)return 0;var r=0,n=e.suspendedLanes,o=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&i;return 0!==a?0!==(i=a&~n)?r=_(i):0!==(o&=a)?r=_(o):e||0!==(s=a&~s)&&(r=_(s)):0!==(a=i&~n)?r=_(a):0!==o?r=_(o):e||0!==(s=i&~s)&&(r=_(s)),0===r?0:0!==t&&t!==r&&0===(t&n)&&((n=r&-r)>=(s=t&-t)||32===n&&4194176&s)?t:r}function R(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function U(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function T(){var e=Xc;return!(4194176&(Xc<<=1))&&(Xc=128),e}function O(){var e=zc;return!(62914560&(zc<<=1))&&(zc=4194304),e}function F(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function G(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function j(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Gc(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&i}function H(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Gc(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}function X(e,t,i){if(lA)for(e=e.pendingUpdatersLaneMap;0<i;){var r=31-Gc(i),n=1<<r;e[r].add(t),i&=~n}}function z(e,t){if(lA)for(var i=e.pendingUpdatersLaneMap,r=e.memoizedUpdaters;0<t;){var n=31-Gc(t);e=1<<n,0<(n=i[n]).size&&(n.forEach(function(e){var t=e.alternate;null!==t&&r.has(t)||r.add(e)}),n.clear()),t&=~e}}function J(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function W(e){if("function"==typeof iA&&rA(e),oA&&"function"==typeof oA.setStrictMode)try{oA.setStrictMode(nA,e)}catch(t){aA||(aA=!0)}}function K(e){sA=e}function Y(){null!==sA&&"function"==typeof sA.markCommitStopped&&sA.markCommitStopped()}function q(e){null!==sA&&"function"==typeof sA.markComponentRenderStarted&&sA.markComponentRenderStarted(e)}function Z(){null!==sA&&"function"==typeof sA.markComponentRenderStopped&&sA.markComponentRenderStopped()}function $(e){null!==sA&&"function"==typeof sA.markRenderStarted&&sA.markRenderStarted(e)}function ee(){null!==sA&&"function"==typeof sA.markRenderStopped&&sA.markRenderStopped()}function te(e,t){null!==sA&&"function"==typeof sA.markStateUpdateScheduled&&sA.markStateUpdateScheduled(e,t)}function ie(e,t){if("object"==typeof e&&null!==e){var i=AA.get(e);return void 0!==i?i:(t={value:e,source:t,stack:b(t)},AA.set(e,t),t)}return{value:e,source:t,stack:b(t)}}function re(e,t){uA[dA++]=gA,uA[dA++]=hA,hA=e,gA=t}function ne(e,t,i){fA[pA++]=xA,fA[pA++]=EA,fA[pA++]=mA,mA=e;var r=xA;e=EA;var n=32-Gc(r)-1;r&=~(1<<n),i+=1;var o=32-Gc(t)+n;if(30<o){var s=n-n%5;o=(r&(1<<s)-1).toString(32),r>>=s,n-=s,xA=1<<32-Gc(t)+n|i<<n|r,EA=o+e}else xA=1<<o|i<<n|r,EA=e}function oe(e){null!==e.return&&(re(e,1),ne(e,1,0))}function se(e){for(;e===hA;)hA=uA[--dA],uA[dA]=null,gA=uA[--dA],uA[dA]=null;for(;e===mA;)mA=fA[--pA],fA[pA]=null,EA=fA[--pA],fA[pA]=null,xA=fA[--pA],fA[pA]=null}function ae(e,t){M(bA,t,e),M(BA,e,e),M(CA,null,e),t=_a(t),P(CA),M(CA,t,e)}function le(e){P(CA),P(BA),P(bA)}function ce(){return CA.current}function Ae(e){null!==e.memoizedState&&M(IA,e,e);var t=CA.current,i=La(t,e.type);t!==i&&(M(BA,e,e),M(CA,i,e))}function ue(e){BA.current===e&&(P(CA),P(BA)),IA.current===e&&(P(IA),Ja?Al._currentValue=cl:Al._currentValue2=cl)}function de(e,t){return void 0===e.serverProps&&0===e.serverTail.length&&1===e.children.length&&3<e.distanceFromLeaf&&e.distanceFromLeaf>15-t?de(e.children[0],t):e}function he(e){return"  "+"  ".repeat(e)}function fe(e){return"+ "+"  ".repeat(e)}function pe(e){return"- "+"  ".repeat(e)}function me(e){switch(e.tag){case 26:case 27:case 5:return e.type;case 16:return"Lazy";case 13:return"Suspense";case 19:return"SuspenseList";case 0:case 15:case 1:return(e=e.type).displayName||e.name||null;case 11:return(e=e.type.render).displayName||e.name||null;default:return null}}function xe(e,t){return yA.test(e)?(e=JSON.stringify(e)).length>t-2?8>t?'{"..."}':"{"+e.slice(0,t-7)+'..."}':"{"+e+"}":e.length>t?5>t?'{"..."}':e.slice(0,t-3)+"...":e}function Ee(e,t,i){var r=120-2*i;if(null===t)return fe(i)+xe(e,r)+"\n";if("string"==typeof t){for(var n=0;n<t.length&&n<e.length&&t.charCodeAt(n)===e.charCodeAt(n);n++);return n>r-8&&10<n&&(e="..."+e.slice(n-8),t="..."+t.slice(n-8)),fe(i)+xe(e,r)+"\n"+pe(i)+xe(t,r)+"\n"}return he(i)+xe(e,r)+"\n"}function Ce(e){return Object.prototype.toString.call(e).replace(/^\[object (.*)\]$/,function(e,t){return t})}function Be(e,t){switch(typeof e){case"string":return(e=JSON.stringify(e)).length>t?5>t?'"..."':e.slice(0,t-4)+'..."':e;case"object":if(null===e)return"null";if(ka(e))return"[...]";if(e.$$typeof===oa)return(t=p(e.type))?"<"+t+">":"<...>";var i=Ce(e);if("Object"===i){for(var r in i="",t-=2,e)if(e.hasOwnProperty(r)){var n=JSON.stringify(r);if(n!=='"'+r+'"'&&(r=n),t-=r.length-2,0>(t-=(n=Be(e[r],15>t?t:15)).length)){i+=""===i?"...":", ...";break}i+=(""===i?"":",")+r+":"+n}return"{"+i+"}"}return i;case"function":return(t=e.displayName||e.name)?"function "+t:"function";default:return String(e)}}function be(e,t){return"string"!=typeof e||yA.test(e)?"{"+Be(e,t-2)+"}":e.length>t-2?5>t?'"..."':'"'+e.slice(0,t-5)+'..."':'"'+e+'"'}function Ie(e,t,i){var r,n=120-i.length-e.length,o=[];for(r in t)if(t.hasOwnProperty(r)&&"children"!==r){var s=be(t[r],120-i.length-r.length-1);n-=r.length+s.length+2,o.push(r+"="+s)}return 0===o.length?i+"<"+e+">\n":0<n?i+"<"+e+" "+o.join(" ")+">\n":i+"<"+e+"\n"+i+"  "+o.join("\n"+i+"  ")+"\n"+i+">\n"}function ye(e,t,i){var r,n="",o=ra({},t);for(r in e)if(e.hasOwnProperty(r)){delete o[r];var s=120-2*i-r.length-2,a=Be(e[r],s);t.hasOwnProperty(r)?(s=Be(t[r],s),n+=fe(i)+r+": "+a+"\n",n+=pe(i)+r+": "+s+"\n"):n+=fe(i)+r+": "+a+"\n"}for(var l in o)o.hasOwnProperty(l)&&(e=Be(o[l],120-2*i-l.length-2),n+=pe(i)+l+": "+e+"\n");return n}function ve(e,t){var i=me(e);if(null===i){for(i="",e=e.child;e;)i+=ve(e,t),e=e.sibling;return i}return he(t)+"<"+i+">\n"}function we(e,t){var i=de(e,t);if(i!==e&&(1!==e.children.length||e.children[0]!==i))return he(t)+"...\n"+we(i,t+1);i="";var r=e.fiber._debugInfo;if(r)for(var n=0;n<r.length;n++){var o=r[n].name;"string"==typeof o&&(i+=he(t)+"<"+o+">\n",t++)}if(r="",n=e.fiber.pendingProps,6===e.fiber.tag)r=Ee(n,e.serverProps,t),t++;else if(null!==(o=me(e.fiber)))if(void 0===e.serverProps){var s=120-2*(r=t)-o.length-2,a="";for(c in n)if(n.hasOwnProperty(c)&&"children"!==c){var l=be(n[c],15);if(0>(s-=c.length+l.length+2)){a+=" ...";break}a+=" "+c+"="+l}r=he(r)+"<"+o+a+">\n",t++}else null===e.serverProps?(r=Ie(o,n,fe(t)),t++):"string"==typeof e.serverProps||(r=function(e,t,i,r){var n="",o=new Map;for(c in i)i.hasOwnProperty(c)&&o.set(c.toLowerCase(),c);if(1===o.size&&o.has("children"))n+=Ie(e,t,he(r));else{for(var s in t)if(t.hasOwnProperty(s)&&"children"!==s){var a=120-2*(r+1)-s.length-1,l=o.get(s.toLowerCase());if(void 0!==l){o.delete(s.toLowerCase());var c=t[s];l=i[l];var A=be(c,a);a=be(l,a),"object"==typeof c&&null!==c&&"object"==typeof l&&null!==l&&"Object"===Ce(c)&&"Object"===Ce(l)&&(2<Object.keys(c).length||2<Object.keys(l).length||-1<A.indexOf("...")||-1<a.indexOf("..."))?n+=he(r+1)+s+"={{\n"+ye(c,l,r+2)+he(r+1)+"}}\n":(n+=fe(r+1)+s+"="+A+"\n",n+=pe(r+1)+s+"="+a+"\n")}else n+=he(r+1)+s+"="+be(t[s],a)+"\n"}o.forEach(function(e){if("children"!==e){var t=120-2*(r+1)-e.length-1;n+=pe(r+1)+e+"="+be(i[e],t)+"\n"}}),n=""===n?he(r)+"<"+e+">\n":he(r)+"<"+e+"\n"+n+he(r)+">\n"}return e=i.children,t=t.children,"string"==typeof e||"number"==typeof e||"bigint"==typeof e?(o="","string"!=typeof t&&"number"!=typeof t&&"bigint"!=typeof t||(o=""+t),n+=Ee(o,""+e,r+1)):"string"!=typeof t&&"number"!=typeof t&&"bigint"!=typeof t||(n=null==e?n+Ee(""+t,null,r+1):n+Ee(""+t,void 0,r+1)),n}(o,n,e.serverProps,t),t++);var c="";for(n=e.fiber.child,o=0;n&&o<e.children.length;)(s=e.children[o]).fiber===n?(c+=we(s,t),o++):c+=ve(n,t),n=n.sibling;for(n&&0<e.children.length&&(c+=he(t)+"...\n"),n=e.serverTail,null===e.serverProps&&t--,e=0;e<n.length;e++)c="string"==typeof(o=n[e])?c+(pe(t)+xe(o,120-2*t)+"\n"):c+Ie(o.type,o.props,pe(t));return i+r+c}function Qe(e){try{return"\n\n"+we(e,0)}catch(t){return""}}function De(e,t){if(null===e.return){if(null===NA)NA={fiber:e,children:[],serverProps:void 0,serverTail:[],distanceFromLeaf:t};else{if(NA.fiber!==e)throw Error("Saw multiple hydration diff roots in a pass. This is a bug in React.");NA.distanceFromLeaf>t&&(NA.distanceFromLeaf=t)}return NA}var i=De(e.return,t+1).children;return 0<i.length&&i[i.length-1].fiber===e?((i=i[i.length-1]).distanceFromLeaf>t&&(i.distanceFromLeaf=t),i):(t={fiber:e,children:[],serverProps:void 0,serverTail:[],distanceFromLeaf:t},i.push(t),t)}function Ne(e,t){DA||((e=De(e,0)).serverProps=null,null!==t&&(t=fc(t),e.serverTail.push(t)))}function ke(e){var t="",i=NA;throw null!==i&&(NA=null,t=Qe(i)),_e(ie(Error("Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\n\n- A server/client branch `if (typeof window !== 'undefined')`.\n- Variable input such as `Date.now()` or `Math.random()` which changes each time it's called.\n- Date formatting in a user's locale which doesn't match the server.\n- External changing data without sending a snapshot of it along with the HTML.\n- Invalid HTML tag nesting.\n\nIt can also happen if the client has a browser extension installed which messes with the HTML before React loaded.\n\nhttps://react.dev/link/hydration-mismatch"+t),e)),PA}function Se(e,t){if(!Ya)throw Error("Expected prepareToHydrateHostInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.");nc(e.stateNode,e.type,e.memoizedProps,t,e)||ke(e)}function Pe(e){for(vA=e.return;vA;)switch(vA.tag){case 3:case 27:return void(SA=!0);case 5:case 13:return void(SA=!1);default:vA=vA.return}}function Me(e){if(!Ya||e!==vA)return!1;if(!QA)return Pe(e),QA=!0,!1;var t=!1;if(Pc?3!==e.tag&&27!==e.tag&&(5!==e.tag||dc(e.type)&&!Ga(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||dc(e.type)&&!Ga(e.type,e.memoizedProps))&&(t=!0),t&&wA){for(t=wA;t;){var i=De(e,0),r=fc(t);i.serverTail.push(r),t="Suspense"===r.type?ac(t):ql(t)}ke(e)}if(Pe(e),13===e.tag){if(!Ya)throw Error("Expected skipPastDehydratedSuspenseInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.");if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");wA=ac(e)}else wA=vA?ql(e.stateNode):null;return!0}function Ve(){Ya&&(wA=vA=null,DA=QA=!1)}function _e(e){null===kA?kA=[e]:kA.push(e)}function Le(){var e=NA;null!==e&&(NA=null,e=Qe(e))}function Re(){for(var e=_A,t=LA=_A=0;t<e;){var i=VA[t];VA[t++]=null;var r=VA[t];VA[t++]=null;var n=VA[t];VA[t++]=null;var o=VA[t];if(VA[t++]=null,null!==r&&null!==n){var s=r.pending;null===s?n.next=n:(n.next=s.next,s.next=n),r.pending=n}0!==o&&Fe(i,n,o)}}function Ue(e,t,i,r){VA[_A++]=e,VA[_A++]=t,VA[_A++]=i,VA[_A++]=r,LA|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Te(e,t,i,r){return Ue(e,t,i,r),Ge(e)}function Oe(e,t){return Ue(e,null,null,t),Ge(e)}function Fe(e,t,i){e.lanes|=i;var r=e.alternate;null!==r&&(r.lanes|=i);for(var n=!1,o=e.return;null!==o;)o.childLanes|=i,null!==(r=o.alternate)&&(r.childLanes|=i),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(n=!0)),e=o,o=o.return;n&&null!==t&&3===e.tag&&(o=e.stateNode,n=31-Gc(i),null===(e=(o=o.hiddenUpdates)[n])?o[n]=[t]:e.push(t),t.lane=536870912|i)}function Ge(e){if(jg>Gg)throw Wg=jg=0,Kg=Hg=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Wg>Jg&&(Wg=0,Kg=null),null===e.alternate&&4098&e.flags&&Cs(e);for(var t=e,i=t.return;null!==i;)null===t.alternate&&!!(4098&t.flags)&&Cs(e),i=(t=i).return;return 3===t.tag?t.stateNode:null}function je(){var e=OA;return OA=0,e}function He(e){var t=OA;return OA=e,t}function Xe(e){var t=OA;return OA+=e,t}function ze(e){TA=RA(),0>e.actualStartTime&&(e.actualStartTime=TA)}function Je(e){if(0<=TA){var t=RA()-TA;e.actualDuration+=t,e.selfBaseDuration=t,TA=-1}}function We(e){if(0<=TA){var t=RA()-TA;e.actualDuration+=t,TA=-1}}function Ke(){if(0<=TA){var e=RA()-TA;TA=-1,OA+=e}}function Ye(){TA=RA()}function qe(e){for(var t=e.child;t;)e.actualDuration+=t.actualDuration,t=t.sibling}function Ze(e){e!==HA&&null===e.next&&(null===HA?jA=HA=e:HA=HA.next=e),JA=!0,null!==ba.actQueue?zA||(zA=!0,ot(et)):XA||(XA=!0,ot(et))}function $e(e,t){if(!WA&&JA){WA=!0;do{for(var i=!1,r=jA;null!==r;){if(0!==e){var n=r.pendingLanes;if(0===n)var o=0;else{var s=r.suspendedLanes,a=r.pingedLanes;o=(1<<31-Gc(42|e)+1)-1,o=201326677&(o&=n&~(s&~a))?201326677&o|1:o?2|o:0}0!==o&&(i=!0,rt(r,o))}else o=sg,!(3&(o=L(r,r===ng?o:0)))||R(r,o)||(i=!0,rt(r,o));r=r.next}}while(i);WA=!1}}function et(){JA=zA=XA=!1;var e=0;0!==KA&&(il()&&(e=KA),KA=0);for(var t=qc(),i=null,r=jA;null!==r;){var n=r.next,o=tt(r,t);0===o?(r.next=null,null===i?jA=n:i.next=n,null===n&&(HA=i)):(i=r,(0!==e||3&o)&&(JA=!0)),r=n}$e(e)}function tt(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-Gc(o),a=1<<s,l=n[s];-1===l?0!==(a&i)&&0===(a&r)||(n[s]=U(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(i=sg,i=L(e,e===(t=ng)?i:0),r=e.callbackNode,0===i||e===t&&pg===cg||null!==e.cancelPendingCommit)return null!==r&&nt(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&i)||R(e,i)){if((t=i&-i)===e.callbackPriority&&(null===ba.actQueue||r===YA))return t;switch(nt(r),J(i)){case 2:case 8:i=$c;break;case 32:default:i=eA;break;case 268435456:i=tA}return r=it.bind(null,e),null!==ba.actQueue?(ba.actQueue.push(r),i=YA):i=Jc(i,r),e.callbackPriority=t,e.callbackNode=i,t}return null!==r&&nt(r),e.callbackPriority=2,e.callbackNode=null,2}function it(e,t){GA=FA=!1;var i=e.callbackNode;if(cs()&&e.callbackNode!==i)return null;var r=sg;return 0===(r=L(e,e===ng?r:0))?null:(Uo(e,r,t),tt(e,qc()),null!=e.callbackNode&&e.callbackNode===i?it.bind(null,e):null)}function rt(e,t){if(cs())return null;FA=GA,GA=!1,Uo(e,t,!0)}function nt(e){e!==YA&&null!==e&&Wc(e)}function ot(e){null!==ba.actQueue&&ba.actQueue.push(function(){return e(),null}),hl?gl(function(){(rg&(Wh|Kh))!==Jh?Jc(Zc,e):e()}):Jc(Zc,e)}function st(){return 0===KA&&(KA=T()),KA}function at(){if(0===--ZA&&null!==qA){null!==eu&&(eu.status="fulfilled");var e=qA;qA=null,$A=0,eu=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function lt(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ct(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function At(e){return{lane:e,tag:tu,payload:null,callback:null,next:null}}function ut(e,t,i){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,au===r&&!su){var n=m(e);su=!0}return(rg&Wh)!==Jh?(null===(n=r.pending)?t.next=t:(t.next=n.next,n.next=t),r.pending=t,t=Ge(e),Fe(e,null,i),t):(Ue(e,r,t,i),Ge(e))}function dt(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,4194176&i)){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,H(e,i)}}function ht(e,t){var i=e.updateQueue,r=e.alternate;if(null!==r&&i===(r=r.updateQueue)){var n=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var s={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===o?n=o=s:o=o.next=s,i=i.next}while(null!==i);null===o?n=o=t:o=o.next=t}else n=o=t;return i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function gt(){if(lu&&null!==eu)throw eu}function ft(e,t,i,r){lu=!1;var n=e.updateQueue;ou=!1,au=n.shared;var o=n.firstBaseUpdate,s=n.lastBaseUpdate,a=n.shared.pending;if(null!==a){n.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var A=e.alternate;null!==A&&(a=(A=A.updateQueue).lastBaseUpdate)!==s&&(null===a?A.firstBaseUpdate=c:a.next=c,A.lastBaseUpdate=l)}if(null!==o){var u=n.baseState;for(s=0,A=c=l=null,a=o;;){var d=-536870913&a.lane,h=d!==a.lane;if(h?(sg&d)===d:(r&d)===d){0!==d&&d===$A&&(lu=!0),null!==A&&(A=A.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{d=e;var g=a,f=t,p=i;switch(g.tag){case iu:if("function"==typeof(g=g.payload)){var m=g.call(p,u,f);if(8&d.mode){W(!0);try{g.call(p,u,f)}finally{W(!1)}}u=m;break e}u=g;break e;case nu:d.flags=-65537&d.flags|128;case tu:if("function"==typeof(m=g.payload)){if(g=m.call(p,u,f),8&d.mode){W(!0);try{m.call(p,u,f)}finally{W(!1)}}}else g=m;if(null==g)break e;u=ra({},u,g);break e;case ru:ou=!0}}null!==(d=a.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=n.callbacks)?n.callbacks=[d]:h.push(d))}else h={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===A?(c=A=h,l=u):A=A.next=h,s|=d;if(null===(a=a.next)){if(null===(a=n.shared.pending))break;a=(h=a).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}null===A&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=A,null===o&&(n.shared.lanes=0),Ig|=s,e.lanes=s,e.memoizedState=u}au=null}function pt(e,t){if("function"!=typeof e)throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+e);e.call(t)}function mt(e,t){var i=e.shared.hiddenCallbacks;if(null!==i)for(e.shared.hiddenCallbacks=null,e=0;e<i.length;e++)pt(i[e],t)}function xt(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)pt(i[e],t)}function Et(e,t){if(cA(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!cu.call(t,n)||!cA(e[n],t[n]))return!1}return!0}function Ct(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Bt(){}function bt(e,t,i){null!==ba.actQueue&&(ba.didUsePromise=!0);var r=e.thenables;switch(void 0===(i=r[i])?r.push(t):i!==t&&(e.didWarnAboutUncachedPromise||(e.didWarnAboutUncachedPromise=!0),t.then(Bt,Bt),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw yt(e=t.reason),e;default:if("string"==typeof t.status)t.then(Bt,Bt);else{if(null!==(e=ng)&&100<e.shellSuspendCounter)throw Error("async/await is not yet supported in Client Components, only Server Components. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.");(e=t).status="pending",e.then(function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}},function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw yt(e=t.reason),e}throw yu=t,vu=!0,Bu}}function It(){if(null===yu)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var e=yu;return yu=null,vu=!1,e}function yt(e){if(e===Bu)throw Error("Hooks are not supported inside an async component. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.")}function vt(e){var t=Ju;return null!=e&&(Ju=null===t?e:t.concat(e)),t}function wt(e,t,i){for(var r=Object.keys(e.props),n=0;n<r.length;n++){var o=r[n];if("children"!==o&&"key"!==o){null===t&&((t=Ps(e,i.mode,0))._debugInfo=Ju,t.return=i),y(t,function(e){},o);break}}}function Qt(e){var t=zu;return zu+=1,null===Xu&&(Xu={didWarnAboutUncachedPromise:!1,thenables:[]}),bt(Xu,e,t)}function Dt(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Nt(e,t){if(t.$$typeof===na)throw Error('A React Element from an older version of React was rendered. This is not supported. It can happen if:\n- Multiple copies of the "react" package is used.\n- A library pre-bundled an old copy of "react" or "react/jsx-runtime".\n- A compiler tries to "inline" JSX instead of using the runtime.');throw e=Object.prototype.toString.call(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}function kt(e,t){var i=m(e)||"Component";Ku[i]||(Ku[i]=!0,t=t.displayName||t.name||"Component",e.tag)}function St(e,t){var i=m(e)||"Component";Yu[i]||(Yu[i]=!0,t=String(t),e.tag)}function Pt(e){function t(t,i){if(e){var r=t.deletions;null===r?(t.deletions=[i],t.flags|=16):r.push(i)}}function i(i,r){if(!e)return null;for(;null!==r;)t(i,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Ns(e,t)).index=0,e.sibling=null,e}function o(t,i,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<i?(t.flags|=33554434,i):r:(t.flags|=33554434,i):(t.flags|=1048576,i)}function s(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function a(e,t,i,r){return null===t||6!==t.tag?((t=_s(i,e.mode,r)).return=e,t._debugOwner=e,t._debugInfo=Ju,t):((t=n(t,i)).return=e,t._debugInfo=Ju,t)}function c(e,t,i,r){var o=i.type;return o===aa?(wt(i,t=u(e,t,i.props.children,r,i.key),e),t):null!==t&&(t.elementType===o||ys(t,i)||"object"==typeof o&&null!==o&&o.$$typeof===ma&&Hu(o)===t.type)?(Dt(t=n(t,i.props),i),t.return=e,t._debugOwner=i._owner,t._debugInfo=Ju,t):(Dt(t=Ps(i,e.mode,r),i),t.return=e,t._debugInfo=Ju,t)}function A(e,t,i,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Ls(i,e.mode,r)).return=e,t._debugInfo=Ju,t):((t=n(t,i.children||[])).return=e,t._debugInfo=Ju,t)}function u(e,t,i,r,o){return null===t||7!==t.tag?((t=Ms(i,e.mode,r,o)).return=e,t._debugOwner=e,t._debugInfo=Ju,t):((t=n(t,i)).return=e,t._debugInfo=Ju,t)}function d(e,t,i){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=_s(""+t,e.mode,i)).return=e,t._debugOwner=e,t._debugInfo=Ju,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case oa:return Dt(i=Ps(t,e.mode,i),t),i.return=e,e=vt(t._debugInfo),i._debugInfo=Ju,Ju=e,i;case sa:return(t=Ls(t,e.mode,i)).return=e,t._debugInfo=Ju,t;case ma:var r=vt(t._debugInfo);return e=d(e,t=Hu(t),i),Ju=r,e}if(ka(t)||f(t))return(i=Ms(t,e.mode,i,null)).return=e,i._debugOwner=e,e=vt(t._debugInfo),i._debugInfo=Ju,Ju=e,i;if("function"==typeof t.then)return r=vt(t._debugInfo),e=d(e,Qt(t),i),Ju=r,e;if(t.$$typeof===da)return d(e,sn(e,t),i);Nt(e,t)}return"function"==typeof t&&kt(e,t),"symbol"==typeof t&&St(e,t),null}function g(e,t,i,r){var n=null!==t?t.key:null;if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return null!==n?null:a(e,t,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case oa:return i.key===n?(n=vt(i._debugInfo),e=c(e,t,i,r),Ju=n,e):null;case sa:return i.key===n?A(e,t,i,r):null;case ma:return n=vt(i._debugInfo),e=g(e,t,i=Hu(i),r),Ju=n,e}if(ka(i)||f(i))return null!==n?null:(n=vt(i._debugInfo),e=u(e,t,i,r,null),Ju=n,e);if("function"==typeof i.then)return n=vt(i._debugInfo),e=g(e,t,Qt(i),r),Ju=n,e;if(i.$$typeof===da)return g(e,t,sn(e,i),r);Nt(e,i)}return"function"==typeof i&&kt(e,i),"symbol"==typeof i&&St(e,i),null}function p(e,t,i,r,n){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return a(t,e=e.get(i)||null,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case oa:return i=e.get(null===r.key?i:r.key)||null,e=vt(r._debugInfo),t=c(t,i,r,n),Ju=e,t;case sa:return A(t,e=e.get(null===r.key?i:r.key)||null,r,n);case ma:var o=vt(r._debugInfo);return t=p(e,t,i,r=Hu(r),n),Ju=o,t}if(ka(r)||f(r))return i=e.get(i)||null,e=vt(r._debugInfo),t=u(t,i,r,n,null),Ju=e,t;if("function"==typeof r.then)return o=vt(r._debugInfo),t=p(e,t,i,Qt(r),n),Ju=o,t;if(r.$$typeof===da)return p(e,t,i,sn(t,r),n);Nt(t,r)}return"function"==typeof r&&kt(t,r),"symbol"==typeof r&&St(t,r),null}function m(e,t,i,r){if("object"!=typeof i||null===i)return r;switch(i.$$typeof){case oa:case sa:h(e,t,i);var n=i.key;if("string"!=typeof n)break;if(null===r){(r=new Set).add(n);break}if(!r.has(n)){r.add(n);break}y(t,function(){});break;case ma:m(e,t,i=Hu(i),r)}return r}function x(a,l,c,A){if("object"==typeof c&&null!==c&&c.type===aa&&null===c.key&&(wt(c,null,a),c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case oa:var u=vt(c._debugInfo);e:{for(var h=c.key;null!==l;){if(l.key===h){if((h=c.type)===aa){if(7===l.tag){i(a,l.sibling),(A=n(l,c.props.children)).return=a,A._debugOwner=c._owner,A._debugInfo=Ju,wt(c,A,a),a=A;break e}}else if(l.elementType===h||ys(l,c)||"object"==typeof h&&null!==h&&h.$$typeof===ma&&Hu(h)===l.type){i(a,l.sibling),Dt(A=n(l,c.props),c),A.return=a,A._debugOwner=c._owner,A._debugInfo=Ju,a=A;break e}i(a,l);break}t(a,l),l=l.sibling}c.type===aa?((A=Ms(c.props.children,a.mode,A,c.key)).return=a,A._debugOwner=a,A._debugInfo=Ju,wt(c,A,a),a=A):(Dt(A=Ps(c,a.mode,A),c),A.return=a,A._debugInfo=Ju,a=A)}return a=s(a),Ju=u,a;case sa:e:{for(c=(u=c).key;null!==l;){if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){i(a,l.sibling),(A=n(l,u.children||[])).return=a,a=A;break e}i(a,l);break}t(a,l),l=l.sibling}(A=Ls(u,a.mode,A)).return=a,a=A}return s(a);case ma:return u=vt(c._debugInfo),a=x(a,l,c=Hu(c),A),Ju=u,a}if(ka(c))return u=vt(c._debugInfo),a=function(n,s,a,l){for(var c=null,A=null,u=null,h=s,f=s=0,x=null;null!==h&&f<a.length;f++){h.index>f?(x=h,h=null):x=h.sibling;var E=g(n,h,a[f],l);if(null===E){null===h&&(h=x);break}c=m(n,E,a[f],c),e&&h&&null===E.alternate&&t(n,h),s=o(E,s,f),null===u?A=E:u.sibling=E,u=E,h=x}if(f===a.length)return i(n,h),QA&&re(n,f),A;if(null===h){for(;f<a.length;f++)null!==(h=d(n,a[f],l))&&(c=m(n,h,a[f],c),s=o(h,s,f),null===u?A=h:u.sibling=h,u=h);return QA&&re(n,f),A}for(h=r(h);f<a.length;f++)null!==(x=p(h,n,f,a[f],l))&&(c=m(n,x,a[f],c),e&&null!==x.alternate&&h.delete(null===x.key?f:x.key),s=o(x,s,f),null===u?A=x:u.sibling=x,u=x);return e&&h.forEach(function(e){return t(n,e)}),QA&&re(n,f),A}(a,l,c,A),Ju=u,a;if(f(c)){if(u=vt(c._debugInfo),"function"!=typeof(h=f(c)))throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");var E=h.call(c);return E===c?0===a.tag&&"[object GeneratorFunction]"===Object.prototype.toString.call(a.type)&&Object.prototype.toString.call(E):c.entries!==h||Cu||(Cu=!0),a=function(n,s,a,l){if(null==a)throw Error("An iterable object provided no iterator.");for(var c=null,A=null,u=s,h=s=0,f=null,x=null,E=a.next();null!==u&&!E.done;h++,E=a.next()){u.index>h?(f=u,u=null):f=u.sibling;var C=g(n,u,E.value,l);if(null===C){null===u&&(u=f);break}x=m(n,C,E.value,x),e&&u&&null===C.alternate&&t(n,u),s=o(C,s,h),null===A?c=C:A.sibling=C,A=C,u=f}if(E.done)return i(n,u),QA&&re(n,h),c;if(null===u){for(;!E.done;h++,E=a.next())null!==(u=d(n,E.value,l))&&(x=m(n,u,E.value,x),s=o(u,s,h),null===A?c=u:A.sibling=u,A=u);return QA&&re(n,h),c}for(u=r(u);!E.done;h++,E=a.next())null!==(f=p(u,n,h,E.value,l))&&(x=m(n,f,E.value,x),e&&null!==f.alternate&&u.delete(null===f.key?h:f.key),s=o(f,s,h),null===A?c=f:A.sibling=f,A=f);return e&&u.forEach(function(e){return t(n,e)}),QA&&re(n,h),c}(a,l,E,A),Ju=u,a}if("function"==typeof c.then)return u=vt(c._debugInfo),a=x(a,l,Qt(c),A),Ju=u,a;if(c.$$typeof===da)return x(a,l,sn(a,c),A);Nt(a,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(u=""+c,null!==l&&6===l.tag?(i(a,l.sibling),(A=n(l,u)).return=a,a=A):(i(a,l),(A=_s(u,a.mode,A)).return=a,A._debugOwner=a,A._debugInfo=Ju,a=A),s(a)):("function"==typeof c&&kt(a,c),"symbol"==typeof c&&St(a,c),i(a,l))}return function(e,t,i,r){var n=Ju;Ju=null;try{zu=0;var o=x(e,t,i,r);return Xu=null,o}catch(A){if(A===Bu)throw A;var s=l(29,A,null,e.mode);s.lanes=r,s.return=e;var a=s._debugInfo=Ju;if(s._debugOwner=e._debugOwner,null!=a)for(var c=a.length-1;0<=c;c--)if("string"==typeof a[c].stack){s._debugOwner=a[c];break}return s}finally{Ju=n}}}function Mt(e,t){var i=Bg;M(td,i,e),M(ed,t,e),Bg=i|t.baseLanes}function Vt(e){M(td,Bg,e),M(ed,ed.current,e)}function _t(e){Bg=td.current,P(ed),P(td)}function Lt(e){var t=e.alternate;M(sd,sd.current&nd,e),M(id,e,e),null===rd&&(null===t||null!==ed.current||null!==t.memoizedState)&&(rd=e)}function Rt(e){if(22===e.tag){if(M(sd,sd.current,e),M(id,e,e),null===rd){var t=e.alternate;null!==t&&null!==t.memoizedState&&(rd=e)}}else Ut(e)}function Ut(e){M(sd,sd.current,e),M(id,id.current,e)}function Tt(e){P(id),rd===e&&(rd=null),P(sd)}function Ot(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||Xl(i)||zl(i)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ft(){var e=Dd;null===Nd?Nd=[e]:Nd.push(e)}function Gt(){var e=Dd;if(null!==Nd&&(kd++,Nd[kd]!==e)){var t=m(md);if(!dd.has(t)&&(dd.add(t),null!==Nd))for(var i=0;i<=kd;i++){var r=Nd[i],n=i===kd?e:r;for(r=i+1+". "+r;30>r.length;)r+=" ";r+=n+"\n"}}}function jt(e){null==e||ka(e)}function Ht(){var e=m(md);fd.has(e)||fd.add(e)}function Xt(){throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.")}function zt(e,t){if(Sd)return!1;if(null===t)return!1;e.length,t.length;for(var i=0;i<t.length&&i<e.length;i++)if(!cA(e[i],t[i]))return!1;return!0}function Jt(e,t,i,r,n,o){pd=o,md=t,Nd=null!==e?e._debugHookTypes:null,kd=-1,Sd=null!==e&&e.type!==t.type,"[object AsyncFunction]"!==Object.prototype.toString.call(i)&&"[object AsyncGeneratorFunction]"!==Object.prototype.toString.call(i)||(o=m(md),gd.has(o)||gd.add(o)),t.memoizedState=null,t.updateQueue=null,t.lanes=0,ba.H=null!==e&&null!==e.memoizedState?Ld:null!==Nd?_d:Vd,bd=o=(8&t.mode)!==MA;var s=Qu(i,r,n);if(bd=!1,Bd&&(s=Kt(t,i,r,n)),o){W(!0);try{s=Kt(t,i,r,n)}finally{W(!1)}}return Wt(e,t),s}function Wt(e,t){t._debugHookTypes=Nd,null===t.dependencies?null!==vd&&(t.dependencies={lanes:0,firstContext:null,_debugThenableState:vd}):t.dependencies._debugThenableState=vd,ba.H=Md;var i=null!==xd&&null!==xd.next;if(pd=0,Nd=Dd=Ed=xd=md=null,kd=-1,null!==e&&(e.flags,t.flags),Cd=!1,yd=0,vd=null,i)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");null===e||rh||null!==(e=e.dependencies)&&rn(e)&&(rh=!0),vu?(vu=!1,e=!0):e=!1,e&&(t=m(t)||"Unknown",hd.has(t)||gd.has(t)||hd.add(t))}function Kt(e,t,i,r){md=e;var n=0;do{if(Bd&&(vd=null),yd=0,Bd=!1,n>=Qd)throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");if(n+=1,Sd=!1,Ed=xd=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}kd=-1,ba.H=Rd,o=Qu(t,i,r)}while(Bd);return o}function Yt(){var e=ba.H,t=e.useState()[0];return t="function"==typeof t.then?ii(t):t,e=e.useState()[0],(null!==xd?xd.memoizedState:null)!==e&&(md.flags|=1024),t}function qt(){var e=0!==Id;return Id=0,e}function Zt(e,t,i){t.updateQueue=e.updateQueue,t.flags=(16&t.mode)!==MA?-201328645&t.flags:-2053&t.flags,e.lanes&=~i}function $t(e){if(Cd){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Cd=!1}pd=0,Nd=Ed=xd=md=null,kd=-1,Dd=null,Bd=!1,yd=Id=0,vd=null}function ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ed?md.memoizedState=Ed=e:Ed=Ed.next=e,Ed}function ti(){if(null===xd){var e=md.alternate;e=null!==e?e.memoizedState:null}else e=xd.next;var t=null===Ed?md.memoizedState:Ed.next;if(null!==t)Ed=t,xd=e;else{if(null===e){if(null===md.alternate)throw Error("Update hook called on initial render. This is likely a bug in React. Please file an issue.");throw Error("Rendered more hooks than during the previous render.")}e={memoizedState:(xd=e).memoizedState,baseState:xd.baseState,baseQueue:xd.baseQueue,queue:xd.queue,next:null},null===Ed?md.memoizedState=Ed=e:Ed=Ed.next=e}return Ed}function ii(e){var t=yd;return yd+=1,null===vd&&(vd={didWarnAboutUncachedPromise:!1,thenables:[]}),e=bt(vd,e,t),t=md,null===(null===Ed?t.memoizedState:Ed.next)&&(t=t.alternate,ba.H=null!==t&&null!==t.memoizedState?Ld:Vd),e}function ri(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ii(e);if(e.$$typeof===da)return on(e)}throw Error("An unsupported type was passed to use(): "+String(e))}function ni(e){var t=null,i=md.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var r=md.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===i&&(i=Pd(),md.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index])||Sd)for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=Ea;else i.length;return t.index++,i}function oi(e,t){return"function"==typeof t?t(e):t}function si(e,t,i){var r=ei();if(void 0!==i){var n=i(t);if(bd){W(!0);try{i(t)}finally{W(!1)}}}else n=t;return r.memoizedState=r.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=lr.bind(null,md,e),[r.memoizedState,e]}function ai(e){return li(ti(),xd,e)}function li(e,t,i){var r=e.queue;if(null===r)throw Error("Should have a queue. You are likely calling Hooks conditionally, which is not allowed. (https://react.dev/link/invalid-hook-call)");r.lastRenderedReducer=i;var n=e.baseQueue,o=r.pending;if(null!==o){if(null!==n){var s=n.next;n.next=o.next,o.next=s}t.baseQueue,t.baseQueue=n=o,r.pending=null}if(o=e.baseState,null===n)e.memoizedState=o;else{var a=s=null,l=null,c=t=n.next,A=!1;do{var u=-536870913&c.lane;if(u!==c.lane?(sg&u)===u:(pd&u)===u){var d=c.revertLane;if(0===d)null!==l&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),u===$A&&(A=!0);else{if((pd&d)===d){c=c.next,d===$A&&(A=!0);continue}u={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(a=l=u,s=o):l=l.next=u,md.lanes|=d,Ig|=d}u=c.action,bd&&i(o,u),o=c.hasEagerState?c.eagerState:i(o,u)}else d={lane:u,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(a=l=d,s=o):l=l.next=d,md.lanes|=u,Ig|=u;c=c.next}while(null!==c&&c!==t);if(null===l?s=o:l.next=a,!cA(o,e.memoizedState)&&(rh=!0,A&&null!==(i=eu)))throw i;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return null===n&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ci(e){var t=ti(),i=t.queue;if(null===i)throw Error("Should have a queue. You are likely calling Hooks conditionally, which is not allowed. (https://react.dev/link/invalid-hook-call)");i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,o=t.memoizedState;if(null!==n){i.pending=null;var s=n=n.next;do{o=e(o,s.action),s=s.next}while(s!==n);cA(o,t.memoizedState)||(rh=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,r]}function Ai(e,t,i){var r=md,n=ei();if(QA){if(void 0===i)throw Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");var o=i();qu||o===i()||(qu=!0)}else{if(o=t(),qu||(i=t(),cA(o,i)||(qu=!0)),null===ng)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");60&sg||di(r,t,o)}return n.memoizedState=o,i={value:o,getSnapshot:t},n.queue=i,Ti(gi.bind(null,r,i,e),[e]),r.flags|=2048,_i(ld|ud,hi.bind(null,r,i,o,t),{destroy:void 0},null),o}function ui(e,t,i){var r=md,n=ti(),o=QA;if(o){if(void 0===i)throw Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");i=i()}else if(i=t(),!qu){var s=t();cA(i,s)||(qu=!0)}(s=!cA((xd||n).memoizedState,i))&&(n.memoizedState=i,rh=!0),n=n.queue;var a=gi.bind(null,r,n,e);if(Ui(2048,ud,a,[e]),n.getSnapshot!==t||s||null!==Ed&&Ed.memoizedState.tag&ld){if(r.flags|=2048,_i(ld|ud,hi.bind(null,r,n,i,t),{destroy:void 0},null),null===ng)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");o||60&pd||di(r,t,i)}return i}function di(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=md.updateQueue)?(t=Pd(),md.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function hi(e,t,i,r){t.value=i,t.getSnapshot=r,fi(t)&&pi(e)}function gi(e,t,i){return i(function(){fi(t)&&pi(e)})}function fi(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!cA(e,i)}catch(r){return!0}}function pi(e){var t=Oe(e,2);null!==t&&Ro(t,e,2)}function mi(e){var t=ei();if("function"==typeof e){var i=e;if(e=i(),bd){W(!0);try{i()}finally{W(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t}function xi(e){var t=(e=mi(e)).queue,i=cr.bind(null,md,t);return t.dispatch=i,[e.memoizedState,i]}function Ei(e){var t=ei();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=ur.bind(null,md,!0,i),i.dispatch=t,[e,t]}function Ci(e,t){return Bi(ti(),0,e,t)}function Bi(e,t,i,r){return e.baseState=i,li(e,xd,"function"==typeof r?r:oi)}function bi(e,t){var i=ti();return null!==xd?Bi(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])}function Ii(e,t,i,r,n){if(dr(e))throw Error("Cannot update form state while rendering.");if(null!==(e=t.action)){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==ba.T?i(!0):o.isTransition=!1,r(o),null===(i=t.pending)?(o.next=t.pending=o,yi(t,o)):(o.next=i.next,t.pending=i.next=o)}}function yi(e,t){var i=t.action,r=t.payload,n=e.state;if(t.isTransition){var o=ba.T,s={};ba.T=s,ba.T._updatedFibers=new Set;try{var a=i(n,r),l=ba.S;null!==l&&l(s,a),vi(e,t,a)}catch(c){Qi(e,t,c)}finally{ba.T=o,null===o&&s._updatedFibers&&(e=s._updatedFibers.size,s._updatedFibers.clear())}}else try{vi(e,t,s=i(n,r))}catch(A){Qi(e,t,A)}}function vi(e,t,i){null!==i&&"object"==typeof i&&"function"==typeof i.then?(i.then(function(i){wi(e,t,i)},function(i){return Qi(e,t,i)}),t.isTransition):wi(e,t,i)}function wi(e,t,i){t.status="fulfilled",t.value=i,Di(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,yi(e,i)))}function Qi(e,t,i){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=i,Di(t),t=t.next}while(t!==r)}e.action=null}function Di(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ni(e,t){return t}function ki(e,t){if(QA){var i=ng.formState;if(null!==i){e:{var r=md;if(QA){if(wA){var n=Kl(wA,SA);if(n){wA=ql(n),r=Yl(n);break e}}ke(r)}r=!1}r&&(t=i[0])}}(i=ei()).memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:t},i.queue=r,i=cr.bind(null,md,r),r.dispatch=i,r=mi(!1);var o=ur.bind(null,md,!1,r.queue);return n={state:t,dispatch:null,action:e,pending:null},(r=ei()).queue=n,i=Ii.bind(null,md,n,o,i),n.dispatch=i,r.memoizedState=e,[t,i,!1]}function Si(e){return Pi(ti(),xd,e)}function Pi(e,t,i){t=li(e,t,Ni)[0],e=ai(oi)[0],t="object"==typeof t&&null!==t&&"function"==typeof t.then?ii(t):t;var r=ti(),n=r.queue,o=n.dispatch;return i!==r.memoizedState&&(md.flags|=2048,_i(ld|ud,Mi.bind(null,n,i),{destroy:void 0},null)),[t,o,e]}function Mi(e,t){e.action=t}function Vi(e){var t=ti(),i=xd;if(null!==i)return Pi(t,i,e);ti(),t=t.memoizedState;var r=(i=ti()).queue.dispatch;return i.memoizedState=e,[t,r,!1]}function _i(e,t,i,r){return e={tag:e,create:t,inst:i,deps:r,next:null},null===(t=md.updateQueue)&&(t=Pd(),md.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function Li(e){return e={current:e},ei().memoizedState=e}function Ri(e,t,i,r){var n=ei();md.flags|=e,n.memoizedState=_i(ld|t,i,{destroy:void 0},void 0===r?null:r)}function Ui(e,t,i,r){var n=ti();r=void 0===r?null:r;var o=n.memoizedState.inst;null!==xd&&null!==r&&zt(r,xd.memoizedState.deps)?n.memoizedState=_i(t,i,o,r):(md.flags|=e,n.memoizedState=_i(ld|t,i,o,r))}function Ti(e,t){(16&md.mode)!==MA&&(64&md.mode)===MA?Ri(142608384,ud,e,t):Ri(8390656,ud,e,t)}function Oi(e,t){var i=4194308;return(16&md.mode)!==MA&&(i|=67108864),Ri(i,Ad,e,t)}function Fi(e,t){if("function"==typeof t){e=e();var i=t(e);return function(){"function"==typeof i?i():t(null)}}if(null!=t)return t.hasOwnProperty("current"),e=e(),t.current=e,function(){t.current=null}}function Gi(e,t,i){i=null!=i?i.concat([e]):null;var r=4194308;(16&md.mode)!==MA&&(r|=67108864),Ri(r,Ad,Fi.bind(null,t,e),i)}function ji(e,t,i){i=null!=i?i.concat([e]):null,Ui(4,Ad,Fi.bind(null,t,e),i)}function Hi(e,t){return ei().memoizedState=[e,void 0===t?null:t],e}function Xi(e,t){var i=ti();t=void 0===t?null:t;var r=i.memoizedState;return null!==t&&zt(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function zi(e,t){var i=ei();t=void 0===t?null:t;var r=e();if(bd){W(!0);try{e()}finally{W(!1)}}return i.memoizedState=[r,t],r}function Ji(e,t){var i=ti();t=void 0===t?null:t;var r=i.memoizedState;if(null!==t&&zt(t,r[1]))return r[0];if(r=e(),bd){W(!0);try{e()}finally{W(!1)}}return i.memoizedState=[r,t],r}function Wi(e,t){return qi(ei(),e,t)}function Ki(e,t){return Zi(ti(),xd.memoizedState,e,t)}function Yi(e,t){var i=ti();return null===xd?qi(i,e,t):Zi(i,xd.memoizedState,e,t)}function qi(e,t,i){return void 0===i||1073741824&pd?e.memoizedState=t:(e.memoizedState=i,e=Lo(),md.lanes|=e,Ig|=e,i)}function Zi(e,t,i,r){return cA(i,t)?i:null!==ed.current?(e=qi(e,i,r),cA(e,t)||(rh=!0),e):42&pd?(e=Lo(),md.lanes|=e,Ig|=e,t):(rh=!0,e.memoizedState=i)}function $i(e,t,i,r,n){var o=el();$a(0!==o&&8>o?o:8);var s,a,l,c=ba.T,A={};ba.T=A,ur(e,!1,t,i),A._updatedFibers=new Set;try{var u=n(),d=ba.S;null!==d&&d(A,u),null!==u&&"object"==typeof u&&"function"==typeof u.then?Ar(e,t,(s=r,a=[],l={status:"pending",value:null,reason:null,then:function(e){a.push(e)}},u.then(function(){l.status="fulfilled",l.value=s;for(var e=0;e<a.length;e++)(0,a[e])(s)},function(e){for(l.status="rejected",l.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),l),_o(e)):Ar(e,t,r,_o(e))}catch(h){Ar(e,t,{then:function(){},status:"rejected",reason:h},_o(e))}finally{$a(o),ba.T=c,null===c&&A._updatedFibers&&(e=A._updatedFibers.size,A._updatedFibers.clear())}}function er(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:cl,baseState:cl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:cl},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function tr(){var e=mi(!1);return e=$i.bind(null,md,e.queue,!0,!1),ei().memoizedState=e,[!1,e]}function ir(){var e=ai(oi)[0],t=ti().memoizedState;return["boolean"==typeof e?e:ii(e),t]}function rr(){var e=ci(oi)[0],t=ti().memoizedState;return["boolean"==typeof e?e:ii(e),t]}function nr(){return on(Al)}function or(){var e=ei(),t=ng.identifierPrefix;if(QA){var i=EA;t=":"+t+"R"+(i=(xA&~(1<<32-Gc(xA)-1)).toString(32)+i),0<(i=Id++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=wd++).toString(32)+":";return e.memoizedState=t}function sr(){return ei().memoizedState=ar.bind(null,md)}function ar(e,t){for(var i=e.return;null!==i;){switch(i.tag){case 24:case 3:var r=_o(i),n=ut(i,e=At(r),r);return null!==n&&(Ro(n,i,r),dt(n,i,r)),i=ln(),void(e.payload={cache:i})}i=i.return}}function lr(e,t,i,r){i={lane:r=_o(e),revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},dr(e)?hr(t,i):null!==(i=Te(e,t,i,r))&&(Ro(i,e,r),gr(i,t,r)),te(e,r)}function cr(e,t,i,r){Ar(e,t,i,r=_o(e)),te(e,r)}function Ar(e,t,i,r){var n={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(dr(e))hr(t,n);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer)){var s=ba.H;ba.H=Td;try{var a=t.lastRenderedState,l=o(a,i);if(n.hasEagerState=!0,n.eagerState=l,cA(l,a))return Ue(e,t,n,0),null===ng&&Re(),!1}catch(c){}finally{ba.H=s}}if(null!==(i=Te(e,t,n,r)))return Ro(i,e,r),gr(i,t,r),!0}return!1}function ur(e,t,i,r){if(ba.T,r={lane:2,revertLane:st(),action:r,hasEagerState:!1,eagerState:null,next:null},dr(e)){if(t)throw Error("Cannot update optimistic state while rendering.")}else null!==(t=Te(e,i,r,2))&&Ro(t,e,2);te(e,2)}function dr(e){var t=e.alternate;return e===md||null!==t&&t===md}function hr(e,t){Bd=Cd=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function gr(e,t,i){if(4194176&i){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,H(e,i)}}function fr(e){if(null!==e&&"function"!=typeof e){var t=String(e);qd.has(t)||qd.add(t)}}function pr(e,t,i,r){var n=e.memoizedState,o=i(r,n);if(8&e.mode){W(!0);try{o=i(r,n)}finally{W(!1)}}void 0===o&&(t=p(t)||"Component",Jd.has(t)||Jd.add(t)),n=null==o?n:ra({},n,o),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function mr(e,t,i,r,n,o,s){var a=e.stateNode;if("function"==typeof a.shouldComponentUpdate){if(i=a.shouldComponentUpdate(r,o,s),8&e.mode){W(!0);try{i=a.shouldComponentUpdate(r,o,s)}finally{W(!1)}}return i}return!(t.prototype&&t.prototype.isPureReactComponent&&Et(i,r)&&Et(n,o))}function xr(e,t,i,r){var n=t.state;"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==n&&(e=m(e)||"Component",Gd.has(e)||Gd.add(e),Zd.enqueueReplaceState(t,t.state,null))}function Er(e,t){var i=t;if("ref"in t)for(var r in i={},t)"ref"!==r&&(i[r]=t[r]);if(e=e.defaultProps)for(var n in i===t&&(i=ra({},i)),e)void 0===i[n]&&(i[n]=e[n]);return i}function Cr(e,t){try{eh=t.source?m(t.source):null,th=null;var i=t.value;null!==ba.actQueue?ba.thrownErrors.push(i):(0,e.onUncaughtError)(i,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Br(e,t,i){try{eh=i.source?m(i.source):null,th=m(t),(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function br(e,t,i){return(i=At(i)).tag=nu,i.payload={element:null},i.callback=function(){y(t.source,Cr,e,t)},i}function Ir(e){return(e=At(e)).tag=nu,e}function yr(e,t,i,r){var n=i.type.getDerivedStateFromError;if("function"==typeof n){var o=r.value;e.payload=function(){return n(o)},e.callback=function(){vs(i),y(r.source,Br,t,i,r)}}var s=i.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){vs(i),y(r.source,Br,t,i,r),"function"!=typeof n&&(null===Lg?Lg=new Set([this]):Lg.add(this)),Lu(this,r),"function"==typeof n||i.lanes})}function vr(e,t,i,r){t.child=null===e?$u(t,null,i,r):Zu(t,e.child,i,r)}function wr(e,t,i,r,n){i=i.render;var o=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return nn(t),q(t),r=Jt(e,t,i,s,o,n),a=qt(),Z(),null===e||rh?(QA&&a&&oe(t),t.flags|=1,vr(e,t,r,n),t.child):(Zt(e,t,n),Jr(e,t,n))}function Qr(e,t,i,r,n){if(null===e){var o=i.type;return"function"!=typeof o||Ds(o)||void 0!==o.defaultProps||null!==i.compare?((e=Ss(i.type,null,r,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(i=bs(o),t.tag=15,t.type=i,Lr(t,o),Dr(e,t,i,r,n))}if(o=e.child,!Wr(e,n)){var s=o.memoizedProps;if((i=null!==(i=i.compare)?i:Et)(s,r)&&e.ref===t.ref)return Jr(e,t,n)}return t.flags|=1,(e=Ns(o,r)).ref=t.ref,e.return=t,t.child=e}function Dr(e,t,i,r,n){if(null!==e){var o=e.memoizedProps;if(Et(o,r)&&e.ref===t.ref&&t.type===e.type){if(rh=!1,t.pendingProps=r=o,!Wr(e,n))return t.lanes=e.lanes,Jr(e,t,n);131072&e.flags&&(rh=!0)}}return Pr(e,t,i,r,n)}function Nr(e,t,i){var r=t.pendingProps,n=r.children,o=!!(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(Sr(e,t),"hidden"===r.mode||o){if(128&t.flags){if(r=null!==s?s.baseLanes|i:i,null!==e){for(n=t.child=e.child,o=0;null!==n;)o=o|n.lanes|n.childLanes,n=n.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return kr(e,t,r,i)}if(!(536870912&i))return t.lanes=t.childLanes=536870912,kr(e,t,null!==s?s.baseLanes|i:i,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&dn(t,null!==s?s.cachePool:null),null!==s?Mt(t,s):Vt(t),Rt(t)}else null!==s?(dn(t,s.cachePool),Mt(t,s),Ut(t),t.memoizedState=null):(null!==e&&dn(t,null),Vt(t),Ut(t));return vr(e,t,n,i),t.child}function kr(e,t,i,r){var n=un();return n=null===n?null:{parent:Ja?bh._currentValue:bh._currentValue2,pool:n},t.memoizedState={baseLanes:i,cachePool:n},null!==e&&dn(t,null),Vt(t),Rt(t),null!==e&&tn(e,t,r,!0),null}function Sr(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof i&&"object"!=typeof i)throw Error("Expected ref to be a function, an object returned by React.createRef(), or undefined/null.");null!==e&&e.ref===i||(t.flags|=2097664)}}function Pr(e,t,i,r,n){if(i.prototype&&"function"==typeof i.prototype.render){var o=p(i)||"Unknown";nh[o]||(nh[o]=!0)}return 8&t.mode&&Au.recordLegacyContextWarning(t,null),null===e&&(Lr(t,t.type),i.contextTypes&&(o=p(i)||"Unknown",sh[o]||(sh[o]=!0))),nn(t),q(t),i=Jt(e,t,i,r,void 0,n),r=qt(),Z(),null===e||rh?(QA&&r&&oe(t),t.flags|=1,vr(e,t,i,n),t.child):(Zt(e,t,n),Jr(e,t,n))}function Mr(e,t,i,r,n,o){return nn(t),q(t),kd=-1,Sd=null!==e&&e.type!==t.type,t.updateQueue=null,i=Kt(t,r,i,n),Wt(e,t),r=qt(),Z(),null===e||rh?(QA&&r&&oe(t),t.flags|=1,vr(e,t,i,o),t.child):(Zt(e,t,o),Jr(e,t,o))}function Vr(e,t,i,r,n){switch(a(t)){case!1:var o=t.stateNode,s=new t.type(t.memoizedProps,o.context).state;o.updater.enqueueSetState(o,s,null);break;case!0:t.flags|=128,t.flags|=65536,o=Error("Simulated error coming from DevTools");var l=n&-n;if(t.lanes|=l,null===(s=ng))throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");yr(l=Ir(l),s,t,ie(o,t)),ht(t,l)}if(nn(t),null===t.stateNode){if(s=Fc,o=i.contextType,"contextType"in i&&null!==o&&(void 0===o||o.$$typeof!==da)&&!Yd.has(i)&&(Yd.add(i),l=void 0===o?" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":"object"!=typeof o?" However, it is set to a "+typeof o+".":o.$$typeof===ua?" Did you accidentally pass the Context.Consumer instead?":" However, it is set to an object with keys {"+Object.keys(o).join(", ")+"}."),"object"==typeof o&&null!==o&&(s=on(o)),o=new i(r,s),8&t.mode){W(!0);try{o=new i(r,s)}finally{W(!1)}}if(s=t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=Zd,t.stateNode=o,o._reactInternals=t,o._reactInternalInstance=Fd,"function"==typeof i.getDerivedStateFromProps&&null===s&&(s=p(i)||"Component",jd.has(s)||jd.add(s)),"function"==typeof i.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate){var c=l=s=null;if("function"==typeof o.componentWillMount&&!0!==o.componentWillMount.__suppressDeprecationWarning?s="componentWillMount":"function"==typeof o.UNSAFE_componentWillMount&&(s="UNSAFE_componentWillMount"),"function"==typeof o.componentWillReceiveProps&&!0!==o.componentWillReceiveProps.__suppressDeprecationWarning?l="componentWillReceiveProps":"function"==typeof o.UNSAFE_componentWillReceiveProps&&(l="UNSAFE_componentWillReceiveProps"),"function"==typeof o.componentWillUpdate&&!0!==o.componentWillUpdate.__suppressDeprecationWarning?c="componentWillUpdate":"function"==typeof o.UNSAFE_componentWillUpdate&&(c="UNSAFE_componentWillUpdate"),null!==s||null!==l||null!==c){o=p(i)||"Component";var A="function"==typeof i.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Xd.has(o)||Xd.add(o)}}o=t.stateNode,s=p(i)||"Component",o.render||i.prototype&&i.prototype.render,!o.getInitialState||o.getInitialState.isReactClassApproved||o.state,o.getDefaultProps&&o.getDefaultProps.isReactClassApproved,o.contextType,i.childContextTypes&&!Kd.has(i)&&Kd.add(i),i.contextTypes&&!Wd.has(i)&&Wd.add(i),o.componentShouldUpdate,i.prototype&&i.prototype.isPureReactComponent&&o.shouldComponentUpdate,o.componentDidUnmount,o.componentDidReceiveProps,o.componentWillRecieveProps,o.UNSAFE_componentWillRecieveProps,l=o.props!==r,o.props,o.defaultProps,"function"!=typeof o.getSnapshotBeforeUpdate||"function"==typeof o.componentDidUpdate||Hd.has(i)||Hd.add(i),o.getDerivedStateFromProps,o.getDerivedStateFromError,i.getSnapshotBeforeUpdate,(l=o.state)&&("object"!=typeof l||ka(l)),"function"==typeof o.getChildContext&&i.childContextTypes,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},lt(t),s=i.contextType,o.context="object"==typeof s&&null!==s?on(s):Fc,o.state===r&&(s=p(i)||"Component",zd.has(s)||zd.add(s)),8&t.mode&&Au.recordLegacyContextWarning(t,o),Au.recordUnsafeLifecycleWarnings(t,o),o.state=t.memoizedState,"function"==typeof(s=i.getDerivedStateFromProps)&&(pr(t,i,s,r),o.state=t.memoizedState),"function"==typeof i.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(s=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&Zd.enqueueReplaceState(o,o.state,null),ft(t,r,o,n),gt(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),(16&t.mode)!==MA&&(t.flags|=67108864),o=!0}else if(null===e){o=t.stateNode;var u=t.memoizedProps;l=Er(i,u),o.props=l;var d=o.context;c=i.contextType,s=Fc,"object"==typeof c&&null!==c&&(s=on(c)),c="function"==typeof(A=i.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate,u=t.pendingProps!==u,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(u||d!==s)&&xr(t,o,r,s),ou=!1;var h=t.memoizedState;o.state=h,ft(t,r,o,n),gt(),d=t.memoizedState,u||h!==d||ou?("function"==typeof A&&(pr(t,i,A,r),d=t.memoizedState),(l=ou||mr(t,i,l,r,h,d,s))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308),(16&t.mode)!==MA&&(t.flags|=67108864)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),(16&t.mode)!==MA&&(t.flags|=67108864),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=s,o=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),(16&t.mode)!==MA&&(t.flags|=67108864),o=!1)}else{o=t.stateNode,ct(e,t),c=Er(i,s=t.memoizedProps),o.props=c,A=t.pendingProps,h=o.context,d=i.contextType,l=Fc,"object"==typeof d&&null!==d&&(l=on(d)),(d="function"==typeof(u=i.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==A||h!==l)&&xr(t,o,r,l),ou=!1,h=t.memoizedState,o.state=h,ft(t,r,o,n),gt();var g=t.memoizedState;s!==A||h!==g||ou||null!==e&&null!==e.dependencies&&rn(e.dependencies)?("function"==typeof u&&(pr(t,i,u,r),g=t.memoizedState),(c=ou||mr(t,i,c,r,h,g,l)||null!==e&&null!==e.dependencies&&rn(e.dependencies))?(d||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,g,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,g,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=l,o=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}if(l=o,Sr(e,t),s=!!(128&t.flags),l||s){if(l=t.stateNode,ba.getCurrentStack=null===t?null:I,Na=!1,Da=t,s&&"function"!=typeof i.getDerivedStateFromError)i=null,TA=-1;else{if(q(t),i=Nu(l),8&t.mode){W(!0);try{Nu(l)}finally{W(!1)}}Z()}t.flags|=1,null!==e&&s?(t.child=Zu(t,e.child,null,n),t.child=Zu(t,null,i,n)):vr(e,t,i,n),t.memoizedState=l.state,e=t.child}else e=Jr(e,t,n);return n=t.stateNode,o&&n.props!==r&&(lh=!0),e}function _r(e,t,i,r){return Ve(),t.flags|=256,vr(e,t,i,r),t.child}function Lr(e,t){t&&t.childContextTypes,"function"==typeof t.getDerivedStateFromProps&&(e=p(t)||"Unknown",ah[e]||(ah[e]=!0)),"object"==typeof t.contextType&&null!==t.contextType&&(t=p(t)||"Unknown",oh[t]||(oh[t]=!0))}function Rr(e){return{baseLanes:e,cachePool:hn()}}function Ur(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=wg),e}function Tr(e,t,i){var r=t.pendingProps;s(t)&&(t.flags|=128);var n,o=!1,a=!!(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&0!==(sd.current&od)),n&&(o=!0,t.flags&=-129),n=!!(32&t.flags),t.flags&=-33,null===e){if(QA){if(o?Lt(t):Ut(t),QA){var c,A=wA;(c=!A)||(null!==(c=rc(A,SA))?(t.memoizedState={dehydrated:c,treeContext:null!==mA?{id:xA,overflow:EA}:null,retryLane:536870912},(a=l(18,null,null,MA)).stateNode=c,a.return=t,t.child=a,vA=t,wA=null,c=!0):c=!1,c=!c),c&&(Ne(t,A),ke(t))}if(null!==(A=t.memoizedState)&&null!==(A=A.dehydrated))return zl(A)?t.lanes=16:t.lanes=536870912,null;Tt(t)}return A=r.children,r=r.fallback,o?(Ut(t),A=Fr({mode:"hidden",children:A},o=t.mode),r=Ms(r,o,i,null),A.return=t,r.return=t,A.sibling=r,t.child=A,(o=t.child).memoizedState=Rr(i),o.childLanes=Ur(e,n,i),t.memoizedState=uh,r):(Lt(t),Or(t,A))}if(null!==(c=e.memoizedState)&&null!==(A=c.dehydrated)){if(a)256&t.flags?(Lt(t),t.flags&=-257,t=Gr(e,t,i)):null!==t.memoizedState?(Ut(t),t.child=e.child,t.flags|=128,t=null):(Ut(t),o=r.fallback,A=t.mode,r=Fr({mode:"visible",children:r.children},A),(o=Ms(o,A,i,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,Zu(t,e.child,null,i),(r=t.child).memoizedState=Rr(i),r.childLanes=Ur(e,n,i),t.memoizedState=uh,t=o);else if(Lt(t),zl(A))n=(A=Jl(A)).digest,o=A.message,r=A.stack,A=A.componentStack,(o=o?Error(o):Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.")).stack=r||"",o.digest=n,r={value:o,source:null,stack:n=void 0===A?null:A},"string"==typeof n&&AA.set(o,r),_e(r),t=Gr(e,t,i);else if(rh||tn(e,t,i,!1),n=0!==(i&e.childLanes),rh||n){if(null!==(n=ng)){if(42&(r=i&-i))r=1;else switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=64;break;case 268435456:r=134217728;break;default:r=0}if(0!==(r=0!==(r&(n.suspendedLanes|i))?0:r)&&r!==c.retryLane)throw c.retryLane=r,Oe(e,r),Ro(n,e,r),ih}Xl(A)||Yo(),t=Gr(e,t,i)}else Xl(A)?(t.flags|=128,t.child=e.child,t=fs.bind(null,e),Wl(A,t),t=null):(e=c.treeContext,Ya&&(wA=ec(A),vA=t,QA=!0,kA=null,DA=!1,NA=null,SA=!1,null!==e&&(fA[pA++]=xA,fA[pA++]=EA,fA[pA++]=mA,xA=e.id,EA=e.overflow,mA=t)),(t=Or(t,r.children)).flags|=4096);return t}return o?(Ut(t),o=r.fallback,A=t.mode,a=(c=e.child).sibling,(r=Ns(c,{mode:"hidden",children:r.children})).subtreeFlags=31457280&c.subtreeFlags,null!==a?o=Ns(a,o):(o=Ms(o,A,i,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,null===(A=e.child.memoizedState)?A=Rr(i):(null!==(c=A.cachePool)?(a=Ja?bh._currentValue:bh._currentValue2,c=c.parent!==a?{parent:a,pool:a}:c):c=hn(),A={baseLanes:A.baseLanes|i,cachePool:c}),o.memoizedState=A,o.childLanes=Ur(e,n,i),t.memoizedState=uh,r):(Lt(t),e=(i=e.child).sibling,(i=Ns(i,{mode:"visible",children:r.children})).return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i)}function Or(e,t){return(t=Fr({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Fr(e,t){return Vs(e,t,0,null)}function Gr(e,t,i){return Zu(t,e.child,null,i),(e=Or(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jr(e,t,i){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),$r(e.return,t,i)}function Hr(e,t){var i=ka(e);return e=!i&&"function"==typeof f(e),!i&&!e||(i=i?"array":"iterable",!1)}function Xr(e,t,i,r,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=i,o.tailMode=n)}function zr(e,t,i){var r=t.pendingProps,n=r.revealOrder,o=r.tail;r=r.children,void 0===n||"forwards"===n||"backwards"===n||"together"===n||ch[n]||(ch[n]=!0,"string"==typeof n&&n.toLowerCase()),void 0===o||Ah[o]||("collapsed"!==o&&"hidden"!==o||"forwards"!==n&&"backwards"!==n)&&(Ah[o]=!0);e:if(("forwards"===n||"backwards"===n)&&null!=r&&!1!==r)if(ka(r)){for(var s=0;s<r.length;s++)if(!Hr(r[s]))break e}else if(s=f(r),"function"==typeof s&&(s=s.call(r)))for(var a=s.next();!a.done;a=s.next())if(!Hr(a.value))break e;if(vr(e,t,r,i),0!==((r=sd.current)&od))r=r&nd|od,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jr(e,i,t);else if(19===e.tag)jr(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=nd}switch(M(sd,r,t),n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===Ot(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Xr(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===Ot(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Xr(t,!0,i,null,o);break;case"together":Xr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jr(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),TA=-1,Ig|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(tn(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error("Resuming work not yet implemented.");if(null!==t.child){for(i=Ns(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Ns(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Wr(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!rn(e))}function Kr(e,t,i){if(t._debugNeedsRemount&&null!==e){i=Ss(t.type,t.key,t.pendingProps,t._debugOwner||null,t.mode,t.lanes);var r=t.return;if(null===r)throw Error("Cannot swap the root fiber.");if(e.alternate=null,t.alternate=null,i.index=t.index,i.sibling=t.sibling,i.return=t.return,i.ref=t.ref,i._debugInfo=t._debugInfo,t===r.child)r.child=i;else{var n=r.child;if(null===n)throw Error("Expected parent to have a child.");for(;n.sibling!==t;)if(null===(n=n.sibling))throw Error("Expected to find the previous sibling.");n.sibling=i}return null===(t=r.deletions)?(r.deletions=[e],r.flags|=16):t.push(e),i.flags|=2,i}if(null!==e)if(e.memoizedProps!==t.pendingProps||t.type!==e.type)rh=!0;else{if(!(Wr(e,i)||128&t.flags))return rh=!1,function(e,t,i){switch(t.tag){case 3:ae(t,t.stateNode.containerInfo),qr(t,bh,e.memoizedState.cache),Ve();break;case 27:case 5:Ae(t);break;case 4:ae(t,t.stateNode.containerInfo);break;case 10:qr(t,t.type,t.memoizedProps.value);break;case 12:0!==(i&t.childLanes)&&(t.flags|=4),t.flags|=2048;var r=t.stateNode;r.effectDuration=-0,r.passiveEffectDuration=-0;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Lt(t),t.flags|=128,null):0!==(i&t.child.childLanes)?Tr(e,t,i):(Lt(t),null!==(e=Jr(e,t,i))?e.sibling:null);Lt(t);break;case 19:var n=!!(128&e.flags);if((r=0!==(i&t.childLanes))||(tn(e,t,i,!1),r=0!==(i&t.childLanes)),n){if(r)return zr(e,t,i);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),M(sd,sd.current,t),r)break;return null;case 22:case 23:return t.lanes=0,Nr(e,t,i);case 24:qr(t,bh,e.memoizedState.cache)}return Jr(e,t,i)}(e,t,i);rh=!!(131072&e.flags)}else rh=!1,(r=QA)&&(r=!!(1048576&t.flags)),r&&(r=t.index,ne(t,gA,r));switch(t.lanes=0,t.tag){case 16:e:{if(r=t.pendingProps,e=Hu(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){if((n=e.$$typeof)===ha){t.tag=11,t.type=e=Is(e),t=wr(null,t,e,r,i);break e}if(n===pa){t.tag=14,t=Qr(null,t,e,r,i);break e}}throw t="",null!==e&&"object"==typeof e&&e.$$typeof===ma&&(t=" Did you wrap a component in React.lazy() more than once?"),e=p(e)||e,Error("Element type is invalid. Received a promise that resolves to: "+e+". Lazy element type must resolve to a class or function."+t)}Ds(e)?(r=Er(e,r),t.tag=1,t.type=e=bs(e),t=Vr(null,t,e,r,i)):(t.tag=0,Lr(t,e),t.type=e=bs(e),t=Pr(null,t,e,r,i))}return t;case 0:return Pr(e,t,t.type,t.pendingProps,i);case 1:return Vr(e,t,r=t.type,n=Er(r,t.pendingProps),i);case 3:e:{if(ae(t,t.stateNode.containerInfo),null===e)throw Error("Should have a current fiber. This is a bug in React.");var o=t.pendingProps;r=(n=t.memoizedState).element,ct(e,t),ft(t,o,null,i);var s=t.memoizedState;if(o=s.cache,qr(t,bh,o),o!==n.cache&&en(t,[bh],i,!0),gt(),o=s.element,Ya&&n.isDehydrated){if(n={element:o,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=_r(e,t,o,i);break e}if(o!==r){_e(r=ie(Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),t)),t=_r(e,t,o,i);break e}for(Ya&&(wA=$l(t.stateNode.containerInfo),vA=t,QA=!0,kA=null,DA=!1,NA=null,SA=!0),e=$u(t,null,o,i),t.child=e;e;)e.flags=-3&e.flags|4096,e=e.sibling}else{if(Ve(),o===r){t=Jr(e,t,i);break e}vr(e,t,o,i)}t=t.child}return t;case 26:if(xc)return Sr(e,t),null===e?(e=Bc(t.type,null,t.pendingProps,null))?t.memoizedState=e:QA||(t.stateNode=Qc(t.type,t.pendingProps,bA.current,t)):t.memoizedState=Bc(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(Pc)return Ae(t),null===e&&Pc&&QA&&(n=bA.current,r=ce(),n=t.stateNode=Mc(t.type,t.pendingProps,n,r,!1),DA||null!==(r=hc(n,t.type,t.pendingProps,r))&&(De(t,0).serverProps=r),vA=t,SA=!0,wA=Zl(n)),r=t.pendingProps.children,null!==e||QA?vr(e,t,r,i):t.child=Zu(t,null,r,i),Sr(e,t),t.child;case 5:return null===e&&QA&&(o=ce(),r=pc(t.type,t.pendingProps,o),(s=!(n=wA))||(null!==(s=tc(n,t.type,t.pendingProps,SA))?(t.stateNode=s,DA||null!==(o=hc(s,t.type,t.pendingProps,o))&&(De(t,0).serverProps=o),vA=t,wA=Zl(s),SA=!1,o=!0):o=!1,s=!o),s&&(r&&Ne(t,n),ke(t))),Ae(t),n=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,Ga(n,o)?r=null:null!==s&&Ga(n,s)&&(t.flags|=32),null!==t.memoizedState&&(n=Jt(e,t,Yt,null,null,i),Ja?Al._currentValue=n:Al._currentValue2=n),Sr(e,t),vr(e,t,r,i),t.child;case 6:return null===e&&QA&&(e=t.pendingProps,i=ce(),e=mc(e,i),(r=!(i=wA))||(null!==(r=ic(i,t.pendingProps,SA))?(t.stateNode=r,vA=t,wA=null,r=!0):r=!1,r=!r),r&&(e&&Ne(t,i),ke(t))),null;case 13:return Tr(e,t,i);case 4:return ae(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zu(t,null,r,i):vr(e,t,r,i),t.child;case 11:return wr(e,t,t.type,t.pendingProps,i);case 7:return vr(e,t,t.pendingProps,i),t.child;case 8:return vr(e,t,t.pendingProps.children,i),t.child;case 12:return t.flags|=4,t.flags|=2048,(r=t.stateNode).effectDuration=-0,r.passiveEffectDuration=-0,vr(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.type,o=(n=t.pendingProps).value,"value"in n||dh||(dh=!0),qr(t,r,o),vr(e,t,n.children,i),t.child;case 9:return n=t.type._context,r=t.pendingProps.children,nn(t),n=on(n),q(t),r=Qu(r,n,void 0),Z(),t.flags|=1,vr(e,t,r,i),t.child;case 14:return Qr(e,t,t.type,t.pendingProps,i);case 15:return Dr(e,t,t.type,t.pendingProps,i);case 19:return zr(e,t,i);case 22:return Nr(e,t,i);case 24:return nn(t),r=on(bh),null===e?(null===(n=un())&&(n=ng,o=ln(),n.pooledCache=o,cn(o),null!==o&&(n.pooledCacheLanes|=i),n=o),t.memoizedState={parent:r,cache:n},lt(t),qr(t,bh,n)):(0!==(e.lanes&i)&&(ct(e,t),ft(t,null,null,i),gt()),n=e.memoizedState,o=t.memoizedState,n.parent!==r?(n={parent:r,cache:r},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),qr(t,bh,r)):(r=o.cache,qr(t,bh,r),r!==n.cache&&en(t,[bh],i,!0))),vr(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Yr(){xh=mh=null}function qr(e,t,i){Ja?(M(hh,t._currentValue,e),t._currentValue=i,M(gh,t._currentRenderer,e),void 0!==t._currentRenderer&&null!==t._currentRenderer&&t._currentRenderer,t._currentRenderer=ph):(M(hh,t._currentValue2,e),t._currentValue2=i,M(fh,t._currentRenderer2,e),void 0!==t._currentRenderer2&&null!==t._currentRenderer2&&t._currentRenderer2,t._currentRenderer2=ph)}function Zr(e,t){var i=hh.current;Ja?(e._currentValue=i,i=gh.current,P(gh),e._currentRenderer=i):(e._currentValue2=i,i=fh.current,P(fh),e._currentRenderer2=i),P(hh)}function $r(e,t,i){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function en(e,t,i,r){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var o=n.dependencies;if(null!==o){var s=n.child;o=o.firstContext;e:for(;null!==o;){var a=o;o=n;for(var l=0;l<t.length;l++)if(a.context===t[l]){o.lanes|=i,null!==(a=o.alternate)&&(a.lanes|=i),$r(o.return,i,e),r||(s=null);break e}o=a.next}}else if(18===n.tag){if(null===(s=n.return))throw Error("We just came from a parent so we must have had a parent. This is a bug in React.");s.lanes|=i,null!==(o=s.alternate)&&(o.lanes|=i),$r(s,i,e),s=null}else s=n.child;if(null!==s)s.return=n;else for(s=n;null!==s;){if(s===e){s=null;break}if(null!==(n=s.sibling)){n.return=s.return,s=n;break}s=s.return}n=s}}function tn(e,t,i,r){e=null;for(var n=t,o=!1;null!==n;){if(!o)if(524288&n.flags)o=!0;else if(262144&n.flags)break;if(10===n.tag){var s=n.alternate;if(null===s)throw Error("Should have a current fiber. This is a bug in React.");if(null!==(s=s.memoizedProps)){var a=n.type;cA(n.pendingProps.value,s.value)||(null!==e?e.push(a):e=[a])}}else if(n===IA.current){if(null===(s=n.alternate))throw Error("Should have a current fiber. This is a bug in React.");s.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(Al):e=[Al])}n=n.return}null!==e&&en(t,e,i,r),t.flags|=262144}function rn(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!cA(Ja?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function nn(e){mh=e,xh=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function on(e){return an(mh,e)}function sn(e,t){return null===mh&&nn(e),an(e,t)}function an(e,t){var i=Ja?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:i,next:null},null===xh){if(null===e)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");xh=t,e.dependencies={lanes:0,firstContext:t,_debugThenableState:null},e.flags|=524288}else xh=xh.next=t;return i}function ln(){return{controller:new Eh,data:new Map,refCount:0}}function cn(e){e.controller.signal.aborted,e.refCount++}function An(e){e.refCount--,e.refCount,0===e.refCount&&Ch(Bh,function(){e.controller.abort()})}function un(){var e=yh.current;return null!==e?e:ng.pooledCache}function dn(e,t){M(yh,null===t?yh.current:t.pool,e)}function hn(){var e=un();return null===e?null:{parent:Ja?bh._currentValue:bh._currentValue2,pool:e}}function gn(e){e.flags|=4}function fn(e,t){if(null!==e&&e.child===t.child)return!1;if(16&t.flags)return!0;for(e=t.child;null!==e;){if(13878&e.flags||13878&e.subtreeFlags)return!0;e=e.sibling}return!1}function pn(e,t,i,r){if(Wa)for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)Oa(e,i.stateNode);else if(!(4===i.tag||Pc&&27===i.tag)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else if(Ka)for(var n=t.child;null!==n;){if(5===n.tag){var o=n.stateNode;i&&r&&(o=jl(o,n.type,n.memoizedProps)),Oa(e,o)}else if(6===n.tag)o=n.stateNode,i&&r&&(o=Hl(o,n.memoizedProps)),Oa(e,o);else if(4!==n.tag)if(22===n.tag&&null!==n.memoizedState)null!==(o=n.child)&&(o.return=n),pn(e,n,!0,!0);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function mn(e,t,i,r){if(Ka)for(var n=t.child;null!==n;){if(5===n.tag){var o=n.stateNode;i&&r&&(o=jl(o,n.type,n.memoizedProps)),Ol(e,o)}else if(6===n.tag)o=n.stateNode,i&&r&&(o=Hl(o,n.memoizedProps)),Ol(e,o);else if(4!==n.tag)if(22===n.tag&&null!==n.memoizedState)null!==(o=n.child)&&(o.return=n),mn(e,n,!(null!==n.memoizedProps&&"manual"===n.memoizedProps.mode),!0);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function xn(e,t){if(Ka&&fn(e,t)){var i=(e=t.stateNode).containerInfo,r=Tl();mn(r,t,!1,!1),e.pendingChildren=r,gn(t),Fl(i,r)}}function En(e,t,i,r){if(Wa)e.memoizedProps!==r&&gn(t);else if(Ka){var n=e.stateNode,o=e.memoizedProps;if((e=fn(e,t))||o!==r){var s=ce();(o=Ul(n,i,o,r,!e,null))===n?t.stateNode=n:(Fa(o,i,r,s)&&gn(t),t.stateNode=o,e?pn(o,t,!1,!1):gn(t))}else t.stateNode=n}}function Cn(e,t,i){if(nl(t,i)){if(e.flags|=16777216,!ol(t,i)){if(!Jo())throw yu=Iu,bu;e.flags|=8192}}else e.flags&=-16777217}function Bn(e,t){if(Nc(t)){if(e.flags|=16777216,!kc(t)){if(!Jo())throw yu=Iu,bu;e.flags|=8192}}else e.flags&=-16777217}function bn(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?O():536870912,e.lanes|=t,Qg|=t)}function In(e,t){if(!QA)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yn(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,r=0;if(t)if((2&e.mode)!==MA){for(var n=e.selfBaseDuration,o=e.child;null!==o;)i|=o.lanes|o.childLanes,r|=31457280&o.subtreeFlags,r|=31457280&o.flags,n+=o.treeBaseDuration,o=o.sibling;e.treeBaseDuration=n}else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=31457280&n.subtreeFlags,r|=31457280&n.flags,n.return=e,n=n.sibling;else if((2&e.mode)!==MA){n=e.actualDuration,o=e.selfBaseDuration;for(var s=e.child;null!==s;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,n+=s.actualDuration,o+=s.treeBaseDuration,s=s.sibling;e.actualDuration=n,e.treeBaseDuration=o}else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function vn(e,t,i){var r=t.pendingProps;switch(se(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return yn(t),null;case 3:return i=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Zr(bh),le(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Me(t)?(Le(),gn(t)):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==kA&&(To(kA),kA=null))),xn(e,t),yn(t),null;case 26:if(xc){i=t.type;var n=t.memoizedState;return null===e?(gn(t),null!==n?(yn(t),Bn(t,n)):(yn(t),Cn(t,i,r))):n?n!==e.memoizedState?(gn(t),yn(t),Bn(t,n)):(yn(t),t.flags&=-16777217):(Wa?e.memoizedProps!==r&&gn(t):En(e,t,i,r),yn(t),Cn(t,i,r)),null}case 27:if(Pc){if(ue(t),i=bA.current,n=t.type,null!==e&&null!=t.stateNode)Wa?e.memoizedProps!==r&&gn(t):En(e,t,n,r);else{if(!r){if(null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return yn(t),null}e=ce(),Me(t)?Se(t,e):(e=Mc(n,r,i,e,!0),t.stateNode=e,gn(t))}return yn(t),null}case 5:if(ue(t),i=t.type,null!==e&&null!=t.stateNode)En(e,t,i,r);else{if(!r){if(null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return yn(t),null}e=ce(),Me(t)?Se(t,e):(n=bA.current,pn(n=Ta(i,r,n,e,t),t,!1,!1),t.stateNode=n,Fa(n,i,r,e)&&gn(t))}return yn(t),Cn(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)i=e.memoizedProps,Wa?i!==r&&gn(t):Ka&&(i!==r?(e=bA.current,i=ce(),t.stateNode=ja(r,e,i,t),gn(t)):t.stateNode=e.stateNode);else{if("string"!=typeof r&&null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");if(e=bA.current,i=ce(),Me(t)){if(!Ya)throw Error("Expected prepareToHydrateHostTextInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.");e=t.stateNode,i=t.memoizedProps,n=!DA,r=null;var o=vA;if(null!==o)switch(o.tag){case 3:n&&null!==(n=gc(e,i,r))&&(De(t,0).serverProps=n);break;case 27:case 5:r=o.memoizedProps,n&&null!==(n=gc(e,i,r))&&(De(t,0).serverProps=n)}oc(e,i,t,r)||ke(t)}else t.stateNode=ja(r,e,i,t)}return yn(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=Me(t),null!==r&&null!==r.dehydrated){if(null===e){if(!n)throw Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(!Ya)throw Error("Expected prepareToHydrateHostSuspenseInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.");if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");sc(n,t),yn(t),(2&t.mode)!==MA&&null!==r&&null!==(n=t.child)&&(t.treeBaseDuration-=n.treeBaseDuration)}else Le(),Ve(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4,yn(t),(2&t.mode)!==MA&&null!==r&&null!==(n=t.child)&&(t.treeBaseDuration-=n.treeBaseDuration);n=!1}else null!==kA&&(To(kA),kA=null),n=!0;if(!n)return 256&t.flags?(Tt(t),t):(Tt(t),null)}return Tt(t),128&t.flags?(t.lanes=i,(2&t.mode)!==MA&&qe(t),t):(i=null!==r,e=null!==e&&null!==e.memoizedState,i&&(n=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(n=r.alternate.memoizedState.cachePool.pool),o=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==n&&(r.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),bn(t,t.updateQueue),yn(t),(2&t.mode)!==MA&&i&&null!==(e=t.child)&&(t.treeBaseDuration-=e.treeBaseDuration),null);case 4:return le(),xn(e,t),null===e&&Za(t.stateNode.containerInfo),yn(t),null;case 10:return Zr(t.type),yn(t),null;case 19:if(P(sd),null===(n=t.memoizedState))return yn(t),null;if(r=!!(128&t.flags),null===(o=n.rendering))if(r)In(n,!1);else{if(bg!==Yh||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=Ot(e))){for(t.flags|=128,In(n,!1),e=o.updateQueue,t.updateQueue=e,bn(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)ks(i,e),i=i.sibling;return M(sd,sd.current&nd|od,t),t.child}e=e.sibling}null!==n.tail&&qc()>Mg&&(t.flags|=128,r=!0,In(n,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ot(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,bn(t,e),In(n,!0),null===n.tail&&"hidden"===n.tailMode&&!o.alternate&&!QA)return yn(t),null}else 2*qc()-n.renderingStartTime>Mg&&536870912!==i&&(t.flags|=128,r=!0,In(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=n.last)?e.sibling=o:t.child=o,n.last=o)}return null!==n.tail?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=qc(),e.sibling=null,i=sd.current,M(sd,i=r?i&nd|od:i&nd,t),e):(yn(t),null);case 22:case 23:return Tt(t),_t(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&i)&&!(128&t.flags)&&(yn(t),6&t.subtreeFlags&&(t.flags|=8192)):yn(t),null!==(i=t.updateQueue)&&bn(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),null!==e&&P(yh),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Zr(bh),yn(t),null;case 25:return null}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function wn(e,t){switch(se(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,(2&t.mode)!==MA&&qe(t),t):null;case 3:return Zr(bh),le(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ue(t),null;case 13:if(Tt(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Ve()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,(2&t.mode)!==MA&&qe(t),t):null;case 19:return P(sd),null;case 4:return le(),null;case 10:return Zr(t.type),null;case 22:case 23:return Tt(t),_t(),null!==e&&P(yh),65536&(e=t.flags)?(t.flags=-65537&e|128,(2&t.mode)!==MA&&qe(t),t):null;case 24:return Zr(bh),null;default:return null}}function Qn(e,t){switch(se(t),t.tag){case 3:Zr(bh),le();break;case 26:case 27:case 5:ue(t);break;case 4:le();break;case 13:Tt(t);break;case 19:P(sd);break;case 10:Zr(t.type);break;case 22:case 23:Tt(t),_t(),null!==e&&P(yh);break;case 24:Zr(bh)}}function Dn(e){return(2&e.mode)!==MA}function Nn(e,t){Dn(e)?(Ye(),Sn(t,e),Ke()):Sn(t,e)}function kn(e,t,i){Dn(e)?(Ye(),Pn(i,e,t),Ke()):Pn(i,e,t)}function Sn(e,t){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var n=r.next;i=n;do{var o;if((i.tag&e)===e&&((e&ud)!==ad?null!==sA&&"function"==typeof sA.markComponentPassiveEffectMountStarted&&sA.markComponentPassiveEffectMountStarted(t):(e&Ad)!==ad&&null!==sA&&"function"==typeof sA.markComponentLayoutEffectMountStarted&&sA.markComponentLayoutEffectMountStarted(t),r=void 0,r=y(t,Ou,i),(e&ud)!==ad?null!==sA&&"function"==typeof sA.markComponentPassiveEffectMountStopped&&sA.markComponentPassiveEffectMountStopped():(e&Ad)!==ad&&null!==sA&&"function"==typeof sA.markComponentLayoutEffectMountStopped&&sA.markComponentLayoutEffectMountStopped(),void 0!==r&&"function"!=typeof r))y(t,function(e,t){},o=0!==(i.tag&Ad)?"useLayoutEffect":0!==(i.tag&cd)?"useInsertionEffect":"useEffect",null===r?" You returned null. If your effect does not require clean up, return undefined (or nothing).":"function"==typeof r.then?"\n\nIt looks like you wrote "+o+"(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:\n\n"+o+"(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://react.dev/link/hooks-data-fetching":" You returned: "+r);i=i.next}while(i!==n)}}catch(s){us(t,t.return,s)}}function Pn(e,t,i){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var o=n.next;r=o;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;void 0!==a&&(s.destroy=void 0,(e&ud)!==ad?null!==sA&&"function"==typeof sA.markComponentPassiveEffectUnmountStarted&&sA.markComponentPassiveEffectUnmountStarted(t):(e&Ad)!==ad&&null!==sA&&"function"==typeof sA.markComponentLayoutEffectUnmountStarted&&sA.markComponentLayoutEffectUnmountStarted(t),y(t,Gu,t,i,a),(e&ud)!==ad?null!==sA&&"function"==typeof sA.markComponentPassiveEffectUnmountStopped&&sA.markComponentPassiveEffectUnmountStopped():(e&Ad)!==ad&&null!==sA&&"function"==typeof sA.markComponentLayoutEffectUnmountStopped&&sA.markComponentLayoutEffectUnmountStopped())}r=r.next}while(r!==o)}}catch(l){us(t,t.return,l)}}function Mn(e,t){Dn(e)?(Ye(),Sn(t,e),Ke()):Sn(t,e)}function Vn(e,t,i){Dn(e)?(Ye(),Pn(i,e,t),Ke()):Pn(i,e,t)}function _n(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;e.type.defaultProps||"ref"in e.memoizedProps||lh||(i.props,e.memoizedProps,i.state,e.memoizedState);try{y(e,xt,t,i)}catch(r){us(e,e.return,r)}}}function Ln(e,t,i){return e.getSnapshotBeforeUpdate(t,i)}function Rn(e,t){var i=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e.type.defaultProps||"ref"in e.memoizedProps||lh||(t.props,e.memoizedProps,t.state,e.memoizedState);try{var n=y(e,Ln,t,Er(e.type,i,(e.elementType,e.type)),r);i=vh,void 0!==n||i.has(e.type)||(i.add(e.type),y(e,function(){})),t.__reactInternalSnapshotBeforeUpdate=n}catch(o){us(e,e.return,o)}}function Un(e,t,i){i.props=Er(e.type,e.memoizedProps),i.state=e.memoizedState,Dn(e)?(Ye(),y(e,Uu,e,t,i),Ke()):y(e,Uu,e,t,i)}function Tn(e){var t=e.ref;if(null!==t){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:i=Va(i)}if("function"==typeof t)if(Dn(e))try{Ye(),e.refCleanup=t(i)}finally{Ke()}else e.refCleanup=t(i);else"string"==typeof t||t.hasOwnProperty("current"),t.current=i}}function On(e,t){try{y(e,Tn,e)}catch(i){us(e,t,i)}}function Fn(e,t){var i=e.ref,r=e.refCleanup;if(null!==i)if("function"==typeof r)try{if(Dn(e))try{Ye(),y(e,r)}finally{Ke()}else y(e,r)}catch(n){us(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof i)try{if(Dn(e))try{Ye(),y(e,i,null)}finally{Ke()}else y(e,i,null)}catch(o){us(e,t,o)}else i.current=null}function Gn(e,t,i,r){var n=e.memoizedProps,o=n.id,s=n.onCommit;n=n.onRender,t=null===t?"mount":"update",FA&&(t="nested-update"),"function"==typeof n&&n(o,t,e.actualDuration,e.treeBaseDuration,e.actualStartTime,i),"function"==typeof s&&s(e.memoizedProps.id,t,r,i)}function jn(e,t,i,r){var n=e.memoizedProps;e=n.id,n=n.onPostCommit,t=null===t?"mount":"update",FA&&(t="nested-update"),"function"==typeof n&&n(e,t,r,i)}function Hn(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{y(e,wl,r,t,i,e)}catch(n){us(e,e.return,n)}}function Xn(e,t,i){try{y(e,Ql,e.stateNode,e.type,i,t,e)}catch(r){us(e,e.return,r)}}function zn(e){return 5===e.tag||3===e.tag||!!xc&&26===e.tag||!!Pc&&27===e.tag||4===e.tag}function Jn(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||zn(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(!Pc||27!==e.tag)&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Wn(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?Nl(i,e,t):yl(i,e);else if(!(4===r||Pc&&27===r)&&null!==(e=e.child))for(Wn(e,t,i),e=e.sibling;null!==e;)Wn(e,t,i),e=e.sibling}function Kn(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?Dl(i,e,t):Il(i,e);else if(!(4===r||Pc&&27===r)&&null!==(e=e.child))for(Kn(e,t,i),e=e.sibling;null!==e;)Kn(e,t,i),e=e.sibling}function Yn(e){if(Wa&&(!Pc||27!==e.tag)){e:{for(var t=e.return;null!==t;){if(zn(t)){var i=t;break e}t=t.return}throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}switch(i.tag){case 27:if(Pc){t=i.stateNode,Kn(e,i=Jn(e),t);break}case 5:t=i.stateNode,32&i.flags&&(Pl(t),i.flags&=-33),Kn(e,i=Jn(e),t);break;case 3:case 4:t=i.stateNode.containerInfo,Wn(e,i=Jn(e),t);break;default:throw Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}}function qn(e,t,i){e=e.containerInfo;try{y(t,Gl,e,i)}catch(r){us(t,t.return,r)}}function Zn(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:lo(e,i),4&r&&Nn(i,Ad|ld);break;case 1:if(lo(e,i),4&r)if(e=i.stateNode,null===t)i.type.defaultProps||"ref"in i.memoizedProps||lh||(e.props,i.memoizedProps,e.state,i.memoizedState),Dn(i)?(Ye(),y(i,Su,i,e),Ke()):y(i,Su,i,e);else{var n=Er(i.type,t.memoizedProps);t=t.memoizedState,i.type.defaultProps||"ref"in i.memoizedProps||lh||(e.props,i.memoizedProps,e.state,i.memoizedState),Dn(i)?(Ye(),y(i,Vu,i,e,n,t,e.__reactInternalSnapshotBeforeUpdate),Ke()):y(i,Vu,i,e,n,t,e.__reactInternalSnapshotBeforeUpdate)}64&r&&_n(i),512&r&&On(i,i.return);break;case 3:if(t=je(),lo(e,i),64&r&&null!==(r=i.updateQueue)){if(n=null,null!==i.child)switch(i.child.tag){case 27:case 5:n=Va(i.child.stateNode);break;case 1:n=i.child.stateNode}try{y(i,xt,r,n)}catch(a){us(i,i.return,a)}}e.effectDuration+=He(t);break;case 26:if(xc){lo(e,i),512&r&&On(i,i.return);break}case 27:case 5:lo(e,i),null===t&&4&r&&Hn(i),512&r&&On(i,i.return);break;case 12:if(4&r){r=je(),lo(e,i),(e=i.stateNode).effectDuration+=Xe(r);try{y(i,Gn,i,t,UA,e.effectDuration)}catch(a){us(i,i.return,a)}}else lo(e,i);break;case 13:lo(e,i),4&r&&io(e,i);break;case 22:if(!(n=null!==i.memoizedState||wh)){t=null!==t&&null!==t.memoizedState||Qh;var o=wh,s=Qh;wh=n,(Qh=t)&&!s?ho(e,i,!!(8772&i.subtreeFlags)):lo(e,i),wh=o,Qh=s}512&r&&("manual"===i.memoizedProps.mode?On(i,i.return):Fn(i,i.return));break;default:lo(e,i)}}function $n(e){var t=e.alternate;null!==t&&(e.alternate=null,$n(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&rl(t),e.stateNode=null,e._debugOwner=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eo(e,t,i){for(i=i.child;null!==i;)to(e,t,i),i=i.sibling}function to(e,t,i){if(oA&&"function"==typeof oA.onCommitFiberUnmount)try{oA.onCommitFiberUnmount(nA,i)}catch(o){aA||(aA=!0)}switch(i.tag){case 26:if(xc){Qh||Fn(i,t),eo(e,t,i),i.memoizedState?Ic(i.memoizedState):i.stateNode&&wc(i.stateNode);break}case 27:if(Pc){Qh||Fn(i,t);var r=Vh,n=_h;Vh=i.stateNode,eo(e,t,i),Lc(i.stateNode),Vh=r,_h=n;break}case 5:Qh||Fn(i,t);case 6:if(Wa){if(r=Vh,n=_h,Vh=null,eo(e,t,i),_h=n,null!==(Vh=r))if(_h)try{y(i,Sl,Vh,i.stateNode)}catch(s){us(i,t,s)}else try{y(i,kl,Vh,i.stateNode)}catch(s){us(i,t,s)}}else eo(e,t,i);break;case 18:Wa&&null!==Vh&&(_h?uc(Vh,i.stateNode):Ac(Vh,i.stateNode));break;case 4:Wa?(r=Vh,n=_h,Vh=i.stateNode.containerInfo,_h=!0,eo(e,t,i),Vh=r,_h=n):(Ka&&qn(i.stateNode,i,Tl()),eo(e,t,i));break;case 0:case 11:case 14:case 15:Qh||Pn(cd,i,t),Qh||kn(i,t,Ad),eo(e,t,i);break;case 1:Qh||(Fn(i,t),"function"==typeof(r=i.stateNode).componentWillUnmount&&Un(i,t,r)),eo(e,t,i);break;case 21:eo(e,t,i);break;case 22:Qh||Fn(i,t),Qh=(r=Qh)||null!==i.memoizedState,eo(e,t,i),Qh=r;break;default:eo(e,t,i)}}function io(e,t){if(Ya&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{y(t,cc,e)}catch(i){us(t,t.return,i)}}function ro(e,t){var i=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Nh),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Nh),t;default:throw Error("Unexpected Suspense handler tag ("+e.tag+"). This is a bug in React.")}}(e);t.forEach(function(t){var r=ps.bind(null,e,t);if(!i.has(t)){if(i.add(t),lA){if(null===Sh||null===Ph)throw Error("Expected finished root and lanes to be set. This is a bug in React.");Bs(Ph,Sh)}t.then(r,r)}})}function no(e,t){var i=t.deletions;if(null!==i)for(var r=0;r<i.length;r++){var n=e,o=t,s=i[r];if(Wa){var a=o;e:for(;null!==a;){switch(a.tag){case 27:case 5:Vh=a.stateNode,_h=!1;break e;case 3:case 4:Vh=a.stateNode.containerInfo,_h=!0;break e}a=a.return}if(null===Vh)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");to(n,o,s),Vh=null,_h=!1}else to(n,o,s);null!==(o=(n=s).alternate)&&(o.return=null),n.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)oo(t,e),t=t.sibling}function oo(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:no(t,e),so(e),4&r&&(Pn(cd|ld,e,e.return),Sn(cd|ld,e),kn(e,e.return,Ad|ld));break;case 1:no(t,e),so(e),512&r&&(Qh||null===i||Fn(i,i.return)),64&r&&wh&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?r:i.concat(r));break;case 26:if(xc){var n=Lh;no(t,e),so(e),512&r&&(Qh||null===i||Fn(i,i.return)),4&r&&(r=null!==i?i.memoizedState:null,t=e.memoizedState,null===i?null===t?null===e.stateNode?e.stateNode=yc(n,e.type,e.memoizedProps,e):vc(n,e.type,e.stateNode):e.stateNode=bc(n,t,e.memoizedProps):r!==t?(null===r?null!==i.stateNode&&wc(i.stateNode):Ic(r),null===t?vc(n,e.type,e.stateNode):bc(n,t,e.memoizedProps)):null===t&&null!==e.stateNode&&Xn(e,e.memoizedProps,i.memoizedProps));break}case 27:if(Pc&&4&r&&null===e.alternate){n=e.stateNode;var o=e.memoizedProps;try{Vc(n),y(e,_c,e.type,o,n,e)}catch(A){us(e,e.return,A)}}case 5:if(no(t,e),so(e),512&r&&(Qh||null===i||Fn(i,i.return)),Wa){if(32&e.flags){t=e.stateNode;try{y(e,Pl,t)}catch(A){us(e,e.return,A)}}4&r&&null!=e.stateNode&&Xn(e,t=e.memoizedProps,null!==i?i.memoizedProps:t),1024&r&&(Dh=!0,e.type)}break;case 6:if(no(t,e),so(e),4&r&&Wa){if(null===e.stateNode)throw Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");r=e.memoizedProps,i=null!==i?i.memoizedProps:r,t=e.stateNode;try{y(e,vl,t,i,r)}catch(A){us(e,e.return,A)}}break;case 3:if(n=je(),xc?(Dc(),o=Lh,Lh=Cc(t.containerInfo),no(t,e),Lh=o):no(t,e),so(e),4&r){if(Wa&&Ya&&null!==i&&i.memoizedState.isDehydrated)try{y(e,lc,t.containerInfo)}catch(A){us(e,e.return,A)}if(Ka){r=t.containerInfo,i=t.pendingChildren;try{y(e,Gl,r,i)}catch(A){us(e,e.return,A)}}}Dh&&(Dh=!1,ao(e)),t.effectDuration+=He(n);break;case 4:xc?(i=Lh,Lh=Cc(e.stateNode.containerInfo),no(t,e),so(e),Lh=i):(no(t,e),so(e)),4&r&&Ka&&qn(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:r=je(),no(t,e),so(e),e.stateNode.effectDuration+=Xe(r);break;case 13:no(t,e),so(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==i&&null!==i.memoizedState)&&(Sg=qc()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,ro(e,r));break;case 22:512&r&&(Qh||null===i||Fn(i,i.return)),n=null!==e.memoizedState;var s=null!==i&&null!==i.memoizedState,a=wh,l=Qh;if(wh=a||n,Qh=l||s,no(t,e),Qh=l,wh=a,so(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=n?-2&t._visibility:1|t._visibility,n&&(t=wh||Qh,null===i||s||t||Ao(e)),Wa&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode)))e:if(i=null,Wa)for(t=e;;){if(5===t.tag||xc&&26===t.tag||Pc&&27===t.tag){if(null===i){s=i=t;try{o=s.stateNode,n?y(s,Ml,o):y(s,_l,s.stateNode,s.memoizedProps)}catch(A){us(s,s.return,A)}}}else if(6===t.tag){if(null===i){s=t;try{var c=s.stateNode;n?y(s,Vl,c):y(s,Ll,c,s.memoizedProps)}catch(A){us(s,s.return,A)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(i=r.retryQueue)&&(r.retryQueue=null,ro(e,i));break;case 19:no(t,e),so(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,ro(e,r));break;case 21:break;default:no(t,e),so(e)}}function so(e){var t=e.flags;if(2&t){try{y(e,Yn,e)}catch(i){us(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ao(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ao(t),5===t.tag&&1024&t.flags&&ul(t.stateNode),e=e.sibling}}function lo(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Zn(e,t.alternate,t),t=t.sibling}function co(e){switch(e.tag){case 0:case 11:case 14:case 15:kn(e,e.return,Ad),Ao(e);break;case 1:Fn(e,e.return);var t=e.stateNode;"function"==typeof t.componentWillUnmount&&Un(e,e.return,t),Ao(e);break;case 26:case 27:case 5:Fn(e,e.return),Ao(e);break;case 22:Fn(e,e.return),null===e.memoizedState&&Ao(e);break;default:Ao(e)}}function Ao(e){for(e=e.child;null!==e;)co(e),e=e.sibling}function uo(e,t,i,r){var n=i.flags;switch(i.tag){case 0:case 11:case 15:ho(e,i,r),Nn(i,Ad);break;case 1:if(ho(e,i,r),"function"==typeof(t=i.stateNode).componentDidMount&&y(i,Su,i,t),null!==(t=i.updateQueue)){e=i.stateNode;try{y(i,mt,t,e)}catch(o){us(i,i.return,o)}}r&&64&n&&_n(i),On(i,i.return);break;case 26:case 27:case 5:ho(e,i,r),r&&null===t&&4&n&&Hn(i),On(i,i.return);break;case 12:if(r&&4&n){n=je(),ho(e,i,r),(r=i.stateNode).effectDuration+=Xe(n);try{y(i,Gn,i,t,UA,r.effectDuration)}catch(o){us(i,i.return,o)}}else ho(e,i,r);break;case 13:ho(e,i,r),r&&4&n&&io(e,i);break;case 22:null===i.memoizedState&&ho(e,i,r),On(i,i.return);break;default:ho(e,i,r)}}function ho(e,t,i){for(i=i&&!!(8772&t.subtreeFlags),t=t.child;null!==t;)uo(e,t.alternate,t,i),t=t.sibling}function go(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&cn(e),null!=i&&An(i))}function fo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(cn(t),null!=e&&An(e))}function po(e,t,i,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)mo(e,t,i,r),t=t.sibling}function mo(e,t,i,r){var n=t.flags;switch(t.tag){case 0:case 11:case 15:po(e,t,i,r),2048&n&&Mn(t,ud|ld);break;case 3:var o=je();po(e,t,i,r),2048&n&&(i=null,null!==t.alternate&&(i=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==i&&(cn(t),null!=i&&An(i))),e.passiveEffectDuration+=He(o);break;case 12:if(2048&n){o=je(),po(e,t,i,r),(e=t.stateNode).passiveEffectDuration+=Xe(o);try{y(t,jn,t,t.alternate,UA,e.passiveEffectDuration)}catch(s){us(t,t.return,s)}}else po(e,t,i,r);break;case 23:break;case 22:o=t.stateNode,null!==t.memoizedState?4&o._visibility?po(e,t,i,r):Co(e,t):4&o._visibility?po(e,t,i,r):(o._visibility|=4,xo(e,t,i,r,!!(10256&t.subtreeFlags))),2048&n&&go(t.alternate,t);break;case 24:po(e,t,i,r),2048&n&&fo(t.alternate,t);break;default:po(e,t,i,r)}}function xo(e,t,i,r,n){for(n=n&&!!(10256&t.subtreeFlags),t=t.child;null!==t;)Eo(e,t,i,r,n),t=t.sibling}function Eo(e,t,i,r,n){var o=t.flags;switch(t.tag){case 0:case 11:case 15:xo(e,t,i,r,n),Mn(t,ud);break;case 23:break;case 22:var s=t.stateNode;null!==t.memoizedState?4&s._visibility?xo(e,t,i,r,n):Co(e,t):(s._visibility|=4,xo(e,t,i,r,n)),n&&2048&o&&go(t.alternate,t);break;case 24:xo(e,t,i,r,n),n&&2048&o&&fo(t.alternate,t);break;default:xo(e,t,i,r,n)}}function Co(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,r=t,n=r.flags;switch(r.tag){case 22:Co(i,r),2048&n&&go(r.alternate,r);break;case 24:Co(i,r),2048&n&&fo(r.alternate,r);break;default:Co(i,r)}t=t.sibling}}function Bo(e){if(e.subtreeFlags&Rh)for(e=e.child;null!==e;)bo(e),e=e.sibling}function bo(e){switch(e.tag){case 26:Bo(e),e.flags&Rh&&(null!==e.memoizedState?Sc(Lh,e.memoizedState,e.memoizedProps):al(e.type,e.memoizedProps));break;case 5:Bo(e),e.flags&Rh&&al(e.type,e.memoizedProps);break;case 3:case 4:if(xc){var t=Lh;Lh=Cc(e.stateNode.containerInfo),Bo(e),Lh=t}else Bo(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Rh,Rh=16777216,Bo(e),Rh=t):Bo(e));break;default:Bo(e)}}function Io(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function yo(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];kh=r,Do(r,e)}Io(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)vo(e),e=e.sibling}function vo(e){switch(e.tag){case 0:case 11:case 15:yo(e),2048&e.flags&&Vn(e,e.return,ud|ld);break;case 3:var t=je();yo(e),e.stateNode.passiveEffectDuration+=He(t);break;case 12:t=je(),yo(e),e.stateNode.passiveEffectDuration+=Xe(t);break;case 22:t=e.stateNode,null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,wo(e)):yo(e);break;default:yo(e)}}function wo(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];kh=r,Do(r,e)}Io(e)}for(e=e.child;null!==e;)Qo(e),e=e.sibling}function Qo(e){switch(e.tag){case 0:case 11:case 15:Vn(e,e.return,ud),wo(e);break;case 22:var t=e.stateNode;4&t._visibility&&(t._visibility&=-5,wo(e));break;default:wo(e)}}function Do(e,t){for(;null!==kh;){var i=kh,r=i;switch(r.tag){case 0:case 11:case 15:Vn(r,t,ud);break;case 23:case 22:null!==r.memoizedState&&null!==r.memoizedState.cachePool&&null!=(r=r.memoizedState.cachePool.pool)&&cn(r);break;case 24:An(r.memoizedState.cache)}if(null!==(r=i.child))r.return=i,kh=r;else e:for(i=e;null!==kh;){var n=(r=kh).sibling,o=r.return;if($n(r),r===i){kh=null;break e}if(null!==n){n.return=o,kh=n;break e}kh=o}}}function No(e){var t=qa(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error("Invalid host root specified. Should be either a React container or a node with a testname attribute.");return t}if(null===(e=pl(e)))throw Error("Could not find React container within specified host subtree.");return e.stateNode.current}function ko(e,t){var i=e.tag;switch(t.$$typeof){case Th:if(e.type===t.value)return!0;break;case Oh:e:{for(t=t.value,e=[e,0],i=0;i<e.length;){var r=e[i++],n=r.tag,o=e[i++],s=t[o];if(5!==n&&26!==n&&27!==n||!El(r)){for(;null!=s&&ko(r,s);)s=t[++o];if(o===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,o),r=r.sibling}}t=!1}return t;case Fh:if((5===i||26===i||27===i)&&Cl(e.stateNode,t.value))return!0;break;case jh:if((5===i||6===i||26===i||27===i)&&null!==(e=xl(e))&&0<=e.indexOf(t.value))return!0;break;case Gh:if((5===i||26===i||27===i)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error("Invalid selector type specified.")}return!1}function So(e){switch(e.$$typeof){case Th:return"<"+(p(e.value)||"Unknown")+">";case Oh:return":has("+(So(e)||"")+")";case Fh:return'[role="'+e.value+'"]';case jh:return'"'+e.value+'"';case Gh:return'[data-testname="'+e.value+'"]';default:throw Error("Invalid selector type specified.")}}function Po(e,t){var i=[];e=[e,0];for(var r=0;r<e.length;){var n=e[r++],o=n.tag,s=e[r++],a=t[s];if(5!==o&&26!==o&&27!==o||!El(n)){for(;null!=a&&ko(n,a);)a=t[++s];if(s===t.length)i.push(n);else for(n=n.child;null!==n;)e.push(n,s),n=n.sibling}}return i}function Mo(e,t){if(!fl)throw Error("Test selector API is not supported by this renderer.");e=Po(e=No(e),t),t=[],e=Array.from(e);for(var i=0;i<e.length;){var r=e[i++],n=r.tag;if(5===n||26===n||27===n)El(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}function Vo(){var e="undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?IS_REACT_ACT_ENVIRONMENT:void 0;return e||ba.actQueue,e}function _o(e){if((rg&Wh)!==Jh&&0!==sg)return sg&-sg;var t=ba.T;return null!==t?(t._updatedFibers||(t._updatedFibers=new Set),t._updatedFibers.add(e),0!==(e=$A)?e:st()):tl()}function Lo(){0===wg&&(wg=536870912&sg&&!QA?536870912:T());var e=id.current;return null!==e&&(e.flags|=32),wg}function Ro(e,t,i){if(Xg&&(zg=!0),(e===ng&&pg===cg||null!==e.cancelPendingCommit)&&(Xo(e,0),Go(e,sg,wg,!1)),G(e,i),0!==(rg&Wh)&&e===ng){if(Na)switch(t.tag){case 0:case 11:case 15:e=og&&m(og)||"Unknown",tf.has(e)||(tf.add(e),t=m(t)||"Unknown");break;case 1:ef||(ef=!0)}}else lA&&X(e,t,i),function(e){Vo()&&null===ba.actQueue&&y(e,function(){})}(t),e===ng&&((rg&Wh)===Jh&&(yg|=i),bg===eg&&Go(e,sg,wg,!1)),Ze(e)}function Uo(e,t,i){if((rg&(Wh|Kh))!==Jh)throw Error("Should not already be working.");for(var r=!i&&!(60&t)&&0===(t&e.expiredLanes)||R(e,t),n=r?function(e,t){var i=rg;rg|=Wh;var r=Wo(),n=Ko();if(ng!==e||sg!==t){if(lA){var o=e.memoizedUpdaters;0<o.size&&(Bs(e,sg),o.clear()),z(e,t)}_g=null,Mg=qc()+Vg,Xo(e,t)}else Eg=R(e,t);$(t);e:for(;;)try{if(pg!==ag&&null!==og)t:switch(t=og,o=mg,pg){case lg:pg=ag,mg=null,rs(e,t,o,lg);break;case cg:if(Ct(o)){pg=ag,mg=null,ts(t);break}t=function(){pg===cg&&ng===e&&(pg=gg),Ze(e)},o.then(t,t);break e;case Ag:pg=gg;break e;case ug:pg=dg;break e;case gg:Ct(o)?(pg=ag,mg=null,ts(t)):(pg=ag,mg=null,rs(e,t,o,gg));break;case dg:var s=null;switch(og.tag){case 26:s=og.memoizedState;case 5:case 27:var a=og,l=a.type,c=a.pendingProps;if(s?kc(s):ol(l,c)){pg=ag,mg=null;var A=a.sibling;if(null!==A)og=A;else{var u=a.return;null!==u?(og=u,ns(u)):og=null}break t}}pg=ag,mg=null,rs(e,t,o,dg);break;case hg:pg=ag,mg=null,rs(e,t,o,hg);break;case fg:Ho(),bg=ig;break e;default:throw Error("Unexpected SuspendedReason. This is a bug in React.")}null!==ba.actQueue?Zo():$o();break}catch(d){zo(e,d)}return Yr(),ba.H=r,ba.A=n,rg=i,null!==og?(null!==sA&&"function"==typeof sA.markRenderYielded&&sA.markRenderYielded(),Yh):(ee(),ng=null,sg=0,Re(),bg)}(e,t):qo(e,t,!0),o=r;;){if(n===Yh){Eg&&!r&&Go(e,t,0,!1);break}if(n===ig)Go(e,t,0,!xg);else{if(i=e.current.alternate,o&&!Fo(i)){n=qo(e,t,!1),o=!1;continue}if(n===Zh){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!=(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{n=e;var a=s;s=Dg;var l=Ya&&n.current.memoizedState.isDehydrated;if(l&&(Xo(n,a).flags|=256),(a=qo(n,a,!1))!==Zh){if(Cg&&!l){n.errorRecoveryDisabledLanes|=o,yg|=o,n=eg;break e}n=Ng,Ng=s,null!==n&&To(n)}n=a}if(o=!1,n!==Zh)continue}}if(n===qh){Xo(e,0),Go(e,t,0,!0);break}e:{switch(r=e,n){case Yh:case qh:throw Error("Root did not complete. This is a bug in React.");case eg:if((4194176&t)===t){Go(r,t,wg,!xg);break e}break;case Zh:Ng=null;break;case $h:case tg:break;default:throw Error("Unknown root exit status.")}if(r.finishedWork=i,r.finishedLanes=t,null!==ba.actQueue)ss(r,Ng,_g,kg,wg,yg,Qg);else{if((62914560&t)===t&&10<(n=Sg+Pg-qc())){if(Go(r,t,wg,!xg),0!==L(r,0))break e;r.timeoutHandle=Ha(Oo.bind(null,r,i,Ng,_g,kg,t,wg,yg,Qg,xg,Zg,-0,0),n);break e}Oo(r,i,Ng,_g,kg,t,wg,yg,Qg,xg,Yg,-0,0)}}}break}Ze(e)}function To(e){null===Ng?Ng=e:Ng.push.apply(Ng,e)}function Oo(e,t,i,r,n,o,s,a,l,c,A,u,d){var h=t.subtreeFlags;if((8192&h||!(16785408&~h))&&(sl(),bo(t),null!==(t=ll())))return e.cancelPendingCommit=t(ss.bind(null,e,i,r,n,s,a,l,qg,u,d)),void Go(e,o,s,!c);ss(e,i,r,n,s,a,l)}function Fo(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&null!==(i=t.updateQueue)&&null!==(i=i.stores))for(var r=0;r<i.length;r++){var n=i[r],o=n.getSnapshot;n=n.value;try{if(!cA(o(),n))return!1}catch(s){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Go(e,t,i,r){t&=~vg,t&=~yg,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var n=t;0<n;){var o=31-Gc(n),s=1<<o;r[o]=-1,n&=~s}0!==i&&j(e,i,t)}function jo(){return(rg&(Wh|Kh))!==Jh||($e(0),!1)}function Ho(){if(null!==og){if(pg===ag)var e=og.return;else e=og,Yr(),$t(e),Xu=null,zu=0,e=og;for(;null!==e;)Qn(e.alternate,e),e=e.return;og=null}}function Xo(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;i!==za&&(e.timeoutHandle=za,Xa(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),Ho(),ng=e,og=i=Ns(e.current,null),sg=t,pg=ag,mg=null,xg=!1,Eg=R(e,t),Cg=!1,bg=Yh,Qg=wg=vg=yg=Ig=0,Ng=Dg=null,kg=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var n=31-Gc(r),o=1<<n;t|=e[n],r&=~o}return Bg=t,Re(),Au.discardPendingWarnings(),i}function zo(e,t){md=null,ba.H=Md,ba.getCurrentStack=null,Na=!1,Da=null,t===Bu?(t=It(),pg=Ag):t===bu?(t=It(),pg=ug):pg=t===ih?fg:null!==t&&"object"==typeof t&&"function"==typeof t.then?hg:lg,mg=t;var i=og;if(null===i)bg=qh,Cr(e,ie(t,e.current));else switch(2&i.mode&&Je(i),Z(),pg){case lg:null!==sA&&"function"==typeof sA.markComponentErrored&&sA.markComponentErrored(i,t,sg);break;case cg:case Ag:case hg:case gg:null!==sA&&"function"==typeof sA.markComponentSuspended&&sA.markComponentSuspended(i,t,sg)}}function Jo(){var e=id.current;return null===e||((4194176&sg)===sg?null===rd:!!((62914560&sg)===sg||536870912&sg)&&e===rd)}function Wo(){var e=ba.H;return ba.H=Md,null===e?Md:e}function Ko(){var e=ba.A;return ba.A=Uh,e}function Yo(){bg=eg,xg||(4194176&sg)!==sg&&null!==id.current||(Eg=!0),!(134217727&Ig)&&!(134217727&yg)||null===ng||Go(ng,sg,wg,!1)}function qo(e,t,i){var r=rg;rg|=Wh;var n=Wo(),o=Ko();if(ng!==e||sg!==t){if(lA){var s=e.memoizedUpdaters;0<s.size&&(Bs(e,sg),s.clear()),z(e,t)}_g=null,Xo(e,t)}$(t),t=!1,s=bg;e:for(;;)try{if(pg!==ag&&null!==og){var a=og,l=mg;switch(pg){case fg:Ho(),s=ig;break e;case Ag:case cg:case hg:null===id.current&&(t=!0);var c=pg;if(pg=ag,mg=null,rs(e,a,l,c),i&&Eg){s=Yh;break e}break;default:c=pg,pg=ag,mg=null,rs(e,a,l,c)}}Zo(),s=bg;break}catch(A){zo(e,A)}return t&&e.shellSuspendCounter++,Yr(),rg=r,ba.H=n,ba.A=o,ee(),null===og&&(ng=null,sg=0,Re()),s}function Zo(){for(;null!==og;)es(og)}function $o(){for(;null!==og&&!Kc();)es(og)}function es(e){var t=e.alternate;(2&e.mode)!==MA?(ze(e),t=y(e,Kr,t,e,Bg),Je(e)):t=y(e,Kr,t,e,Bg),e.memoizedProps=e.pendingProps,null===t?ns(e):og=t}function ts(e){var t=y(e,is,e);e.memoizedProps=e.pendingProps,null===t?ns(e):og=t}function is(e){var t=e.alternate,i=(2&e.mode)!==MA;switch(i&&ze(e),e.tag){case 15:case 0:t=Mr(t,e,e.pendingProps,e.type,void 0,sg);break;case 11:t=Mr(t,e,e.pendingProps,e.type.render,e.ref,sg);break;case 5:$t(e);default:Qn(t,e),t=Kr(t,e=og=ks(e,Bg),Bg)}return i&&Je(e),t}function rs(e,t,i,r){Yr(),$t(t),Xu=null,zu=0;var n=t.return;try{if(function(e,t,i,r,n){if(i.flags|=32768,lA&&Bs(e,n),null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=i.alternate)&&tn(t,i,n,!0),QA&&(DA=!0),null!==(i=id.current)){switch(i.tag){case 13:return null===rd?Yo():null===i.alternate&&bg===Yh&&(bg=$h),i.flags&=-257,i.flags|=65536,i.lanes=n,r===Iu?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([r]):t.add(r),ds(e,r,n)),!1;case 22:return i.flags|=65536,r===Iu?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([r]):i.add(r),ds(e,r,n)),!1}throw Error("Unexpected Suspense handler tag ("+i.tag+"). This is a bug in React.")}return ds(e,r,n),Yo(),!1}if(QA)return DA=!0,null!==(t=id.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,r!==PA&&_e(ie(Error("There was an error while hydrating but React was able to recover by instead client rendering from the nearest Suspense boundary.",{cause:r}),i))):(r!==PA&&_e(ie(Error("There was an error while hydrating but React was able to recover by instead client rendering the entire root.",{cause:r}),i)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,r=ie(r,i),ht(e,n=br(e.stateNode,r,n)),bg!==eg&&(bg=Zh)),!1;var o=ie(Error("There was an error during concurrent rendering but React was able to recover by instead synchronously rendering the entire root.",{cause:r}),i);if(null===Dg?Dg=[o]:Dg.push(o),bg!==eg&&(bg=Zh),null===t)return!0;r=ie(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=n&-n,i.lanes|=e,ht(i,e=br(i.stateNode,r,e)),!1;case 1:if(t=i.type,o=i.stateNode,!(128&i.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==Lg&&Lg.has(o))))return i.flags|=65536,n&=-n,i.lanes|=n,yr(n=Ir(n),e,i,r),ht(i,n),!1}i=i.return}while(null!==i);return!1}(e,n,t,i,sg))return bg=qh,Cr(e,ie(i,e.current)),void(og=null)}catch(o){if(null!==n)throw og=n,o;return bg=qh,Cr(e,ie(i,e.current)),void(og=null)}32768&t.flags?(QA||r===lg?e=!0:Eg||536870912&sg?e=!1:(xg=e=!0,(r===cg||r===Ag||r===hg)&&null!==(r=id.current)&&13===r.tag&&(r.flags|=16384)),os(t,e)):ns(t)}function ns(e){var t=e;do{if(32768&t.flags)return void os(t,xg);var i=t.alternate;if(e=t.return,ze(t),i=y(t,vn,i,t,Bg),(2&t.mode)!==MA&&We(t),null!==i)return void(og=i);if(null!==(t=t.sibling))return void(og=t);og=t=e}while(null!==t);bg===Yh&&(bg=tg)}function os(e,t){do{var i=wn(e.alternate,e);if(null!==i)return i.flags&=32767,void(og=i);if((2&e.mode)!==MA){We(e),i=e.actualDuration;for(var r=e.child;null!==r;)i+=r.actualDuration,r=r.sibling;e.actualDuration=i}if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(og=e);og=e=i}while(null!==e);bg=ig,og=null}function ss(e,t,i,r,n,o,s,a,l,c){var A=ba.T,u=el();try{$a(2),ba.T=null,function(e,t,i,r,n,o,s,a){do{cs()}while(null!==Ug);if(Au.flushLegacyContextWarning(),Au.flushPendingUnsafeLifecycleWarnings(),(rg&(Wh|Kh))!==Jh)throw Error("Should not already be working.");var l=e.finishedWork;if(r=e.finishedLanes,null!==sA&&"function"==typeof sA.markCommitStarted&&sA.markCommitStarted(r),null===l)return Y(),null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c,A,u,d=l.lanes|l.childLanes;if(function(e,t,i,r,n,o){var s=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(i=s&~i;0<i;){var A=31-Gc(i),u=1<<A;a[A]=0,l[A]=-1;var d=c[A];if(null!==d)for(c[A]=null,A=0;A<d.length;A++){var h=d[A];null!==h&&(h.lane&=-536870913)}i&=~u}0!==r&&j(e,r,0),0!==o&&0===n&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,r,d|=LA,o,s,a),e===ng&&(og=ng=null,sg=0),!(10256&l.subtreeFlags)&&!(10256&l.flags)||Rg||(Rg=!0,Og=d,Fg=i,c=eA,A=function(){return cs(),null},null!==(u=ba.actQueue)?u.push(A):Jc(c,A)),UA=RA(),i=!!(15990&l.flags),15990&l.subtreeFlags||i?(i=ba.T,ba.T=null,o=el(),$a(2),s=rg,rg|=Kh,function(e,t){for(Ra(e.containerInfo),kh=t;null!==kh;)if(t=(e=kh).child,1028&e.subtreeFlags&&null!==t)t.return=e,kh=t;else for(;null!==kh;){var i=(t=e=kh).alternate,r=t.flags;switch(t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:1024&r&&null!==i&&Rn(t,i);break;case 3:1024&r&&Wa&&Rl(t.stateNode.containerInfo);break;default:if(1024&r)throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}if(null!==(t=e.sibling)){t.return=e.return,kh=t;break}kh=e.return}e=Mh,Mh=!1}(e,l),function(e,t,i){Sh=i,Ph=e,oo(t,e),Ph=Sh=null}(e,l,r),Ua(e.containerInfo),e.current=l,null!==sA&&"function"==typeof sA.markLayoutEffectsStarted&&sA.markLayoutEffectsStarted(r),function(e,t,i){Sh=i,Ph=t,Zn(t,e.alternate,e),Ph=Sh=null}(l,e,r),null!==sA&&"function"==typeof sA.markLayoutEffectsStopped&&sA.markLayoutEffectsStopped(),Yc(),rg=s,$a(o),ba.T=i):e.current=l,(i=Rg)?(Rg=!1,Ug=e,Tg=r):(ls(e,d),Wg=0,Kg=null),0===(d=e.pendingLanes)&&(Lg=null),i||Es(e),function(e,t){if(oA&&"function"==typeof oA.onCommitFiberRoot)try{var i=!(128&~e.current.flags);switch(t){case 2:var r=Zc;break;case 8:r=$c;break;case 32:default:r=eA;break;case 268435456:r=tA}oA.onCommitFiberRoot(nA,e,r,i)}catch(n){aA||(aA=!0)}}(l.stateNode,n),lA&&e.memoizedUpdaters.clear(),fl&&Xh.forEach(function(e){return e()}),Ze(e),null!==t)for(n=e.onRecoverableError,l=0;l<t.length;l++)d=t[l],i=as(d.stack),y(d.source,n,d.value,i);!!(3&Tg)&&cs(),d=e.pendingLanes,4194218&r&&42&d?(GA=!0,e===Hg?jg++:(jg=0,Hg=e)):jg=0,$e(0),Y()}(e,t,i,r,u,n,o,s)}finally{ba.T=A,$a(u)}}function as(e){return e={componentStack:e},Object.defineProperty(e,"digest",{get:function(){}}),e}function ls(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,An(t))}function cs(){if(null!==Ug){var e=Ug,t=Og;Og=0;var i=J(Tg),r=32>i?32:i;i=ba.T;var n=el();try{if($a(r),ba.T=null,null===Ug)var o=!1;else{r=Fg,Fg=null;var s=Ug,a=Tg;if(Ug=null,Tg=0,(rg&(Wh|Kh))!==Jh)throw Error("Cannot flush passive effects while already rendering.");Xg=!0,zg=!1,null!==sA&&"function"==typeof sA.markPassiveEffectsStarted&&sA.markPassiveEffectsStarted(a);var l=rg;if(rg|=Kh,vo(s.current),mo(s,s.current,a,r),null!==sA&&"function"==typeof sA.markPassiveEffectsStopped&&sA.markPassiveEffectsStopped(),Es(s),rg=l,$e(0),zg?s===Kg?Wg++:(Wg=0,Kg=s):Wg=0,zg=Xg=!1,oA&&"function"==typeof oA.onPostCommitFiberRoot)try{oA.onPostCommitFiberRoot(nA,s)}catch(A){aA||(aA=!0)}var c=s.current.stateNode;c.effectDuration=0,c.passiveEffectDuration=0,o=!0}return o}finally{$a(n),ba.T=i,ls(e,t)}}return!1}function As(e,t,i){t=ie(i,t),null!==(e=ut(e,t=br(e.stateNode,t,2),2))&&(G(e,2),Ze(e))}function us(e,t,i){if(3===e.tag)As(e,e,i);else for(;null!==t;){if(3===t.tag)return void As(t,e,i);if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Lg||!Lg.has(r)))return e=ie(i,e),void(null!==(r=ut(t,i=Ir(2),2))&&(yr(i,r,t,e),G(r,2),Ze(r)))}t=t.return}}function ds(e,t,i){var r=e.pingCache;if(null===r){r=e.pingCache=new zh;var n=new Set;r.set(t,n)}else void 0===(n=r.get(t))&&(n=new Set,r.set(t,n));n.has(i)||(Cg=!0,n.add(i),r=hs.bind(null,e,t,i),lA&&Bs(e,i),t.then(r,r))}function hs(e,t,i){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Vo()&&ba.actQueue,ng===e&&(sg&i)===i&&(bg===eg||bg===$h&&(62914560&sg)===sg&&qc()-Sg<Pg?(rg&Wh)===Jh&&Xo(e,0):vg|=i,Qg===sg&&(Qg=0)),Ze(e)}function gs(e,t){0===t&&(t=O()),null!==(e=Oe(e,t))&&(G(e,t),Ze(e))}function fs(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),gs(e,i)}function ps(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;null!==n&&(i=n.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}null!==r&&r.delete(t),gs(e,i)}function ms(e,t,i){if(33562624&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,o=n.type===la;o=i||o,22!==n.tag?33554432&n.flags?o&&y(n,xs,r,n,(64&n.mode)===MA):ms(r,n,o):null===n.memoizedState&&(o&&8192&n.flags?y(n,xs,r,n):33554432&n.subtreeFlags&&y(n,ms,r,n,o)),t=t.sibling}}function xs(e,t){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];W(!0);try{co(t),i&&Qo(t),uo(e,t.alternate,t,!1),i&&Eo(e,t,0,null,!1)}finally{W(!1)}}function Es(e){var t=!0;24&e.current.mode||(t=!1),ms(e,e.current,t)}function Cs(e){if((rg&Wh)===Jh){var t=e.tag;if(3===t||1===t||0===t||11===t||14===t||15===t){if(t=m(e)||"ReactComponent",null!==$g){if($g.has(t))return;$g.add(t)}else $g=new Set([t]);y(e,function(){})}}}function Bs(e,t){lA&&e.memoizedUpdaters.forEach(function(i){X(e,i,t)})}function bs(e){if(null===rf)return e;var t=rf(e);return void 0===t?e:t.current}function Is(e){if(null===rf)return e;var t=rf(e);return void 0===t?null!=e&&"function"==typeof e.render&&(t=bs(e.render),e.render!==t)?(t={$$typeof:ha,render:t},void 0!==e.displayName&&(t.displayName=e.displayName),t):e:t.current}function ys(e,t){if(null===rf)return!1;var i=e.elementType,r=!1,n="object"==typeof(t=t.type)&&null!==t?t.$$typeof:null;switch(e.tag){case 1:"function"==typeof t&&(r=!0);break;case 0:("function"==typeof t||n===ma)&&(r=!0);break;case 11:(n===ha||n===ma)&&(r=!0);break;case 14:case 15:(n===pa||n===ma)&&(r=!0);break;default:return!1}return!(!r||(e=rf(i),void 0===e||e!==rf(t)))}function vs(e){null!==rf&&"function"==typeof WeakSet&&(null===nf&&(nf=new WeakSet),nf.add(e))}function ws(e,t,i){var r=e.alternate,n=e.child,o=e.sibling,s=e.tag,a=e.type,l=null;switch(s){case 0:case 15:case 1:l=a;break;case 11:l=a.render}if(null===rf)throw Error("Expected resolveFamily to be set during hot reload.");var c=!1;a=!1,null!==l&&void 0!==(l=rf(l))&&(i.has(l)?a=!0:t.has(l)&&(1===s?a=!0:c=!0)),null!==nf&&(nf.has(e)||null!==r&&nf.has(r))&&(a=!0),a&&(e._debugNeedsRemount=!0),(a||c)&&null!==(r=Oe(e,2))&&Ro(r,e,2),null===n||a||ws(n,t,i),null!==o&&ws(o,t,i)}function Qs(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null,this.actualDuration=-0,this.actualStartTime=-1.1,this.treeBaseDuration=this.selfBaseDuration=-0,this._debugOwner=this._debugInfo=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,of||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}function Ds(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ns(e,t){var i=e.alternate;switch(null===i?((i=l(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i._debugOwner=e._debugOwner,i._debugHookTypes=e._debugHookTypes,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null,i.actualDuration=-0,i.actualStartTime=-1.1),i.flags=31457280&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext,_debugThenableState:t._debugThenableState},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i.selfBaseDuration=e.selfBaseDuration,i.treeBaseDuration=e.treeBaseDuration,i._debugInfo=e._debugInfo,i._debugNeedsRemount=e._debugNeedsRemount,i.tag){case 0:case 15:case 1:i.type=bs(e.type);break;case 11:i.type=Is(e.type)}return i}function ks(e,t){e.flags&=31457282;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext,_debugThenableState:t._debugThenableState},e.selfBaseDuration=i.selfBaseDuration,e.treeBaseDuration=i.treeBaseDuration),e}function Ss(e,t,i,r,n,o){var s=0,a=e;if("function"==typeof e)Ds(e)&&(s=1),a=bs(a);else if("string"==typeof e)xc&&Pc?(s=ce(),s=Ec(e,i,s)?26:Rc(e)?27:5):xc?(s=ce(),s=Ec(e,i,s)?26:5):s=Pc&&Rc(e)?27:5;else e:switch(e){case aa:return Ms(i.children,n,o,t);case la:s=8,n|=24;break;case ca:return r=n,(e=i).id,(t=l(12,e,t,2|r)).elementType=ca,t.lanes=o,t.stateNode={effectDuration:0,passiveEffectDuration:0},t;case ga:return(t=l(13,i,t,n)).elementType=ga,t.lanes=o,t;case fa:return(t=l(19,i,t,n)).elementType=fa,t.lanes=o,t;case xa:return Vs(i,n,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Aa:case da:s=10;break e;case ua:s=9;break e;case ha:s=11,a=Is(a);break e;case pa:s=14;break e;case ma:s=16,a=null;break e}a="",(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(a+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),null===e?i="null":ka(e)?i="array":void 0!==e&&e.$$typeof===oa?(i="<"+(p(e.type)||"Unknown")+" />",a=" Did you accidentally export a JSX literal instead of a component?"):i=typeof e,(s=r?"number"==typeof r.tag?m(r):"string"==typeof r.name?r.name:null:null)&&(a+="\n\nCheck the render method of `"+s+"`."),s=29,i=Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+i+"."+a),a=null}return(t=l(s,i,t,n)).elementType=e,t.type=a,t.lanes=o,t._debugOwner=r,t}function Ps(e,t,i){return(t=Ss(e.type,e.key,e.props,e._owner,t,i))._debugOwner=e._owner,t}function Ms(e,t,i,r){return(e=l(7,e,r,t)).lanes=i,e}function Vs(e,t,i,r){(e=l(22,e,r,t)).elementType=xa,e.lanes=i;var n={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=n,t=e._current;if(null===t)throw Error("Calling Offscreen.detach before instance handle has been set.");if(!(2&e._pendingVisibility)){var i=Oe(t,2);null!==i&&(e._pendingVisibility|=2,Ro(i,t,2))}},attach:function(){var e=n,t=e._current;if(null===t)throw Error("Calling Offscreen.detach before instance handle has been set.");if(2&e._pendingVisibility){var i=Oe(t,2);null!==i&&(e._pendingVisibility&=-3,Ro(i,t,2))}}};return e.stateNode=n,e}function _s(e,t,i){return(e=l(6,e,null,t)).lanes=i,e}function Ls(e,t,i){return(t=l(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rs(e,t,i,r,n,o,s,a){for(this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=za,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=F(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=F(0),this.hiddenUpdates=F(null),this.identifierPrefix=r,this.onUncaughtError=n,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map,this.passiveEffectDuration=this.effectDuration=-0,this.memoizedUpdaters=new Set,e=this.pendingUpdatersLaneMap=[],t=0;31>t;t++)e.push(new Set);this._debugRootType=i?"hydrateRoot()":"createRoot()"}function Us(e,t,i,r,n,o,s,a,c,A,u,d){return e=new Rs(e,t,i,s,a,c,A,d),t=1,!0===o&&(t|=24),lA&&(t|=2),o=l(3,null,null,t),e.current=o,o.stateNode=e,cn(t=ln()),e.pooledCache=t,cn(t),o.memoizedState={element:r,isDehydrated:i,cache:t},lt(o),e}function Ts(e){return""+e}function Os(e){return e?e=Fc:Fc}function Fs(e,t,i,r){return 0===t.tag&&cs(),Gs(t.current,2,e,t,i,r),2}function Gs(e,t,i,r,n,o){if(oA&&"function"==typeof oA.onScheduleFiberRoot)try{oA.onScheduleFiberRoot(nA,r,i)}catch(s){aA||(aA=!0)}null!==sA&&"function"==typeof sA.markRenderScheduled&&sA.markRenderScheduled(t),n=Os(n),null===r.context?r.context=n:r.pendingContext=n,Na&&null!==Da&&!ff&&(ff=!0),(r=At(t)).payload={element:i},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(i=ut(e,r,t))&&(Ro(i,e,t),dt(i,e,t))}function js(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Hs(e,t){js(e,t),(e=e.alternate)&&js(e,t)}function Xs(){return Da}function zs(){for(var e=new Map,t=1,i=0;31>i;i++){var r=V(t);e.set(t,r),t*=2}return e}var Js,Ws,Ks,Ys,qs,Zs,$s,ea={},ta=ge(),ia=Mu(),ra=Object.assign,na=Symbol.for("react.element"),oa=Symbol.for("react.transitional.element"),sa=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),la=Symbol.for("react.strict_mode"),ca=Symbol.for("react.profiler"),Aa=Symbol.for("react.provider"),ua=Symbol.for("react.consumer"),da=Symbol.for("react.context"),ha=Symbol.for("react.forward_ref"),ga=Symbol.for("react.suspense"),fa=Symbol.for("react.suspense_list"),pa=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),xa=Symbol.for("react.offscreen"),Ea=Symbol.for("react.memo_cache_sentinel"),Ca=Symbol.iterator,Ba=Symbol.for("react.client.reference"),ba=ta.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ia=0;x.__reactDisabledLog=!0;var ya,va,wa=!1,Qa=new("function"==typeof WeakMap?WeakMap:Map),Da=null,Na=!1,ka=Array.isArray,Sa=e.rendererVersion,Pa=e.rendererPackageName,Ma=e.extraDevToolsConfig,Va=e.getPublicInstance,_a=e.getRootHostContext,La=e.getChildHostContext,Ra=e.prepareForCommit,Ua=e.resetAfterCommit,Ta=e.createInstance,Oa=e.appendInitialChild,Fa=e.finalizeInitialChildren,Ga=e.shouldSetTextContent,ja=e.createTextInstance,Ha=e.scheduleTimeout,Xa=e.cancelTimeout,za=e.noTimeout,Ja=e.isPrimaryRenderer;e.warnsIfNotActing;var Wa=e.supportsMutation,Ka=e.supportsPersistence,Ya=e.supportsHydration,qa=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Za=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var $a=e.setCurrentUpdatePriority,el=e.getCurrentUpdatePriority,tl=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var il=e.shouldAttemptEagerTransition,rl=e.detachDeletedInstance;e.requestPostPaintCallback;var nl=e.maySuspendCommit,ol=e.preloadInstance,sl=e.startSuspendingCommit,al=e.suspendInstance,ll=e.waitForCommitToBeReady,cl=e.NotPendingTransition,Al=e.HostTransitionContext,ul=e.resetFormInstance,dl=e.bindToConsole,hl=e.supportsMicrotasks,gl=e.scheduleMicrotask,fl=e.supportsTestSelectors,pl=e.findFiberRoot,ml=e.getBoundingRect,xl=e.getTextContent,El=e.isHiddenSubtree,Cl=e.matchAccessibilityRole,Bl=e.setFocusIfFocusable,bl=e.setupIntersectionObserver,Il=e.appendChild,yl=e.appendChildToContainer,vl=e.commitTextUpdate,wl=e.commitMount,Ql=e.commitUpdate,Dl=e.insertBefore,Nl=e.insertInContainerBefore,kl=e.removeChild,Sl=e.removeChildFromContainer,Pl=e.resetTextContent,Ml=e.hideInstance,Vl=e.hideTextInstance,_l=e.unhideInstance,Ll=e.unhideTextInstance,Rl=e.clearContainer,Ul=e.cloneInstance,Tl=e.createContainerChildSet,Ol=e.appendChildToContainerChildSet,Fl=e.finalizeContainerChildren,Gl=e.replaceContainerChildren,jl=e.cloneHiddenInstance,Hl=e.cloneHiddenTextInstance,Xl=e.isSuspenseInstancePending,zl=e.isSuspenseInstanceFallback,Jl=e.getSuspenseInstanceFallbackErrorDetails,Wl=e.registerSuspenseInstanceRetry,Kl=e.canHydrateFormStateMarker,Yl=e.isFormStateMarkerMatching,ql=e.getNextHydratableSibling,Zl=e.getFirstHydratableChild,$l=e.getFirstHydratableChildWithinContainer,ec=e.getFirstHydratableChildWithinSuspenseInstance,tc=e.canHydrateInstance,ic=e.canHydrateTextInstance,rc=e.canHydrateSuspenseInstance,nc=e.hydrateInstance,oc=e.hydrateTextInstance,sc=e.hydrateSuspenseInstance,ac=e.getNextHydratableInstanceAfterSuspenseInstance,lc=e.commitHydratedContainer,cc=e.commitHydratedSuspenseInstance,Ac=e.clearSuspenseBoundary,uc=e.clearSuspenseBoundaryFromContainer,dc=e.shouldDeleteUnhydratedTailInstances,hc=e.diffHydratedPropsForDevWarnings,gc=e.diffHydratedTextForDevWarnings,fc=e.describeHydratableInstanceForDevWarnings,pc=e.validateHydratableInstance,mc=e.validateHydratableTextInstance,xc=e.supportsResources,Ec=e.isHostHoistableType,Cc=e.getHoistableRoot,Bc=e.getResource,bc=e.acquireResource,Ic=e.releaseResource,yc=e.hydrateHoistable,vc=e.mountHoistable,wc=e.unmountHoistable,Qc=e.createHoistableInstance,Dc=e.prepareToCommitHoistables,Nc=e.mayResourceSuspendCommit,kc=e.preloadResource,Sc=e.suspendResource,Pc=e.supportsSingletons,Mc=e.resolveSingletonInstance,Vc=e.clearSingleton,_c=e.acquireSingletonInstance,Lc=e.releaseSingletonInstance,Rc=e.isHostSingletonType,Uc=[],Tc=[],Oc=-1,Fc={};Object.freeze(Fc);var Gc=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(jc(e)/Hc|0)|0},jc=Math.log,Hc=Math.LN2,Xc=128,zc=4194304,Jc=ia.unstable_scheduleCallback,Wc=ia.unstable_cancelCallback,Kc=ia.unstable_shouldYield,Yc=ia.unstable_requestPaint,qc=ia.unstable_now,Zc=ia.unstable_ImmediatePriority,$c=ia.unstable_UserBlockingPriority,eA=ia.unstable_NormalPriority,tA=ia.unstable_IdlePriority,iA=ia.log,rA=ia.unstable_setDisableYieldValue,nA=null,oA=null,sA=null,aA=!1,lA="undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__,cA="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},AA=new WeakMap,uA=[],dA=0,hA=null,gA=0,fA=[],pA=0,mA=null,xA=1,EA="",CA=S(null),BA=S(null),bA=S(null),IA=S(null),yA=/["'&<>\n\t]|^\s|\s$/,vA=null,wA=null,QA=!1,DA=!1,NA=null,kA=null,SA=!1,PA=Error("Hydration Mismatch Exception: This is not a real error, and should not leak into userspace. If you're seeing this, it's likely a bug in React."),MA=0,VA=[],_A=0,LA=0,RA=ia.unstable_now,UA=-0,TA=-1.1,OA=-0,FA=!1,GA=!1,jA=null,HA=null,XA=!1,zA=!1,JA=!1,WA=!1,KA=0,YA={},qA=null,ZA=0,$A=0,eu=null,tu=0,iu=1,ru=2,nu=3,ou=!1,su=!1,au=null,lu=!1,cu=Object.prototype.hasOwnProperty,Au={recordUnsafeLifecycleWarnings:function(){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}},uu=[],du=[],hu=[],gu=[],fu=[],pu=[],mu=new Set;Au.recordUnsafeLifecycleWarnings=function(e,t){mu.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&uu.push(e),8&e.mode&&"function"==typeof t.UNSAFE_componentWillMount&&du.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&hu.push(e),8&e.mode&&"function"==typeof t.UNSAFE_componentWillReceiveProps&&gu.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&fu.push(e),8&e.mode&&"function"==typeof t.UNSAFE_componentWillUpdate&&pu.push(e))},Au.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;0<uu.length&&(uu.forEach(function(t){e.add(m(t)||"Component"),mu.add(t.type)}),uu=[]);var t=new Set;0<du.length&&(du.forEach(function(e){t.add(m(e)||"Component"),mu.add(e.type)}),du=[]);var i=new Set;0<hu.length&&(hu.forEach(function(e){i.add(m(e)||"Component"),mu.add(e.type)}),hu=[]);var r=new Set;0<gu.length&&(gu.forEach(function(e){r.add(m(e)||"Component"),mu.add(e.type)}),gu=[]);var n=new Set;0<fu.length&&(fu.forEach(function(e){n.add(m(e)||"Component"),mu.add(e.type)}),fu=[]);var o=new Set;0<pu.length&&(pu.forEach(function(e){o.add(m(e)||"Component"),mu.add(e.type)}),pu=[]),0<t.size&&g(t),0<r.size&&g(r),0<o.size&&g(o),0<e.size&&g(e),0<i.size&&g(i),0<n.size&&g(n)};var xu=new Map,Eu=new Set;Au.recordLegacyContextWarning=function(e,t){for(var i=null,r=e;null!==r;)8&r.mode&&(i=r),r=r.return;null===i||!Eu.has(e.type)&&(r=xu.get(i),null!=e.type.contextTypes||null!=e.type.childContextTypes||null!==t&&"function"==typeof t.getChildContext)&&(void 0===r&&(r=[],xu.set(i,r)),r.push(e))},Au.flushLegacyContextWarning=function(){xu.forEach(function(e){if(0!==e.length){var t=e[0],i=new Set;e.forEach(function(e){i.add(m(e)||"Component"),Eu.add(e.type)}),g(i),y(t,function(){})}})},Au.discardPendingWarnings=function(){uu=[],du=[],hu=[],gu=[],fu=[],pu=[],xu=new Map};var Cu,Bu=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`"),bu=Error("Suspense Exception: This is not a real error, and should not leak into userspace. If you're seeing this, it's likely a bug in React."),Iu={then:function(){}},yu=null,vu=!1,wu={"react-stack-bottom-frame":function(e,t,i){var r=Na;Na=!0;try{return e(t,i)}finally{Na=r}}},Qu=wu["react-stack-bottom-frame"].bind(wu),Du={"react-stack-bottom-frame":function(e){var t=Na;Na=!0;try{return e.render()}finally{Na=t}}},Nu=Du["react-stack-bottom-frame"].bind(Du),ku={"react-stack-bottom-frame":function(e,t){try{t.componentDidMount()}catch(i){us(e,e.return,i)}}},Su=ku["react-stack-bottom-frame"].bind(ku),Pu={"react-stack-bottom-frame":function(e,t,i,r,n){try{t.componentDidUpdate(i,r,n)}catch(o){us(e,e.return,o)}}},Vu=Pu["react-stack-bottom-frame"].bind(Pu),_u={"react-stack-bottom-frame":function(e,t){var i=t.stack;e.componentDidCatch(t.value,{componentStack:null!==i?i:""})}},Lu=_u["react-stack-bottom-frame"].bind(_u),Ru={"react-stack-bottom-frame":function(e,t,i){try{i.componentWillUnmount()}catch(r){us(e,t,r)}}},Uu=Ru["react-stack-bottom-frame"].bind(Ru),Tu={"react-stack-bottom-frame":function(e){var t=e.create;return e=e.inst,t=t(),e.destroy=t}},Ou=Tu["react-stack-bottom-frame"].bind(Tu),Fu={"react-stack-bottom-frame":function(e,t,i){try{i()}catch(r){us(e,t,r)}}},Gu=Fu["react-stack-bottom-frame"].bind(Fu),ju={"react-stack-bottom-frame":function(e){return(0,e._init)(e._payload)}},Hu=ju["react-stack-bottom-frame"].bind(ju),Xu=null,zu=0,Ju=null,Wu=(Cu=!1,{}),Ku={},Yu={};h=function(e,t,i){if(null!==i&&"object"==typeof i&&i._store&&(!i._store.validated&&null==i.key||2===i._store.validated)){if("object"!=typeof i._store)throw Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");i._store.validated=1;var r=m(e),n=r||"null";if(!Wu[n]){Wu[n]=!0,i=i._owner;var o="";(e=e._debugOwner)&&"number"==typeof e.tag&&(n=m(e))&&(o="\n\nCheck the render method of `"+n+"`."),o||r&&(o="\n\nCheck the top-level render call using <"+r+">."),null!=i&&e!==i&&(r=null,"number"==typeof i.tag?r=m(i):"string"==typeof i.name&&(r=i.name)),y(t,function(){})}}};var qu,Zu=Pt(!0),$u=Pt(!1),ed=S(null),td=S(0),id=S(null),rd=null,nd=1,od=2,sd=S(0),ad=0,ld=1,cd=2,Ad=4,ud=8,dd=new Set,hd=new Set,gd=new Set,fd=new Set,pd=0,md=null,xd=null,Ed=null,Cd=!1,Bd=!1,bd=!1,Id=0,yd=0,vd=null,wd=0,Qd=25,Dd=null,Nd=null,kd=-1,Sd=!1,Pd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Md={readContext:on,use:ri,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt};Md.useCacheRefresh=Xt,Md.useMemoCache=Xt,Md.useHostTransitionStatus=Xt,Md.useFormState=Xt,Md.useActionState=Xt,Md.useOptimistic=Xt;var Vd=null,_d=null,Ld=null,Rd=null,Ud=null,Td=null,Od=null;(Vd={readContext:function(e){return on(e)},use:ri,useCallback:function(e,t){return Dd="useCallback",Ft(),jt(t),Hi(e,t)},useContext:function(e){return Dd="useContext",Ft(),on(e)},useEffect:function(e,t){return Dd="useEffect",Ft(),jt(t),Ti(e,t)},useImperativeHandle:function(e,t,i){return Dd="useImperativeHandle",Ft(),jt(i),Gi(e,t,i)},useInsertionEffect:function(e,t){Dd="useInsertionEffect",Ft(),jt(t),Ri(4,cd,e,t)},useLayoutEffect:function(e,t){return Dd="useLayoutEffect",Ft(),jt(t),Oi(e,t)},useMemo:function(e,t){Dd="useMemo",Ft(),jt(t);var i=ba.H;ba.H=Ud;try{return zi(e,t)}finally{ba.H=i}},useReducer:function(e,t,i){Dd="useReducer",Ft();var r=ba.H;ba.H=Ud;try{return si(e,t,i)}finally{ba.H=r}},useRef:function(e){return Dd="useRef",Ft(),Li(e)},useState:function(e){Dd="useState",Ft();var t=ba.H;ba.H=Ud;try{return xi(e)}finally{ba.H=t}},useDebugValue:function(){Dd="useDebugValue",Ft()},useDeferredValue:function(e,t){return Dd="useDeferredValue",Ft(),Wi(e,t)},useTransition:function(){return Dd="useTransition",Ft(),tr()},useSyncExternalStore:function(e,t,i){return Dd="useSyncExternalStore",Ft(),Ai(e,t,i)},useId:function(){return Dd="useId",Ft(),or()},useCacheRefresh:function(){return Dd="useCacheRefresh",Ft(),sr()}}).useMemoCache=ni,Vd.useHostTransitionStatus=nr,Vd.useFormState=function(e,t){return Dd="useFormState",Ft(),Ht(),ki(e,t)},Vd.useActionState=function(e,t){return Dd="useActionState",Ft(),ki(e,t)},Vd.useOptimistic=function(e){return Dd="useOptimistic",Ft(),Ei(e)},(_d={readContext:function(e){return on(e)},use:ri,useCallback:function(e,t){return Dd="useCallback",Gt(),Hi(e,t)},useContext:function(e){return Dd="useContext",Gt(),on(e)},useEffect:function(e,t){return Dd="useEffect",Gt(),Ti(e,t)},useImperativeHandle:function(e,t,i){return Dd="useImperativeHandle",Gt(),Gi(e,t,i)},useInsertionEffect:function(e,t){Dd="useInsertionEffect",Gt(),Ri(4,cd,e,t)},useLayoutEffect:function(e,t){return Dd="useLayoutEffect",Gt(),Oi(e,t)},useMemo:function(e,t){Dd="useMemo",Gt();var i=ba.H;ba.H=Ud;try{return zi(e,t)}finally{ba.H=i}},useReducer:function(e,t,i){Dd="useReducer",Gt();var r=ba.H;ba.H=Ud;try{return si(e,t,i)}finally{ba.H=r}},useRef:function(e){return Dd="useRef",Gt(),Li(e)},useState:function(e){Dd="useState",Gt();var t=ba.H;ba.H=Ud;try{return xi(e)}finally{ba.H=t}},useDebugValue:function(){Dd="useDebugValue",Gt()},useDeferredValue:function(e,t){return Dd="useDeferredValue",Gt(),Wi(e,t)},useTransition:function(){return Dd="useTransition",Gt(),tr()},useSyncExternalStore:function(e,t,i){return Dd="useSyncExternalStore",Gt(),Ai(e,t,i)},useId:function(){return Dd="useId",Gt(),or()},useCacheRefresh:function(){return Dd="useCacheRefresh",Gt(),sr()}}).useMemoCache=ni,_d.useHostTransitionStatus=nr,_d.useFormState=function(e,t){return Dd="useFormState",Gt(),Ht(),ki(e,t)},_d.useActionState=function(e,t){return Dd="useActionState",Gt(),ki(e,t)},_d.useOptimistic=function(e){return Dd="useOptimistic",Gt(),Ei(e)},(Ld={readContext:function(e){return on(e)},use:ri,useCallback:function(e,t){return Dd="useCallback",Gt(),Xi(e,t)},useContext:function(e){return Dd="useContext",Gt(),on(e)},useEffect:function(e,t){Dd="useEffect",Gt(),Ui(2048,ud,e,t)},useImperativeHandle:function(e,t,i){return Dd="useImperativeHandle",Gt(),ji(e,t,i)},useInsertionEffect:function(e,t){return Dd="useInsertionEffect",Gt(),Ui(4,cd,e,t)},useLayoutEffect:function(e,t){return Dd="useLayoutEffect",Gt(),Ui(4,Ad,e,t)},useMemo:function(e,t){Dd="useMemo",Gt();var i=ba.H;ba.H=Td;try{return Ji(e,t)}finally{ba.H=i}},useReducer:function(e,t,i){Dd="useReducer",Gt();var r=ba.H;ba.H=Td;try{return ai(e)}finally{ba.H=r}},useRef:function(){return Dd="useRef",Gt(),ti().memoizedState},useState:function(){Dd="useState",Gt();var e=ba.H;ba.H=Td;try{return ai(oi)}finally{ba.H=e}},useDebugValue:function(){Dd="useDebugValue",Gt()},useDeferredValue:function(e,t){return Dd="useDeferredValue",Gt(),Ki(e,t)},useTransition:function(){return Dd="useTransition",Gt(),ir()},useSyncExternalStore:function(e,t,i){return Dd="useSyncExternalStore",Gt(),ui(e,t,i)},useId:function(){return Dd="useId",Gt(),ti().memoizedState},useCacheRefresh:function(){return Dd="useCacheRefresh",Gt(),ti().memoizedState}}).useMemoCache=ni,Ld.useHostTransitionStatus=nr,Ld.useFormState=function(e){return Dd="useFormState",Gt(),Ht(),Si(e)},Ld.useActionState=function(e){return Dd="useActionState",Gt(),Si(e)},Ld.useOptimistic=function(e,t){return Dd="useOptimistic",Gt(),Ci(e,t)},(Rd={readContext:function(e){return on(e)},use:ri,useCallback:function(e,t){return Dd="useCallback",Gt(),Xi(e,t)},useContext:function(e){return Dd="useContext",Gt(),on(e)},useEffect:function(e,t){Dd="useEffect",Gt(),Ui(2048,ud,e,t)},useImperativeHandle:function(e,t,i){return Dd="useImperativeHandle",Gt(),ji(e,t,i)},useInsertionEffect:function(e,t){return Dd="useInsertionEffect",Gt(),Ui(4,cd,e,t)},useLayoutEffect:function(e,t){return Dd="useLayoutEffect",Gt(),Ui(4,Ad,e,t)},useMemo:function(e,t){Dd="useMemo",Gt();var i=ba.H;ba.H=Od;try{return Ji(e,t)}finally{ba.H=i}},useReducer:function(e,t,i){Dd="useReducer",Gt();var r=ba.H;ba.H=Od;try{return ci(e)}finally{ba.H=r}},useRef:function(){return Dd="useRef",Gt(),ti().memoizedState},useState:function(){Dd="useState",Gt();var e=ba.H;ba.H=Od;try{return ci(oi)}finally{ba.H=e}},useDebugValue:function(){Dd="useDebugValue",Gt()},useDeferredValue:function(e,t){return Dd="useDeferredValue",Gt(),Yi(e,t)},useTransition:function(){return Dd="useTransition",Gt(),rr()},useSyncExternalStore:function(e,t,i){return Dd="useSyncExternalStore",Gt(),ui(e,t,i)},useId:function(){return Dd="useId",Gt(),ti().memoizedState},useCacheRefresh:function(){return Dd="useCacheRefresh",Gt(),ti().memoizedState}}).useMemoCache=ni,Rd.useHostTransitionStatus=nr,Rd.useFormState=function(e){return Dd="useFormState",Gt(),Ht(),Vi(e)},Rd.useActionState=function(e){return Dd="useActionState",Gt(),Vi(e)},Rd.useOptimistic=function(e,t){return Dd="useOptimistic",Gt(),bi(e,t)},(Ud={readContext:function(e){return on(e)},use:function(e){return ri(e)},useCallback:function(e,t){return Dd="useCallback",Ft(),Hi(e,t)},useContext:function(e){return Dd="useContext",Ft(),on(e)},useEffect:function(e,t){return Dd="useEffect",Ft(),Ti(e,t)},useImperativeHandle:function(e,t,i){return Dd="useImperativeHandle",Ft(),Gi(e,t,i)},useInsertionEffect:function(e,t){Dd="useInsertionEffect",Ft(),Ri(4,cd,e,t)},useLayoutEffect:function(e,t){return Dd="useLayoutEffect",Ft(),Oi(e,t)},useMemo:function(e,t){Dd="useMemo",Ft();var i=ba.H;ba.H=Ud;try{return zi(e,t)}finally{ba.H=i}},useReducer:function(e,t,i){Dd="useReducer",Ft();var r=ba.H;ba.H=Ud;try{return si(e,t,i)}finally{ba.H=r}},useRef:function(e){return Dd="useRef",Ft(),Li(e)},useState:function(e){Dd="useState",Ft();var t=ba.H;ba.H=Ud;try{return xi(e)}finally{ba.H=t}},useDebugValue:function(){Dd="useDebugValue",Ft()},useDeferredValue:function(e,t){return Dd="useDeferredValue",Ft(),Wi(e,t)},useTransition:function(){return Dd="useTransition",Ft(),tr()},useSyncExternalStore:function(e,t,i){return Dd="useSyncExternalStore",Ft(),Ai(e,t,i)},useId:function(){return Dd="useId",Ft(),or()},useCacheRefresh:function(){return Dd="useCacheRefresh",Ft(),sr()},useMemoCache:function(e){return ni(e)}}).useHostTransitionStatus=nr,Ud.useFormState=function(e,t){return Dd="useFormState",Ft(),ki(e,t)},Ud.useActionState=function(e,t){return Dd="useActionState",Ft(),ki(e,t)},Ud.useOptimistic=function(e){return Dd="useOptimistic",Ft(),Ei(e)},(Td={readContext:function(e){return on(e)},use:function(e){return ri(e)},useCallback:function(e,t){return Dd="useCallback",Gt(),Xi(e,t)},useContext:function(e){return Dd="useContext",Gt(),on(e)},useEffect:function(e,t){Dd="useEffect",Gt(),Ui(2048,ud,e,t)},useImperativeHandle:function(e,t,i){return Dd="useImperativeHandle",Gt(),ji(e,t,i)},useInsertionEffect:function(e,t){return Dd="useInsertionEffect",Gt(),Ui(4,cd,e,t)},useLayoutEffect:function(e,t){return Dd="useLayoutEffect",Gt(),Ui(4,Ad,e,t)},useMemo:function(e,t){Dd="useMemo",Gt();var i=ba.H;ba.H=Td;try{return Ji(e,t)}finally{ba.H=i}},useReducer:function(e,t,i){Dd="useReducer",Gt();var r=ba.H;ba.H=Td;try{return ai(e)}finally{ba.H=r}},useRef:function(){return Dd="useRef",Gt(),ti().memoizedState},useState:function(){Dd="useState",Gt();var e=ba.H;ba.H=Td;try{return ai(oi)}finally{ba.H=e}},useDebugValue:function(){Dd="useDebugValue",Gt()},useDeferredValue:function(e,t){return Dd="useDeferredValue",Gt(),Ki(e,t)},useTransition:function(){return Dd="useTransition",Gt(),ir()},useSyncExternalStore:function(e,t,i){return Dd="useSyncExternalStore",Gt(),ui(e,t,i)},useId:function(){return Dd="useId",Gt(),ti().memoizedState},useCacheRefresh:function(){return Dd="useCacheRefresh",Gt(),ti().memoizedState},useMemoCache:function(e){return ni(e)}}).useHostTransitionStatus=nr,Td.useFormState=function(e){return Dd="useFormState",Gt(),Si(e)},Td.useActionState=function(e){return Dd="useActionState",Gt(),Si(e)},Td.useOptimistic=function(e,t){return Dd="useOptimistic",Gt(),Ci(e,t)},(Od={readContext:function(e){return on(e)},use:function(e){return ri(e)},useCallback:function(e,t){return Dd="useCallback",Gt(),Xi(e,t)},useContext:function(e){return Dd="useContext",Gt(),on(e)},useEffect:function(e,t){Dd="useEffect",Gt(),Ui(2048,ud,e,t)},useImperativeHandle:function(e,t,i){return Dd="useImperativeHandle",Gt(),ji(e,t,i)},useInsertionEffect:function(e,t){return Dd="useInsertionEffect",Gt(),Ui(4,cd,e,t)},useLayoutEffect:function(e,t){return Dd="useLayoutEffect",Gt(),Ui(4,Ad,e,t)},useMemo:function(e,t){Dd="useMemo",Gt();var i=ba.H;ba.H=Td;try{return Ji(e,t)}finally{ba.H=i}},useReducer:function(e,t,i){Dd="useReducer",Gt();var r=ba.H;ba.H=Td;try{return ci(e)}finally{ba.H=r}},useRef:function(){return Dd="useRef",Gt(),ti().memoizedState},useState:function(){Dd="useState",Gt();var e=ba.H;ba.H=Td;try{return ci(oi)}finally{ba.H=e}},useDebugValue:function(){Dd="useDebugValue",Gt()},useDeferredValue:function(e,t){return Dd="useDeferredValue",Gt(),Yi(e,t)},useTransition:function(){return Dd="useTransition",Gt(),rr()},useSyncExternalStore:function(e,t,i){return Dd="useSyncExternalStore",Gt(),ui(e,t,i)},useId:function(){return Dd="useId",Gt(),ti().memoizedState},useCacheRefresh:function(){return Dd="useCacheRefresh",Gt(),ti().memoizedState},useMemoCache:function(e){return ni(e)}}).useHostTransitionStatus=nr,Od.useFormState=function(e){return Dd="useFormState",Gt(),Vi(e)},Od.useActionState=function(e){return Dd="useActionState",Gt(),Vi(e)},Od.useOptimistic=function(e,t){return Dd="useOptimistic",Gt(),bi(e,t)};var Fd={},Gd=new Set,jd=new Set,Hd=new Set,Xd=new Set,zd=new Set,Jd=new Set,Wd=new Set,Kd=new Set,Yd=new Set,qd=new Set;Object.freeze(Fd);var Zd={isMounted:function(e){var t=Da;if(null!==t&&Na&&1===t.tag){var i=t.stateNode;i._warnedAboutRefsInRender,i._warnedAboutRefsInRender=!0}return!!(e=e._reactInternals)&&v(e)===e},enqueueSetState:function(e,t,i){var r=_o(e=e._reactInternals),n=At(r);n.payload=t,null!=i&&(fr(i),n.callback=i),null!==(t=ut(e,n,r))&&(Ro(t,e,r),dt(t,e,r)),te(e,r)},enqueueReplaceState:function(e,t,i){var r=_o(e=e._reactInternals),n=At(r);n.tag=iu,n.payload=t,null!=i&&(fr(i),n.callback=i),null!==(t=ut(e,n,r))&&(Ro(t,e,r),dt(t,e,r)),te(e,r)},enqueueForceUpdate:function(e,t){var i=_o(e=e._reactInternals),r=At(i);r.tag=ru,null!=t&&(fr(t),r.callback=t),null!==(t=ut(e,r,i))&&(Ro(t,e,i),dt(t,e,i)),null!==sA&&"function"==typeof sA.markForceUpdateScheduled&&sA.markForceUpdateScheduled(e,i)}},$d="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},eh=null,th=null,ih=Error("This is not a real error. It's an implementation detail of React's selective hydration feature. If this leaks into userspace, it's a bug in React. Please file an issue."),rh=!1,nh={},oh={},sh={},ah={},lh=!1,ch={},Ah={},uh={dehydrated:null,treeContext:null,retryLane:0},dh=!1,hh=S(null),gh=S(null),fh=S(null),ph={},mh=null,xh=null,Eh="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ch=ia.unstable_scheduleCallback,Bh=ia.unstable_NormalPriority,bh={$$typeof:da,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0,_currentRenderer:null,_currentRenderer2:null},Ih=ba.S;ba.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===qA){var i=qA=[];ZA=0,$A=st(),eu={status:"pending",value:void 0,then:function(e){i.push(e)}}}ZA++,t.then(at,at)}(0,t),null!==Ih&&Ih(e,t)};var yh=S(null),vh=null;vh=new Set;var wh=!1,Qh=!1,Dh=!1,Nh="function"==typeof WeakSet?WeakSet:Set,kh=null,Sh=null,Ph=null,Mh=!1,Vh=null,_h=!1,Lh=null,Rh=8192,Uh={getCacheForType:function(e){var t=on(bh),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i},getOwner:function(){return Da}},Th=0,Oh=1,Fh=2,Gh=3,jh=4;if("function"==typeof Symbol&&Symbol.for){var Hh=Symbol.for;Th=Hh("selector.component"),Oh=Hh("selector.has_pseudo_class"),Fh=Hh("selector.role"),Gh=Hh("selector.test_id"),jh=Hh("selector.text")}var Xh=[],zh="function"==typeof WeakMap?WeakMap:Map,Jh=0,Wh=2,Kh=4,Yh=0,qh=1,Zh=2,$h=3,eg=4,tg=5,ig=6,rg=Jh,ng=null,og=null,sg=0,ag=0,lg=1,cg=2,Ag=3,ug=4,dg=5,hg=6,gg=7,fg=8,pg=ag,mg=null,xg=!1,Eg=!1,Cg=!1,Bg=0,bg=Yh,Ig=0,yg=0,vg=0,wg=0,Qg=0,Dg=null,Ng=null,kg=!1,Sg=0,Pg=300,Mg=1/0,Vg=500,_g=null,Lg=null,Rg=!1,Ug=null,Tg=0,Og=0,Fg=null,Gg=50,jg=0,Hg=null,Xg=!1,zg=!1,Jg=50,Wg=0,Kg=null,Yg=0,qg=1,Zg=2,$g=null,ef=!1,tf=new Set,rf=null,nf=null,of=!1;try{Object.preventExtensions({})}catch(mf){of=!0}var sf,af,lf,cf,Af,uf,df,hf,gf,ff=!1,pf={};return sf=function(e,r,n,o){null!==(r=t(e,r))&&(n=i(r.memoizedState,n,0,o),r.memoizedState=n,r.baseState=n,e.memoizedProps=ra({},e.memoizedProps),null!==(n=Oe(e,2))&&Ro(n,e,2))},af=function(e,i,r){null!==(i=t(e,i))&&(r=o(i.memoizedState,r,0),i.memoizedState=r,i.baseState=r,e.memoizedProps=ra({},e.memoizedProps),null!==(r=Oe(e,2))&&Ro(r,e,2))},lf=function(e,i,n,o){null!==(i=t(e,i))&&(n=r(i.memoizedState,n,o),i.memoizedState=n,i.baseState=n,e.memoizedProps=ra({},e.memoizedProps),null!==(n=Oe(e,2))&&Ro(n,e,2))},cf=function(e,t,r){e.pendingProps=i(e.memoizedProps,t,0,r),e.alternate&&(e.alternate.pendingProps=e.pendingProps),null!==(t=Oe(e,2))&&Ro(t,e,2)},Af=function(e,t){e.pendingProps=o(e.memoizedProps,t,0),e.alternate&&(e.alternate.pendingProps=e.pendingProps),null!==(t=Oe(e,2))&&Ro(t,e,2)},uf=function(e,t,i){e.pendingProps=r(e.memoizedProps,t,i),e.alternate&&(e.alternate.pendingProps=e.pendingProps),null!==(t=Oe(e,2))&&Ro(t,e,2)},df=function(e){var t=Oe(e,2);null!==t&&Ro(t,e,2)},hf=function(e){a=e},gf=function(e){s=e},ea.attemptContinuousHydration=function(e){if(13===e.tag){var t=Oe(e,67108864);null!==t&&Ro(t,e,67108864),Hs(e,67108864)}},ea.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=_o(e),i=Oe(e,t);null!==i&&Ro(i,e,t),Hs(e,t)}},ea.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=_(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var i=1<<31-Gc(t);e.entanglements[1]|=i,t&=~i}Ze(e),(rg&(Wh|Kh))===Jh&&(Mg=qc()+Vg,$e(0))}}break;case 13:null!==(t=Oe(e,2))&&Ro(t,e,2),jo(),Hs(e,2)}},ea.batchedUpdates=function(e,t){return e(t)},ea.createComponentSelector=function(e){return{$$typeof:Th,value:e}},ea.createContainer=function(e,t,i,r,n,o,s,a,l,c){return Us(e,t,!1,null,0,r,o,s,a,l,0,null)},ea.createHasPseudoClassSelector=function(e){return{$$typeof:Oh,value:e}},ea.createHydrationContainer=function(e,t,i,r,n,o,s,a,l,c,A,u,d){return(e=Us(i,r,!0,e,0,o,a,l,c,A,0,d)).context=Os(null),(n=At(r=_o(i=e.current))).callback=null!=t?t:null,ut(i,n,r),e.current.lanes=r,G(e,r),Ze(e),e},ea.createPortal=function(e,t,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;try{Ts(r);var n=!1}catch(o){n=!0}return n&&Ts(r),{$$typeof:sa,key:null==r?null:""+r,children:e,containerInfo:t,implementation:i}},ea.createRoleSelector=function(e){return{$$typeof:Fh,value:e}},ea.createTestNameSelector=function(e){return{$$typeof:Gh,value:e}},ea.createTextSelector=function(e){return{$$typeof:jh,value:e}},ea.defaultOnCaughtError=function(e,t){var i=eh?"The above error occurred in the <"+eh+"> component.":"The above error occurred in one of your React components.",r="React will try to recreate this component tree from scratch using the error boundary you provided, "+(th||"Anonymous")+".",n=ba.getCurrentStack,o=null!=t.componentStack?t.componentStack:"";ba.getCurrentStack=function(){return o};try{"object"==typeof e&&null!==e&&"string"==typeof e.environmentName&&dl("error",["%o\n\n%s\n\n%s\n",e,i,r],e.environmentName)()}finally{ba.getCurrentStack=n}},ea.defaultOnRecoverableError=function(e){$d(e)},ea.defaultOnUncaughtError=function(e,t){$d(e),e=eh?"An error occurred in the <"+eh+"> component.":"An error occurred in one of your React components.";var i=ba.getCurrentStack,r=null!=t.componentStack?t.componentStack:"";ba.getCurrentStack=function(){return r},ba.getCurrentStack=i},ea.deferredUpdates=function(e){var t=ba.T,i=el();try{return $a(32),ba.T=null,e()}finally{$a(i),ba.T=t}},ea.discreteUpdates=function(e,t,i,r,n){var o=ba.T,s=el();try{return $a(2),ba.T=null,e(t,i,r,n)}finally{$a(s),ba.T=o,rg===Jh&&(Mg=qc()+Vg)}},ea.findAllNodes=Mo,ea.findBoundingRects=function(e,t){if(!fl)throw Error("Test selector API is not supported by this renderer.");t=Mo(e,t),e=[];for(var i=0;i<t.length;i++)e.push(ml(t[i]));for(t=e.length-1;0<t;t--)for(var r=(i=e[t]).x,n=r+i.width,o=i.y,s=o+i.height,a=t-1;0<=a;a--)if(t!==a){var l=e[a],c=l.x,A=c+l.width,u=l.y,d=u+l.height;if(r>=c&&o>=u&&n<=A&&s<=d){e.splice(t,1);break}if(!(r!==c||i.width!==l.width||d<o||u>s)){u>o&&(l.height+=u-o,l.y=o),d<s&&(l.height=s-u),e.splice(t,1);break}if(!(o!==u||i.height!==l.height||A<r||c>n)){c>r&&(l.width+=c-r,l.x=r),A<n&&(l.width=n-c),e.splice(t,1);break}}return e},ea.findHostInstance=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error("Unable to find node on an unmounted component.");throw e=Object.keys(e).join(","),Error("Argument appears to not be a ReactComponent. Keys: "+e)}return null===(e=D(t))?null:Va(e.stateNode)},ea.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=Q(e))?k(e):null)?null:Va(e.stateNode)},ea.findHostInstanceWithWarning=function(e,t){var i=e._reactInternals;if(void 0===i){if("function"==typeof e.render)throw Error("Unable to find node on an unmounted component.");throw e=Object.keys(e).join(","),Error("Argument appears to not be a ReactComponent. Keys: "+e)}if(null===(e=D(i)))return null;if(8&e.mode){var r=m(i)||"Component";pf[r]||(pf[r]=!0,y(e,function(){i.mode}))}return Va(e.stateNode)},ea.flushPassiveEffects=cs,ea.flushSyncFromReconciler=function(e){var t=rg;rg|=1;var i=ba.T,r=el();try{if($a(2),ba.T=null,e)return e()}finally{$a(r),ba.T=i,((rg=t)&(Wh|Kh))===Jh&&$e(0)}},ea.flushSyncWork=jo,ea.focusWithin=function(e,t){if(!fl)throw Error("Test selector API is not supported by this renderer.");for(t=Po(e=No(e),t),t=Array.from(t),e=0;e<t.length;){var i=t[e++],r=i.tag;if(!El(i)){if((5===r||26===r||27===r)&&Bl(i.stateNode))return!0;for(i=i.child;null!==i;)t.push(i),i=i.sibling}}return!1},ea.getFindAllNodesFailureDescription=function(e,t){if(!fl)throw Error("Test selector API is not supported by this renderer.");var i=0,r=[];e=[No(e),0];for(var n=0;n<e.length;){var o=e[n++],s=o.tag,a=e[n++],l=t[a];if((5!==s&&26!==s&&27!==s||!El(o))&&(ko(o,l)&&(r.push(So(l)),++a>i&&(i=a)),a<t.length))for(o=o.child;null!==o;)e.push(o,a),o=o.sibling}if(i<t.length){for(e=[];i<t.length;i++)e.push(So(t[i]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},ea.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return Va(e.child.stateNode);default:return e.child.stateNode}},ea.injectIntoDevTools=function(){var e={bundleType:1,version:Sa,rendererPackageName:Pa,currentDispatcherRef:ba,findFiberByHostInstance:qa,reconcilerVersion:"19.0.0"};return null!==Ma&&(e.rendererConfig=Ma),e.overrideHookState=sf,e.overrideHookStateDeletePath=af,e.overrideHookStateRenamePath=lf,e.overrideProps=cf,e.overridePropsDeletePath=Af,e.overridePropsRenamePath=uf,e.scheduleUpdate=df,e.setErrorHandler=hf,e.setSuspenseHandler=gf,e.scheduleRefresh=A,e.scheduleRoot=c,e.setRefreshHandler=u,e.getCurrentFiber=Xs,e.getLaneLabelMap=zs,e.injectProfilingHooks=K,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return!0;try{nA=t.inject(e),oA=t}catch(i){}return!!t.checkDCE}(e)},ea.isAlreadyRendering=function(){return(rg&(Wh|Kh))!==Jh},ea.observeVisibleRects=function(e,t,i,r){function n(){var i=Mo(e,t);o.forEach(function(e){0>i.indexOf(e)&&l(e)}),i.forEach(function(e){0>o.indexOf(e)&&a(e)})}if(!fl)throw Error("Test selector API is not supported by this renderer.");var o=Mo(e,t),s=(i=bl(o,i,r)).disconnect,a=i.observe,l=i.unobserve;return Xh.push(n),{disconnect:function(){var e=Xh.indexOf(n);0<=e&&Xh.splice(e,1),s()}}},ea.shouldError=function(e){return a(e)},ea.shouldSuspend=function(e){return s(e)},ea.startHostTransition=function(e,t,i,r){if(5!==e.tag)throw Error("Expected the form instance to be a HostComponent. This is a bug in React.");var n=er(e).queue;$i(e,n,t,cl,null===i?d:function(){ba.T;var t=er(e).next.queue;return Ar(e,t,{},_o(e)),i(r)})},ea.updateContainer=function(e,t,i,r){var n=t.current,o=_o(n);return Gs(n,o,e,t,i,r),o},ea.updateContainerSync=Fs,ea},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})),ku.exports;var e}var _u=(Du||(Du=1,Nu.exports=Vu()),Nu.exports);const Lu={};function Ru(e){if(e instanceof En){const t=e.__pixireact.parent;if(t){const i=t.__pixireact.filters.indexOf(e);t.__pixireact.filters.splice(i,1),t.filters=t.__pixireact.filters}e.__pixireact.parent=null}}function Uu(e,t,...i){if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;e=new Error(t.replace(/%s/g,()=>String(i[r++]))),e.name="Invariant Violation"}throw e}}function Tu(e,t,i){if(Uu(t!==i,"Cannot insert node before itself"),t instanceof Zi){const r=t,n=i;t.parent===e&&e.removeChild(r);const o=e.getChildIndex(n);e.addChildAt(r,o)}else if(t instanceof En){const r=t.__pixireact.filters.indexOf(i);Ru(t),lu(e,t,r)}}function Ou(e,t){t instanceof En&&Ru(t),t.destroy()}const Fu=he(_u)({isPrimaryRenderer:!1,noTimeout:-1,NotPendingTransition:null,supportsHydration:!1,supportsMutation:!0,supportsPersistence:!1,warnsIfNotActing:!1,afterActiveInstanceBlur:function(){},appendChild:cu,appendChildToContainer:cu,appendInitialChild:cu,beforeActiveInstanceBlur:function(){},cancelTimeout:clearTimeout,clearContainer:function(){return!1},commitUpdate:function(e,t,i,r){const n=function(e,t,i,r){const{children:n,...o}=r,{children:s,...a}=i,l=mu(o,a,!0);return l.changes.length?l:null}(0,0,i,r);n&&Bu(e,n)},createInstance:function(e,t,i){const r=function(e){let t=e;return e.startsWith("pixi")&&(t=e.replace(/^pixi([A-Z])/,yu)),t}(e),n=function(e){const t=e.charAt(0),i=e.substring(1);return`${t.toUpperCase()}${i}`}(r);if(!(n in Iu))throw new Error(`${n} is not part of the PIXI namespace! Did you forget to extend?`);const o=Iu[n],s=pu(t,bu);Object.entries(t).forEach(([e,t])=>{if(e in uu){const i=uu[e];s[i]=t}});const a=su(new o(s),{root:i,type:r});return Bu(a,t),a},createTextInstance:function(e,t,i,r){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")},hideTextInstance:function(e){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")},unhideTextInstance:function(e){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")},detachDeletedInstance:function(){},finalizeInitialChildren:function(){return!1},getChildHostContext:function(e){return e??Lu},getCurrentUpdatePriority:function(){return nu.currentUpdatePriority},getInstanceFromNode:function(){return null},getInstanceFromScope:function(e){throw new Error("Not yet implemented.")},getPublicInstance:function(e){return e},getRootHostContext:function(){return Lu},hideInstance:function(e){e instanceof Zi?e.visible=!1:e instanceof En&&(e.enabled=!1)},insertBefore:Tu,insertInContainerBefore:Tu,maySuspendCommit:function(){return!1},preloadInstance:function(){return!0},prepareForCommit:function(){return null},preparePortalMount:function(){},prepareScopeUpdate:function(){},removeChild:Ou,removeChildFromContainer:Ou,requestPostPaintCallback:function(e){},resetAfterCommit:function(){},resetFormInstance:function(){},resolveEventTimeStamp:function(){return-1.1},resolveEventType:function(){return null},resolveUpdatePriority:function(){if(nu.currentUpdatePriority)return nu.currentUpdatePriority;const e="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!e)return eu.DefaultEventPriority;const t=e.event?.type;switch(t){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return eu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return eu.ContinuousEventPriority;default:return eu.DefaultEventPriority}},scheduleTimeout:setTimeout,shouldAttemptEagerTransition:function(){return!1},setCurrentUpdatePriority:function(e){nu.currentUpdatePriority=e},shouldSetTextContent:function(){return!1},startSuspendingCommit:function(){},suspendInstance:function(){},trackSchedulerEvent:function(){},unhideInstance:function(e){e instanceof Zi?e.visible=!0:e instanceof En&&(e.enabled=!0)},waitForCommitToBeReady:function(){return null},rendererPackageName:"@pixi/react",rendererVersion:au});Fu.injectIntoDevTools();const Gu=new Map;function ju(e){nu.unmountQueue.delete(e);const t=e.fiber;t&&Fu.updateContainer(null,t,null,()=>{e.applicationState.app&&e.applicationState.app.destroy(),Gu.delete(e.internalState.canvas)})}const Hu="undefined"==typeof window||!window.document?.createElement&&"ReactNative"!==window.navigator?.product?ae.useEffect:ae.useLayoutEffect,Xu={...hA.defaultTextStyle},zu=ae.forwardRef(function(e,t){const{children:i,className:r,defaultTextStyle:n,extensions:o,onInit:s,resizeTo:a,...l}=e,c=de(),A=ae.useRef(null),u=ae.useRef(null),d=ae.useRef(new Set);ae.useImperativeHandle(t,()=>({getApplication:()=>A.current,getCanvas:()=>u.current}));const h=ae.useCallback(()=>{const e=A.current;e&&(a?"current"in a?a.current instanceof HTMLElement&&(e.resizeTo=a.current):e.resizeTo=a:e.resizeTo=void 0)},[a]),g=ae.useCallback(e=>{!function(){for(const e of nu.unmountQueue)ju(e)}(),A.current=e,h(),s?.(e)},[s]);return Hu(()=>{if(o){const e=[...o],t=d.current;for(const i of t.values()){const r=e.indexOf(i);-1===r&&(Te.remove(i),t.delete(i)),e.splice(r,1)}for(const i of e)Te.add(i),t.add(i)}},[o]),Hu(()=>{const e=u.current;if(e){let t=Gu.get(e);t||(t=function(e,t={}){let i=Gu.get(e),r=i?.applicationState??{isInitialised:!1,isInitialising:!1};const n=i?.internalState??{};i||(r.app=new ho,n.rootContainer=su(r.app.stage));const o=i?.fiber??Fu.createContainer(n.rootContainer,eu.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null);if(!i){let s;e instanceof HTMLCanvasElement&&(s=e),s||(s=document.createElement("canvas"),e.innerHTML="",e.appendChild(s)),n.canvas=s;const a=async(e,i)=>(r.app.renderer||r.isInitialised||r.isInitialising||(r.isInitialising=!0,await r.app.init({...i,canvas:s}),r.isInitialising=!1,r.isInitialised=!0,r={...r},t.onInit?.(r.app)),Object.entries(i).forEach(([e,t])=>{const n=e;ru(i,n)||(r.app[n]=t)}),Fu.updateContainer(Ae.jsx(iu,{value:r,children:e}),o,null,()=>{}),r.app);i={applicationState:r,fiber:o,internalState:n,render:a},Gu.set(s,i)}return i}(e,{onInit:g})),t.render(Ae.jsx(c,{children:i}),l)}},[l,i,g,a]),Hu(()=>{h()},[a]),Hu(()=>{n?Object.assign(hA.defaultTextStyle,n):Object.assign(hA.defaultTextStyle,Xu)},[n]),ae.useEffect(()=>{const e=u.current;if(e)return function(e){const t=Gu.get(e);t&&nu.unmountQueue.delete(t)}(e),()=>{!function(e){const t=Gu.get(e);t&&(t.applicationState.isInitialised?ju(t):nu.unmountQueue.add(t))}(e)}},[]),Ae.jsx("canvas",{ref:u,className:r})}),Ju=ae.forwardRef(function(e,t){return Ae.jsx(ue,{children:Ae.jsx(zu,{ref:t,...e})})});function Wu(){const e=ae.useContext(tu);return Uu(e.app instanceof ho,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),e}var Ku,Yu=(Ku=import.meta.url,function(e){var t,i,r;e=e||{},t||(t=void 0!==e?e:{}),t.ready=new Promise(function(e,t){i=e,r=t});var n=Object.assign({},t),o="";"undefined"!=typeof document&&document.currentScript&&(o=document.currentScript.src),Ku&&(o=Ku),o=0!==o.indexOf("blob:")?o.substr(0,o.replace(/[?#].*/,"").lastIndexOf("/")+1):"";var s,a=t.print||function(){}.bind(),l=t.printErr||function(){}.bind();Object.assign(t,n),n=null,t.wasmBinary&&(s=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&k("no native wasm support detected");var c,A,u,d,h,g,f,p,m,x,E=!1;function C(e,t,i){i=t+i;for(var r="";!(t>=i);){var n=e[t++];if(!n)break;if(128&n){var o=63&e[t++];if(192==(224&n))r+=String.fromCharCode((31&n)<<6|o);else{var s=63&e[t++];65536>(n=224==(240&n)?(15&n)<<12|o<<6|s:(7&n)<<18|o<<12|s<<6|63&e[t++])?r+=String.fromCharCode(n):(n-=65536,r+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else r+=String.fromCharCode(n)}return r}function B(){var e=c.buffer;A=e,t.HEAP8=u=new Int8Array(e),t.HEAP16=h=new Int16Array(e),t.HEAP32=f=new Int32Array(e),t.HEAPU8=d=new Uint8Array(e),t.HEAPU16=g=new Uint16Array(e),t.HEAPU32=p=new Uint32Array(e),t.HEAPF32=m=new Float32Array(e),t.HEAPF64=x=new Float64Array(e)}var b,I=[],y=[],v=[];function w(){var e=t.preRun.shift();I.unshift(e)}var Q,D=0,N=null;function k(e){throw t.onAbort&&t.onAbort(e),l(e="Aborted("+e+")"),E=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),r(e),e}function S(e){return e.startsWith("data:application/octet-stream;base64,")}if(!S(Q="data:application/octet-stream;base64,AGFzbQEAAAABugM3YAF/AGACf38AYAF/AX9gA39/fwBgAn98AGACf38Bf2ADf39/AX9gBH9/f30BfWADf398AGAAAGAEf39/fwBgAX8BfGACf38BfGAFf39/f38Bf2AAAX9gA39/fwF9YAZ/f31/fX8AYAV/f39/fwBgAn9/AX1gBX9/f319AX1gAX8BfWADf35/AX5gB39/f39/f38AYAZ/f39/f38AYAR/f39/AX9gBn9/f319fQF9YAR/f31/AGADf399AX1gBn98f39/fwF/YAR/fHx/AGACf30AYAh/f39/f39/fwBgDX9/f39/f39/f39/f38AYAp/f39/f39/f39/AGAFf39/f38BfGAEfHx/fwF9YA1/fX1/f399fX9/f39/AX9gB39/f319f38AYAJ+fwF/YAN/fX0BfWABfAF8YAN/fHwAYAR/f319AGAHf39/fX19fQF9YA1/fX99f31/fX19fX1/AX9gC39/f39/f399fX19AX9gCH9/f39/f319AGAEf39+fgBgB39/f39/f38Bf2ACfH8BfGAFf398fH8AYAN/f38BfGAEf39/fABgA39/fQBgBn9/fX99fwF/ArUBHgFhAWEAHwFhAWIAAwFhAWMACQFhAWQAFgFhAWUAEQFhAWYAIAFhAWcAAAFhAWgAIQFhAWkAAwFhAWoAAAFhAWsAFwFhAWwACgFhAW0ABQFhAW4AAwFhAW8AAQFhAXAAFwFhAXEABgFhAXIAAAFhAXMAIgFhAXQACgFhAXUADQFhAXYAFgFhAXcAAgFhAXgAAwFhAXkAGAFhAXoAAgFhAUEAAQFhAUIAEQFhAUMAAQFhAUQAAAOiAqACAgMSBwcACRkDAAoRBgYKEwAPDxMBBiMTCgcHGgMUASQFJRQHAwMKCgMmAQYYDxobFAAKBw8KBwMDAgkCAAAFGwACBwIHBgIDAQMIDAABKAkHBQURACkZASoAAAIrLAIALQcHBy4HLwkFCgMCMA0xAgMJAgACAQYKAQIBBQEACQIFAQEABQAODQ0GFQIBHBUGAgkCEAAAAAUyDzMMBQYINAUCAwUODg41AgMCAgIDBgICNgIBDAwMAQsLCwsLCx0CAAIAAAABABABBQICAQMCEgMMCwEBAQEBAQsLAQICAwICAgICAgIDAgIICAEICAgEBAQEBAQEBAQABAQABAQEBAAE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GiABQQA2AvADIAFCADcC6AMgAigC7AMiAyACKALoAyIERwRAIAMgBGsiBEEASA0FIAEgBBAeIgM2AuwDIAEgAzYC6AMgASADIARqNgLwAyACKALoAyIEIAIoAuwDIghHBEADQCADIAQoAgA2AgAgA0EEaiEDIARBBGoiBCAIRw0ACwsgASADNgLsAwsgASACKQL0AzcC9AMgASACKAKEBDYChAQgASACKQL8AzcC/AMgAUEANgLkAwsgBSABNgIAIAEgADYC5AMLIAZBAWohBiAFQQRqIgUgB0cNAAsLDwsQAgALUAACQAJAAkACQAJAIAIOBAQAAQIDCyAAIAEgAUEwahBDDwsgACABIAFBMGogAxBEDwsgACABIAFBMGoQQg8LECQACyAAIAEgAUEwaiADEEULcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QdwlaigCACACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwt5AgF/AX0jAEEQayIDJAAgA0EIaiAAIAFBAnRB7CVqKAIAIAIQU0MAAMB/IQQCQAJAAkAgAy0ADEEBaw4CAAECCyADKgIIIQQMAQsgAyoCCEMAAAAAlEMK1yM8lCEECyADQRBqJAAgBEMAAAAAl0MAAAAAIAQgBFsbC1QAAkACQAJAAkACQCACDgQEAAECAwsgACABIAFBwgBqEEMPCyAAIAEgAUHCAGogAxBEDwsgACABIAFBwgBqEEIPCxAkAAsgACABIAFBwgBqIAMQRQsvACAAIAJFQQF0IgIgASADEGAgACACIAEQS5IgACACIAEgAxB/IAAgAiABEFKSkgvOAQIDfwJ9IwBBEGsiAyQAQQEhBCADQQhqIABB/ABqIgUgACABQQF0akH2AGoiAS8BABAfAkACQCADKgIIIgcgAioCACIGXARAIAcgB1sEQCACLQAEIQIMAgsgBiAGXCEECyACLQAEIQIgBEUNACADLQAMIAJB/wFxRg0BCyAFIAEgBiACEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyADQRBqJAALzgECA38CfSMAQRBrIgMk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AWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwscACAAIAFBCCACpyACQiCIpyADpyADQiCIpxAVCwUAEFgACzkAIABFBEBBAA8LAn8gAUGAf3FBgL8DRiABQf8ATXJFBEBB/DtBGTYCAEF/DAELIAAgAToAAEEBCwvEAgACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABQQlrDhIACgsMCgsCAwQFDAsMDAoLBwgJCyACIAIoAgAiAUEEajYCACAAIAEoAgA2AgAPCwALIAIgAigCACIBQQRqNgIAIAAgATIBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATMBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATAAADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATEAADcDAA8LAAsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKwMAOQMADwsgACACIAMRAQALDwsgAiACKAIAIgFBBGo2AgAgACABNAIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMAC84BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQegAaiIBLwEAEB8CQAJAIAMqAggiByACKgIAIgZcBEAgByAHWwRAIAItAAQhAgwCCyAGIAZcIQQLIAItAAQhAiAERQ0AIAMtAAwgAkH/AXFGDQELIAUgASAGIAIQOQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIANBEGokAAtdAQR/IAAoAgAhAgNAIAIsAAAiAxBXBEBBfyEEIAAgAkEBaiICNgIAIAFBzJmz5gBNBH9BfyADQTBrIgMgAUEKbCIEaiADIARB/////wdzShsFIAQLIQEMAQsLIAELrhQCEn8BfiMAQdAAayIIJAAgCCABNgJMIAhBN2ohFyAIQThqIRQCQAJAAkACQANAIAEhDSAHIA5B/////wdzSg0BIAcgDmohDgJAAkACQCANIgctAAAiCQRAA0ACQAJAIAlB/wFxIgFFBEAgByEBDAELIAFBJUcNASAH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IQEgAEIANwIEIAAgATYCACABIAA2AgQgAkEQaiQAIAALGwEBfyAABEAgACgCACIBBEAgARAjCyAAECMLC0kBAn9BBBAeIQFBIBAeIgBBADYCHCAAQoCAgICAgIDAPzcCFCAAQgA3AgwgAEEAOgAIIABBAzYCBCAAQQA2AgAgASAANgIAIAELIAAgAkEFR0EAIAIbRQRAQbgwIAMgBBBJDwsgAyAEEHALIgEBfiABIAKtIAOtQiCGhCAEIAARFQAiBUIgiKckASAFpwuoAQEFfyAAKAJUIgMoAgAhBSADKAIEIgQgACgCFCAAKAIcIgdrIgYgBCAGSRsiBgRAIAUgByAGECsaIAMgAygCACAGaiIFNgIAIAMgAygCBCAGayIENgIECyAEIAIgAiAESxsiBARAIAUgASAEECsaIAMgAygCACAEaiIFNgIAIAMgAygCBCAEazYCBAsgBUEAOgAAIAAgACgCLCIBNgIcIAAgATYCFCACCwQAQgALBABBAAuKBQIGfgJ/IAEgASgCAEEHakF4cSIBQRBqNgIAIAAhCSABKQMAIQMgASkDCCEGIwBBIGsiCCQAAkAgBkL///////////8AgyIEQoCAgICAgMCAPH0gBEKAgICAgIDA/8MAfVQEQCAGQgSGIANCPIiEIQQgA0L//////////w+DIgNCgYCAgICAgIAIWgRAIARCgYCAgICAgIDAAHwhAgwCCyAEQoCAgICAgICAQH0hAiADQoCAgICAgICACFINASACIARCAYN8IQIMAQsgA1AgBEKAgICAgIDA//8AVCAEQoCAgICAgMD//wBRG0UEQCAGQgSGIANCPIiEQv////////8Dg0KAgICAgICA/P8AhCECDAELQoCAgICAgID4/wAhAiAEQv///////7//wwBWDQBCACECIARCMIinIgBBkfcASQ0AIAMhAiAGQv///////z+DQoCAgICAgMAAhCIFIQcCQCAAQYH3AGsiAUHAAHEEQCACIAFBQGqthiEHQgAhAgwBCyABRQ0AIAcgAa0iBIYgAkHAACABa62IhCEHIAIgBIYhAgsgCCACNwMQIAggBzcDGAJAQYH4ACAAayIAQcAAcQRAIAUgAEFAaq2IIQNCACEFDAELIABFDQAgBUHAACAAa62GIAMgAK0iAoiEIQMgBSACiCEFCyAIIAM3AwAgCCAF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ASAAKAIAIQAgASACQQFxBH8gASgCACAAaigCAAUgAAsRCwALYQECfyMAQRBrIgIkACABIAAoAgQiA0EBdWohASAAKAIAIQAgAiABIANBAXEEfyABKAIAIABqKAIABSAACxEBAEEQEB4iACACKQMINwMIIAAgAikDADcDACACQRBqJAAgAAtjAQJ/IwBBEGsiAyQAIAEgACgCBCIEQQF1aiEBIAAoAgAhACADIAEgAiAEQQFxBH8gASgCACAAaigCAAUgAAsRAwBBEBAeIgAgAykDCDcDCCAAIAMpAwA3AwAgA0EQaiQAIAALNwEBfyABIAAoAgQiA0EBdWohASAAKAIAIQAgASACIANBAXEEfyABKAIAIABqKAIABSAACxEEAAs5AQF/IAEgACgCBCIEQQF1aiEBIAAoAgAhACABIAIgAyAEQQFxBH8gASgCACAAaigCAAUgAAsRCAALCQAgASAAEQIACwUAQcM7Cw8AIAEgACgCAGogAjYCAAsNACABIAAoAgBqKAIACxgBAX9BEBAeIgBCADcDCCAAQQA2AgAgAAsYAQF/QRAQHiIAQgA3AwAgAEIANwMIIAALDABBMBAeQQBBMBAqCzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRHgALBQBBvjsLIQAgACABKAIAIAEgASwAC0EASBtBuzsgAigCABAQNgIACyoBAX9BDBAeIgFBADoABCABIAAoAgA2AgggAEEANgIAIAFB2Cc2AgAgAQsFAEG7OwsFAEG4OwshACAAIAEoAgAgASABLAALQQBIG0GkOyACKAIAEBA2AgAL2AEBBH8jAEEgayIDJAAgASgCACIEQfD///8HSQRAAkACQCAEQQtPBEAgBEEPckEBaiIFEB4hBiADIAVBgICAgHhyNgIQIAMgBjYCCCADIAQ2AgwgBCAGaiEFDAELIAMgBDoAEyADQQhqIgYgBGohBSAERQ0BCyAGIAFBBGogBBArGgsgBUEAOgAAIAMgAjYCACADQRhqIANBCGogAyAAEQMAIAMoAhgQHSADKAIYIgAQBiADKAIAEAYgAywAE0EASARAIAMoAggQIwsgA0EgaiQAIAAPCxACAAsqAQF/QQwQHiIBQQA6AAQgASAAKAIANgIIIABBADYCACABQeAmNgIA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AkEIaiAIIAYQHyACIAcgAC8AABAfQQEhAyACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSADC0UNAiACLQAMIAItAARHDQILIABBAmohAEEBIQMgBCEGQQEhBCAGRQ0ACyABLwB6IgBBB3FFBEAgBS0AekEHcUUNAgsgCCAAECAiCiAHIAUvAHoQICILWw0BIAogClsNACALIAtcDQELIAFBFGogBUEUakHoABArGiABQfwAaiAFQfwAahCgAQNAIAEtAAAiAEEEcQ0BIAEgAEEEcjoAACABKAIQIgAEQCABIAARAAALIAFBgICA/gc2ApwBIAEoAuQDIgENAAsLIAJBEGokAAvGAwEEfyMAQaAEayICJAAgACgCBCEBIABBADYCBCABBEAgASABKAIAKAIEEQAACyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALAkAgACgCACIAKALoAyAAKALsA0YEQCAAKALkAw0BIAAgAkEYaiAAKAL0AxBcIgEpAgA3AgAgACABKAIQNgIQIAAgASkCCDcCCCAAQRRqIAFBFGpB6AAQKxogACABKQKMATcCjAEgACABKQKEATcChAEgACABKQJ8NwJ8IAEoApQBIQQgAUEANgKUASAAKAKUASEDIAAgBDYClAEgAwRAIAMQWwsgAEGYAWogAUGYAWpB0AIQKxogACgC6AMiAwRAIAAgAzYC7AMgAxAjCyAAIAEoAugDNgLoAyAAIAEoAuwDNgLsAyAAIAEoAvADNgLwAyABQQA2AvADIAFCADcC6AMgACABKQL8AzcC/AMgACABKQL0AzcC9AMgACABKAKEBDYChAQgASgClAEhACABQQA2ApQBIAAEQCAAEFsLIAJBoARqJAAPCyACQfAcNgIQIABBBUHYJSACQRBqECwQJAALIAJB5hE2AgAgAEEFQdglIAIQLBAkAAsLAEEMEB4gABCiAQsLAEEMEB5BABCiAQsNACAAKAIALQAIQQFxCwoAIAAoAgAoAhQLGQAgAUH/AXEEQBACAAsgACgCACgCEEEBcQsYACAAKAIAIgAgAC0ACEH+AXEgAXI6AAgLJgAgASAAKAIAIgAoAhRHBEAgACABNgIUIAAgACgCDEEBajYCDAsLkgEBAn8jAEEQayICJAAgACgCACEAIAFDAAAAAGAEQCABIAAqAhhcBEAgACABOAIYIAAgACgCDEEBajYCDAsgAkEQaiQADwsgAkGIFDYCACMAQRBrIgMkACADIAI2AgwCQCAARQRAQbgwQdglIAIQSRoMAQsgAEEAQQVB2CUgAiAAKAIEEQ0AGgsgA0EQaiQAECQACz8AIAFB/wFxRQRAIAIgACgCACIAKAIQIgFBAXFHBEAgACABQX5xIAJyNgIQIAAgACgCDEEBajYCDAsPCxACAAsL4CYjAEGACAuBHk9ubHkgbGVhZiBub2RlcyB3aXRoIGN1c3RvbSBtZWFzdXJlIGZ1bmN0aW9ucyBzaG91bGQgbWFudWFsbHkgbWFyayB0aGVtc2VsdmVzIGFzIGRpcnR5AGlzRGlydHkAbWFya0RpcnR5AGRlc3Ryb3kAc2V0RGlzcGxheQBnZXREaXNwbGF5AHNldEZsZXgALSsgICAwWDB4AC0wWCswWCAwWC0weCsweCAweABzZXRGbGV4R3JvdwBnZXRGbGV4R3JvdwBzZXRPdmVyZmxvdwBnZXRPdmVyZmxvdwBoYXNOZXdMYXlvdXQAY2FsY3VsYXRlTGF5b3V0AGdldENvbXB1dGVkTGF5b3V0AHVuc2lnbmVkIHNob3J0AGdldENoaWxkQ291bnQAdW5zaWduZWQgaW50AHNldEp1c3RpZnlDb250ZW50AGdldEp1c3RpZnlDb250ZW50AGF2YWlsYWJsZUhlaWdodCBpcyBpbmRlZmluaXRlIHNvIGhlaWdodFNpemluZ01vZGUgbXVzdCBiZSBTaXppbmdNb2RlOjpNYXhDb250ZW50AGF2YWlsYWJsZVdpZHRoIGlzIGluZGVmaW5pdGUgc28gd2lkdGhTaXppbmdNb2RlIG11c3QgYmUgU2l6aW5nTW9kZTo6TWF4Q29udGVudABzZXRBbGlnbkNvbnRlbnQAZ2V0QWxpZ25Db250ZW50AGdldFBhcmVudABpbXBsZW1lbnQAc2V0TWF4SGVpZ2h0UGVyY2VudABzZXRIZWlnaHRQZXJjZW50AHNldE1pbkhlaWdodFBlcmNlbnQAc2V0RmxleEJhc2lzUGVyY2VudABzZXRHYXBQZXJjZW50AHNldFBvc2l0aW9uUGVyY2VudABzZXRNYXJnaW5QZXJjZW50AHNldE1heFdpZHRoUGVyY2VudABzZXRXaWR0aFBlcmNlbnQAc2V0TWluV2lkdGhQZXJjZW50AHNldFBhZGRpbmdQZXJjZW50AGhhbmRsZS50eXBlKCkgPT0gU3R5bGVWYWx1ZUhhbmRsZTo6VHlwZTo6UG9pbnQgfHwgaGFuZGxlLnR5cGUoKSA9PSBTdHlsZVZhbHVlSGFuZGxlOjpUeXBlOjpQZXJjZW50AGNyZWF0ZURlZmF1bHQAdW5pdAByaWdodABoZWlnaHQAc2V0TWF4SGVpZ2h0AGdldE1heEhlaWdodABzZXRIZWlnaHQAZ2V0SGVpZ2h0AHNldE1pbkhlaWdodABnZXRNaW5IZWlnaHQAZ2V0Q29tcHV0ZWRIZWlnaHQAZ2V0Q29tcHV0ZWRSaWdodABsZWZ0AGdldENvbXB1dGVkTGVmdAByZXNldABfX2Rlc3RydWN0AGZsb2F0AHVpbnQ2NF90AHVzZVdlYkRlZmF1bHRzAHNldFVzZVdlYkRlZmF1bHRzAHNldEFsaWduSXRlbXMAZ2V0QWxpZ25JdGVtcwBzZXRGbGV4QmFzaXMAZ2V0RmxleEJhc2lzAENhbm5vdCBnZXQgbGF5b3V0IHByb3BlcnRpZXMgb2YgbXVsdGktZWRnZSBzaG9ydGhhbmRzAHNldFBvaW50U2NhbGVGYWN0b3IATWVhc3VyZUNhbGxiYWNrV3JhcHBlcgBEaXJ0aWVkQ2FsbGJhY2tXcmFwcGVyAENhbm5vdCByZXNldCBhIG5vZGUgc3RpbGwgYXR0YWNoZWQgdG8gYSBvd25lcgBzZXRCb3JkZXIAZ2V0Qm9yZGVyAGdldENvbXB1dGVkQm9yZGVyAGdldE51bWJlcgBoYW5kbGUudHlwZSgpID09IFN0eWxlVmFsdWVIYW5kbGU6OlR5cGU6Ok51bWJlcgB1bnNpZ25lZCBjaGFyAHRvcABnZXRDb21wdXRlZFRvcABzZXRGbGV4V3JhcABnZXRGbGV4V3JhcABzZXRHYXAAZ2V0R2FwACVwAHNldEhlaWdodEF1dG8Ac2V0RmxleEJhc2lzQXV0bwBzZXRQb3NpdGlvbkF1dG8Ac2V0TWFyZ2luQXV0bwBzZXRXaWR0aEF1dG8AU2NhbGUgZmFjdG9yIHNob3VsZCBub3QgYmUgbGVzcyB0aGFuIHplcm8Ac2V0QXNwZWN0UmF0aW8AZ2V0QXNwZWN0UmF0aW8Ac2V0UG9zaXRpb24AZ2V0UG9zaXRpb24Abm90aWZ5T25EZXN0cnVjdGlvbgBzZXRGbGV4RGlyZWN0aW9uAGdldEZsZXhEaXJlY3Rpb24Ac2V0RGlyZWN0aW9uAGdldERpcmVjdGlvbgBzZXRNYXJnaW4AZ2V0TWFyZ2luAGdldENvbXB1dGVkTWFyZ2luAG1hcmtMYXlvdXRTZWVuAG5hbgBib3R0b20AZ2V0Q29tcHV0ZWRCb3R0b20AYm9vbABlbXNjcmlwdGVuOjp2YWwAc2V0RmxleFNocmluawBnZXRGbGV4U2hyaW5rAHNldEFsd2F5c0Zvcm1zQ29udGFpbmluZ0Jsb2NrAE1lYXN1cmVDYWxsYmFjawBEaXJ0aWVkQ2FsbGJhY2sAZ2V0TGVuZ3RoAHdpZHRoAHNldE1heFdpZHRoAGdldE1heFdpZHRoAHNldFdpZHRoAGdldFdpZHRoAHNldE1pbldpZHRoAGdldE1pbldpZHRoAGdldENvbXB1dGVkV2lkdGgAcHVzaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1NtYWxsVmFsdWVCdWZmZXIuaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1N0eWxlVmFsdWVQb29sLmgAdW5zaWduZWQgbG9uZwBzZXRCb3hTaXppbmcAZ2V0Qm94U2l6aW5nAHN0ZDo6d3N0cmluZwBzdGQ6OnN0cmluZwBzdGQ6OnUxNnN0cmluZwBzdGQ6OnUzMnN0cmluZwBzZXRQYWRkaW5nAGdldFBhZGRpbmcAZ2V0Q29tcHV0ZWRQYWRkaW5nAFRyaWVkIHRvIGNvbnN0cnVjdCBZR05vZGUgd2l0aCBudWxsIGNvbmZpZwBBdHRlbXB0aW5nIHRvIGNvbnN0cnVjdCBOb2RlIHdpdGggbnVsbCBjb25maWcAY3JlYXRlV2l0aENvbmZpZwBpbmYAc2V0QWxpZ25TZWxmAGdldEFsaWduU2VsZgBTaXplAHZhbHVlAFZhbHVlAGNyZWF0ZQBtZWFzdXJlAHNldFBvc2l0aW9uVHlwZQBnZXRQb3NpdGlvblR5cGUAaXNSZWZlcmVuY2VCYXNlbGluZQBzZXRJc1JlZmVyZW5jZUJhc2VsaW5lAGNvcHlTdHlsZQBkb3VibGUATm9kZQBleHRlbmQAaW5zZXJ0Q2hpbGQAZ2V0Q2hpbGQAcmVtb3ZlQ2hpbGQAdm9pZABzZXRFeHBlcmltZW50YWxGZWF0dXJlRW5hYmxlZABpc0V4cGVyaW1lbnRhbEZlYXR1cmVFbmFibGVkAGRpcnRpZWQAQ2Fubm90IHJlc2V0IGEgbm9kZSB3aGljaCBzdGlsbCBoYXMgY2hpbGRyZW4gYXR0YWNoZWQAdW5zZXRNZWFzdXJlRnVuYwB1bnNldERpcnRpZWRGdW5jAHNldEVycmF0YQBnZXRFcnJhdGEATWVhc3VyZSBmdW5jdGlvbiByZXR1cm5lZCBhbiBpbnZhbGlkIGRpbWVuc2lvbiB0byBZb2dhOiBbd2lkdGg9JWYsIGhlaWdodD0lZl0ARXhwZWN0IGN1c3RvbSBiYXNlbGluZSBmdW5jdGlvbiB0byBub3QgcmV0dXJuIE5hTgBOQU4ASU5GAGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4Ac3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVk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")){var P=Q;Q=t.locateFile?t.locateFile(P,o):o+P}function M(){var e=Q;try{if(e==Q&&s)return new Uint8Array(s);if(S(e))try{var t=Ke(e.slice(37)),i=new Uint8Array(t.length);for(e=0;e<t.length;++e)i[e]=t.charCodeAt(e);var r=i}catch(n){throw Error("Converting base64 string to bytes failed.")}else r=void 0;if(r)return r;throw"both async and sync fetching of the wasm failed"}catch(n){k(n)}}function V(e){for(;0<e.length;)e.shift()(t)}function _(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function L(e,t){return e=_(e),function(){return t.apply(this,arguments)}}var R=[{},{value:void 0},{value:null},{value:!0},{value:!1}],U=[];function T(e){var t=Error,i=L(e,function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))});return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},i}var O=void 0;function F(e){throw new O(e)}var G=e=>(e||F("Cannot use deleted val. handle = "+e),R[e].value),j=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=U.length?U.pop():R.length;return R[t]={ga:1,value:e},t}},H=void 0,X=void 0;function z(e){for(var t="";d[e];)t+=X[d[e++]];return t}var J=[];function W(){for(;J.length;){var e=J.pop();e.M.$=!1,e.delete()}}var K=void 0,Y={};function q(e,t){for(void 0===t&&F("ptr should not be undefined");e.R;)t=e.ba(t),e=e.R;return t}var Z={};function $(e){var t=z(e=qe(e));return et(e),t}function ee(e,t){var i=Z[e];return void 0===i&&F(t+" has unknown type "+$(e)),i}function te(){}var ie=!1;function re(e){--e.count.value,0===e.count.value&&(e.T?e.U.W(e.T):e.P.N.W(e.O))}function ne(e,t,i){return t===i?e:void 0===i.R||null===(e=ne(e,t,i.R))?null:i.na(e)}var oe={},se=void 0;function ae(e){throw new se(e)}function le(e,t){return t.P&&t.O||ae("makeClassHandle requires ptr and ptrType"),!!t.U!=!!t.T&&ae("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ce(Object.create(e,{M:{value:t}}))}function ce(e){return"undefined"==typeof FinalizationRegistry?(ce=e=>e,e):(ie=new FinalizationRegistry(e=>{re(e.M)}),te=e=>{ie.unregister(e)},(ce=e=>{var t=e.M;return t.T&&ie.register(e,{M:t},e),e})(e))}var Ae={};function ue(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function de(e){return this.fromWireType(f[e>>2])}var he={},ge={};function fe(e,t,i){function r(t){(t=i(t)).length!==e.length&&ae("Mismatched type converter count");for(var r=0;r<e.length;++r)me(e[r],t[r])}e.forEach(function(e){ge[e]=t});var n=Array(t.length),o=[],s=0;t.forEach((e,t)=>{Z.hasOwnProperty(e)?n[t]=Z[e]:(o.push(e),he.hasOwnProperty(e)||(he[e]=[]),he[e].push(()=>{n[t]=Z[e],++s===o.length&&r(n)}))}),0===o.length&&r(n)}function pe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function me(e,t,i={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||F('type "'+r+'" must have a positive integer typeid pointer'),Z.hasOwnProperty(e)){if(i.ua)return;F("Cannot register type '"+r+"' twice")}Z[e]=t,delete ge[e],he.hasOwnProperty(e)&&(t=he[e],delete he[e],t.forEach(e=>e()))}function xe(e){F(e.M.P.N.name+" instance already deleted")}function Ee(){}function Ce(e,t,i){if(void 0===e[t].S){var r=e[t];e[t]=function(){return e[t].S.hasOwnProperty(arguments.length)||F("Function '"+i+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].S+")!"),e[t].S[arguments.length].apply(this,arguments)},e[t].S=[],e[t].S[r.Z]=r}}function Be(e,t,i,r,n,o,s,a){this.name=e,this.constructor=t,this.X=i,this.W=r,this.R=n,this.pa=o,this.ba=s,this.na=a,this.ja=[]}function be(e,t,i){for(;t!==i;)t.ba||F("Expected null or instance of "+i.name+", got an instance of "+t.name),e=t.ba(e),t=t.R;return e}function Ie(e,t){return null===t?(this.ea&&F("null is not a valid "+this.name),0):(t.M||F('Cannot pass "'+Me(t)+'" as a '+this.name),t.M.O||F("Cannot pass deleted object as a pointer of type "+this.name),be(t.M.O,t.M.P.N,this.N))}function ye(e,t){if(null===t){if(this.ea&&F("null is not a valid "+this.name),this.da){var i=this.fa();return null!==e&&e.push(this.W,i),i}return 0}if(t.M||F('Cannot pass "'+Me(t)+'" as a '+this.name),t.M.O||F("Cannot pass deleted object as a pointer of type "+this.name),!this.ca&&t.M.P.ca&&F("Cannot convert argument of type "+(t.M.U?t.M.U.name:t.M.P.name)+" to parameter type "+this.name),i=be(t.M.O,t.M.P.N,this.N),this.da)switch(void 0===t.M.T&&F("Passing raw pointer to smart pointer is illegal"),this.Ba){case 0:t.M.U===this?i=t.M.T:F("Cannot convert argument of type "+(t.M.U?t.M.U.name:t.M.P.name)+" to parameter type "+this.name);break;case 1:i=t.M.T;break;case 2:if(t.M.U===this)i=t.M.T;else{var r=t.clone();i=this.xa(i,j(function(){r.delete()})),null!==e&&e.push(this.W,i)}break;default:F("Unsupporting sharing policy")}return i}function ve(e,t){return null===t?(this.ea&&F("null is not a valid "+this.name),0):(t.M||F('Cannot pass "'+Me(t)+'" as a '+this.name),t.M.O||F("Cannot pass deleted object as a pointer of type "+this.name),t.M.P.ca&&F("Cannot convert argument of type "+t.M.P.name+" to parameter type "+this.name),be(t.M.O,t.M.P.N,this.N))}function we(e,t,i,r){this.name=e,this.N=t,this.ea=i,this.ca=r,this.da=!1,this.W=this.xa=this.fa=this.ka=this.Ba=this.wa=void 0,void 0!==t.R?this.toWireType=ye:(this.toWireType=r?Ie:ve,this.V=null)}function Qe(e,i){var r=(e=z(e)).includes("j")?function(e,i){var r=[];return function(){if(r.length=0,Object.assign(r,arguments),e.includes("j")){var n=t["dynCall_"+e];n=r&&r.length?n.apply(null,[i].concat(r)):n.call(null,i)}else n=b.get(i).apply(null,r);return n}}(e,i):b.get(i);return"function"!=typeof r&&F("unknown function pointer with signature "+e+": "+i),r}var De=void 0;function Ne(e,t){var i=[],r={};throw t.forEach(function e(t){r[t]||Z[t]||(ge[t]?ge[t].forEach(e):(i.push(t),r[t]=!0))}),new De(e+": "+i.map($).join([", "]))}function ke(e,t,i,r,n){var o=t.length;2>o&&F("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=null!==t[1]&&null!==i,a=!1;for(i=1;i<t.length;++i)if(null!==t[i]&&void 0===t[i].V){a=!0;break}var l="void"!==t[0].name,c=o-2,A=Array(c),u=[],d=[];return function(){if(arguments.length!==c&&F("function "+e+" called with "+arguments.length+" arguments, expected "+c+" args!"),d.length=0,u.length=s?2:1,u[0]=n,s){var i=t[1].toWireType(d,this);u[1]=i}for(var o=0;o<c;++o)A[o]=t[o+2].toWireType(d,arguments[o]),u.push(A[o]);if(o=r.apply(null,u),a)ue(d);else for(var h=s?1:2;h<t.length;h++){var g=1===h?i:A[h-2];null!==t[h].V&&t[h].V(g)}return i=l?t[0].fromWireType(o):void 0}}function Se(e,t){for(var i=[],r=0;r<e;r++)i.push(p[t+4*r>>2]);return i}function Pe(e){4<e&&0===--R[e].ga&&(R[e]=void 0,U.push(e))}function Me(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Ve(e,t){switch(t){case 2:return function(e){return this.fromWireType(m[e>>2])};case 3:return function(e){return this.fromWireType(x[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function _e(e,t,i){switch(t){case 0:return i?function(e){return u[e]}:function(e){return d[e]};case 1:return i?function(e){return h[e>>1]}:function(e){return g[e>>1]};case 2:return i?function(e){return f[e>>2]}:function(e){return p[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Le(e,t){for(var i="",r=0;!(r>=t/2);++r){var n=h[e+2*r>>1];if(0==n)break;i+=String.fromCharCode(n)}return i}function Re(e,t,i){if(void 0===i&&(i=2147483647),2>i)return 0;var r=t;i=(i-=2)<2*e.length?i/2:e.length;for(var n=0;n<i;++n)h[t>>1]=e.charCodeAt(n),t+=2;return h[t>>1]=0,t-r}function Ue(e){return 2*e.length}function Te(e,t){for(var i=0,r="";!(i>=t/4);){var n=f[e+4*i>>2];if(0==n)break;++i,65536<=n?(n-=65536,r+=String.fromCharCode(55296|n>>10,56320|1023&n)):r+=String.fromCharCode(n)}return r}function Oe(e,t,i){if(void 0===i&&(i=2147483647),4>i)return 0;var r=t;i=r+i-4;for(var n=0;n<e.length;++n){var o=e.charCodeAt(n);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++n)),f[t>>2]=o,(t+=4)+4>i)break}return f[t>>2]=0,t-r}function Fe(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);55296<=r&&57343>=r&&++i,t+=4}return t}var Ge={};function je(e){var t=Ge[e];return void 0===t?z(e):t}var He=[],Xe=[],ze=[null,[],[]];O=t.BindingError=T("BindingError"),t.count_emval_handles=function(){for(var e=0,t=5;t<R.length;++t)void 0!==R[t]&&++e;return e},t.get_first_emval=function(){for(var e=5;e<R.length;++e)if(void 0!==R[e])return R[e];return null},H=t.PureVirtualError=T("PureVirtualError");for(var Je=Array(256),We=0;256>We;++We)Je[We]=String.fromCharCode(We);X=Je,t.getInheritedInstanceCount=function(){return Object.keys(Y).length},t.getLiveInheritedInstances=function(){var e,t=[];for(e in Y)Y.hasOwnProperty(e)&&t.push(Y[e]);return t},t.flushPendingDeletes=W,t.setDelayFunction=function(e){K=e,J.length&&K&&K(W)},se=t.InternalError=T("InternalError"),Ee.prototype.isAliasOf=function(e){if(!(this instanceof Ee&&e instanceof Ee))return!1;var t=this.M.P.N,i=this.M.O,r=e.M.P.N;for(e=e.M.O;t.R;)i=t.ba(i),t=t.R;for(;r.R;)e=r.ba(e),r=r.R;return t===r&&i===e},Ee.prototype.clone=function(){if(this.M.O||xe(this),this.M.aa)return this.M.count.value+=1,this;var e=ce,t=Object,i=t.create,r=Object.getPrototypeOf(this),n=this.M;return(e=e(i.call(t,r,{M:{value:{count:n.count,$:n.$,aa:n.aa,O:n.O,P:n.P,T:n.T,U:n.U}}}))).M.count.value+=1,e.M.$=!1,e},Ee.prototype.delete=function(){this.M.O||xe(this),this.M.$&&!this.M.aa&&F("Object already scheduled for deletion"),te(this),re(this.M),this.M.aa||(this.M.T=void 0,this.M.O=void 0)},Ee.prototype.isDeleted=function(){return!this.M.O},Ee.prototype.deleteLater=function(){return this.M.O||xe(this),this.M.$&&!this.M.aa&&F("Object already scheduled for deletion"),J.push(this),1===J.length&&K&&K(W),this.M.$=!0,this},we.prototype.qa=function(e){return this.ka&&(e=this.ka(e)),e},we.prototype.ha=function(e){this.W&&this.W(e)},we.prototype.argPackAdvance=8,we.prototype.readValueFromPointer=de,we.prototype.deleteObject=function(e){null!==e&&e.delete()},we.prototype.fromWireType=function(e){function t(){return this.da?le(this.N.X,{P:this.wa,O:i,U:this,T:e}):le(this.N.X,{P:this,O:e})}var i=this.qa(e);if(!i)return this.ha(e),null;var r=function(e,t){return t=q(e,t),Y[t]}(this.N,i);if(void 0!==r)return 0===r.M.count.value?(r.M.O=i,r.M.T=e,r.clone()):(r=r.clone(),this.ha(e),r);if(r=this.N.pa(i),!(r=oe[r]))return t.call(this);r=this.ca?r.la:r.pointerType;var n=ne(i,this.N,r.N);return null===n?t.call(this):this.da?le(r.N.X,{P:r,O:n,U:this,T:e}):le(r.N.X,{P:r,O:n})},De=t.UnboundTypeError=T("UnboundTypeError");var Ke="function"==typeof atob?atob:function(e){var t="",i=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++));r=r<<2|n>>4,n=(15&n)<<4|o>>2;var a=(3&o)<<6|s;t+=String.fromCharCode(r),64!==o&&(t+=String.fromCharCode(n)),64!==s&&(t+=String.fromCharCode(a))}while(i<e.length);return t},Ye={l:function(e,t,i,r){k("Assertion failed: "+(e?C(d,e):"")+", at: "+[t?t?C(d,t):"":"unknown filename",i,r?r?C(d,r):"":"unknown function"])},q:function(e,t,i){e=z(e),t=ee(t,"wrapper"),i=G(i);var r=[].slice,n=t.N,o=n.X,s=n.R.X,a=n.R.constructor;for(var l in e=L(e,function(){n.R.ja.forEach(function(e){if(this[e]===s[e])throw new H("Pure virtual function "+e+" must be implemented in JavaScript")}.bind(this)),Object.defineProperty(this,"__parent",{value:o}),this.__construct.apply(this,r.call(arguments))}),o.__construct=function(){this===o&&F("Pass correct 'this' to __construct");var e=a.implement.apply(void 0,[this].concat(r.call(arguments)));te(e);var t=e.M;e.notifyOnDestruction(),t.aa=!0,Object.defineProperties(this,{M:{value:t}}),ce(this),e=t.O,e=q(n,e),Y.hasOwnProperty(e)?F("Tried to register registered instance: "+e):Y[e]=this},o.__destruct=function(){this===o&&F("Pass correct 'this' to __destruct"),te(this);var e=this.M.O;e=q(n,e),Y.hasOwnProperty(e)?delete Y[e]:F("Tried to unregister unregistered instance: "+e)},e.prototype=Object.create(o),i)e.prototype[l]=i[l];return j(e)},j:function(e){var t=Ae[e];delete Ae[e];var i=t.fa,r=t.W,n=t.ia;fe([e],n.map(e=>e.ta).concat(n.map(e=>e.za)),e=>{var o={};return n.forEach((t,i)=>{var r=e[i],s=t.ra,a=t.sa,l=e[i+n.length],c=t.ya,A=t.Aa;o[t.oa]={read:e=>r.fromWireType(s(a,e)),write:(e,t)=>{var i=[];c(A,e,l.toWireType(i,t)),ue(i)}}}),[{name:t.name,fromWireType:function(e){var t,i={};for(t in o)i[t]=o[t].read(e);return r(e),i},toWireType:function(e,t){for(var n in o)if(!(n in t))throw new TypeError('Missing field:  "'+n+'"');var s=i();for(n in o)o[n].write(s,t[n]);return null!==e&&e.push(r,s),s},argPackAdvance:8,readValueFromPointer:de,V:r}]})},v:function(){},B:function(e,t,i,r,n){var o=pe(i);me(e,{name:t=z(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:n},argPackAdvance:8,readValueFromPointer:function(e){if(1===i)var r=u;else if(2===i)r=h;else{if(4!==i)throw new TypeError("Unknown boolean type size: "+t);r=f}return this.fromWireType(r[e>>o])},V:null})},f:function(e,i,r,n,o,s,a,l,c,A,u,d,h){u=z(u),s=Qe(o,s),l&&(l=Qe(a,l)),A&&(A=Qe(c,A)),h=Qe(d,h);var g=_(u);!function(e,i){t.hasOwnProperty(e)?(F("Cannot register public name '"+e+"' twice"),Ce(t,e,e),t.hasOwnProperty(void 0)&&F("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),t[e].S[void 0]=i):t[e]=i}(g,function(){Ne("Cannot construct "+u+" due to unbound types",[n])}),fe([e,i,r],n?[n]:[],function(i){if(i=i[0],n)var r=i.N,o=r.X;else o=Ee.prototype;i=L(g,function(){if(Object.getPrototypeOf(this)!==a)throw new O("Use 'new' to construct "+u);if(void 0===c.Y)throw new O(u+" has no accessible constructor");var e=c.Y[arguments.length];if(void 0===e)throw new O("Tried to invoke ctor of "+u+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(c.Y).toString()+") parameters instead!");return e.apply(this,arguments)});var a=Object.create(o,{constructor:{value:i}});i.prototype=a;var c=new Be(u,i,a,h,r,s,l,A);r=new we(u,c,!0,!1),o=new we(u+"*",c,!1,!1);var d=new we(u+" const*",c,!1,!0);return oe[e]={pointerType:o,la:d},function(e,i){t.hasOwnProperty(e)||ae("Replacing nonexistant public symbol"),t[e]=i,t[e].Z=void 0}(g,i),[r,o,d]})},d:function(e,t,i,r,n,o,s){var a=Se(i,r);t=z(t),o=Qe(n,o),fe([],[e],function(e){function r(){Ne("Cannot call "+n+" due to unbound types",a)}var n=(e=e[0]).name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var l=e.N.constructor;return void 0===l[t]?(r.Z=i-1,l[t]=r):(Ce(l,t,n),l[t].S[i-1]=r),fe([],a,function(e){return e=ke(n,[e[0],null].concat(e.slice(1)),null,o,s),void 0===l[t].S?(e.Z=i-1,l[t]=e):l[t].S[i-1]=e,[]}),[]})},p:function(e,t,i,r,n,o){0<t||k();var s=Se(t,i);n=Qe(r,n),fe([],[e],function(e){var i="constructor "+(e=e[0]).name;if(void 0===e.N.Y&&(e.N.Y=[]),void 0!==e.N.Y[t-1])throw new O("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.N.Y[t-1]=()=>{Ne("Cannot construct "+e.name+" due to unbound types",s)},fe([],s,function(r){return r.splice(1,0,null),e.N.Y[t-1]=ke(i,r,null,n,o),[]}),[]})},a:function(e,t,i,r,n,o,s,a){var l=Se(i,r);t=z(t),o=Qe(n,o),fe([],[e],function(e){function r(){Ne("Cannot call "+n+" due to unbound types",l)}var n=(e=e[0]).name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.N.ja.push(t);var c=e.N.X,A=c[t];return void 0===A||void 0===A.S&&A.className!==e.name&&A.Z===i-2?(r.Z=i-2,r.className=e.name,c[t]=r):(Ce(c,t,n),c[t].S[i-2]=r),fe([],l,function(r){return r=ke(n,r,e,o,s),void 0===c[t].S?(r.Z=i-2,c[t]=r):c[t].S[i-2]=r,[]}),[]})},A:function(e,t){me(e,{name:t=z(t),fromWireType:function(e){var t=G(e);return Pe(e),t},toWireType:function(e,t){return j(t)},argPackAdvance:8,readValueFromPointer:de,V:null})},n:function(e,t,i){i=pe(i),me(e,{name:t=z(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:Ve(t,i),V:null})},e:function(e,t,i,r,n){t=z(t),-1===n&&(n=4294967295),n=pe(i);var o=e=>e;if(0===r){var s=32-8*i;o=e=>e<<s>>>s}i=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},me(e,{name:t,fromWireType:o,toWireType:i,argPackAdvance:8,readValueFromPointer:_e(t,n,0!==r),V:null})},b:function(e,t,i){function r(e){var t=p;return new n(A,t[1+(e>>=2)],t[e])}var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];me(e,{name:i=z(i),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ua:!0})},o:function(e,t){var i="std::string"===(t=z(t));me(e,{name:t,fromWireType:function(e){var t=p[e>>2],r=e+4;if(i)for(var n=r,o=0;o<=t;++o){var s=r+o;if(o==t||0==d[s]){if(n=n?C(d,n,s-n):"",void 0===a)var a=n;else a+=String.fromCharCode(0),a+=n;n=s+1}}else{for(a=Array(t),o=0;o<t;++o)a[o]=String.fromCharCode(d[r+o]);a=a.join("")}return et(e),a},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r,n="string"==typeof t;if(n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||F("Cannot pass non-string to std::string"),i&&n){var o=0;for(r=0;r<t.length;++r){var s=t.charCodeAt(r);127>=s?o++:2047>=s?o+=2:55296<=s&&57343>=s?(o+=4,++r):o+=3}r=o}else r=t.length;if(s=(o=$e(4+r+1))+4,p[o>>2]=r,i&&n){if(n=s,s=r+1,r=d,0<s){s=n+s-1;for(var a=0;a<t.length;++a){var l=t.charCodeAt(a);if(55296<=l&&57343>=l&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),127>=l){if(n>=s)break;r[n++]=l}else{if(2047>=l){if(n+1>=s)break;r[n++]=192|l>>6}else{if(65535>=l){if(n+2>=s)break;r[n++]=224|l>>12}else{if(n+3>=s)break;r[n++]=240|l>>18,r[n++]=128|l>>12&63}r[n++]=128|l>>6&63}r[n++]=128|63&l}}r[n]=0}}else if(n)for(n=0;n<r;++n)255<(a=t.charCodeAt(n))&&(et(s),F("String has UTF-16 code units that do not fit in 8 bits")),d[s+n]=a;else for(n=0;n<r;++n)d[s+n]=t[n];return null!==e&&e.push(et,o),o},argPackAdvance:8,readValueFromPointer:de,V:function(e){et(e)}})},i:function(e,t,i){if(i=z(i),2===t)var r=Le,n=Re,o=Ue,s=()=>g,a=1;else 4===t&&(r=Te,n=Oe,o=Fe,s=()=>p,a=2);me(e,{name:i,fromWireType:function(e){for(var i,n=p[e>>2],o=s(),l=e+4,c=0;c<=n;++c){var A=e+4+c*t;c!=n&&0!=o[A>>a]||(l=r(l,A-l),void 0===i?i=l:(i+=String.fromCharCode(0),i+=l),l=A+t)}return et(e),i},toWireType:function(e,r){"string"!=typeof r&&F("Cannot pass non-string to C++ string type "+i);var s=o(r),l=$e(4+s+t);return p[l>>2]=s>>a,n(r,l+4,s+t),null!==e&&e.push(et,l),l},argPackAdvance:8,readValueFromPointer:de,V:function(e){et(e)}})},k:function(e,t,i,r,n,o){Ae[e]={name:z(t),fa:Qe(i,r),W:Qe(n,o),ia:[]}},h:function(e,t,i,r,n,o,s,a,l,c){Ae[e].ia.push({oa:z(t),ta:i,ra:Qe(r,n),sa:o,za:s,ya:Qe(a,l),Aa:c})},C:function(e,t){me(e,{va:!0,name:t=z(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},s:function(e,t,i,r,n){e=He[e],t=G(t),i=je(i);var o=[];return p[r>>2]=j(o),e(t,i,o,n)},t:function(e,t,i,r){(e=He[e])(t=G(t),i=je(i),null,r)},g:Pe,m:function(e,t){var i=function(e,t){for(var i=Array(e),r=0;r<e;++r)i[r]=ee(p[t+4*r>>2],"parameter "+r);return i}(e,t),r=i[0];t=r.name+"_$"+i.slice(1).map(function(e){return e.name}).join("_")+"$";var n=Xe[t];if(void 0!==n)return n;var o=Array(e-1);return n=function(e){var t=He.length;return He.push(e),t}((t,n,s,a)=>{for(var l=0,c=0;c<e-1;++c)o[c]=i[c+1].readValueFromPointer(a+l),l+=i[c+1].argPackAdvance;for(t=t[n].apply(t,o),c=0;c<e-1;++c)i[c+1].ma&&i[c+1].ma(o[c]);if(!r.va)return r.toWireType(s,t)}),Xe[t]=n},D:function(e){4<e&&(R[e].ga+=1)},r:function(e){ue(G(e)),Pe(e)},c:function(){k("")},x:function(e,t,i){d.copyWithin(e,t,t+i)},w:function(e){var t=d.length;if(2147483648<(e>>>=0))return!1;for(var i=1;4>=i;i*=2){var r=t*(1+.2/i);r=Math.min(r,e+100663296);var n=Math;r=Math.max(e,r),n=n.min.call(n,2147483648,r+(65536-r%65536)%65536);e:{try{c.grow(n-A.byteLength+65535>>>16),B();var o=1;break e}catch(s){}o=void 0}if(o)return!0}return!1},z:function(){return 52},u:function(){return 70},y:function(e,t,i,r){for(var n=0,o=0;o<i;o++){var s=p[t>>2],c=p[t+4>>2];t+=8;for(var A=0;A<c;A++){var u=d[s+A],h=ze[e];0===u||10===u?((1===e?a:l)(C(h,0)),h.length=0):h.push(u)}n+=c}return p[r>>2]=n,0}};!function(){function e(e){t.asm=e.exports,c=t.asm.E,B(),b=t.asm.J,y.unshift(t.asm.F),D--,t.monitorRunDependencies&&t.monitorRunDependencies(D),0==D&&N&&(e=N,N=null,e())}function i(t){e(t.instance)}function n(e){return(s||"function"!=typeof fetch?Promise.resolve().then(function(){return M()}):fetch(Q,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Q+"'";return e.arrayBuffer()}).catch(function(){return M()})).then(function(e){return WebAssembly.instantiate(e,o)}).then(function(e){return e}).then(e,function(e){l("failed to asynchronously prepare wasm: "+e),k(e)})}var o={a:Ye};if(D++,t.monitorRunDependencies&&t.monitorRunDependencies(D),t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(a){l("Module.instantiateWasm callback failed with error: "+a),r(a)}(s||"function"!=typeof WebAssembly.instantiateStreaming||S(Q)||"function"!=typeof fetch?n(i):fetch(Q,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,o).then(i,function(e){return l("wasm streaming compile failed: "+e),l("falling back to ArrayBuffer instantiation"),n(i)})})).catch(r)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.F).apply(null,arguments)};var qe=t.___getTypeName=function(){return(qe=t.___getTypeName=t.asm.G).apply(null,arguments)};t.__embind_initialize_bindings=function(){return(t.__embind_initialize_bindings=t.asm.H).apply(null,arguments)};var Ze,$e=t._malloc=function(){return($e=t._malloc=t.asm.I).apply(null,arguments)},et=t._free=function(){return(et=t._free=t.asm.K).apply(null,arguments)};function tt(){function e(){if(!Ze&&(Ze=!0,t.calledRun=!0,!E)){if(V(y),i(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();v.unshift(e)}V(v)}}if(!(0<D)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)w();V(I),0<D||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e())}}if(t.dynCall_jiji=function(){return(t.dynCall_jiji=t.asm.L).apply(null,arguments)},N=function e(){Ze||tt(),Ze||(N=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return tt(),e.ready});let qu=function(e){return e[e.Auto=0]="Auto",e[e.FlexStart=1]="FlexStart",e[e.Center=2]="Center",e[e.FlexEnd=3]="FlexEnd",e[e.Stretch=4]="Stretch",e[e.Baseline=5]="Baseline",e[e.SpaceBetween=6]="SpaceBetween",e[e.SpaceAround=7]="SpaceAround",e[e.SpaceEvenly=8]="SpaceEvenly",e}({}),Zu=function(e){return e[e.BorderBox=0]="BorderBox",e[e.ContentBox=1]="ContentBox",e}({}),$u=function(e){return e[e.Width=0]="Width",e[e.Height=1]="Height",e}({}),ed=function(e){return e[e.Inherit=0]="Inherit",e[e.LTR=1]="LTR",e[e.RTL=2]="RTL",e}({}),td=function(e){return e[e.Flex=0]="Flex",e[e.None=1]="None",e[e.Contents=2]="Contents",e}({}),id=function(e){return e[e.Left=0]="Left",e[e.Top=1]="Top",e[e.Right=2]="Right",e[e.Bottom=3]="Bottom",e[e.Start=4]="Start",e[e.End=5]="End",e[e.Horizontal=6]="Horizontal",e[e.Vertical=7]="Vertical",e[e.All=8]="All",e}({}),rd=function(e){return e[e.None=0]="None",e[e.StretchFlexBasis=1]="StretchFlexBasis",e[e.AbsolutePositionWithoutInsetsExcludesPadding=2]="AbsolutePositionWithoutInsetsExcludesPadding",e[e.AbsolutePercentAgainstInnerSize=4]="AbsolutePercentAgainstInnerSize",e[e.All=2147483647]="All",e[e.Classic=2147483646]="Classic",e}({}),nd=function(e){return e[e.WebFlexBasis=0]="WebFlexBasis",e}({}),od=function(e){return e[e.Column=0]="Column",e[e.ColumnReverse=1]="ColumnReverse",e[e.Row=2]="Row",e[e.RowReverse=3]="RowReverse",e}({}),sd=function(e){return e[e.Column=0]="Column",e[e.Row=1]="Row",e[e.All=2]="All",e}({}),ad=function(e){return e[e.FlexStart=0]="FlexStart",e[e.Center=1]="Center",e[e.FlexEnd=2]="FlexEnd",e[e.SpaceBetween=3]="SpaceBetween",e[e.SpaceAround=4]="SpaceAround",e[e.SpaceEvenly=5]="SpaceEvenly",e}({}),ld=function(e){return e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Debug=3]="Debug",e[e.Verbose=4]="Verbose",e[e.Fatal=5]="Fatal",e}({}),cd=function(e){return e[e.Undefined=0]="Undefined",e[e.Exactly=1]="Exactly",e[e.AtMost=2]="AtMost",e}({}),Ad=function(e){return e[e.Default=0]="Default",e[e.Text=1]="Text",e}({}),ud=function(e){return e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.Scroll=2]="Scroll",e}({}),dd=function(e){return e[e.Static=0]="Static",e[e.Relative=1]="Relative",e[e.Absolute=2]="Absolute",e}({}),hd=function(e){return e[e.Undefined=0]="Undefined",e[e.Point=1]="Point",e[e.Percent=2]="Percent",e[e.Auto=3]="Auto",e}({}),gd=function(e){return e[e.NoWrap=0]="NoWrap",e[e.Wrap=1]="Wrap",e[e.WrapReverse=2]="WrapReverse",e}({});const fd={ALIGN_AUTO:qu.Auto,ALIGN_FLEX_START:qu.FlexStart,ALIGN_CENTER:qu.Center,ALIGN_FLEX_END:qu.FlexEnd,ALIGN_STRETCH:qu.Stretch,ALIGN_BASELINE:qu.Baseline,ALIGN_SPACE_BETWEEN:qu.SpaceBetween,ALIGN_SPACE_AROUND:qu.SpaceAround,ALIGN_SPACE_EVENLY:qu.SpaceEvenly,BOX_SIZING_BORDER_BOX:Zu.BorderBox,BOX_SIZING_CONTENT_BOX:Zu.ContentBox,DIMENSION_WIDTH:$u.Width,DIMENSION_HEIGHT:$u.Height,DIRECTION_INHERIT:ed.Inherit,DIRECTION_LTR:ed.LTR,DIRECTION_RTL:ed.RTL,DISPLAY_FLEX:td.Flex,DISPLAY_NONE:td.None,DISPLAY_CONTENTS:td.Contents,EDGE_LEFT:id.Left,EDGE_TOP:id.Top,EDGE_RIGHT:id.Right,EDGE_BOTTOM:id.Bottom,EDGE_START:id.Start,EDGE_END:id.End,EDGE_HORIZONTAL:id.Horizontal,EDGE_VERTICAL:id.Vertical,EDGE_ALL:id.All,ERRATA_NONE:rd.None,ERRATA_STRETCH_FLEX_BASIS:rd.StretchFlexBasis,ERRATA_ABSOLUTE_POSITION_WITHOUT_INSETS_EXCLUDES_PADDING:rd.AbsolutePositionWithoutInsetsExcludesPadding,ERRATA_ABSOLUTE_PERCENT_AGAINST_INNER_SIZE:rd.AbsolutePercentAgainstInnerSize,ERRATA_ALL:rd.All,ERRATA_CLASSIC:rd.Classic,EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS:nd.WebFlexBasis,FLEX_DIRECTION_COLUMN:od.Column,FLEX_DIRECTION_COLUMN_REVERSE:od.ColumnReverse,FLEX_DIRECTION_ROW:od.Row,FLEX_DIRECTION_ROW_REVERSE:od.RowReverse,GUTTER_COLUMN:sd.Column,GUTTER_ROW:sd.Row,GUTTER_ALL:sd.All,JUSTIFY_FLEX_START:ad.FlexStart,JUSTIFY_CENTER:ad.Center,JUSTIFY_FLEX_END:ad.FlexEnd,JUSTIFY_SPACE_BETWEEN:ad.SpaceBetween,JUSTIFY_SPACE_AROUND:ad.SpaceAround,JUSTIFY_SPACE_EVENLY:ad.SpaceEvenly,LOG_LEVEL_ERROR:ld.Error,LOG_LEVEL_WARN:ld.Warn,LOG_LEVEL_INFO:ld.Info,LOG_LEVEL_DEBUG:ld.Debug,LOG_LEVEL_VERBOSE:ld.Verbose,LOG_LEVEL_FATAL:ld.Fatal,MEASURE_MODE_UNDEFINED:cd.Undefined,MEASURE_MODE_EXACTLY:cd.Exactly,MEASURE_MODE_AT_MOST:cd.AtMost,NODE_TYPE_DEFAULT:Ad.Default,NODE_TYPE_TEXT:Ad.Text,OVERFLOW_VISIBLE:ud.Visible,OVERFLOW_HIDDEN:ud.Hidden,OVERFLOW_SCROLL:ud.Scroll,POSITION_TYPE_STATIC:dd.Static,POSITION_TYPE_RELATIVE:dd.Relative,POSITION_TYPE_ABSOLUTE:dd.Absolute,UNIT_UNDEFINED:hd.Undefined,UNIT_POINT:hd.Point,UNIT_PERCENT:hd.Percent,UNIT_AUTO:hd.Auto,WRAP_NO_WRAP:gd.NoWrap,WRAP_WRAP:gd.Wrap,WRAP_WRAP_REVERSE:gd.WrapReverse};function pd(e){function t(e,t,i){const r=e[t];e[t]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.call(this,r,...t)}}for(const i of["setPosition","setMargin","setFlexBasis","setWidth","setHeight","setMinWidth","setMinHeight","setMaxWidth","setMaxHeight","setPadding","setGap"]){const r={[hd.Point]:e.Node.prototype[i],[hd.Percent]:e.Node.prototype[`${i}Percent`],[hd.Auto]:e.Node.prototype[`${i}Auto`]};t(e.Node.prototype,i,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const s=n.pop();let a,l;if("auto"===s)a=hd.Auto,l=void 0;else if("object"==typeof s)a=s.unit,l=s.valueOf();else if(a="string"==typeof s&&s.endsWith("%")?hd.Percent:hd.Point,l=parseFloat(s),void 0!==s&&!Number.isNaN(s)&&Number.isNaN(l))throw new Error(`Invalid value ${s} for ${i}`);if(!r[a])throw new Error(`Failed to execute "${i}": Unsupported unit '${s}'`);return void 0!==l?r[a].call(this,...n,l):r[a].call(this,...n)})}return t(e.Node.prototype,"setMeasureFunc",function(t,i){return i?t.call(this,(r=i,e.MeasureCallback.implement({measure:function(){const{width:e,height:t}=r(...arguments);return{width:e??NaN,height:t??NaN}}}))):this.unsetMeasureFunc();var r}),t(e.Node.prototype,"setDirtiedFunc",function(t,i){var r;t.call(this,(r=i,e.DirtiedCallback.implement({dirtied:r})))}),t(e.Config.prototype,"free",function(){e.Config.destroy(this)}),t(e.Node,"create",(t,i)=>i?e.Node.createWithConfig(i):e.Node.createDefault()),t(e.Node.prototype,"free",function(){e.Node.destroy(this)}),t(e.Node.prototype,"freeRecursive",function(){for(let e=0,t=this.getChildCount();e<t;++e)this.getChild(0).freeRecursive();this.free()}),t(e.Node.prototype,"calculateLayout",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ed.LTR;return e.call(this,t,i,r)}),{Config:e.Config,Node:e.Node,...fd}}async function md(){return pd(await Yu())}let xd,Ed;function Cd(){return xd}function Bd(e){xd=e}function bd(e){Ed=e}function Id(e,t){return e?"number"==typeof e?e:"string"==typeof e&&e.endsWith("%")?(t??(t=1),t*(parseFloat(e)/100)):Number.isNaN(parseFloat(e))?0:parseFloat(e):0}function yd(e){return"number"==typeof e?"number":e.endsWith("%")?"percentage":Number.isNaN(parseInt(e,10))?"keyword":"number"}function vd(e,t,i){return(t[e]-i[e])/2}function wd(e,t,i,r,n){const o="percentage"===t?r[i]-n[i]:1;return Id(e)*o}function Qd(e,t,i){const[r,n]=e,o=yd(r),s=yd(n),a={x:void 0,y:void 0};switch(r){case"top":a.y=0;break;case"bottom":a.y=t.height-i.height;break;case"center":"left"===n||"right"===n?a.y=vd("height",t,i):a.x=vd("width",t,i);break;case"left":a.x=0;break;case"right":a.x=t.width-i.width;break;default:{const e="top"===n||"bottom"===n||"keyword"!==s?"width":"height";a["width"===e?"x":"y"]=wd(r,o,e,t,i)}}switch(n){case"top":a.y=0;break;case"bottom":a.y=t.height-i.height;break;case"center":void 0===a.y?a.y=vd("height",t,i):a.x=vd("width",t,i);break;case"left":a.x=0;break;case"right":a.x=t.width-i.width;break;default:{const e=void 0===a.y?"y":"x",r="y"===e?"height":"width";a[e]=wd(n,s,r,t,i)}}return a}function Dd(e,t,i,r){const n="percentage"===i?t*r:t;return"right"===e||"bottom"===e?-n:n}function Nd(e,t,i){if(!e)return{x:0,y:0};const r="string"==typeof e?e.split(" "):[e];switch(r.length){case 1:return function(e,t,i){const r=e[0],n={x:void 0,y:void 0};switch(r){case"top":n.y=0,n.x=(t.width-i.width)/2;break;case"bottom":n.y=t.height-i.height,n.x=(t.width-i.width)/2;break;case"left":n.x=0,n.y=(t.height-i.height)/2;break;case"right":n.x=t.width-i.width,n.y=(t.height-i.height)/2;break;case"center":n.x=(t.width-i.width)/2,n.y=(t.height-i.height)/2;break;default:{const e="percentage"===yd(r)?t.width-i.width:1;n.x=Id(r)*e,n.y=(t.height-i.height)/2}}return n}(r,t,i);case 2:return Qd(r,t,i);case 4:return function(e,t,i){const[r,n,o,s]=e,a=yd(r),l=yd(n),c=yd(o),A=yd(s);if("keyword"===l||"keyword"===A)throw new Error("Invalid objectPosition value: second and fourth values must be numbers or percentages");if("keyword"!==a||"keyword"!==c)throw new Error("Invalid objectPosition value: first and third values must be keywords");const u=Qd([r,o],t,i),d={...u},h=Id(n),g=Id(s);return"left"===r||"right"===r?d.x=u.x+Dd(r,h,l,i.width):"top"!==r&&"bottom"!==r||(d.y=u.y+Dd(r,h,l,i.height)),"left"===o||"right"===o?d.x=u.x+Dd(o,g,A,i.width):"top"!==o&&"bottom"!==o||(d.y=u.y+Dd(o,g,A,i.height)),d}(r,t,i);default:throw new Error("Invalid objectPosition value: must have 1, 2, or 4 values")}}const kd={width:0,height:0};function Sd(e){const t=e.target.getLocalBounds(),i=e.target.scale;return kd.width=Math.abs(t.width*i.x),kd.height=Math.abs(t.height*i.y),kd}function Pd(e,t,i=.49){return Math.abs(e-t)<i}function Md(e,t=0,i={}){let r,n;const o=i.maxWait?i.maxWait:t;let s,a,l,c=0;const A=!!i.leading,u="maxWait"in i,d=i.trailing??!0,h=0!==t&&"function"==typeof globalThis.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){const i=r,o=n;return r=n=void 0,c=t,s=e.apply(o,i),s}function f(e,t){return h?("number"==typeof a&&globalThis.cancelAnimationFrame(a),globalThis.requestAnimationFrame(e)):setTimeout(e,t)}function p(e){const i=e-(l||0);return void 0===l||i>=t||i<0||u&&e-c>=o}function m(){const e=Date.now();if(p(e))return x(e);a=f(m,function(e){const i=e-c,r=t-(e-(l||0));return u?Math.min(r,o-i):r}(e))}function x(e){return a=void 0,d&&r?g(e):(r=n=void 0,s)}function E(...e){const i=Date.now(),o=p(i);if(r=e,n=this,l=i,o){if(void 0===a)return function(e){return c=e,a=f(m,t),A?g(e):s}(l);if(u)return a=f(m,t),g(l)}return void 0===a&&(a=f(m,t)),s}return E.cancel=function(){var e;void 0!==a&&(e=a,h?globalThis.cancelAnimationFrame(e):clearTimeout(e)),c=0,r=l=n=a=void 0},E.flush=function(){return void 0===a?s:x(Date.now())},E.pending=function(){return void 0!==a},E}var Vd=Object.defineProperty,_d=(e,t,i)=>((e,t,i)=>t in e?Vd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);class Ld{constructor(){_d(this,"autoUpdate",!0),_d(this,"_debugEnabled",!1),_d(this,"_debugRenderer",null),_d(this,"_throttledUpdateSize"),_d(this,"_throttle",100),_d(this,"_modificationCount",50)}async init(e){Bd(await md()),bd(Cd().Config.create());const{layout:t}=e??{},{autoUpdate:i,enableDebug:r,throttle:n,debugModificationCount:o}=t??{};r&&this.enableDebug(!0),void 0!==i&&(this.autoUpdate=i),this._throttle=n??this._throttle,this._throttledUpdateSize=function(e,t,i={}){const r=i.leading??!0,n=i.trailing??!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Md(e,t,{leading:r,trailing:n,maxWait:t})}(e=>this._updateSize(e),this._throttle,{leading:!0,trailing:!0}),this._modificationCount=o??this._modificationCount}async enableDebug(t=!this._debugEnabled){if(this._debugEnabled=t,!this._debugRenderer){const t=await e(()=>import("./DebugRenderer-DjjpUhQr.js"),__vite__mapDeps([18,2,3,4,5,6,7,8,9,10,11,12]));this._debugRenderer=new t.DebugRenderer}this._debugEnabled||this._debugRenderer.reset()}update(e){this._debugEnabled&&this._debugRenderer&&(this._debugRenderer.reset(),e.addChild(this._debugRenderer.holder)),0===this._throttle?this._updateSize(e):this._throttledUpdateSize(e),this.updateLayout(e)}prerender({container:e}){this.autoUpdate&&this.update(e)}_updateSize(e){if(e.destroyed)return;const t=e._layout;if(t){const i=t.style;if("intrinsic"===i.width||"intrinsic"===i.height){const e=Sd(t);if("intrinsic"===i.width){Pd(t.yoga.getWidth().value,e.width)||(t.yoga.setWidth(e.width),t.invalidateRoot())}if("intrinsic"===i.height){Pd(t.yoga.getHeight().value,e.height)||(t.yoga.setHeight(e.height),t.invalidateRoot())}}if(!e.visible)return void t._onChildRemoved()}for(let i=0;i<e.children.length;i++)this._updateSize(e.children[i])}updateLayout(e){var t,i,r,n;const o=e._layout;if(e.visible){if(o){const s=o.yoga,a=o.style,l=null==(t=e.parent)?void 0:t.isOverflowContainer;if((null==(i=e.parent)?void 0:i._layout)||l||o._isDirty&&(o._isDirty=!1,s.calculateLayout(a.width,a.height,s.getDirection()??ed.LTR)),s.hasNewLayout()||o._forceUpdate){s.markLayoutSeen(),o._forceUpdate=!1,o._computedLayout=s.getComputedLayout();const t=Nd(a.transformOrigin,o._computedLayout,{width:0,height:0});o._computedPixiLayout={...e.computeLayoutData(o._computedLayout),originX:t.x,originY:t.y},e.emit("layout",o),null==(r=e.onLayout)||r.call(e,o),e._onUpdate()}this._debugEnabled&&(o._styles.custom.debug||o._modificationCount>this._modificationCount&&!1!==o._styles.custom.debugHeat)&&(null==(n=this._debugRenderer)||n.render(o))}for(let t=0;t<e.children.length;t++)this.updateLayout(e.children[t])}}destroy(){!this._debugEnabled&&this._debugRenderer&&this._debugRenderer.destroy()}}_d(Ld,"extension",{type:[Le.WebGLSystem,Le.WebGPUSystem],name:"layout"});const Rd={"flex-start":qu.FlexStart,"flex-end":qu.FlexEnd,center:qu.Center,stretch:qu.Stretch,"space-between":qu.SpaceBetween,"space-around":qu.SpaceAround,"space-evenly":qu.SpaceEvenly},Ud={"flex-start":qu.FlexStart,"flex-end":qu.FlexEnd,center:qu.Center,stretch:qu.Stretch,baseline:qu.Baseline},Td={auto:qu.Auto,"flex-start":qu.FlexStart,"flex-end":qu.FlexEnd,center:qu.Center,stretch:qu.Stretch,baseline:qu.Baseline},Od={"border-box":Zu.BorderBox,"content-box":Zu.ContentBox},Fd={ltr:ed.LTR,rtl:ed.RTL},Gd={none:td.None,flex:td.Flex,contents:td.Contents},jd={row:od.Row,column:od.Column,"row-reverse":od.RowReverse,"column-reverse":od.ColumnReverse},Hd={wrap:gd.Wrap,nowrap:gd.NoWrap,"wrap-reverse":gd.WrapReverse},Xd={"flex-start":ad.FlexStart,"flex-end":ad.FlexEnd,center:ad.Center,"space-between":ad.SpaceBetween,"space-around":ad.SpaceAround,"space-evenly":ad.SpaceEvenly},zd={visible:ud.Visible,hidden:ud.Hidden,scroll:ud.Scroll},Jd={absolute:dd.Absolute,relative:dd.Relative,static:dd.Static},Wd={alignContent:(e,t)=>e.setAlignContent(function(e){if(e in Rd)return Rd[e];throw new Error(`"${e}" is not a valid value for alignContent`)}(t)),alignItems:(e,t)=>e.setAlignItems(function(e){if(e in Ud)return Ud[e];throw new Error(`"${e}" is not a valid value for alignItems`)}(t)),alignSelf:(e,t)=>e.setAlignSelf(function(e){if(e in Td)return Td[e];throw new Error(`"${e}" is not a valid value for alignSelf`)}(t)),aspectRatio:(e,t)=>e.setAspectRatio(t),borderBottomWidth:(e,t)=>e.setBorder(id.Bottom,t),borderEndWidth:(e,t)=>e.setBorder(id.End,t),borderLeftWidth:(e,t)=>e.setBorder(id.Left,t),borderRightWidth:(e,t)=>e.setBorder(id.Right,t),borderStartWidth:(e,t)=>e.setBorder(id.Start,t),borderTopWidth:(e,t)=>e.setBorder(id.Top,t),borderWidth:(e,t)=>e.setBorder(id.All,t),borderInlineWidth:(e,t)=>e.setBorder(id.Horizontal,t),borderBlockWidth:(e,t)=>e.setBorder(id.Vertical,t),bottom:(e,t)=>e.setPosition(id.Bottom,t),boxSizing:(e,t)=>e.setBoxSizing(function(e){if(e in Od)return Od[e];throw new Error(`"${e}" is not a valid value for boxSizing`)}(t)),direction:(e,t)=>e.setDirection(function(e){if(e in Fd)return Fd[e];throw new Error(`"${e}" is not a valid value for direction`)}(t)),display:(e,t)=>e.setDisplay(function(e){if(e in Gd)return Gd[e];throw new Error(`"${e}" is not a valid value for display`)}(t)),end:(e,t)=>e.setPosition(id.End,t),flex:(e,t)=>e.setFlex(t),flexBasis:(e,t)=>e.setFlexBasis(t),flexDirection:(e,t)=>e.setFlexDirection(function(e){if(e in jd)return jd[e];throw new Error(`"${e}" is not a valid value for flexDirection`)}(t)),rowGap:(e,t)=>e.setGap(sd.Row,t),gap:(e,t)=>e.setGap(sd.All,t),columnGap:(e,t)=>e.setGap(sd.Column,t),flexGrow:(e,t)=>e.setFlexGrow(t),flexShrink:(e,t)=>e.setFlexShrink(t),flexWrap:(e,t)=>e.setFlexWrap(function(e){if(e in Hd)return Hd[e];throw new Error(`"${e}" is not a valid value for flexWrap`)}(t)),height:(e,t)=>e.setHeight(t),justifyContent:(e,t)=>e.setJustifyContent(function(e){if(e in Xd)return Xd[e];throw new Error(`"${e}" is not a valid value for justifyContent`)}(t)),left:(e,t)=>e.setPosition(id.Left,t),margin:(e,t)=>e.setMargin(id.All,t),marginBottom:(e,t)=>e.setMargin(id.Bottom,t),marginEnd:(e,t)=>e.setMargin(id.End,t),marginLeft:(e,t)=>e.setMargin(id.Left,t),marginRight:(e,t)=>e.setMargin(id.Right,t),marginStart:(e,t)=>e.setMargin(id.Start,t),marginTop:(e,t)=>e.setMargin(id.Top,t),marginInline:(e,t)=>e.setMargin(id.Horizontal,t),marginBlock:(e,t)=>e.setMargin(id.Vertical,t),maxHeight:(e,t)=>e.setMaxHeight(t),maxWidth:(e,t)=>e.setMaxWidth(t),minHeight:(e,t)=>e.setMinHeight(t),minWidth:(e,t)=>e.setMinWidth(t),overflow:(e,t)=>e.setOverflow(function(e){if(e in zd)return zd[e];throw new Error(`"${e}" is not a valid value for overflow`)}(t)),padding:(e,t)=>e.setPadding(id.All,t),paddingBottom:(e,t)=>e.setPadding(id.Bottom,t),paddingEnd:(e,t)=>e.setPadding(id.End,t),paddingLeft:(e,t)=>e.setPadding(id.Left,t),paddingRight:(e,t)=>e.setPadding(id.Right,t),paddingStart:(e,t)=>e.setPadding(id.Start,t),paddingTop:(e,t)=>e.setPadding(id.Top,t),paddingInline:(e,t)=>e.setPadding(id.Horizontal,t),paddingBlock:(e,t)=>e.setPadding(id.Vertical,t),position:(e,t)=>e.setPositionType(function(e){if(e in Jd)return Jd[e];throw new Error(`"${e}" is not a valid value for position`)}(t)),right:(e,t)=>e.setPosition(id.Right,t),start:(e,t)=>e.setPosition(id.Start,t),top:(e,t)=>e.setPosition(id.Top,t),insetInline:(e,t)=>e.setPosition(id.Horizontal,t),insetBlock:(e,t)=>e.setPosition(id.Vertical,t),inset:(e,t)=>e.setPosition(id.All,t),width:(e,t)=>e.setWidth(t)};var Kd=Object.defineProperty,Yd=(e,t,i)=>((e,t,i)=>t in e?Kd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);class qd{constructor({target:e}){Yd(this,"yoga"),Yd(this,"target"),Yd(this,"destroyed",!1),Yd(this,"_isDirty",!1),Yd(this,"_computedPixiLayout",{x:0,y:0,offsetX:0,offsetY:0,scaleX:1,scaleY:1,originX:0,originY:0}),Yd(this,"_computedLayout",{left:0,right:0,top:0,bottom:0,width:0,height:0}),Yd(this,"_styles",{custom:{},yoga:{}}),Yd(this,"_modificationCount",0),Yd(this,"_forceUpdate",!1),Yd(this,"hasParent",!1),Yd(this,"_trackedStyleKeys",["borderRadius","borderColor","backgroundColor","objectFit","objectPosition","transformOrigin","isLeaf"]),this.target=e,this.yoga=Cd().Node.create(Ed),e.on("added",this._onChildAdded,this),e.on("removed",this._onChildRemoved,this),e.on("destroyed",this.destroy,this)}get style(){return this._styles.custom}get computedLayout(){return this._computedLayout}get computedPixiLayout(){return this._computedPixiLayout}get realX(){return this.target.localTransform.tx}get realY(){return this.target.localTransform.ty}get realScaleX(){return this.target.localTransform.a}get realScaleY(){return this.target.localTransform.d}setStyle(e){const t=function(e,t){let i={...e._styles.custom,...t};i={...{...qd.defaultStyle.shared,...e.target instanceof $i||i.isLeaf||qd.defaultStyle.shared.isLeaf?qd.defaultStyle.leaf:qd.defaultStyle.container},...i};const r={...i},n="intrinsic"===i.width,o="intrinsic"===i.height;if(n||o){const{width:t,height:i}=Sd(e);n&&(r.width=t),o&&(r.height=i)}return{custom:i,yoga:r}}(this,e),i=JSON.stringify(this._styles.custom)!==JSON.stringify(t.custom),r=JSON.stringify(this._styles.yoga)!==JSON.stringify(t.yoga),n=i||r,o=this._trackedStyleKeys.some(e=>t.custom[e]!==this._styles.custom[e]);this._styles=t,o&&(this._forceUpdate=!0),n&&(!function(e,t={}){for(const[r,n]of Object.entries(t))try{const t=Wd[r];t&&t(e,n)}catch(i){}if(void 0!==t.width){const i=void 0!==t.left&&void 0!==t.right?"auto":t.width;e.setWidth(i)}if(void 0!==t.height){const i=void 0!==t.top&&void 0!==t.bottom?"auto":t.height;e.setHeight(i)}}(this.yoga,this._styles.yoga),this.target._onUpdate(),this.invalidateRoot())}invalidateRoot(e){const t=this.getRoot(e);t.destroyed||(t._layout._isDirty=!0,t._onUpdate(),this._modificationCount++)}forceUpdate(){this._forceUpdate=!0}getRoot(e){var t,i;let r=e||this.target;for(;(null==(t=r.parent)?void 0:t._layout)||(null==(i=r.parent)?void 0:i.isOverflowContainer);)r=r.parent,r.isOverflowContainer&&(r=r.parent);return r}_onChildAdded(e){this.hasParent||!1!==function(e,t){var i;let r,n=t.layout;if(!n&&t.isOverflowContainer&&(r=t,n=null==(i=r.parent)?void 0:i.layout,t=r.parent),!n)return!1;const o=e.yoga.getParent();o&&o.removeChild(e.yoga);const s=function(e,t,i){const r=e.target;let n=0;if(i){for(const e of t.children){if(e===i){for(const e of i.children)if(e.layout&&e.visible){if(e===r)return n;n++}return-1}e.layout&&e.visible&&n++}return-1}for(const o of t.children)if(o.layout&&o.visible){if(o===r)return n;n++}return-1}(e,t,r);return-1!==s&&(n.yoga.getChildCount(),n.yoga.insertChild(e.yoga,s),!0)}(this,e)&&(this.hasParent=!0,this.invalidateRoot())}_onChildRemoved(e){this.hasParent&&(this.hasParent=!1,this.invalidateRoot(e),function(e){const t=e.yoga.getParent();t&&t.removeChild(e.yoga)}(this))}destroy(){this.destroyed||(this.destroyed=!0,this.invalidateRoot(),this.yoga.free(),this.target.off("added",this._onChildAdded,this),this.target.off("removed",this._onChildRemoved,this),this._styles=null,this._computedPixiLayout=null,this._computedLayout=null,this.target=null,this.hasParent=!1)}}function Zd(e,t,i){let r=1,n=1;switch(e){case"fill":r=t.width/i.width,n=t.height/i.height;break;case"contain":{const e=Math.min(t.width/i.width,t.height/i.height);r=e,n=e;break}case"cover":{const e=Math.max(t.width/i.width,t.height/i.height);r=e,n=e;break}case"none":r=1,n=1;break;case"scale-down":{const e=Math.min(1,t.width/i.width,t.height/i.height);r=e,n=e;break}}return{offsetScaleX:r,offsetScaleY:n}}function $d(e,t,i,r){const n=e.getLocalBounds(),o=e.layout.style.objectFit||i;let{offsetScaleX:s,offsetScaleY:a}=Zd(o,t,n);const l={width:n.width*s,height:n.height*a};let{x:c,y:A}=Nd(e.layout.style.objectPosition,t,l);r?(c+=n.width*s*r._x,A+=n.height*a*r._y):(c-=n.minX*s,A-=n.minY*a);const u=e.layout.style.applySizeDirectly;return(!0===u||null==u&&(e instanceof Qc||e instanceof JA))&&(e.width=n.width*s,e.height=n.height*a,s=1,a=1),{x:t.left,y:t.top,offsetX:c,offsetY:A,scaleX:s,scaleY:a}}Yd(qd,"defaultStyle",{leaf:{width:"intrinsic",height:"intrinsic"},container:{width:"auto",height:"auto"},shared:{transformOrigin:"50%",objectPosition:"center",flexShrink:1,flexDirection:"row",alignContent:"stretch",flexWrap:"nowrap",overflow:"visible"}});const eh=Object.getOwnPropertyDescriptor(Zi.prototype,"visible"),th={_layout:null,get layout(){return this._layout??null},set layout(e){if(e=!0===e?{}:e){if(!this._layout){this._layout=new qd({target:this}),Object.defineProperty(Zi.prototype,"visible",{...eh,set(e){eh.set.call(this,e),this.layout&&(e&&this.parent?this.layout._onChildAdded(this.parent):this.layout._onChildRemoved())}});for(const e of this.children)e.layout&&e.visible&&(e.layout._onChildRemoved(),e.layout._onChildAdded(this));this.parent&&this.visible&&this._layout._onChildAdded(this.parent)}this._layout.setStyle(e),this.updateLocalTransform=this.updateLocalTransformWithLayout,this._onUpdate()}else this._layout&&(this._layout.destroy(),this._layout=null,this.updateLocalTransform=Zi.prototype.updateLocalTransform,Object.defineProperty(Zi.prototype,"visible",eh))},updateLocalTransformWithLayout(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this._layout,{x:i,y:r,offsetX:n,offsetY:o,scaleX:s,scaleY:a,originX:l,originY:c}=t._computedPixiLayout,A=this.localTransform,{rotation:u,skew:d,scale:h,position:g}=this,f=u+d._y,p=u-d._x,m=Math.cos(f)*h._x,x=Math.sin(f)*h._x,E=-Math.sin(p)*h._y,C=Math.cos(p)*h._y,B=g._x+i-l*m-c*E,b=g._y+r-l*x-c*C;A.a=m*s,A.b=x*s,A.c=E*a,A.d=C*a,A.tx=B+(n*m+o*E)+l,A.ty=b+(n*x+o*C)+c},computeLayoutData(e){const t=this._layout,{isLeaf:i}=t._styles.custom;return i?$d(this,e,"fill"):{x:e.left,y:e.top,offsetX:0,offsetY:0,scaleX:1,scaleY:1}}};Te.mixin(Zi,th);const ih=new Ke(0,0),rh={computeLayoutData(e){const t=this._style;ih.copyFrom(this.scale),this.scale=1,t.wordWrap&&(t.wordWrapWidth=e.width);let i=this.getLocalBounds();const r=this.layout.style.objectFit||"scale-down",{offsetScaleX:n,offsetScaleY:o}=Zd(r,e,i);t.wordWrap&&(t.wordWrapWidth=e.width/Math.min(1,Math.max(n,o))),i=this.getLocalBounds();const s={width:i.width*n,height:i.height*o};let{x:a,y:l}=Nd(this.layout.style.objectPosition,e,s);a+=i.width*n*this.anchor._x,l+=i.height*o*this.anchor._y;return!0===this.layout.style.applySizeDirectly&&(this.width=i.width*n,this.height=i.height*o),this.scale.copyFrom(ih),{x:e.left,y:e.top,offsetX:a,offsetY:l,scaleX:n,scaleY:o}}};Te.mixin(Dc,rh);const nh=Object.getOwnPropertyDescriptor(Dc.prototype,"text");Object.defineProperty(Dc.prototype,"text",{...nh,set(e){var t;const i=nh.get.call(this);nh.set.call(this,e),i!==e&&(null==(t=this.layout)||t.forceUpdate())}});const oh={computeLayoutData(e){return $d(this,e,"fill",this._anchor)}};Te.mixin($i,oh),Te.add(Ld);const sh="JetBrainsMono-Regular",ah="JetBrainsMono-Bold",lh="Inter-Regular",ch="Inter-Medium",Ah="Inter-SemiBold",uh="Inter-Bold";let dh=null;function hh(){return dh||(dh=async function(){gh();const e=[{name:sh,path:"/fonts/msdf/JetBrainsMono-Regular.json"},{name:ah,path:"/fonts/msdf/JetBrainsMono-Bold.json"},{name:lh,path:"/fonts/msdf/Inter-Regular.json"},{name:ch,path:"/fonts/msdf/Inter-Medium.json"},{name:Ah,path:"/fonts/msdf/Inter-SemiBold.json"},{name:uh,path:"/fonts/msdf/Inter-Bold.json"}];try{await Promise.all(e.map(e=>async function(e,t){const i=await fetch(t);if(!i.ok)throw new Error(`Failed to fetch MSDF font: ${t}`);const r=await i.json(),n={};for(const u of r.chars)n[u.char]={id:u.id,letter:u.char,page:u.page,x:u.x,y:u.y,width:u.width,height:u.height,xOffset:u.xoffset,yOffset:u.yoffset,xAdvance:u.xadvance,kerning:{}};for(const u of r.kernings??[]){const e=String.fromCharCode(u.second),t=String.fromCharCode(u.first);n[e]&&(n[e].kerning[t]=u.amount)}const o={fontFamily:r.info.face,fontSize:r.info.size,lineHeight:r.common.lineHeight,baseLineOffset:r.common.lineHeight-r.common.base,pages:r.pages.map((e,t)=>({id:t,file:e})),chars:n,distanceField:r.distanceField?{type:r.distanceField.fieldType,range:r.distanceField.distanceRange}:void 0},s=t.substring(0,t.lastIndexOf("/")),a=[];for(let u=0;u<r.pages.length;u++)a[u]=await zl.load(`${s}/${r.pages[u]}`);const l=`${e}-bitmap`;Br.has(l)&&Br.remove(l);const c=new WA({data:o,textures:a},t),A=`${o.fontFamily??""}-bitmap`;A!==l&&Br.has(A)&&Br.remove(A);Br.set(l,c)}(e.name,e.path)))}catch{gh()}}()),dh}function gh(){const e="JetBrains Mono, Menlo, Consolas, monospace",t="Inter, -apple-system, BlinkMacSystemFont, sans-serif",i=[{name:sh,family:e,weight:"normal"},{name:ah,family:e,weight:"bold"},{name:lh,family:t,weight:"normal"},{name:ch,family:t,weight:"500"},{name:Ah,family:t,weight:"600"},{name:uh,family:t,weight:"bold"}];for(const r of i){const e=`${r.name}-bitmap`;if(!Br.has(e))try{wA.install({name:r.name,style:{fontFamily:r.family,fontWeight:r.weight,fontSize:32,fill:16777215},chars:wA.ASCII})}catch{}}}function fh(e){const t=e.trim(),i=t.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+))?\s*\)$/);if(i){return{color:parseInt(i[1],10)<<16|parseInt(i[2],10)<<8|parseInt(i[3],10),alpha:void 0!==i[4]?parseFloat(i[4]):1}}if(t.startsWith("#")){const e=t.slice(1);if(3===e.length){return{color:parseInt(e[0]+e[0],16)<<16|parseInt(e[1]+e[1],16)<<8|parseInt(e[2]+e[2],16),alpha:1}}if(6===e.length)return{color:parseInt(e,16),alpha:1};if(8===e.length){return{color:parseInt(e.slice(0,6),16),alpha:parseInt(e.slice(6,8),16)/255}}}return{color:16777215,alpha:1}}function ph(){const e=t(e=>e.getCurrentTheme());return ae.useMemo(()=>function(e){const t={};for(const i of Object.keys(e))t[i]=fh(e[i]);return t}(e.colors),[e.id])}function mh(){return t(e=>e.currentThemeId)}function xh(e,t,i){return"cyan-lineart"===e?{deckA:t.color,deckB:i.color,deckC:3462041}:{deckA:6333946,deckB:16281969,deckC:3462041}}function Eh(){const[e,t]=ae.useState(()=>Ch());return ae.useEffect(()=>{const e=()=>t(Ch());return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}function Ch(){const e=window.innerWidth;return{isMobile:e<768,isTablet:e<1024,width:e,height:window.innerHeight,dpr:window.devicePixelRatio||1}}const Bh={sm:{height:24,paddingH:8,fontSize:11,minWidth:60},md:{height:28,paddingH:12,fontSize:12,minWidth:80},lg:{height:36,paddingH:20,fontSize:14,minWidth:100},icon:{height:28,paddingH:6,fontSize:12,minWidth:28}},bh=({label:e,variant:t="default",size:r="md",color:n="default",disabled:o=!1,loading:s=!1,active:a=!1,width:l,onClick:c,layout:A})=>{const u=ph(),d=mh(),[h,g]=ae.useState(!1),[f,p]=ae.useState(!1),m=ae.useRef(null),x=Bh[r],E=l??x.minWidth,C=ae.useMemo(()=>function(e,t){const i="cyan-lineart"===t,r={base:e.bgTertiary.color,hover:e.bgHover.color,active:e.accent.color,text:e.textSecondary.color};return i?{default:r,red:r,green:r,yellow:r,blue:r,purple:r}:{default:r,red:{base:1705992,hover:2756624,active:e.error.color,text:e.error.color},green:{base:530959,hover:1059352,active:e.success.color,text:e.success.color},yellow:{base:1710088,hover:2762768,active:e.warning.color,text:e.warning.color},blue:{base:528408,hover:1054760,active:3900150,text:3900150},purple:{base:1050648,hover:1577e3,active:9133302,text:9133302}}}(u,d),[u,d]),B=ae.useCallback(()=>{if(o||s)return{bg:u.bgActive.color,bgAlpha:.4,border:u.border.color,borderAlpha:.3,text:u.textMuted.color};if("ft2"===t){const e=C[n]||C.default;return a||f?{bg:e.active,bgAlpha:1,border:e.active,borderAlpha:1,text:16777215}:h?{bg:e.hover,bgAlpha:1,border:e.active,borderAlpha:.6,text:e.text}:{bg:e.base,bgAlpha:1,border:u.borderLight.color,borderAlpha:.5,text:e.text}}return"primary"===t?f?{bg:u.accent.color,bgAlpha:.9,border:u.accent.color,borderAlpha:1,text:u.textInverse.color}:h?{bg:u.accent.color,bgAlpha:.85,border:u.accent.color,borderAlpha:1,text:u.textInverse.color}:{bg:u.accent.color,bgAlpha:.8,border:u.accent.color,borderAlpha:1,text:u.textInverse.color}:"danger"===t?f?{bg:u.error.color,bgAlpha:.9,border:u.error.color,borderAlpha:1,text:16777215}:h?{bg:u.error.color,bgAlpha:.3,border:u.error.color,borderAlpha:.8,text:u.error.color}:{bg:u.error.color,bgAlpha:.15,border:u.error.color,borderAlpha:.4,text:u.error.color}:"ghost"===t?f?{bg:u.bgActive.color,bgAlpha:.8,border:0,borderAlpha:0,text:u.text.color}:h?{bg:u.bgHover.color,bgAlpha:.6,border:0,borderAlpha:0,text:u.text.color}:{bg:0,bgAlpha:0,border:0,borderAlpha:0,text:u.textSecondary.color}:f?{bg:u.bgActive.color,bgAlpha:1,border:u.accent.color,borderAlpha:.8,text:u.text.color}:h?{bg:u.bgHover.color,bgAlpha:1,border:u.borderLight.color,borderAlpha:.8,text:u.text.color}:{bg:u.bgTertiary.color,bgAlpha:1,border:u.border.color,borderAlpha:.6,text:u.textSecondary.color}},[u,C,t,n,o,s,a,h,f])(),b=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,E,x.height,4),e.fill({color:B.bg,alpha:B.bgAlpha}),e.roundRect(0,0,E,x.height,4),e.stroke({color:B.border,alpha:B.borderAlpha,width:1})},[E,x.height,B]),I=ae.useCallback(()=>{o||g(!0)},[o]),y=ae.useCallback(()=>{g(!1),p(!1)},[]),v=ae.useCallback(e=>{o||p(!0)},[o]),w=ae.useCallback(()=>{!f||o||s||c?.(),p(!1)},[f,o,s,c]);return i.jsxDEV("pixiContainer",{eventMode:o?"none":"static",cursor:o?"not-allowed":"pointer",onPointerOver:I,onPointerOut:y,onPointerDown:v,onPointerUp:w,layout:{width:E,height:x.height,justifyContent:"center",alignItems:"center",...A},children:[i.jsxDEV("pixiGraphics",{ref:m,draw:b,layout:{position:"absolute",width:E,height:x.height}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiButton.tsx",lineNumber:176,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:s?"...":e,style:{fontFamily:"ft2"===t?ah:Ah,fontSize:x.fontSize,fill:16777215},tint:B.text,alpha:o?.5:1,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiButton.tsx",lineNumber:181,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiButton.tsx",lineNumber:161,columnNumber:5},void 0)},Ih=({tabs:e,activeTabId:t,onSelect:r,onClose:n,onNew:o,width:s,height:a=28,layout:l})=>{const c=ph(),[A,u]=ae.useState(0),d=Math.max(80,Math.min(160,Math.floor((s-28-4)/Math.max(1,e.length)))),h=e.length*d,g=s-28-4,f=A>0,p=h-A>g,m=ae.useCallback(e=>{e.clear(),e.rect(0,0,s,a),e.fill({color:c.bgTertiary.color}),e.rect(0,a-1,s,1),e.fill({color:c.border.color,alpha:.5})},[s,a,c]);return i.jsxDEV("pixiContainer",{layout:{width:s,height:a,flexDirection:"row",...l},eventMode:"static",children:[i.jsxDEV("pixiGraphics",{draw:m,layout:{position:"absolute",width:s,height:a}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:62,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:g,height:a,overflow:"hidden",flexDirection:"row"},children:e.map((e,o)=>i.jsxDEV(yh,{tab:e,isActive:e.id===t,width:d,height:a,onSelect:()=>r(e.id),onClose:()=>n(e.id),tabIndex:o,scrollOffset:A},e.id,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:68,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:64,columnNumber:7},void 0),i.jsxDEV(vh,{label:"",height:a,visible:f,onClick:()=>u(e=>Math.max(0,e-d))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:82,columnNumber:7},void 0),i.jsxDEV(vh,{label:"",height:a,visible:p,onClick:()=>u(e=>e+d)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:88,columnNumber:7},void 0),i.jsxDEV(wh,{height:a,onClick:o},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:95,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:58,columnNumber:5},void 0)},yh=({tab:e,isActive:t,width:r,height:n,onSelect:o,onClose:s,tabIndex:a,scrollOffset:l})=>{const c=ph(),[A,u]=ae.useState(!1),d=r-20-14-4,h=e.label.length>16?e.label.slice(0,14)+"":e.label,g=e.dirty?`${h} `:h,f=t||A,p=ae.useCallback(e=>{e.clear(),t?(e.rect(0,0,r,n-2),e.fill({color:c.bgSecondary.color})):A&&(e.rect(0,0,r,n-2),e.fill({color:c.bgHover.color,alpha:.5})),e.rect(r-1,4,1,n-8),e.fill({color:c.border.color,alpha:.4})},[t,A,r,n,c]),m=ae.useCallback(e=>{e.clear(),t&&(e.rect(a*r-l,n-2,r,2),e.fill({color:c.accent.color}))},[t,a,r,l,n,c]);return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerOver:()=>u(!0),onPointerOut:()=>u(!1),onPointerUp:o,layout:{width:r,height:n,flexDirection:"row",alignItems:"center",paddingLeft:10},children:[i.jsxDEV("pixiGraphics",{draw:p,layout:{position:"absolute",width:r,height:n}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:151,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:m,layout:{position:"absolute",width:r,height:n}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:153,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:g,style:{fontFamily:ch,fontSize:11,fill:16777215},tint:t?c.text.color:c.textSecondary.color,layout:{flex:1,maxWidth:d}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:154,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{eventMode:f?"static":"none",cursor:"pointer",onPointerUp:e=>{e.stopPropagation(),s()},layout:{display:f?"flex":"none",width:14,height:14,justifyContent:"center",alignItems:"center",marginRight:4},children:i.jsxDEV("pixiBitmapText",{text:"",style:{fontFamily:uh,fontSize:13,fill:16777215},tint:A?c.error.color:c.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:167,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:161,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:143,columnNumber:5},void 0)},vh=({label:e,height:t,visible:r,onClick:n})=>{const o=ph();return i.jsxDEV("pixiContainer",{eventMode:r?"static":"none",cursor:"pointer",onPointerUp:n,layout:{display:r?"flex":"none",width:20,height:t,justifyContent:"center",alignItems:"center"},children:i.jsxDEV("pixiBitmapText",{text:e,style:{fontFamily:lh,fontSize:12,fill:16777215},tint:o.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:187,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:181,columnNumber:5},void 0)},wh=({height:e,onClick:t})=>{const r=ph(),[n,o]=ae.useState(!1);return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerOver:()=>o(!0),onPointerOut:()=>o(!1),onPointerUp:t,layout:{width:28,height:e,justifyContent:"center",alignItems:"center"},children:i.jsxDEV("pixiBitmapText",{text:"+",style:{fontFamily:uh,fontSize:16,fill:16777215},tint:n?r.accent.color:r.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:209,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiTabBar.tsx",lineNumber:201,columnNumber:5},void 0)},Qh={tracker:{x:40,y:40,width:900,height:600,zIndex:1,visible:!0,minimized:!1},pianoroll:{x:980,y:300,width:700,height:400,zIndex:2,visible:!1,minimized:!1},arrangement:{x:40,y:680,width:900,height:300,zIndex:3,visible:!1,minimized:!1},dj:{x:40,y:40,width:1100,height:500,zIndex:4,visible:!1,minimized:!1},vj:{x:800,y:40,width:600,height:400,zIndex:5,visible:!1,minimized:!1},instrument:{x:980,y:40,width:700,height:260,zIndex:6,visible:!0,minimized:!1}},Dh=le()(r(n((e,t)=>({camera:{x:0,y:0,scale:1},windows:{...Qh},maxZIndex:10,workspaces:{},minimapVisible:!0,uiSoundVolume:.3,snapToGrid:!1,gridSize:40,setCamera:t=>e(e=>{Object.assign(e.camera,t)}),panCamera:(t,i)=>e(e=>{e.camera.x+=t,e.camera.y+=i}),zoomCamera:(t,i,r)=>e(e=>{const n=e.camera.scale,o=Math.max(.15,Math.min(4,n*(1+t))),s=o/n;e.camera.x=i-(i-e.camera.x)*s,e.camera.y=r-(r-e.camera.y)*s,e.camera.scale=o}),showWindow:t=>e(e=>{e.windows[t]&&(e.windows[t].visible=!0,e.windows[t].minimized=!1,e.maxZIndex++,e.windows[t].zIndex=e.maxZIndex)}),hideWindow:t=>e(e=>{e.windows[t]&&(e.windows[t].visible=!1)}),toggleWindow:e=>{const i=t().windows[e];i&&(i.visible&&!i.minimized?t().hideWindow(e):t().showWindow(e))},bringToFront:t=>e(e=>{e.windows[t]&&e.windows[t].zIndex<e.maxZIndex&&(e.maxZIndex++,e.windows[t].zIndex=e.maxZIndex)}),moveWindow:(t,i,r)=>e(e=>{e.windows[t]&&(e.windows[t].x=i,e.windows[t].y=r)}),resizeWindow:(t,i,r,n,o)=>e(e=>{e.windows[t]&&(e.windows[t].width=Math.max(200,i),e.windows[t].height=Math.max(150,r),void 0!==n&&(e.windows[t].x=n),void 0!==o&&(e.windows[t].y=o))}),minimizeWindow:t=>e(e=>{e.windows[t]&&(e.windows[t].minimized=!0)}),restoreWindow:t=>e(e=>{e.windows[t]&&(e.windows[t].minimized=!1,e.maxZIndex++,e.windows[t].zIndex=e.maxZIndex)}),saveWorkspace:t=>e(e=>{e.workspaces[t]={camera:{...e.camera},windows:Object.fromEntries(Object.entries(e.windows).map(([e,t])=>[e,{...t}]))}}),loadWorkspace:t=>e(e=>{const i=e.workspaces[t];if(i){e.camera={...i.camera};for(const[t,r]of Object.entries(i.windows))e.windows[t]&&Object.assign(e.windows[t],r)}}),deleteWorkspace:t=>e(e=>{delete e.workspaces[t]}),setMinimapVisible:t=>e(e=>{e.minimapVisible=t}),setSnapToGrid:t=>e(e=>{e.snapToGrid=t}),setGridSize:t=>e(e=>{e.gridSize=Math.max(10,t)}),setUiSoundVolume:t=>e(e=>{e.uiSoundVolume=Math.max(0,Math.min(1,t))})})),{name:"devilbox-workbench",version:1,partialize:e=>({camera:e.camera,windows:e.windows,maxZIndex:e.maxZIndex,workspaces:e.workspaces,minimapVisible:e.minimapVisible,snapToGrid:e.snapToGrid,gridSize:e.gridSize,uiSoundVolume:e.uiSoundVolume})}));function Nh(e,t=6,i=10){return e<=0?0:e>=1?1:1-Math.exp(-t*e)*Math.cos(i*e)}class kh{samples=[];push(e,t){this.samples.push({x:e,y:t,t:performance.now()}),this.samples.length>6&&this.samples.shift()}getVelocity(e){if(this.samples.length<2)return{vx:0,vy:0};const t=this.samples[0],i=this.samples[this.samples.length-1],r=(i.t-t.t)/1e3;if(r<.005)return{vx:0,vy:0};const n=(i.x-t.x)/e/r,o=(i.y-t.y)/e/r,s=Math.sqrt(n*n+o*o);if(s>3e3){const e=3e3/s;return{vx:n*e,vy:o*e}}return{vx:n,vy:o}}reset(){this.samples=[]}}const Sh=.45;function Ph(e,t,i,r=.05){const n=function(e){if(0===e.length)return null;let t=1/0,i=1/0,r=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x+o.width),n=Math.max(n,o.y+o.height);return{x:t,y:i,w:r-t,h:n-i}}(Object.values(e).filter(e=>e.visible&&!e.minimized));if(!n)return{x:0,y:0,scale:1};const o=i-2*(i*r),s=(t-2*(t*r))/n.w,a=o/n.h,l=Math.min(s,a,2);return{x:t/2-(n.x+n.w/2)*l,y:i/2-(n.y+n.h/2)*l,scale:l}}function Mh(e,t){let i=0,r=!1;const n={...Dh.getState().camera},o=performance.now(),s=()=>{if(r)return;const a=performance.now()-o,l=Math.min(1,a/400),c=Nh(l,7,9),A={x:n.x+(e.x-n.x)*c,y:n.y+(e.y-n.y)*c,scale:n.scale+(e.scale-n.scale)*c};Dh.getState().setCamera(A),l<1?i=requestAnimationFrame(s):(Dh.getState().setCamera(e),t?.())};return i=requestAnimationFrame(s),{cancel:()=>{r=!0,cancelAnimationFrame(i)}}}const Vh={Compose:{camera:{x:0,y:0,scale:1},windows:{tracker:{x:40,y:40,width:900,height:600,zIndex:1,visible:!0,minimized:!1},instrument:{x:980,y:40,width:700,height:260,zIndex:2,visible:!0,minimized:!1},pianoroll:{x:980,y:320,width:700,height:340,zIndex:3,visible:!1,minimized:!1},arrangement:{x:40,y:680,width:900,height:300,zIndex:4,visible:!1,minimized:!1},dj:{x:40,y:40,width:1100,height:500,zIndex:5,visible:!1,minimized:!1},vj:{x:800,y:40,width:600,height:400,zIndex:6,visible:!1,minimized:!1}}},Mix:{camera:{x:0,y:0,scale:1},windows:{dj:{x:40,y:40,width:1100,height:500,zIndex:1,visible:!0,minimized:!1},tracker:{x:40,y:580,width:900,height:400,zIndex:2,visible:!0,minimized:!1},instrument:{x:980,y:580,width:700,height:260,zIndex:3,visible:!1,minimized:!1},pianoroll:{x:980,y:300,width:700,height:340,zIndex:4,visible:!1,minimized:!1},arrangement:{x:40,y:980,width:900,height:300,zIndex:5,visible:!1,minimized:!1},vj:{x:800,y:40,width:600,height:400,zIndex:6,visible:!1,minimized:!1}}},Full:{camera:{x:-20,y:-20,scale:.55},windows:{tracker:{x:40,y:40,width:900,height:600,zIndex:1,visible:!0,minimized:!1},instrument:{x:980,y:40,width:700,height:260,zIndex:2,visible:!0,minimized:!1},pianoroll:{x:980,y:320,width:700,height:340,zIndex:3,visible:!0,minimized:!1},arrangement:{x:40,y:680,width:900,height:300,zIndex:4,visible:!0,minimized:!1},dj:{x:980,y:680,width:700,height:300,zIndex:5,visible:!0,minimized:!1},vj:{x:40,y:1020,width:600,height:400,zIndex:6,visible:!1,minimized:!1}}}},_h=[{id:"tracker",label:"TRK"},{id:"pianoroll",label:"PNO"},{id:"arrangement",label:"ARR"},{id:"dj",label:"DJ"},{id:"vj",label:"VJ"},{id:"instrument",label:"INS"}],Lh=160,Rh=({offsetY:e,onClose:t})=>{const r=ph(),n=Dh(e=>e.workspaces),o=Dh(e=>e.saveWorkspace),s=Dh(e=>e.loadWorkspace),a=Object.keys(Vh),l=Object.keys(n),c=[...a.map(e=>({name:e,builtin:!0})),...l.map(e=>({name:e,builtin:!1})),{name:"+ Save Current",builtin:!1,isSave:!0}],A=24*c.length+8,u=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,Lh,A,6),e.fill({color:789528,alpha:.97}),e.roundRect(0,0,Lh,A,6),e.stroke({color:r.border.color,alpha:.6,width:1})},[A,r]),d=ae.useCallback((e,i,r)=>{if(i){const e=`Layout ${(new Date).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit"})}`;o(e)}else if(r){const t=Vh[e],i=Dh.getState();for(const[e,r]of Object.entries(t.windows))i.windows[e]&&(i.moveWindow(e,r.x,r.y),i.resizeWindow(e,r.width,r.height),r.visible?i.showWindow(e):i.hideWindow(e));Mh(t.camera)}else s(e),Mh(Dh.getState().camera);t()},[o,s,t]);return i.jsxDEV("pixiContainer",{y:e,layout:{position:"absolute",width:Lh},children:[i.jsxDEV("pixiGraphics",{draw:u,layout:{position:"absolute",width:Lh,height:A}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:95,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:Lh,flexDirection:"column",paddingTop:4},children:c.map(e=>i.jsxDEV(Uh,{label:e.name,isBuiltin:"builtin"in e&&e.builtin,isSave:"isSave"in e&&e.isSave,onPress:()=>d(e.name,"isSave"in e&&!!e.isSave,"builtin"in e&&e.builtin)},e.name,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:101,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:99,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:94,columnNumber:5},void 0)},Uh=({label:e,isBuiltin:t,isSave:r,onPress:n})=>{const o=ph(),[s,a]=ae.useState(!1),l=ae.useCallback(e=>{e.clear(),s&&(e.rect(2,0,156,24),e.fill({color:o.bgHover.color}))},[s,o]),c=r?o.accent.color:t?o.textSecondary.color:o.text.color;return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),onPointerUp:n,layout:{width:Lh,height:24,paddingLeft:12,alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:l,layout:{position:"absolute",width:Lh,height:24}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:146,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:e,style:{fontFamily:sh,fontSize:11,fill:16777215},tint:c,layout:{alignSelf:"center"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:147,columnNumber:7},void 0),t&&i.jsxDEV("pixiBitmapText",{text:" ",style:{fontFamily:sh,fontSize:9,fill:16777215},tint:o.textMuted.color,layout:{alignSelf:"center",marginLeft:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:154,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:138,columnNumber:5},void 0)},Th=45,Oh=()=>{const e=ph(),{width:r,height:n}=Eh(),l=o(e=>e.tabs),c=o(e=>e.activeTabId),A=o(e=>e.addTab),u=o(e=>e.closeTab),d=o(e=>e.setActiveTab),h=t(e=>e.currentThemeId),g=t(e=>e.setTheme),f=s(e=>e.setRenderMode),p=Dh(e=>e.windows),m=Dh(e=>e.toggleWindow),[x,E]=ae.useState(!1),C=l.map(e=>({id:e.id,label:e.name,dirty:e.isDirty})),B=ae.useCallback(()=>{const e=a.findIndex(e=>e.id===h),t=a[(e+1)%a.length];g(t.id)},[h,g]),b=ae.useCallback(()=>{f("dom")},[f]),I=ae.useCallback(()=>{Mh(Ph(Dh.getState().windows,r,n))},[r,n]),y=ae.useCallback(t=>{t.clear(),t.rect(0,0,r,Th),t.fill({color:e.bg.color}),t.rect(0,44,r,1),t.fill({color:e.border.color,alpha:.5})},[r,e]),v=ae.useCallback(t=>{t.clear(),t.rect(0,0,r,98),t.fill({color:e.bg.color}),t.rect(0,97,r,1),t.fill({color:e.border.color,alpha:.4})},[r,e]);return i.jsxDEV("pixiContainer",{layout:{width:r,height:98,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:v,layout:{position:"absolute",width:r,height:98}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:247,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:r,height:Th,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:12},children:[i.jsxDEV("pixiGraphics",{draw:y,layout:{position:"absolute",width:r,height:Th}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:263,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"DEViLBOX",style:{fontFamily:ah,fontSize:16,fill:16777215},tint:e.accent.color,layout:{marginRight:16}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:269,columnNumber:9},void 0),_h.map(({id:e,label:t})=>{const r=p[e],n=r?.visible&&!r?.minimized;return i.jsxDEV(bh,{label:t,variant:"ft2",size:"sm",active:n,onClick:()=>m(e),layout:{marginRight:4}},e,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:281,columnNumber:13},void 0)}),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:294,columnNumber:9},void 0),i.jsxDEV(bh,{label:"FIT",variant:"ghost",size:"sm",onClick:I,layout:{marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:297,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{position:"relative",marginRight:8},children:[i.jsxDEV(bh,{label:"LAYOUT",variant:"ghost",size:"sm",active:x,onClick:()=>E(e=>!e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:307,columnNumber:11},void 0),x&&i.jsxDEV(Rh,{offsetY:Th,onClose:()=>E(!1)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:315,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:306,columnNumber:9},void 0),i.jsxDEV(bh,{label:"THEME",variant:"ghost",size:"sm",onClick:B,layout:{marginRight:8}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:320,columnNumber:9},void 0),i.jsxDEV(bh,{label:"DOM",variant:"ghost",size:"sm",onClick:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:329,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:253,columnNumber:7},void 0),i.jsxDEV(Ih,{tabs:C,activeTabId:c,onSelect:d,onClose:u,onNew:A,width:r,height:53,layout:{flexShrink:0}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:338,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiNavBar.tsx",lineNumber:239,columnNumber:5},void 0)};let Fh=null;function Gh(){if(!Fh)try{Fh=new AudioContext}catch{return null}return"suspended"===Fh.state&&Fh.resume().catch(()=>{}),Fh}function jh(e,t,i,r=.09){const n=Gh();if(!n)return;const o=n.currentTime,s=n.createOscillator(),a=n.createGain();s.type="sine",s.frequency.setValueAtTime(e,o),s.frequency.exponentialRampToValueAtTime(Math.max(1,t),o+i),a.gain.setValueAtTime(0,o),a.gain.linearRampToValueAtTime(r,o+.005),a.gain.exponentialRampToValueAtTime(1e-4,o+i),s.connect(a),a.connect(n.destination),s.start(o),s.stop(o+i+.05)}function Hh(e=.02,t=.06){const i=Gh();if(!i)return;const r=i.currentTime,n=Math.ceil(i.sampleRate*e),o=i.createBuffer(1,n,i.sampleRate),s=o.getChannelData(0);for(let c=0;c<n;c++)s[c]=(2*Math.random()-1)*(1-c/n);const a=i.createBufferSource(),l=i.createGain();a.buffer=o,l.gain.setValueAtTime(t,r),l.gain.exponentialRampToValueAtTime(1e-4,r+e),a.connect(l),l.connect(i.destination),a.start(r)}const Xh=150,zh=100,Jh=[4890367,16739146,4915102,16763978,13388543,4915182],Wh=({screenW:e,screenH:t})=>{const r=ph(),n=Dh(e=>e.camera),o=Dh(e=>e.windows),s=Dh(e=>e.setCamera),a=ae.useRef(null),[l,c]=ae.useState(!1),A=(()=>{const e=Object.values(o).filter(e=>e.visible);if(0===e.length)return{x:0,y:0,w:1920,h:1080};let t=1/0,i=1/0,r=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x+o.width),n=Math.max(n,o.y+o.height);const s=200;return{x:t-s,y:i-s,w:r-t+400,h:n-i+400}})(),u=142,d=92,h=ae.useCallback((e,t)=>({x:4+(e-A.x)/A.w*u,y:4+(t-A.y)/A.h*d}),[A,u,d]),g=ae.useCallback((e,t)=>({x:A.x+(e-4)/u*A.w,y:A.y+(t-4)/d*A.h}),[A,u,d]),f=ae.useCallback(i=>{i.clear(),i.roundRect(0,0,Xh,zh,4),i.fill({color:657938,alpha:.92}),i.roundRect(0,0,Xh,zh,4),i.stroke({color:r.border.color,alpha:.6,width:1});Object.values(o).forEach((e,t)=>{if(!e.visible)return;const r=h(e.x,e.y),n=h(e.x+e.width,e.y+e.height),o=Math.max(2,n.x-r.x),s=Math.max(2,n.y-r.y),a=Jh[t%Jh.length];i.rect(r.x,r.y,o,s),i.fill({color:a,alpha:e.minimized?.15:.35}),i.rect(r.x,r.y,o,s),i.stroke({color:a,alpha:.7,width:.5})});const s=(0-n.x)/n.scale,a=(0-n.y)/n.scale,l=e/n.scale,c=t/n.scale,A=h(s,a),u=h(s+l,a+c),d=Math.max(4,u.x-A.x),g=Math.max(4,u.y-A.y);i.rect(A.x,A.y,d,g),i.fill({color:16777215,alpha:.06}),i.rect(A.x,A.y,d,g),i.stroke({color:16777215,alpha:.7,width:1}),i.rect(4,86,40,12),i.fill({color:0,alpha:.4})},[n,o,e,t,h,r]),p=ae.useRef(null),m=ae.useCallback(i=>{i.stopPropagation();const r=i.getLocalPosition(i.currentTarget),o=r.x,l=r.y,f=(0-n.x)/n.scale,m=(0-n.y)/n.scale,x=e/n.scale,E=t/n.scale,C=h(f,m),B=h(f+x,m+E);if(o>=C.x&&o<=B.x&&l>=C.y&&l<=B.y)c(!0),p.current={mapX:o,mapY:l,camX:n.x,camY:n.y};else{Hh(.012,.04);const i=g(o,l),r=e/2-i.x*n.scale,s=t/2-i.y*n.scale;a.current?.cancel(),a.current=Mh({x:r,y:s,scale:n.scale})}const b=e=>{if(!p.current)return;const t=e.clientX-(i.clientX-r.x+p.current.mapX),o=e.clientY-(i.clientY-r.y+p.current.mapY),a=t/u*A.w,l=o/d*A.h;s({x:p.current.camX-a*n.scale,y:p.current.camY-l*n.scale})},I=()=>{c(!1),p.current=null,document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",I)};document.addEventListener("pointermove",b),document.addEventListener("pointerup",I)},[n,e,t,h,g,u,d,A,s]);return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:l?"grabbing":"crosshair",onPointerDown:m,children:[i.jsxDEV("pixiGraphics",{draw:f,layout:{width:Xh,height:zh}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchMinimap.tsx",lineNumber:190,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:`${Math.round(100*n.scale)}%`,style:{fontFamily:sh,fontSize:8,fill:16777215},tint:8421536,x:6,y:88},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchMinimap.tsx",lineNumber:195,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchMinimap.tsx",lineNumber:185,columnNumber:5},void 0)},Kh=32,Yh=({height:e})=>{const t=ph(),r=ae.useCallback(i=>{i.clear(),i.rect(0,0,1,e),i.fill({color:t.border.color,alpha:.5})},[e,t]);return i.jsxDEV("pixiGraphics",{draw:r,layout:{width:1,height:e,marginLeft:8,marginRight:8,alignSelf:"center"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:42,columnNumber:5},void 0)},qh=({color:e,size:t=6})=>{const r=ae.useCallback(i=>{i.clear(),i.circle(t/2,t/2,t/2),i.fill({color:e})},[e,t]);return i.jsxDEV("pixiGraphics",{draw:r,layout:{width:t,height:t,alignSelf:"center",marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:59,columnNumber:5},void 0)},Zh=({barHeight:e})=>{const t=ph(),{deck1Playing:r,deck2Playing:n,deck1BPM:o,deck2BPM:s,deck1Name:a,deck2Name:l,crossfader:c}=h(g(e=>({deck1Playing:e.decks.A.isPlaying,deck2Playing:e.decks.B.isPlaying,deck1BPM:e.decks.A.effectiveBPM||0,deck2BPM:e.decks.B.effectiveBPM||0,deck1Name:e.decks.A.trackName,deck2Name:e.decks.B.trackName,crossfader:e.crossfaderPosition}))),A=o.toFixed(1),u=s.toFixed(1),d=`X-Fade ${(100*c).toFixed(0)}%`,f=r?"PLAY":"STOP",p=n?"PLAY":"STOP",m=r?t.success.color:t.textMuted.color,x=n?t.success.color:t.textMuted.color,E=ae.useMemo(()=>({alignSelf:"center"}),[]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",flex:1,height:e},children:[i.jsxDEV("pixiBitmapText",{text:"D1",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:6333946,layout:{alignSelf:"center",marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:98,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:f,style:{fontFamily:ah,fontSize:10,fill:16777215},tint:m,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:99,columnNumber:7},void 0),a?i.jsxDEV(i.Fragment,{children:[i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:102,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:a.length>14?a.slice(0,12)+"":a,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.textMuted.color,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:103,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:101,columnNumber:9},void 0):null,i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:111,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:A,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:6333946,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:112,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:" BPM",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:113,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:115,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:d,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:116,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:118,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"D2",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:16281969,layout:{alignSelf:"center",marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:119,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:p,style:{fontFamily:ah,fontSize:10,fill:16777215},tint:x,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:120,columnNumber:7},void 0),l?i.jsxDEV(i.Fragment,{children:[i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:123,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:l.length>14?l.slice(0,12)+"":l,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.textMuted.color,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:124,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:122,columnNumber:9},void 0):null,i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:132,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:u,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:16281969,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:133,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:" BPM",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:134,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:96,columnNumber:5},void 0)},$h=({barHeight:e})=>{const t=ph(),{cursor:r,currentOctave:n,insertMode:o,recordMode:s,patternLength:a}=f(g(e=>({cursor:e.cursor,currentOctave:e.currentOctave,insertMode:e.insertMode,recordMode:e.recordMode,patternLength:e.patterns[e.currentPatternIndex]?.length||64}))),{isPlaying:l,currentRow:c}=p(g(e=>({isPlaying:e.isPlaying,currentRow:e.currentRow}))),A=l?c:r.rowIndex,u=String(A).padStart(2,"0")+"/"+String(a-1).padStart(2,"0"),d=`Ch ${r.channelIndex+1}`,h=r.columnType.charAt(0).toUpperCase()+r.columnType.slice(1),m=String(n),x=o?"INS":"OVR",E=o?t.warning.color:t.accent.color,C=s?"REC":"EDIT",B=s?t.error.color:t.text.color,b=ae.useMemo(()=>({alignSelf:"center"}),[]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",flex:1,height:e},children:[i.jsxDEV("pixiBitmapText",{text:"Row",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:{...b,marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:171,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:u,style:{fontFamily:ah,fontSize:10,fill:16777215},tint:t.accent.color,layout:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:172,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:173,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:d,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:174,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:175,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:h,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:176,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:177,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"Oct",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:{...b,marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:178,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:m,style:{fontFamily:ah,fontSize:10,fill:16777215},tint:t.accent.color,layout:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:179,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:180,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"Mode:",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.text.color,layout:{...b,marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:181,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:x,style:{fontFamily:ah,fontSize:10,fill:16777215},tint:E,layout:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:182,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:183,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:C,style:{fontFamily:ah,fontSize:10,fill:16777215},tint:B,layout:b},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:184,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:170,columnNumber:5},void 0)},eg=({barHeight:e})=>{const t=ph(),r=ae.useMemo(()=>({alignSelf:"center"}),[]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",flex:1,height:e},children:[i.jsxDEV("pixiBitmapText",{text:"VJ",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:t.accent.color,layout:r},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:196,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:197,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"Esc: back  Cmd+Shift+V: toggle  Milkdrop | ISF | 3D",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:t.textMuted.color,layout:r},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:198,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:195,columnNumber:5},void 0)},tg=({barHeight:e,hasMIDIDevice:t,deviceName:r,showKnobBar:n,onToggleKnobBar:o,isAudioRunning:s,collabConnected:a,collabRoomCode:l,activeView:c,onShowTips:A})=>{const u=ph(),[d,h]=ae.useState(!1),g=t&&"dj"!==c&&"vj"!==c,f=ae.useMemo(()=>({alignSelf:"center"}),[]),p=s?u.success.color:u.textMuted.color,m=s?"Audio Active":"Audio Off",x=s?u.success.color:u.textMuted.color,E=n?"":"";return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",height:e,paddingRight:12},children:[a&&l?i.jsxDEV(i.Fragment,{children:[i.jsxDEV(qh,{color:u.success.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:250,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:"Collab",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:u.success.color,layout:f},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:251,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:` ${l}`,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:u.textMuted.color,layout:f},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:252,columnNumber:11},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:253,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:249,columnNumber:9},void 0):null,g?i.jsxDEV(i.Fragment,{children:[i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:o,layout:{flexDirection:"row",alignItems:"center",height:e},children:[i.jsxDEV(qh,{color:u.success.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:266,columnNumber:13},void 0),i.jsxDEV("pixiBitmapText",{text:r.toUpperCase(),style:{fontFamily:ah,fontSize:10,fill:16777215},tint:u.textMuted.color,layout:f},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:267,columnNumber:13},void 0),i.jsxDEV("pixiBitmapText",{text:` ${E}`,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:u.textMuted.color,layout:f},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:273,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:260,columnNumber:11},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:280,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:259,columnNumber:9},void 0):null,i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:A,onPointerOver:()=>h(!0),onPointerOut:()=>h(!1),layout:{flexDirection:"row",alignItems:"center",height:e,marginRight:8},children:i.jsxDEV("pixiBitmapText",{text:" TIPS",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:u.warning.color,layout:{alignSelf:"center"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:293,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:285,columnNumber:7},void 0),i.jsxDEV(Yh,{height:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:300,columnNumber:7},void 0),i.jsxDEV(qh,{color:p},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:303,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:m,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:x,layout:f},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:304,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:246,columnNumber:5},void 0)},ig=[{id:"303",label:"303/Synth"},{id:"Siren",label:"Dub Siren"},{id:"FX",label:"Effects"},{id:"Mixer",label:"Mixer"}],rg=({width:e,height:t,knobBank:r,setKnobBank:n,assignments:o})=>{const s=ph(),a=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:s.bgTertiary.color}),i.rect(0,0,e,1),i.fill({color:s.border.color})},[e,t,s]),l=t-24-8,c=Math.floor((e-32-28)/8);return i.jsxDEV("pixiContainer",{layout:{width:e,height:t,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:a,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:354,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",height:24,paddingLeft:16,paddingTop:4,gap:6},children:[i.jsxDEV("pixiBitmapText",{text:"KNOB BANK:",style:{fontFamily:ah,fontSize:9,fill:16777215},tint:s.textMuted.color,layout:{alignSelf:"center",marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:365,columnNumber:9},void 0),ig.map(e=>i.jsxDEV(ng,{label:e.label,isActive:r===e.id,height:18,onPress:()=>n(e.id)},e.id,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:372,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:357,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",height:l,paddingLeft:16,paddingRight:16,gap:4},children:o.slice(0,8).map((e,t)=>i.jsxDEV(og,{index:t,assignment:e,cellW:c,cellH:l},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:392,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:383,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:353,columnNumber:5},void 0)},ng=({label:e,isActive:t,height:r,onPress:n})=>{const o=ph(),s=7*e.length+16,a=ae.useCallback(e=>{e.clear(),t?(e.roundRect(0,0,s,r,10),e.fill({color:o.accent.color}),e.roundRect(0,0,s,r,10),e.stroke({color:o.accent.color,width:1})):(e.roundRect(0,0,s,r,10),e.fill({color:o.bgSecondary.color}),e.roundRect(0,0,s,r,10),e.stroke({color:o.border.color,width:1}))},[s,r,t,o]),l=t?o.textInverse.color:o.textMuted.color;return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:n,layout:{width:s,height:r,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:a,layout:{position:"absolute",width:s,height:r}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:441,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:e.toUpperCase(),style:{fontFamily:ah,fontSize:9,fill:16777215},tint:l,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:442,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:435,columnNumber:5},void 0)},og=({index:e,assignment:t,cellW:r,cellH:n})=>{const o=ph(),s=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,r,n,3),e.fill({color:o.bgSecondary.color}),e.roundRect(0,0,r,n,3),e.stroke({color:o.border.color,width:1}),e.rect(0,0,r,2),e.fill({color:o.accent.color,alpha:.2})},[r,n,o]),a=`K${e+1} CC${t.cc}`,l=t.label.length>8?t.label.slice(0,7).toUpperCase()+"":t.label.toUpperCase();return i.jsxDEV("pixiContainer",{layout:{width:r,height:n,flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:s,layout:{position:"absolute",width:r,height:n}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:481,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:a,style:{fontFamily:sh,fontSize:8,fill:16777215},tint:o.textMuted.color,layout:{marginBottom:2}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:482,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:l,style:{fontFamily:ah,fontSize:9,fill:16777215},tint:o.accent.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:488,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:480,columnNumber:5},void 0)},sg=({width:e,activeView:t,hasMIDIDevice:r,deviceName:n,showKnobBar:o,onToggleKnobBar:s,isAudioRunning:a,collabConnected:l,collabRoomCode:c,onShowTips:A,minimapVisible:u})=>{const d=ph(),h=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,Kh),t.fill({color:d.bgSecondary.color}),t.rect(0,0,e,1),t.fill({color:d.border.color})},[e,d]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:Kh,flexDirection:"row",alignItems:"center",paddingLeft:12},children:[i.jsxDEV("pixiGraphics",{draw:h,layout:{position:"absolute",width:e,height:Kh}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:545,columnNumber:7},void 0),"dj"===t?i.jsxDEV(Zh,{barHeight:Kh},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:549,columnNumber:11},void 0):"vj"===t?i.jsxDEV(eg,{barHeight:Kh},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:551,columnNumber:13},void 0):i.jsxDEV($h,{barHeight:Kh},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:552,columnNumber:13},void 0),i.jsxDEV(tg,{barHeight:Kh,hasMIDIDevice:r,deviceName:n,showKnobBar:o,onToggleKnobBar:s,isAudioRunning:a,collabConnected:l,collabRoomCode:c,activeView:t,onShowTips:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:556,columnNumber:7},void 0),u&&i.jsxDEV("pixiContainer",{layout:{position:"absolute",right:0,bottom:0},children:i.jsxDEV(Wh,{screenW:e,screenH:window.innerHeight},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:572,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:571,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:538,columnNumber:5},void 0)},ag=()=>{const{width:e}=Eh(),t=l(e=>e.activeView),r=l(e=>e.openModal),n=c(e=>"running"===e.contextState),o=ae.useCallback(()=>{r("help",{initialTab:"tips"})},[r]),s=Dh(e=>e.minimapVisible),a=A(e=>e.status),h=A(e=>e.roomCode),{knobBank:g,setKnobBank:f,isInitialized:p,inputDevices:m,selectedInputId:x,showKnobBar:E,setShowKnobBar:C}=u(),B=p&&m.length>0,b=B?m.find(e=>e.id===x)||m[0]:null,I=b?.name||"MIDI Controller",y="dj"!==t&&"vj"!==t&&B&&E,v=y?112:Kh,w=B?d[g]??[]:[],Q=ae.useCallback(()=>{C(!E)},[C,E]),D="connected"===a,N=ae.useCallback(e=>{e.clear()},[]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:v,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:N,layout:{position:"absolute",width:e,height:v}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:637,columnNumber:7},void 0),y&&i.jsxDEV(rg,{width:e,height:80,knobBank:g,setKnobBank:f,assignments:w},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:641,columnNumber:9},void 0),i.jsxDEV(sg,{width:e,activeView:t,hasMIDIDevice:B,deviceName:I,showKnobBar:E,onToggleKnobBar:Q,isAudioRunning:n,collabConnected:D,collabRoomCode:h,onShowTips:o,minimapVisible:s},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:650,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/shell/PixiStatusBar.tsx",lineNumber:636,columnNumber:5},void 0)},lg=({width:e,height:t})=>{const r=ae.useRef(null),n=ae.useRef({nx:0,ny:0,active:!1}),o=ae.useRef(0);return ae.useEffect(()=>{const e=e=>{const t=performance.now();if(t-o.current<33)return;if("connected"!==A.getState().status)return;o.current=t;const i=e.clientX/window.innerWidth,r=e.clientY/window.innerHeight;m()?.send({type:"peer_mouse",nx:Math.max(0,Math.min(1,i)),ny:Math.max(0,Math.min(1,r))})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),ae.useEffect(()=>A.subscribe(e=>{n.current={nx:e.peerMouseNX,ny:e.peerMouseNY,active:e.peerMouseActive&&"connected"===e.status&&"shared"===e.listenMode}}),[]),ae.useEffect(()=>{let i;const o=()=>{const s=r.current;if(!s)return void(i=requestAnimationFrame(o));s.clear();const{nx:a,ny:l,active:c}=n.current;if(c){const i=a*e,r=l*t;s.moveTo(i,r),s.lineTo(i,r+18),s.lineTo(i+4.5,r+13.5),s.lineTo(i+8.5,r+21.5),s.lineTo(i+11.5,r+20),s.lineTo(i+7.5,r+12),s.lineTo(i+14,r+12),s.closePath(),s.fill({color:11032055}),s.stroke({color:16777215,width:1.5})}i=requestAnimationFrame(o)};return i=requestAnimationFrame(o),()=>cancelAnimationFrame(i)},[e,t]),i.jsxDEV("pixiContainer",{layout:{position:"absolute",width:e,height:t},interactiveChildren:!1,children:i.jsxDEV("pixiGraphics",{ref:r,draw:()=>{},layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/collaboration/PixiPeerCursor.tsx",lineNumber:96,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/collaboration/PixiPeerCursor.tsx",lineNumber:95,columnNumber:5},void 0)};const cg=({width:e,height:t,camera:r,gridSize:n=40})=>{const o=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:921108});const o=r.scale,s=r.x,a=r.y,l=Math.max(.5,Math.min(1.5,.8*o)),c=n*o,A=c*(c<8?Math.ceil(8/c):1);if(A>200)return;const u=(s%A+A)%A,d=(a%A+A)%A,h=Math.max(.08,Math.min(.35,.4*o));i.setStrokeStyle({width:0});let g=u;for(;g<=e;){let e=d;for(;e<=t;)i.circle(g,e,l),e+=A;g+=A}i.fill({color:6316192,alpha:h});const f=4*A;if(f<2*e){const r=(s%f+f)%f,n=(a%f+f)%f,l=Math.max(.12,Math.min(.5,.5*o)),c=Math.max(1,Math.min(2.5,1.2*o));let A=r;for(;A<=e;){let e=n;for(;e<=t;)i.circle(A,e,c),e+=f;A+=f}i.fill({color:8421568,alpha:l})}},[e,t,r.x,r.y,r.scale,n]);return i.jsxDEV("pixiGraphics",{draw:o,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchBackground.tsx",lineNumber:98,columnNumber:5},void 0)};const Ag=28,ug=200,dg={nw:"nw-resize",n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize"},hg=({dir:e,winState:t,onResizeStart:r})=>{const{width:n,height:o}=t;let s=0,a=0,l=8,c=8;switch(e){case"nw":s=0,a=0,l=8,c=8;break;case"n":s=8,a=0,l=n-16,c=8;break;case"ne":s=n-8,a=0,l=8,c=8;break;case"e":s=n-8,a=8,l=8,c=o-16;break;case"se":s=n-8,a=o-8,l=8,c=8;break;case"s":s=8,a=o-8,l=n-16,c=8;break;case"sw":s=0,a=o-8,l=8,c=8;break;case"w":s=0,a=8,l=8,c=o-16}const A=ae.useCallback(e=>{e.clear(),e.rect(0,0,l,c),e.fill({color:16777215,alpha:0})},[l,c]),u=ae.useCallback(t=>{r(e,t)},[e,r]);return i.jsxDEV("pixiContainer",{x:s,y:a,children:i.jsxDEV("pixiGraphics",{draw:A,eventMode:"static",cursor:dg[e],onPointerDown:u,layout:{width:l,height:c}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:95,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:94,columnNumber:5},void 0)},gg=({id:e,title:t,camera:r,screenW:n,screenH:o,onFocus:s,children:a})=>{const l=ph(),c=Dh(t=>t.windows[e]),A=Dh(e=>e.bringToFront),u=Dh(e=>e.moveWindow),d=Dh(e=>e.resizeWindow),h=Dh(e=>e.hideWindow),g=Dh(e=>e.minimizeWindow),f=Dh(e=>e.restoreWindow),p=Dh(e=>e.snapToGrid),m=Dh(e=>e.gridSize),x=ae.useContext(Lx).setSnapLines,[E,C]=ae.useState(!1),[B,b]=ae.useState(c?.visible??!1),I=ae.useRef(null),y=ae.useRef(c?.visible??!1),v=ae.useRef(0),w=ae.useRef(0),Q=ae.useRef("open"),D=ae.useRef(null),N=ae.useRef(new kh),k=ae.useRef(0),S=ae.useRef(null),P=ae.useRef({moveWindow:u,resizeWindow:d,winState:c,camera:r,screenW:n,screenH:o,snapToGrid:p,gridSize:m,setSnapLines:x});P.current={moveWindow:u,resizeWindow:d,winState:c,camera:r,screenW:n,screenH:o,snapToGrid:p,gridSize:m,setSnapLines:x};const M=ae.useCallback((e,t)=>{cancelAnimationFrame(v.current),Q.current=e,w.current=performance.now(),"open"===e&&b(!0);const i=()=>{const r=performance.now()-w.current,n=Math.min(1,r/500);let o="open"===e?Nh(n):1-Nh(1-n,8,6);o=Math.max(0,o);const s=function(e){if(e<.75||e>=1)return{scaleX:1,scaleY:1};const t=(e-.75)/.25,i=.06*Math.sin(t*Math.PI);return{scaleX:1+.4*i,scaleY:1-i}}("open"===e?n:1-n),a=o*s.scaleX,l=o*s.scaleY,c=I.current;if(c){c.scale.x=a,c.scale.y=l;const e=P.current.winState?.width??400,t=P.current.winState?.height??300;c.pivot.set(e/2,t/2),c.x=(P.current.winState?.x??0)+e/2,c.y=(P.current.winState?.y??0)+t/2}n<1?v.current=requestAnimationFrame(i):(c&&(c.scale.set(1),c.pivot.set(0,0),c.x=P.current.winState?.x??0,c.y=P.current.winState?.y??0),"close"===e&&b(!1),t?.())};v.current=requestAnimationFrame(i)},[]);ae.useEffect(()=>{const e=y.current,t=c?.visible??!1;y.current=t,t&&!e?(jh(280,560,.14,.08),M("open")):!t&&e&&M("close")},[c?.visible,M]),ae.useEffect(()=>()=>{cancelAnimationFrame(v.current),cancelAnimationFrame(k.current)},[]);const V=ae.useCallback(()=>{const e=P.current.camera,t=P.current.screenW,i=P.current.screenH;return{viewL:(0-e.x)/e.scale,viewT:(0-e.y)/e.scale,viewR:(t-e.x)/e.scale,viewB:(i-e.y)/e.scale}},[]),_=ae.useCallback(t=>{t.stopPropagation(),A(e),C(!0),cancelAnimationFrame(k.current);const i=P.current.winState;D.current={active:!0,startGX:t.globalX,startGY:t.globalY,startWX:i.x,startWY:i.y},N.current.reset(),N.current.push(t.globalX,t.globalY);let r=!1;const n=t=>{if(!D.current?.active)return;const{startGX:i,startGY:n,startWX:o,startWY:s}=D.current,a=P.current.camera,l=o+(t.clientX-i)/a.scale,c=s+(t.clientY-n)/a.scale,A=Dh.getState().windows,u=P.current.winState,d=function(e,t,i,r,n,o,s,a,l){let c=t,A=i;const u=[],d=t,h=t+r,g=i,f=i+n;let p=l+1,m=l+1;for(const[x,E]of Object.entries(o)){if(x===e)continue;if(!E.visible||E.minimized)continue;const t=E.x,i=E.x+E.width,o=E.y,s=E.y+E.height,a=[{delta:d-t,snapVal:t,lineX:t},{delta:d-i,snapVal:i,lineX:i},{delta:h-t,snapVal:t-r,lineX:t},{delta:h-i,snapVal:i-r,lineX:i}];for(const{delta:e,snapVal:r,lineX:n}of a){const t=Math.abs(e);if(t<l&&t<p){p=t,c=r;const e=Math.min(g,o)-150,i=Math.max(f,s)+150,a=u.findIndex(e=>"x"===e.axis),l={axis:"x",value:n,from:e,to:i};a>=0?u[a]=l:u.push(l)}}const C=[{delta:g-o,snapVal:o,lineY:o},{delta:g-s,snapVal:s,lineY:s},{delta:f-o,snapVal:o-n,lineY:o},{delta:f-s,snapVal:s-n,lineY:s}];for(const{delta:e,snapVal:r,lineY:n}of C){const o=Math.abs(e);if(o<l&&o<m){m=o,A=r;const e=Math.min(d,t)-150,s=Math.max(h,i)+150,a=u.findIndex(e=>"y"===e.axis),l={axis:"y",value:n,from:e,to:s};a>=0?u[a]=l:u.push(l)}}}if(s&&a>0){if(p>l){const e=Math.round(t/a)*a;Math.abs(t-e)<l&&(c=e,u.push({axis:"x",value:e,from:i-300,to:i+n+300}))}if(m>l){const e=Math.round(i/a)*a;Math.abs(i-e)<l&&(A=e,u.push({axis:"y",value:e,from:t-300,to:t+r+300}))}}return{x:c,y:A,snapped:u.length>0,lines:u}}(e,l,c,u.width,u.height,A,P.current.snapToGrid,P.current.gridSize,20);P.current.moveWindow(e,d.x,d.y),P.current.setSnapLines(d.lines),d.snapped&&!r&&Hh(.018,.06),r=d.snapped,N.current.push(t.clientX,t.clientY)},o=t=>{if(!D.current)return;D.current=null,document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",o),P.current.setSnapLines([]),N.current.push(t.clientX,t.clientY);const i=P.current.camera,{vx:r,vy:s}=N.current.getVelocity(i.scale);if(Math.sqrt(r*r+s*s)>120){const t=P.current.winState;let i={x:t.x,y:t.y,vx:r,vy:s,prevTime:performance.now()};const n=()=>{const t=performance.now(),{next:r,done:o}=function(e,t){const i=Math.min((t-e.prevTime)/1e3,.05),r=Math.pow(.88,60*i),n=e.vx*r,o=e.vy*r;return{next:{x:e.x+n*i,y:e.y+o*i,vx:n,vy:o,prevTime:t},done:Math.sqrt(n*n+o*o)<60}}(i,t),s=P.current.winState.width,a=P.current.winState.height,l=V(),c=function(e,t,i,r,n,o,s,a,l,c){let A=n,u=o,d=!1,h=!1;return e<s-60&&n<0&&(A=Math.abs(n)*Sh,d=!0),e+i>l+60&&n>0&&(A=-Math.abs(n)*Sh,d=!0),t<a-60&&o<0&&(u=Math.abs(o)*Sh,h=!0),t+r>c+60&&o>0&&(u=-Math.abs(o)*Sh,h=!0),{vx:A,vy:u,bounceX:d,bounceY:h}}(r.x,r.y,s,a,r.vx,r.vy,l.viewL,l.viewT,l.viewR,l.viewB);i={...r,vx:c.vx,vy:c.vy};const A=I.current;A&&(A.x=i.x,A.y=i.y),P.current.moveWindow(e,i.x,i.y),o||(k.current=requestAnimationFrame(n))};k.current=requestAnimationFrame(n)}};document.addEventListener("pointermove",n),document.addEventListener("pointerup",o)},[e,A,V]),L=ae.useCallback((t,i)=>{i.stopPropagation(),A(e);const r=P.current.winState;S.current={active:!0,dir:t,startGX:i.globalX,startGY:i.globalY,startWX:r.x,startWY:r.y,startW:r.width,startH:r.height};const n=t=>{if(!S.current?.active)return;const{dir:i,startGX:r,startGY:n,startWX:o,startWY:s,startW:a,startH:l}=S.current,c=P.current.camera,A=(t.clientX-r)/c.scale,u=(t.clientY-n)/c.scale;let d=o,h=s,g=a,f=l;i.includes("e")&&(g=Math.max(200,a+A)),i.includes("w")&&(g=Math.max(200,a-A),d=o+(a-g)),i.includes("s")&&(f=Math.max(150,l+u)),i.includes("n")&&(f=Math.max(150,l-u),h=s+(l-f)),P.current.resizeWindow(e,g,f,d,h)},o=()=>{S.current=null,document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",o)};document.addEventListener("pointermove",n),document.addEventListener("pointerup",o)},[e,A]),R=ae.useCallback(t=>{t.stopPropagation(),c.minimized?(f(e),M("open")):(g(e),M("close",()=>{}))},[e,c?.minimized,g,f,M]),{width:U,height:T}=c,O=T-Ag,F=ae.useCallback(e=>{e.clear(),e.rect(0,0,U,T),e.fill({color:1184284,alpha:.96});const t=E?l.accent.color:l.border.color,i=E?.8:.4;e.rect(0,0,U,T),e.stroke({color:t,alpha:i,width:1}),e.rect(0,0,U,Ag),e.fill({color:E?1842224:1447455}),e.rect(0,27,U,1),e.fill({color:l.border.color,alpha:.5})},[U,T,E,l]),G=ae.useCallback(e=>{e.clear(),e.rect(0,0,ug,32),e.fill({color:1447455,alpha:.96}),e.rect(0,0,ug,32),e.stroke({color:l.accent.color,alpha:.4,width:1})},[l]),j=ae.useCallback(e=>{e.clear(),e.circle(U-12,14,5),e.fill({color:14700624,alpha:.9}),e.circle(U-28,14,5),e.fill({color:14721072,alpha:.9}),e.circle(U-44,14,5),e.fill({color:4239456,alpha:.9})},[U]),H=ae.useCallback(t=>{A(e),C(!0)},[e,A]),X=ae.useCallback(t=>{const i=t.getLocalPosition(t.currentTarget).x;i>U-20?(t.stopPropagation(),jh(420,210,.11,.07),M("close",()=>h(e))):i>U-36?(t.stopPropagation(),R(t)):i>U-52&&(t.stopPropagation(),s?.(e))},[U,e,h,R,M]);return B||c?.visible?c.minimized?i.jsxDEV("pixiContainer",{x:c.x,y:c.y,zIndex:c.zIndex,eventMode:"static",onPointerDown:H,children:[i.jsxDEV("pixiGraphics",{draw:G,layout:{position:"absolute",width:ug,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:490,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:t.toUpperCase(),style:{fontFamily:ah,fontSize:10,fill:16777215},tint:l.textSecondary.color,x:8,y:12},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:494,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerDown:e=>{e.stopPropagation(),R(e)},layout:{position:"absolute",width:ug,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:502,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:483,columnNumber:7},void 0):i.jsxDEV("pixiContainer",{ref:I,x:c.x,y:c.y,zIndex:c.zIndex,eventMode:"static",onPointerDown:H,children:[i.jsxDEV("pixiGraphics",{draw:F,layout:{position:"absolute",width:U,height:T}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:522,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:j,eventMode:"static",onPointerDown:X,cursor:"pointer",layout:{position:"absolute",width:U,height:Ag}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:528,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"move",onPointerDown:_,layout:{position:"absolute",width:U-60,height:Ag}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:537,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:t.toUpperCase(),style:{fontFamily:ah,fontSize:11,fill:16777215},tint:E?l.accent.color:l.textSecondary.color,x:12,y:9},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:545,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{y:Ag,layout:{width:U,height:O,overflow:"hidden"},children:a},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:554,columnNumber:7},void 0),["nw","n","ne","e","se","s","sw","w"].map(e=>i.jsxDEV(hg,{dir:e,winState:c,camera:r,onResizeStart:L},e,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:563,columnNumber:9},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/PixiWindow.tsx",lineNumber:513,columnNumber:5},void 0):null},fg=({fromId:e,toId:t})=>{const r=ph(),n=Dh(e=>e.camera.scale),o=Dh(t=>!(!t.windows[e]?.visible||t.windows[e]?.minimized)),s=Dh(e=>!(!e.windows[t]?.visible||e.windows[t]?.minimized)),a=o&&s,l=ae.useRef(null),c=ae.useRef(0),A=ae.useRef(n),u=ae.useRef(r.accent.color);return A.current=n,u.current=r.accent.color,ae.useEffect(()=>{const i=l.current;if(!a)return cancelAnimationFrame(c.current),void i?.clear();const r=performance.now(),n=()=>{const i=l.current;if(!i)return;const{windows:o}=Dh.getState(),s=o[e],a=o[t];if(!s?.visible||s.minimized||!a?.visible||a.minimized)return void i.clear();const d=(performance.now()-r)/1e3,h=.25+.15*(.5*Math.sin(d*Math.PI)+.5),g=s.x+s.width,f=s.y+14,p=a.x,m=a.y+14,x=.35*Math.abs(p-g)+40,E=A.current,C=Math.max(.5,1.5/E),B=u.current;i.clear(),i.moveTo(g,f),i.bezierCurveTo(g+x,f,p-x,m,p,m),i.stroke({color:B,alpha:.2*h,width:6*C}),i.moveTo(g,f),i.bezierCurveTo(g+x,f,p-x,m,p,m),i.stroke({color:B,alpha:h,width:C}),c.current=requestAnimationFrame(n)};return c.current=requestAnimationFrame(n),()=>{cancelAnimationFrame(c.current),l.current?.clear()}},[a,e,t]),i.jsxDEV("pixiGraphics",{ref:l,draw:()=>{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WindowTether.tsx",lineNumber:104,columnNumber:10},void 0)};function pg(e){return"separator"===e.type?9:22}const mg=({menus:e,height:t=24,layout:r})=>{const[n,o]=ae.useState(null),s=ae.useCallback(e=>o(e),[]),a=ae.useCallback(()=>o(null),[]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",height:t,alignItems:"center",...r},eventMode:"static",children:e.map((e,r)=>{const o=n===r;return i.jsxDEV(xg,{menu:e,isOpen:o,height:t,onOpen:()=>s(r),onClose:a,onHoverOpen:()=>{null!==n&&n!==r&&s(r)}},e.label,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:50,columnNumber:11},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:43,columnNumber:5},void 0)},xg=({menu:e,isOpen:t,height:r,onOpen:n,onClose:o,onHoverOpen:s})=>{const a=ph(),[l,c]=ae.useState(!1),A=8*e.label.length+20,u=ae.useCallback(e=>{e.clear(),(t||l)&&(e.rect(0,0,A,r),e.fill({color:t?a.accent.color:a.bgHover.color,alpha:t?.25:.5}))},[t,l,A,r,a]),d=e.items.reduce((e,t)=>e+pg(t),0)+8,h=200,g=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,h,d,4),e.fill({color:a.bgSecondary.color}),e.roundRect(0,0,h,d,4),e.stroke({color:a.border.color,alpha:.8,width:1})},[h,d,a]);return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerOver:()=>{c(!0),s()},onPointerOut:()=>c(!1),onPointerUp:()=>t?o():n(),layout:{width:A,height:r,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:u,layout:{position:"absolute",width:A,height:r}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:109,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:e.label,style:{fontFamily:lh,fontSize:11,fill:16777215},tint:t?a.accent.color:a.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:110,columnNumber:7},void 0),t&&i.jsxDEV("pixiContainer",{zIndex:300,eventMode:"static",onPointerDown:e=>e.stopPropagation(),layout:{position:"absolute",top:r,left:0,width:h,height:d,flexDirection:"column",padding:4},children:[i.jsxDEV("pixiGraphics",{draw:g,layout:{position:"absolute",width:h,height:d}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:123,columnNumber:11},void 0),e.items.map((e,t)=>i.jsxDEV(Eg,{item:e,width:192,onClose:o},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:125,columnNumber:13},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:117,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:101,columnNumber:5},void 0)},Eg=({item:e,width:t,onClose:r})=>{const n=ph(),[o,s]=ae.useState(!1),a=pg(e);if("separator"===e.type)return i.jsxDEV("pixiContainer",{layout:{width:t,height:a,justifyContent:"center"},children:i.jsxDEV("pixiGraphics",{draw:e=>{e.clear(),e.rect(0,a/2-.5,t,1),e.fill({color:n.border.color,alpha:.5})},layout:{width:t,height:a}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:147,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:146,columnNumber:7},void 0);const l="action"===e.type&&e.disabled,c=ae.useCallback(e=>{e.clear(),o&&!l&&(e.roundRect(0,0,t,a,2),e.fill({color:n.accent.color,alpha:.2}))},[o,l,t,a,n]),A=ae.useCallback(()=>{l||("action"===e.type?(e.onClick(),r()):"checkbox"===e.type&&e.onChange(!e.checked))},[l,e,r]),u="checkbox"===e.type?`${e.checked?"":" "}  ${e.label}`:e.label,d="action"===e.type?e.shortcut??"":"";return i.jsxDEV("pixiContainer",{eventMode:l?"none":"static",cursor:l?"default":"pointer",onPointerOver:()=>s(!0),onPointerOut:()=>s(!1),onPointerUp:A,alpha:l?.4:1,layout:{width:t,height:a,alignItems:"center",paddingLeft:8},children:[i.jsxDEV("pixiGraphics",{draw:c,layout:{position:"absolute",width:t,height:a}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:188,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:u,style:{fontFamily:lh,fontSize:11,fill:16777215},tint:n.text.color,layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:189,columnNumber:7},void 0),d&&i.jsxDEV("pixiBitmapText",{text:d,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:n.textMuted.color,layout:{width:80,marginRight:8}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:196,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiMenuBar.tsx",lineNumber:179,columnNumber:5},void 0)},Cg={},Bg={xs:9,sm:11,md:13,lg:16,xl:20},bg={"mono-regular":sh,"mono-medium":sh,"mono-semibold":ah,"mono-bold":ah,"sans-regular":lh,"sans-medium":ch,"sans-semibold":Ah,"sans-bold":uh},Ig=({text:e,size:t="md",weight:r="regular",font:n="mono",color:o="text",customColor:s,customAlpha:a,layout:l})=>{const c=ph(),A=ae.useMemo(()=>{if("custom"===o&&void 0!==s)return s;const e={text:c.text,textSecondary:c.textSecondary,textMuted:c.textMuted,accent:c.accent,error:c.error,success:c.success,warning:c.warning};return e[o]?.color??c.text.color},[o,s,c]),u=ae.useMemo(()=>"custom"===o&&void 0!==a?a:1,[o,a]),d=bg[`${n}-${r}`]||sh,h=Bg[t];return i.jsxDEV("pixiBitmapText",{text:e,style:{fontFamily:d,fontSize:h,fill:16777215},tint:A,alpha:u,layout:l??Cg},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiLabel.tsx",lineNumber:87,columnNumber:5},void 0)},yg={sm:{knob:40,fontSize:9,stroke:3,indicatorLen:6,bodyRadius:12},md:{knob:56,fontSize:11,stroke:4,indicatorLen:8,bodyRadius:17},lg:{knob:72,fontSize:12,stroke:5,indicatorLen:10,bodyRadius:22}},vg=-135,wg=e=>(e-90)*Math.PI/180,Qg=(e,t,i,r)=>({x:e+i*Math.cos(wg(r)),y:t+i*Math.sin(wg(r))}),Dg=e=>isNaN(e)||null==e?"0":e>=1e3?`${(e/1e3).toFixed(1)}k`:e<10?e.toFixed(1):Math.round(e).toString();function Ng(e,t,i,r,n,o,s,a,l){if(Math.abs(o-n)<.5)return;const c=wg(n),A=wg(o);e.moveTo(t+r*Math.cos(c),i+r*Math.sin(c)),e.arc(t,i,r,c,A,o<n),e.stroke({color:s,alpha:a,width:l,cap:"round"})}const kg=({value:e,min:t,max:r,onChange:n,label:o,unit:s="",size:a="md",color:l,disabled:c=!1,logarithmic:A=!1,displayValue:u,isActive:d=!1,defaultValue:h,bipolar:g=!1,formatValue:f,step:p,title:m,layout:E})=>{const C=ph(),B=ae.useRef(null),b=ae.useRef(null),[I,y]=ae.useState(!1),[,v]=ae.useState(!1),w=ae.useRef(0),Q=ae.useRef(0),D=ae.useRef(0),N=ae.useRef(0),k=ae.useRef(n),S=ae.useRef(e),P=ae.useRef(null),M=ae.useRef(null);ae.useEffect(()=>{k.current=n},[n]),ae.useEffect(()=>{S.current=e},[e]);const V=yg[a],_=l??C.accent.color,L=V.knob/2,R=V.knob/2,U=(V.knob-2*V.stroke)/2,T=C.bgTertiary.color,O=C.border.color,F=ae.useCallback(e=>{const i=Math.max(t,Math.min(r,e));return A?((e,t,i)=>{const r=Math.log(t),n=Math.log(i);return(Math.log(e)-r)/(n-r)})(i,t,r):(i-t)/(r-t)},[t,r,A]),G=void 0!==u?u:e,j=F(G),H=isNaN(j)||!isFinite(j)?vg:vg+270*j,X=f||Dg,z=ae.useCallback(e=>{if(e.clear(),Ng(e,L,R,U,vg,135,C.bgActive.color,.6,V.stroke),g){const t=0;if(.5!==j){Ng(e,L,R,U,j>.5?t:H,j>.5?H:t,_,1,V.stroke)}}else Ng(e,L,R,U,vg,H,_,1,V.stroke);const t=V.bodyRadius;e.circle(L,R,t),e.fill({color:T}),e.circle(L,R,t),e.stroke({color:O,width:1});const i=Qg(L,R,U-2,H),r=Qg(L,R,U-2-V.indicatorLen,H);e.moveTo(r.x,r.y),e.lineTo(i.x,i.y),e.stroke({color:_,width:2,cap:"round"}),d&&(e.circle(L,R,U+2),e.stroke({color:_,alpha:.2,width:2}))},[L,R,U,V,_,C,H,j,g,d,T,O]),J=ae.useCallback(e=>{let i;i=A?((e,t,i)=>{const r=Math.log(t),n=Math.log(i);return Math.exp(r+e*(n-r))})(e,t,r):t+e*(r-t),i=void 0!==p&&p>0?Math.round(i/p)*p:Math.round(100*i)/100,i=Math.max(t,Math.min(r,i)),M.current=i,P.current||(P.current=requestAnimationFrame(()=>{null!==M.current&&(k.current(M.current),M.current=null),P.current=null}))},[t,r,A,p]),W=ae.useCallback(e=>{if(c)return;e.stopPropagation();const i=Date.now();if(i-N.current<300){const e=h??(g?(r+t)/2:t);return k.current(e),void(N.current=0)}N.current=i,y(!0),w.current=e.globalY,Q.current=e.globalX,D.current=F(S.current);const n=B.current?.stage;if(!n)return;const o=e=>{const t=w.current-e.globalY,i=e.globalX-Q.current;let r=(Math.abs(i)>Math.abs(t)?i:t)/150;e.shiftKey&&(r*=.1);const n=Math.max(0,Math.min(1,D.current+r));J(n)},s=()=>{y(!1),n.off("pointermove",o),n.off("pointerup",s),n.off("pointerupoutside",s)};n.on("pointermove",o),n.on("pointerup",s),n.on("pointerupoutside",s)},[c,F,J,h,g,t,r]),K=ae.useCallback(e=>{if(e.stopPropagation(),c)return;const i=h??(g?(r+t)/2:t);k.current(i)},[c,h,g,t,r]),Y=ae.useCallback(()=>{c||v(!0)},[c]),q=ae.useCallback(()=>v(!1),[]);ae.useEffect(()=>()=>{P.current&&cancelAnimationFrame(P.current)},[]);const Z=ae.useMemo(()=>{if(!I)return null;const e=B.current;if(!e)return null;const t=e.getBounds();return x.createPortal(i.jsxDEV("div",{style:{position:"fixed",left:t.x+V.knob/2,top:t.y-8,transform:"translate(-50%, -100%)",padding:"2px 6px",background:"rgba(0,0,0,0.9)",border:`1px solid #${_.toString(16).padStart(6,"0")}`,borderRadius:4,fontFamily:"JetBrains Mono, monospace",fontSize:11,fontWeight:700,color:"#fff",whiteSpace:"nowrap",pointerEvents:"none",zIndex:9999},children:[X(G),s]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiKnob.tsx",lineNumber:321,columnNumber:7},void 0),document.body)},[I,G,s,X,_,V.knob]),$=V.knob+20,ee=o?14:0,te=V.knob+ee+14+4;return i.jsxDEV(i.Fragment,{children:[i.jsxDEV("pixiContainer",{ref:B,eventMode:c?"none":"static",cursor:c?"not-allowed":I?"ns-resize":"pointer",onPointerDown:W,onRightClick:K,onPointerOver:Y,onPointerOut:q,alpha:c?.4:1,layout:{width:$,height:te,flexDirection:"column",alignItems:"center",gap:2,...E},accessible:!0,accessibleType:"input",accessibleTitle:m||o||"Knob",children:[o&&i.jsxDEV("pixiBitmapText",{text:o,style:{fontFamily:sh,fontSize:V.fontSize-1,fill:16777215},tint:C.textMuted.color,layout:{height:ee}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiKnob.tsx",lineNumber:377,columnNumber:11},void 0),i.jsxDEV("pixiGraphics",{ref:b,draw:z,layout:{width:V.knob,height:V.knob}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiKnob.tsx",lineNumber:390,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:`${X(G)}${s}`,style:{fontFamily:sh,fontSize:V.fontSize,fill:16777215},tint:d?_:C.textSecondary.color,layout:{height:14}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiKnob.tsx",lineNumber:397,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiKnob.tsx",lineNumber:354,columnNumber:7},void 0),Z]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiKnob.tsx",lineNumber:353,columnNumber:5},void 0)},Sg={sm:{width:36,height:18,thumbSize:12,fontSize:9},md:{width:44,height:22,thumbSize:16,fontSize:10}},Pg=({label:e,value:t,onChange:r,color:n,size:o="md",disabled:s=!1,title:a,layout:l})=>{const c=ph(),[,A]=ae.useState(!1),u=n??c.accent.color,d=Sg[o],h=c.bgTertiary.color,g=c.border.color,f=c.textMuted.color,p=ae.useCallback(e=>{e.clear();const i=d.height/2;e.roundRect(0,0,d.width,d.height,i),e.fill({color:t?u:h,alpha:t?.8:1}),e.roundRect(0,0,d.width,d.height,i),e.stroke({color:t?u:g,width:2,alpha:t?1:.6});const r=t?d.width-d.thumbSize/2-3:d.thumbSize/2+3,n=d.height/2;e.circle(r,n,d.thumbSize/2),e.fill({color:t?16777215:f}),t&&(e.circle(r,n,d.thumbSize/2+3),e.stroke({color:u,alpha:.3,width:1}))},[t,u,h,g,f,d]),m=ae.useCallback(e=>{s||r(!t)},[s,t,r]),x=d.width+10,E=d.height+14+4;return i.jsxDEV("pixiContainer",{eventMode:s?"none":"static",cursor:s?"not-allowed":"pointer",onPointerUp:m,onPointerOver:()=>!s&&A(!0),onPointerOut:()=>A(!1),alpha:s?.4:1,layout:{width:x,height:E,flexDirection:"column",alignItems:"center",gap:2,...l},accessible:!0,accessibleType:"button",accessibleTitle:a||`${e}: ${t?"On":"Off"}`,children:[i.jsxDEV("pixiBitmapText",{text:e,style:{fontFamily:sh,fontSize:d.fontSize-1,fill:16777215},tint:c.textMuted.color,layout:{height:14}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiToggle.tsx",lineNumber:102,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:p,layout:{width:d.width,height:d.height}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiToggle.tsx",lineNumber:114,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiToggle.tsx",lineNumber:82,columnNumber:5},void 0)},Mg=({value:e,min:t,max:r,onChange:n,orientation:o="vertical",length:s=120,thickness:a=6,handleWidth:l=24,handleHeight:c=10,detent:A,detentRange:u=.02,defaultValue:d,step:h,showValue:g=!1,label:f,formatValue:p,disabled:m=!1,color:x,layout:E})=>{const C=ph(),B=ae.useRef(null),[b,I]=ae.useState(!1),y=ae.useRef(0),v=ae.useRef(n);ae.useEffect(()=>{v.current=n},[n]);const w=x??C.accent.color,Q="vertical"===o,D=(Math.max(t,Math.min(r,e))-t)/(r-t),N=ae.useCallback(e=>{let i=Math.max(t,Math.min(r,e));return h&&(i=Math.round(i/h)*h),void 0!==A&&Math.abs(i-A)<u*(r-t)&&(i=A),i},[t,r,h,A,u]),k=ae.useCallback(e=>{if(e.clear(),Q){const i=(l-a)/2;e.roundRect(i,0,a,s,a/2),e.fill({color:C.bgActive.color}),e.roundRect(i,0,a,s,a/2),e.stroke({color:C.border.color,alpha:.5,width:1});const n=D*s;if(n>1&&(e.roundRect(i,s-n,a,n,a/2),e.fill({color:w,alpha:.4})),void 0!==A){const n=s-(A-t)/(r-t)*s;e.moveTo(i-2,n),e.lineTo(i+a+2,n),e.stroke({color:C.textMuted.color,alpha:.5,width:1})}const o=s-D*s-c/2;e.roundRect(0,o,l,c,3),e.fill({color:b?w:C.bgHover.color}),e.roundRect(0,o,l,c,3),e.stroke({color:b?w:C.borderLight.color,width:1}),e.moveTo(4,o+c/2),e.lineTo(l-4,o+c/2),e.stroke({color:w,alpha:.6,width:1})}else{const i=(c-a)/2;e.roundRect(0,i,s,a,a/2),e.fill({color:C.bgActive.color}),e.roundRect(0,i,s,a,a/2),e.stroke({color:C.border.color,alpha:.5,width:1});const n=D*s;if(n>1&&(e.roundRect(0,i,n,a,a/2),e.fill({color:w,alpha:.4})),void 0!==A){const n=(A-t)/(r-t)*s;e.moveTo(n,i-2),e.lineTo(n,i+a+2),e.stroke({color:C.textMuted.color,alpha:.5,width:1})}const o=D*s-l/2;e.roundRect(o,0,l,c,3),e.fill({color:b?w:C.bgHover.color}),e.roundRect(o,0,l,c,3),e.stroke({color:b?w:C.borderLight.color,width:1}),e.moveTo(o+l/2,3),e.lineTo(o+l/2,c-3),e.stroke({color:w,alpha:.6,width:1})}},[Q,s,a,l,c,D,w,C,b,A,t,r]),S=ae.useCallback(e=>{if(m)return;e.stopPropagation();const i=Date.now();if(i-y.current<300){const e=d??A??t;return v.current(e),void(y.current=0)}y.current=i,I(!0);const n=Q?e.globalY:e.globalX,o=D,a=B.current?.stage;if(!a)return;const l=e=>{const i=Q?e.globalY:e.globalX,a=(n-i)/s;let l=Math.max(0,Math.min(1,o+(Q?a:(i-n)/s)));const c=N(t+l*(r-t));v.current(c)},c=()=>{I(!1),a.off("pointermove",l),a.off("pointerup",c),a.off("pointerupoutside",c)};a.on("pointermove",l),a.on("pointerup",c),a.on("pointerupoutside",c)},[m,Q,D,s,t,r,N,d,A]),P=Q?l:s,M=Q?s:c,V=f?14:0,_=g?14:0,L=p||(e=>Math.abs(e)<.01?"0":e.toFixed(1));return i.jsxDEV("pixiContainer",{ref:B,eventMode:m?"none":"static",cursor:m?"not-allowed":Q?"ns-resize":"ew-resize",onPointerDown:S,alpha:m?.4:1,layout:{width:P,height:M+V+_+4,flexDirection:"column",alignItems:"center",gap:2,...E},accessible:!0,accessibleType:"input",accessibleTitle:f||"Slider",children:[f&&i.jsxDEV("pixiBitmapText",{text:f,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:C.textMuted.color,layout:{height:V}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSlider.tsx",lineNumber:244,columnNumber:9},void 0),i.jsxDEV("pixiGraphics",{draw:k,layout:{width:P,height:M}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSlider.tsx",lineNumber:253,columnNumber:7},void 0),g&&i.jsxDEV("pixiBitmapText",{text:L(e),style:{fontFamily:sh,fontSize:10,fill:16777215},tint:C.textSecondary.color,layout:{height:_}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSlider.tsx",lineNumber:260,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSlider.tsx",lineNumber:224,columnNumber:5},void 0)},Vg=22,_g=30,Lg=({value:e,onChange:t,labels:r,disabled:n=!1,color:o,layout:s})=>{const a=ph(),l=o??a.accent.color,c=ae.useCallback(t=>{t.clear(),t.roundRect(0,0,90,Vg,4),t.fill({color:a.bgActive.color}),t.roundRect(0,0,90,Vg,4),t.stroke({color:a.border.color,alpha:.5,width:1});const i=e*_g;t.roundRect(i+1,1,28,20,3),t.fill({color:l,alpha:.3}),t.roundRect(i+1,1,28,20,3),t.stroke({color:l,alpha:.6,width:1}),t.moveTo(_g,4),t.lineTo(_g,18),t.stroke({color:a.border.color,alpha:.3,width:1}),t.moveTo(60,4),t.lineTo(60,18),t.stroke({color:a.border.color,alpha:.3,width:1})},[e,l,a]),A=ae.useCallback(e=>{if(n)return;const i=e.getLocalPosition(e.currentTarget).x,r=Math.min(2,Math.floor(i/_g));t(r)},[n,t]);return i.jsxDEV("pixiContainer",{eventMode:n?"none":"static",cursor:n?"not-allowed":"pointer",onPointerUp:A,alpha:n?.4:1,layout:{width:90,height:24,...s},children:[i.jsxDEV("pixiGraphics",{draw:c,layout:{width:90,height:Vg}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSwitch3Way.tsx",lineNumber:81,columnNumber:7},void 0),r.map((t,r)=>i.jsxDEV("pixiBitmapText",{text:t,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:e===r?l:a.textMuted.color,layout:{position:"absolute",left:r*_g+15-2.5*t.length,top:6.5}},r,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSwitch3Way.tsx",lineNumber:85,columnNumber:9},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSwitch3Way.tsx",lineNumber:70,columnNumber:5},void 0)},Rg=({isOpen:e,onClose:t,title:r,width:n=400,height:o=300,children:s})=>{const a=ph(),{app:l}=Wu();if(ae.useEffect(()=>{if(!e)return;const i=e=>{"Escape"===e.key&&(e.preventDefault(),t())};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,t]),!e)return null;const c=l?.screen?.width??1920,A=l?.screen?.height??1080,u=ae.useCallback(e=>{t()},[t]),d=ae.useCallback(e=>{e.stopPropagation()},[]);return i.jsxDEV("pixiContainer",{layout:{position:"absolute",width:"100%",height:"100%"},children:[i.jsxDEV("pixiGraphics",{draw:e=>{e.clear(),e.rect(0,0,c,A),e.fill({color:0,alpha:.6})},eventMode:"static",onPointerUp:u,layout:{position:"absolute",width:c,height:A}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:91,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",onPointerDown:d,layout:{position:"absolute",left:(c-n)/2,top:(A-o)/2,width:n,height:o,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:e=>{e.clear(),e.roundRect(0,0,n,o,8),e.fill({color:a.bgSecondary.color}),e.roundRect(0,0,n,o,8),e.stroke({color:a.border.color,alpha:.6,width:1})},layout:{position:"absolute",width:n,height:o}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:112,columnNumber:9},void 0),r&&i.jsxDEV("pixiContainer",{layout:{width:n,height:36,flexDirection:"row",alignItems:"center",paddingLeft:12},children:[i.jsxDEV("pixiGraphics",{draw:e=>{e.clear(),e.roundRect(0,0,n,36,0),e.fill({color:a.bgTertiary.color}),e.moveTo(0,35),e.lineTo(n,35),e.stroke({color:a.border.color,alpha:.4,width:1})},layout:{position:"absolute",width:n,height:36}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:128,columnNumber:13},void 0),i.jsxDEV("pixiBitmapText",{text:r,style:{fontFamily:Ah,fontSize:13,fill:16777215},tint:a.text.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:132,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:119,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:n,padding:12,flexDirection:"column"},children:s},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:99,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:89,columnNumber:5},void 0)},Ug=({title:e,width:t=400,onClose:r})=>{const n=ph();return i.jsxDEV("pixiContainer",{layout:{width:t,height:36,flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingLeft:12,paddingRight:12},children:[i.jsxDEV("pixiBitmapText",{text:e,style:{fontFamily:Ah,fontSize:13,fill:16777215},tint:n.text.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:184,columnNumber:7},void 0),r&&i.jsxDEV("pixiBitmapText",{text:"X",style:{fontFamily:sh,fontSize:13,fill:16777215},tint:n.textMuted.color,eventMode:"static",cursor:"pointer",onPointerUp:r,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:191,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:173,columnNumber:5},void 0)},Tg=({width:e=400,children:t})=>{const r=ph();return i.jsxDEV("pixiContainer",{layout:{width:e,height:44,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingRight:12,gap:8},children:[i.jsxDEV("pixiGraphics",{draw:t=>{t.clear(),t.moveTo(0,0),t.lineTo(e,0),t.stroke({color:r.border.color,alpha:.4,width:1}),t.rect(0,1,e,43),t.fill({color:r.bgTertiary.color})},layout:{position:"absolute",width:e,height:44}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:239,columnNumber:7},void 0),t]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiModal.tsx",lineNumber:228,columnNumber:5},void 0)},Og=({width:e,height:t,contentHeight:r=t,contentWidth:n=e,direction:o="vertical",showScrollbar:s=!0,children:a,layout:l})=>{const c=ph(),[A,u]=ae.useState(0),[d,h]=ae.useState(0),g=ae.useRef(null),f=Math.max(0,r-t),p=Math.max(0,n-e),m="horizontal"!==o&&f>0,x="vertical"!==o&&p>0,E=ae.useCallback(e=>{e.stopPropagation(),m&&u(t=>Math.max(0,Math.min(f,t+e.deltaY))),x&&h(t=>Math.max(0,Math.min(p,t+e.deltaX)))},[m,x,f,p]);ae.useEffect(()=>{g.current&&(g.current.y=-A,g.current.x=-d)},[A,d]);const C=ae.useCallback(i=>{if(i.clear(),m&&s){const n=t-4,o=Math.max(20,t/r*n),s=2+A/f*(n-o);i.roundRect(e-6-2,2,6,n,3),i.fill({color:c.bgActive.color,alpha:.3}),i.roundRect(e-6-2,s,6,o,3),i.fill({color:c.textMuted.color,alpha:.4})}if(x&&s){const r=e-4,o=Math.max(20,e/n*r),s=2+d/p*(r-o);i.roundRect(2,t-6-2,r,6,3),i.fill({color:c.bgActive.color,alpha:.3}),i.roundRect(s,t-6-2,o,6,3),i.fill({color:c.textMuted.color,alpha:.4})}},[e,t,r,n,A,d,f,p,m,x,s,c]),B=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:16777215})},[e,t]);return i.jsxDEV("pixiContainer",{eventMode:"static",onWheel:E,layout:{width:e,height:t,overflow:"hidden",...l},children:[i.jsxDEV("pixiGraphics",{draw:B,layout:{position:"absolute"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiScrollView.tsx",lineNumber:119,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{ref:g,children:a},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiScrollView.tsx",lineNumber:122,columnNumber:7},void 0),s&&(m||x)&&i.jsxDEV("pixiGraphics",{draw:C,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiScrollView.tsx",lineNumber:128,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiScrollView.tsx",lineNumber:108,columnNumber:5},void 0)},Fg=18,Gg=24,jg=({value:e,min:t,max:r,step:n=1,onChange:o,label:s,width:a=44,formatValue:l,disabled:c=!1,showButtons:A=!0,layout:u})=>{const d=ph(),h=ae.useRef(o);ae.useEffect(()=>{h.current=o},[o]);const g=ae.useRef(e);ae.useEffect(()=>{g.current=e},[e]);const f=ae.useRef(null),p=ae.useRef(null),m=ae.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null),p.current&&(clearInterval(p.current),p.current=null)},[]);ae.useEffect(()=>m,[m]);const x=ae.useCallback(()=>{if(c)return;const e=Math.min(r,g.current+n);g.current=e,h.current(e)},[r,n,c]),E=ae.useCallback(()=>{if(c)return;const e=Math.max(t,g.current-n);g.current=e,h.current(e)},[t,n,c]),C=ae.useCallback(e=>{m(),e(),f.current=setTimeout(()=>{p.current=setInterval(e,80)},300)},[m]),B=l?l(e):String(e),b=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,a,Gg,4),e.fill({color:d.bg.color}),e.roundRect(0,0,a,Gg,4),e.stroke({color:d.border.color,alpha:.6,width:1})},[a,d]),I=ae.useCallback((e,t,i)=>{e.clear(),e.roundRect(0,0,Fg,9,2),e.fill({color:i?d.bgHover.color:d.bgTertiary.color}),e.roundRect(0,0,Fg,9,2),e.stroke({color:d.border.color,alpha:.4,width:1});t?(e.moveTo(6,6),e.lineTo(9,3),e.lineTo(12,6)):(e.moveTo(6,3),e.lineTo(9,6),e.lineTo(12,3)),e.stroke({color:i?d.accent.color:d.textMuted.color,width:1})},[d]),y=a+(A?22:0),v=s?14:0;return i.jsxDEV("pixiContainer",{alpha:c?.4:1,layout:{width:y+(s?70:0),height:Gg+v,flexDirection:"row",alignItems:"center",gap:4,...u},children:[s&&i.jsxDEV("pixiBitmapText",{text:s,style:{fontFamily:ah,fontSize:10,fill:16777215},tint:d.textMuted.color,layout:{width:70}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:139,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:a,height:Gg,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:b,layout:{position:"absolute",width:a,height:Gg}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:149,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:B,style:{fontFamily:ah,fontSize:12,fill:16777215},tint:d.accent.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:148,columnNumber:7},void 0),A&&i.jsxDEV("pixiContainer",{layout:{width:Fg,height:Gg,flexDirection:"column",gap:1},children:[i.jsxDEV("pixiGraphics",{draw:e=>I(e,!0,!1),eventMode:c?"none":"static",cursor:"pointer",onPointerDown:()=>C(x),onPointerUp:m,onPointerUpOutside:m,layout:{width:Fg,height:9}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:162,columnNumber:11},void 0),i.jsxDEV("pixiGraphics",{draw:e=>I(e,!1,!1),eventMode:c?"none":"static",cursor:"pointer",onPointerDown:()=>C(E),onPointerUp:m,onPointerUpOutside:m,layout:{width:Fg,height:9}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:172,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:160,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiNumericInput.tsx",lineNumber:126,columnNumber:5},void 0)},Hg=({options:e,onSelect:t,onClose:r,width:n,visible:o=!0,maxItems:s=12,itemHeight:a=22,layout:l})=>{const c=ph(),[A,u]=ae.useState(null),d=Math.min(e.length,s)*a+8;ae.useEffect(()=>{if(!o)return;const e=()=>r();return document.addEventListener("pointerdown",e,{capture:!0}),()=>document.removeEventListener("pointerdown",e,!0)},[r,o]);const h=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,n,d,4),e.fill({color:c.bgSecondary.color}),e.roundRect(0,0,n,d,4),e.stroke({color:c.border.color,alpha:.8,width:1})},[n,d,c]);return i.jsxDEV("pixiContainer",{alpha:o?1:0,renderable:o,zIndex:200,layout:{position:"absolute",width:n,height:d,flexDirection:"column",padding:4,gap:0,...l},eventMode:o?"static":"none",onPointerDown:e=>e.stopPropagation(),children:[i.jsxDEV("pixiGraphics",{draw:h,layout:{position:"absolute",width:n,height:d}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:83,columnNumber:7},void 0),e.map((e,o)=>{const s="__group__"===e.value;return i.jsxDEV("pixiContainer",{eventMode:s||e.disabled?"none":"static",cursor:s||e.disabled?"default":"pointer",onPointerOver:()=>!s&&!e.disabled&&u(o),onPointerOut:()=>u(null),onPointerUp:()=>{s||e.disabled||(t(e.value),r())},layout:{width:n-8,height:a,alignItems:"center",paddingLeft:s?4:8},children:[i.jsxDEV("pixiGraphics",{draw:e=>{e.clear(),A===o&&(e.rect(0,0,n-8,a),e.fill({color:c.accent.color,alpha:.2}))},layout:{position:"absolute",width:n-8,height:a}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:99,columnNumber:13},void 0),i.jsxDEV("pixiBitmapText",{text:e.label,style:{fontFamily:lh,fontSize:11,fill:16777215},tint:s||e.disabled?c.textMuted.color:c.text.color,alpha:s?.7:e.disabled?.4:1,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:108,columnNumber:13},void 0)]},`${e.value}-${o}`,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:90,columnNumber:11},void 0)})]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:64,columnNumber:5},void 0)},Xg=({options:e,value:t,onChange:r,width:n=120,height:o=24,placeholder:s="Select...",disabled:a=!1,layout:l})=>{const c=ph(),[A,u]=ae.useState(!1),[d,h]=ae.useState(!1),g=e.find(e=>e.value===t)?.label??s,f=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,n,o,3),e.fill({color:A||d?c.bgHover.color:c.bgTertiary.color}),e.roundRect(0,0,n,o,3),e.stroke({color:A?c.accent.color:c.border.color,alpha:A?.7:.6,width:1})},[n,o,A,d,c]);return i.jsxDEV("pixiContainer",{eventMode:a?"none":"static",cursor:a?"default":"pointer",onPointerOver:()=>h(!0),onPointerOut:()=>h(!1),onPointerUp:()=>u(e=>!e),alpha:a?.4:1,layout:{width:n,height:o,...l},children:[i.jsxDEV("pixiGraphics",{draw:f,layout:{position:"absolute",width:n,height:o}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:167,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:g,style:{fontFamily:lh,fontSize:11,fill:16777215},tint:c.textSecondary.color,layout:{position:"absolute",left:6,top:(o-11)/2}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:168,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"",style:{fontFamily:lh,fontSize:10,fill:16777215},tint:c.textMuted.color,layout:{position:"absolute",left:n-14,top:(o-10)/2}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:174,columnNumber:7},void 0),i.jsxDEV(Hg,{visible:A,options:e,onSelect:r,onClose:()=>u(!1),width:Math.max(n,160),layout:{position:"absolute",top:o+2}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:180,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiSelect.tsx",lineNumber:158,columnNumber:5},void 0)},zg=({value:e,onChange:t,onSubmit:r,onCancel:n,placeholder:o="",width:s=120,height:a=24,fontSize:l=12,font:c="mono",numeric:A=!1,min:u,max:d,disabled:h=!1,layout:g})=>{const f=ph(),[p,m]=ae.useState(!1),[x,E]=ae.useState(0),[C,B]=ae.useState(0),[b,I]=ae.useState(0),[y,v]=ae.useState(!0),w=ae.useRef(e),Q=ae.useRef(x),D=ae.useRef(C),N=ae.useRef(b),k=ae.useRef(t),S=ae.useRef(r),P=ae.useRef(n);ae.useEffect(()=>{w.current=e},[e]),ae.useEffect(()=>{Q.current=x},[x]),ae.useEffect(()=>{D.current=C},[C]),ae.useEffect(()=>{N.current=b},[b]),ae.useEffect(()=>{k.current=t},[t]),ae.useEffect(()=>{S.current=r},[r]),ae.useEffect(()=>{P.current=n},[n]),ae.useEffect(()=>{if(!p)return void v(!0);const e=setInterval(()=>v(e=>!e),530);return()=>clearInterval(e)},[p]),ae.useEffect(()=>{if(!p)return;const e=()=>m(!1);return document.addEventListener("pointerdown",e,!0),()=>document.removeEventListener("pointerdown",e,!0)},[p]),ae.useEffect(()=>{if(!p)return;const e=e=>{e.stopPropagation();const t=w.current,i=Q.current,r=D.current,n=N.current,o=r!==n;if("Enter"===e.key)return e.preventDefault(),S.current?.(t),void m(!1);if("Escape"===e.key)return e.preventDefault(),P.current?.(),void m(!1);if("ArrowLeft"!==e.key)if("ArrowRight"!==e.key){if("Home"===e.key)return e.preventDefault(),E(0),B(0),void I(0);if("End"===e.key)return e.preventDefault(),E(t.length),B(t.length),void I(t.length);if("Backspace"===e.key){let s,a;if(e.preventDefault(),o){const e=Math.min(r,n),i=Math.max(r,n);s=t.slice(0,e)+t.slice(i),a=e}else{if(!(i>0))return;s=t.slice(0,i-1)+t.slice(i),a=i-1}return k.current(s),E(a),B(a),void I(a)}if("Delete"===e.key){let s,a;if(e.preventDefault(),o){const e=Math.min(r,n),i=Math.max(r,n);s=t.slice(0,e)+t.slice(i),a=e}else{if(!(i<t.length))return;s=t.slice(0,i)+t.slice(i+1),a=i}return k.current(s),E(a),B(a),void I(a)}if((e.ctrlKey||e.metaKey)&&"a"===e.key)return e.preventDefault(),B(0),I(t.length),void E(t.length);if(!e.ctrlKey&&!e.metaKey||"c"!==e.key){if((e.ctrlKey||e.metaKey)&&"v"===e.key)return e.preventDefault(),void navigator.clipboard.readText().then(e=>{const t=w.current,i=D.current,r=N.current,n=Math.min(i,r),o=Math.max(i,r),s=t.slice(0,n)+e+t.slice(o),a=n+e.length;k.current(s),E(a),B(a),I(a)}).catch(()=>{});if(1===e.key.length&&!e.ctrlKey&&!e.metaKey){e.preventDefault();const s=o?Math.min(r,n):i,a=o?Math.max(r,n):i,l=e.key;if(A&&!/^[\d.\-]$/.test(l))return;const c=t.slice(0,s)+l+t.slice(a),h=s+l.length;if(A&&void 0!==u&&void 0!==d){const e=parseFloat(c);if(!isNaN(e)&&(e<u||e>d))return}k.current(c),E(h),B(h),I(h)}}else if(o){const e=Math.min(r,n),i=Math.max(r,n);navigator.clipboard.writeText(t.slice(e,i)).catch(()=>{})}}else if(e.preventDefault(),e.shiftKey)I(Math.min(t.length,i+1));else{const e=o?Math.max(r,n):Math.min(t.length,i+1);E(e),B(e),I(e)}else if(e.preventDefault(),e.shiftKey)I(Math.max(0,i-1));else{const e=o?Math.min(r,n):Math.max(0,i-1);E(e),B(e),I(e)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[p,A,u,d]);const M=l*("mono"===c?.6:.55),V=ae.useCallback(t=>{if(h)return;t.stopPropagation(),m(!0);const i=t.globalX-6,r=Math.max(0,Math.min(e.length,Math.round(i/M)));E(r),B(r),I(r),v(!0)},[h,e.length,M]),_=e||(p?"":o),L=!e&&!p,R=6+x*M,U=Math.min(C,b),T=Math.max(C,b),O=6+U*M,F=(T-U)*M,G=C!==b,j=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,s,a,3),e.fill({color:p?f.bg.color:f.bgSecondary.color}),e.roundRect(0,0,s,a,3),e.stroke({color:p?f.accent.color:f.border.color,alpha:p?.8:.6,width:p?1.5:1})},[s,a,f,p]),H=ae.useCallback(e=>{e.clear(),G&&(e.rect(O,2,F,a-4),e.fill({color:f.accent.color,alpha:.3}))},[O,F,a,G,f]),X=ae.useCallback(e=>{e.clear(),p&&y&&!G&&(e.rect(R,3,1,a-6),e.fill({color:f.accent.color}))},[p,y,R,a,G,f]),z="mono"===c?sh:lh;return i.jsxDEV("pixiContainer",{eventMode:h?"none":"static",cursor:h?"default":"text",onPointerDown:V,alpha:h?.4:1,layout:{width:s,height:a,...g},children:[i.jsxDEV("pixiGraphics",{draw:j,layout:{position:"absolute",width:s,height:a}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/input/PixiPureTextInput.tsx",lineNumber:280,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:H,layout:{position:"absolute",width:s,height:a}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/input/PixiPureTextInput.tsx",lineNumber:281,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:_,style:{fontFamily:z,fontSize:l,fill:16777215},tint:L?f.textMuted.color:f.text.color,alpha:L?.5:1,layout:{position:"absolute",left:6,top:(a-l)/2}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/input/PixiPureTextInput.tsx",lineNumber:282,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:X,layout:{position:"absolute",width:s,height:a}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/input/PixiPureTextInput.tsx",lineNumber:289,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/input/PixiPureTextInput.tsx",lineNumber:273,columnNumber:5},void 0)},Jg=["waveform","spectrum","vectorscope","channels","stereo","freqbars","levels","particles"],Wg={waveform:"WAVE",spectrum:"SPECTRUM",vectorscope:"SCOPE",channels:"CH-OSC",stereo:"STEREO",freqbars:"BARS",levels:"LEVELS",particles:"PARTICLES"},Kg=.02,Yg={},qg={width:0,height:0},Zg={position:"absolute",right:4,bottom:2},$g={position:"absolute",width:0,height:0},ef=({width:e=160,height:t=64})=>{const r=ph(),[n,o]=ae.useState("waveform"),s=ae.useRef(null),a=ae.useRef(new Float32Array(64)),l=ae.useRef([]),c=p(e=>e.isPlaying),A=ae.useCallback(()=>{o(e=>{const t=Jg.indexOf(e);return Jg[(t+1)%Jg.length]})},[]);ae.useEffect(()=>{if(!c||!s.current)return;try{E().enableAnalysers()}catch{}let i;const o=a.current,A=()=>{const a=s.current;if(a){a.clear(),tf(a,e,t,r);try{const i=E();switch(n){case"waveform":!function(e,t,i,r,n){if(!t||0===t.length)return;const o=r/2,s=4,a=i-2*s,l=t.length/a;e.moveTo(s,o),e.lineTo(i-s,o),e.stroke({color:n.border.color,alpha:.2,width:1}),e.moveTo(s,o+t[0]*(r/2-4));for(let c=1;c<a;c++){const i=o+(t[Math.floor(c*l)]??0)*(r/2-4);e.lineTo(s+c,i)}e.stroke({color:n.accent.color,alpha:.9,width:1.5}),e.moveTo(s,o+t[0]*(r/2-4));for(let c=1;c<a;c++){const i=o+(t[Math.floor(c*l)]??0)*(r/2-4);e.lineTo(s+c,i)}e.stroke({color:n.accent.color,alpha:.2,width:4})}(a,i.getWaveform(),e,t,r);break;case"spectrum":!function(e,t,i,r,n,o){if(!t||0===t.length)return;const s=48,a=4,l=4,c=r-2*l,A=(i-2*a)/s,u=Math.floor(t.length/s);for(let d=0;d<s;d++){let i=0;for(let e=0;e<u;e++)i+=t[d*u+e]??-100;const s=i/u,h=Math.max(0,Math.min(1,(s+100)/100)),g=h*c;if(h>o[d]?o[d]=h:o[d]=Math.max(0,o[d]-Kg),g>.5){const t=a+d*A,i=r-l-g,o=.4+.6*h,s=h>.8?n.warning.color:n.accent.color;e.rect(t,i,A-1,g),e.fill({color:s,alpha:o})}const f=r-l-o[d]*c;o[d]>.02&&(e.rect(a+d*A,f,A-1,1),e.fill({color:n.accentSecondary.color,alpha:.8}))}}(a,i.getFFT(),e,t,r,o);break;case"vectorscope":!function(e,t,i,r,n){if(!t||t.length<2)return;const o=i/2,s=r/2,a=Math.min(i,r)/2-6;e.moveTo(o,s-a),e.lineTo(o,s+a),e.stroke({color:n.border.color,alpha:.15,width:1}),e.moveTo(o-a,s),e.lineTo(o+a,s),e.stroke({color:n.border.color,alpha:.15,width:1}),e.circle(o,s,a),e.stroke({color:n.border.color,alpha:.1,width:1});const l=Math.min(512,Math.floor(t.length/2)),c=Math.max(1,Math.floor(t.length/l/2));for(let A=0;A<l-1;A++){const i=A*c*2,r=t[i]??0,l=t[i+1]??0,u=o+(r-l)*a*.7,d=s-(r+l)*a*.35,h=.3+.7*(Math.sqrt((u-o)**2+(d-s)**2)/a);e.circle(u,d,1),e.fill({color:n.accent.color,alpha:Math.min(1,h)})}}(a,i.getWaveform(),e,t,r);break;case"channels":!function(e,t,i,r,n){if(!t||0===t.length)return;const o=4,s=2,a=(i-6)/s,l=(r-6)/2,c=Math.floor(t.length/o);for(let A=0;A<o;A++){const i=3+A%s*a,r=3+Math.floor(A/s)*l,o=r+l/2;e.rect(i,r,a-1,l-1),e.stroke({color:n.border.color,alpha:.15,width:.5});const u=A*c,d=c/(a-4);e.moveTo(i+2,o+(t[u]??0)*(l/2-2));for(let n=1;n<a-4;n++){const r=t[u+Math.floor(n*d)]??0;e.lineTo(i+2+n,o+r*(l/2-2))}e.stroke({color:n.accent.color,alpha:.8,width:1})}}(a,i.getWaveform(),e,t,r);break;case"stereo":!function(e,t,i,r,n){if(!t||t.length<2)return;const o=i/2,s=r/2,a=Math.min(i,r)/2-4;e.circle(o,s,a),e.stroke({color:n.border.color,alpha:.15,width:.5}),e.moveTo(o,s-a),e.lineTo(o,s+a),e.stroke({color:n.border.color,alpha:.1,width:.5}),e.moveTo(o-a,s),e.lineTo(o+a,s),e.stroke({color:n.border.color,alpha:.1,width:.5});const l=Math.min(256,Math.floor(t.length/2)),c=Math.max(1,Math.floor(t.length/l/2));for(let A=0;A<l;A++){const i=A*c*2,r=t[i]??0,n=t[i+1]??0,l=o+.5*(r-n)*a*1.2,u=s-.5*(r+n)*a*.6;e.circle(l,u,.8),e.fill({color:11032055,alpha:.5})}}(a,i.getWaveform(),e,t,r);break;case"freqbars":!function(e,t,i,r,n,o){if(!t||0===t.length)return;const s=Math.min(64,Math.floor((i-8)/2)),a=4,l=4,c=r-2*l,A=(i-2*a)/s,u=Math.floor(t.length/s);for(let d=0;d<s;d++){let i=0;for(let e=0;e<u;e++)i+=t[d*u+e]??-100;const s=i/u,h=Math.max(0,Math.min(1,(s+100)/100)),g=h*c;if(d<o.length&&(h>o[d]?o[d]=h:o[d]=Math.max(0,o[d]-Kg)),g>.5){const t=a+d*A,i=h>.8?n.warning.color:n.accent.color;e.rect(t,r-l-g,A-1,g),e.fill({color:i,alpha:.5+.5*h})}d<o.length&&o[d]>.02&&(e.rect(a+d*A,r-l-o[d]*c,A-1,1),e.fill({color:n.accentSecondary.color,alpha:.7}))}}(a,i.getFFT(),e,t,r,o);break;case"levels":!function(e,t,i,r,n){if(!t||0===t.length)return;const o=4,s=4,a=3,l=i-2*s,c=Math.max(4,(r-2*a)/o-2),A=Math.floor(t.length/o);for(let u=0;u<o;u++){const i=a+u*(c+2);let r=0;const o=u*A;for(let e=0;e<A;e++){const i=t[o+e]??0;r+=i*i}const d=Math.sqrt(r/A),h=Math.min(1,3*d);e.rect(s,i,l,c),e.fill({color:n.bgSecondary.color});const g=h*l,f=h>.8?n.error.color:h>.6?n.warning.color:n.success.color;e.rect(s,i,g,c),e.fill({color:f,alpha:.7})}}(a,i.getWaveform(),e,t,r);break;case"particles":!function(e,t,i,r,n,o){if(0===o.length)for(let A=0;A<80;A++)o.push({x:Math.random()*i,y:Math.random()*r,vx:2*(Math.random()-.5),vy:2*(Math.random()-.5)});let s=0;if(t&&t.length>0){for(let e=0;e<Math.min(256,t.length);e++)s+=Math.abs(t[e]??0);s/=Math.min(256,t.length)}const a=i/2,l=r/2,c=8*s;for(const A of o){const t=a-A.x,o=l-A.y,u=Math.sqrt(t*t+o*o)+1;A.vx+=t/u*.002+(Math.random()-.5)*c,A.vy+=o/u*.002+(Math.random()-.5)*c,A.vx*=.97,A.vy*=.97,A.x+=A.vx,A.y+=A.vy,A.x<0&&(A.x=i),A.x>i&&(A.x=0),A.y<0&&(A.y=r),A.y>r&&(A.y=0);const d=.3+Math.min(.7,.5*Math.sqrt(A.vx*A.vx+A.vy*A.vy));e.circle(A.x,A.y,1+2*s),e.fill({color:n.accent.color,alpha:d})}}(a,i.getWaveform(),e,t,r,l.current)}}catch{}i=requestAnimationFrame(A)}};return i=requestAnimationFrame(A),()=>cancelAnimationFrame(i)},[c,n,e,t,r]);const u=ae.useMemo(()=>({width:e,height:t,justifyContent:"center",alignItems:"center"}),[e,t]),d=ae.useMemo(()=>({position:"absolute",width:e,height:t}),[e,t]),h=ae.useCallback(i=>{i.clear(),tf(i,e,t,r)},[e,t,r]);return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:A,layout:u,children:[i.jsxDEV("pixiGraphics",{ref:s,draw:c?()=>{}:h,layout:d},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiVisualizer.tsx",lineNumber:146,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:Wg[n],style:{fontFamily:sh,fontSize:8,fill:16777215},tint:r.textMuted.color,layout:c?qg:Yg,alpha:c?0:1},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiVisualizer.tsx",lineNumber:153,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:Wg[n],style:{fontFamily:sh,fontSize:7,fill:16777215},tint:r.textMuted.color,layout:c?Zg:$g,alpha:c?.5:0},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiVisualizer.tsx",lineNumber:162,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiVisualizer.tsx",lineNumber:139,columnNumber:5},void 0)};function tf(e,t,i,r){e.roundRect(0,0,t,i,4),e.fill({color:0}),e.roundRect(0,0,t,i,4),e.stroke({color:r.border.color,alpha:.6,width:1})}const rf=28,nf=36,of={position:"absolute",width:"100%"},sf=({label:e,value:t,min:r,max:n,onChange:o,width:s=52,presets:a})=>{const l=ph();return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",alignItems:"flex-start",gap:1},children:[i.jsxDEV("pixiBitmapText",{text:e.toUpperCase(),style:{fontFamily:ah,fontSize:8,fill:16777215},tint:l.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:70,columnNumber:7},void 0),i.jsxDEV(jg,{value:t,min:r,max:n,step:1,onChange:o,width:s,presets:a},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:76,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:69,columnNumber:5},void 0)},af=({height:e=26})=>{const t=ph(),r=ae.useCallback(i=>{i.clear(),i.rect(0,0,1,e),i.fill({color:t.border.color,alpha:.4})},[e,t]);return i.jsxDEV("pixiGraphics",{draw:r,layout:{width:1,height:e,alignSelf:"center",marginLeft:2,marginRight:2}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:98,columnNumber:10},void 0)},lf=()=>{const e=ph(),{bpm:t,setBPM:r,speed:n,setSpeed:s,isPlaying:a,isLooping:c,play:A,stop:u,setIsLooping:d,grooveTemplateId:h,swing:m,jitter:x,useMpcScale:E}=p(g(e=>({bpm:e.bpm,setBPM:e.setBPM,speed:e.speed,setSpeed:e.setSpeed,isPlaying:e.isPlaying,isLooping:e.isLooping,play:e.play,stop:e.stop,setIsLooping:e.setIsLooping,grooveTemplateId:e.grooveTemplateId,swing:e.swing,jitter:e.jitter,useMpcScale:e.useMpcScale}))),{patterns:I,currentPatternIndex:y,setCurrentPattern:v,patternOrder:w,setPatternOrder:Q,currentPositionIndex:D,setCurrentPosition:N,editStep:k,setEditStep:S,duplicatePosition:P,removeFromOrder:M,resizePattern:V,updatePatternName:_,toggleRecordMode:L,recordMode:R}=f(g(e=>({patterns:e.patterns,currentPatternIndex:e.currentPatternIndex,setCurrentPattern:e.setCurrentPattern,patternOrder:e.patternOrder,setPatternOrder:e.setPatternOrder,currentPositionIndex:e.currentPositionIndex,setCurrentPosition:e.setCurrentPosition,editStep:e.editStep,setEditStep:e.setEditStep,duplicatePosition:e.duplicatePosition,removeFromOrder:e.removeFromOrder,resizePattern:e.resizePattern,updatePatternName:e.updatePatternName,toggleRecordMode:e.toggleRecordMode,recordMode:e.recordMode}))),U=o(e=>e.addTab),T=l(e=>e.modalOpen),O=l(e=>e.compactToolbar),F=l(e=>e.showPatterns),G=l(e=>e.showAutomationLanes),j=I[y],H=j?.name??"",X=j?.length??64,z=w.length,J=w[D]??y,W="straight"!==h||m!==(E?50:100)||x>0,K=C.find(e=>e.id===h)?.name??"Groove",Y=a&&!c,q=a&&c,[Z,$]=ae.useState(H),ee=ae.useRef(H);ae.useEffect(()=>{ee.current=H,$(H)},[H]);const{tap:te,tapCount:ie,isActive:re}=B(r),ne=ae.useCallback(()=>l.getState().openModal("export"),[]),oe=ae.useCallback(e=>l.getState().openModal("help",{initialTab:e??"shortcuts"}),[]),se=ae.useCallback(()=>{const e=l.getState();"masterFx"===e.modalOpen?e.closeModal():e.openModal("masterFx")},[]),le=ae.useCallback(()=>{const e=l.getState();"instrumentFx"===e.modalOpen?e.closeModal():e.openModal("instrumentFx")},[]),ce=ae.useCallback(()=>l.getState().openModal("instruments"),[]),Ae=ae.useCallback(()=>l.getState().openModal("patternOrder"),[]),ue=ae.useCallback(()=>l.getState().openModal("drumpads"),[]),de=ae.useCallback(()=>l.getState().openModal("settings"),[]),he=ae.useCallback(()=>l.getState().openModal("grooveSettings"),[]),ge=ae.useCallback(()=>l.getState().openModal("revisions"),[]),fe=[{label:"File",items:[{type:"action",label:"Export...",shortcut:"E",onClick:(pe={onShowExport:ne,onShowHelp:oe,onShowMasterFX:se,onShowInstrumentFX:le,onShowInstruments:ce,onShowPatternOrder:Ae,onShowDrumpads:ue,showMasterFX:"masterFx"===T,showInstrumentFX:"instrumentFx"===T}).onShowExport},{type:"separator"},{type:"action",label:"Open Module...",onClick:()=>{}}]},{label:"Module",items:[{type:"action",label:"Pattern Order",shortcut:"O",onClick:pe.onShowPatternOrder},{type:"action",label:"Instruments",shortcut:"I",onClick:pe.onShowInstruments},{type:"action",label:"Drum Pads",shortcut:"D",onClick:pe.onShowDrumpads},{type:"separator"},{type:"checkbox",label:"Master FX",checked:pe.showMasterFX,onChange:()=>pe.onShowMasterFX()},{type:"checkbox",label:"Instrument FX",checked:pe.showInstrumentFX,onChange:()=>pe.onShowInstrumentFX()}]},{label:"Help",items:[{type:"action",label:"Chip Reference",onClick:()=>pe.onShowHelp("chip-effects")},{type:"action",label:"Keyboard Shortcuts",shortcut:"?",onClick:()=>pe.onShowHelp("shortcuts")}]}];var pe;const me=ae.useCallback(async()=>{Y?u():(d(!1),await A().catch(()=>{}))},[Y,u,d,A]),xe=ae.useCallback(async()=>{q?u():(a&&u(),d(!0),await A().catch(()=>{}))},[q,a,u,d,A]),Ee=ae.useCallback(()=>{u()},[u]),Ce=ae.useCallback(e=>N(e),[N]),Be=ae.useCallback(()=>P(D),[P,D]),be=ae.useCallback(()=>{w.length>1&&M(D)},[w.length,M,D]),Ie=ae.useCallback(e=>{const t=[...w];t[D]=e,Q(t),v(e)},[w,D,Q,v]),ye=ae.useCallback(e=>{const t=w.length;if(e>t){const i=[...w];for(let r=t;r<e;r++)i.push(w[w.length-1]??0);Q(i)}else e<t&&e>=1&&(Q(w.slice(0,e)),D>=e&&N(e-1))},[w,D,Q,N]),ve=ae.useCallback(e=>{e>=1&&e<=256&&V(y,e)},[V,y]),we=ae.useCallback(e=>$(e),[]),Qe=ae.useCallback(e=>_(y,e),[_,y]),De=ae.useCallback(()=>$(ee.current),[]),Ne=ae.useCallback(()=>l.getState().toggleCompactToolbar(),[]),ke=ae.useCallback(()=>l.getState().togglePatterns(),[]),Se=ae.useCallback(()=>l.getState().toggleAutomationLanes(),[]),[Pe,Me]=ae.useState(!!document.fullscreenElement);ae.useEffect(()=>{const e=()=>Me(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);const Ve=ae.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch{}},[]),_e=ae.useCallback(t=>{t.clear(),t.rect(0,0,4e3,rf),t.fill({color:e.bgSecondary.color}),t.rect(0,27,4e3,1),t.fill({color:e.border.color,alpha:.5})},[e]),Le=ae.useCallback(t=>{t.clear(),t.rect(0,0,4e3,nf),t.fill({color:e.bgTertiary.color}),t.rect(0,35,4e3,1),t.fill({color:e.border.color,alpha:.4})},[e]),Re=ae.useCallback(t=>{t.clear(),t.rect(0,0,4e3,nf),t.fill({color:e.bg.color}),t.rect(0,35,4e3,1),t.fill({color:e.border.color,alpha:.4})},[e]),Ue=ae.useCallback(t=>{t.clear(),t.rect(0,0,4e3,32),t.fill({color:e.bgSecondary.color}),t.rect(0,31,4e3,1),t.fill({color:e.border.color,alpha:.4})},[e]);return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:132,flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:"100%",height:rf,flexDirection:"row",alignItems:"center",paddingLeft:4},children:[i.jsxDEV("pixiGraphics",{draw:_e,layout:{...of,height:rf}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:324,columnNumber:9},void 0),i.jsxDEV(mg,{menus:fe,height:rf},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:325,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:315,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:"100%",height:72,flexDirection:"row"},children:[i.jsxDEV("pixiContainer",{layout:{flex:1,flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:"100%",height:nf,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:8,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:Le,layout:{...of,height:nf}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:351,columnNumber:13},void 0),i.jsxDEV(sf,{label:"Pos",value:D,min:0,max:Math.max(0,z-1),onChange:Ce,width:44},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:354,columnNumber:13},void 0),i.jsxDEV(bh,{label:re?"Tap"+(ie>0?` (${ie})`:""):"Tap",variant:re?"ft2":"ghost",color:re?"green":"default",size:"sm",onClick:te},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:357,columnNumber:13},void 0),i.jsxDEV(bh,{label:"Ins",variant:"ghost",size:"sm",onClick:Be},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:364,columnNumber:13},void 0),i.jsxDEV(bh,{label:"Del",variant:"ghost",size:"sm",onClick:be},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:365,columnNumber:13},void 0),i.jsxDEV(af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:367,columnNumber:13},void 0),i.jsxDEV(sf,{label:"BPM",value:t,min:32,max:255,onChange:r,width:48},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:370,columnNumber:13},void 0),i.jsxDEV(af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:372,columnNumber:13},void 0),i.jsxDEV(sf,{label:"Pattern",value:J,min:0,max:Math.max(0,I.length-1),onChange:Ie,width:48},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:375,columnNumber:13},void 0),i.jsxDEV(af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:377,columnNumber:13},void 0),i.jsxDEV(sf,{label:"Edit Step",value:k,min:0,max:16,onChange:S,width:48},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:380,columnNumber:13},void 0),i.jsxDEV(af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:382,columnNumber:13},void 0),i.jsxDEV(bh,{label:Y?"Stop Song":"Play Song",variant:"ft2",color:Y?"red":"green",size:"sm",active:Y,onClick:me},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:385,columnNumber:13},void 0),i.jsxDEV(bh,{label:q?"Stop Pat.":"Play Pat.",variant:"ft2",color:q?"red":"default",size:"sm",active:q,onClick:xe},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:393,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:403,columnNumber:13},void 0),i.jsxDEV(bh,{label:O?"Expand":"Compact",variant:"ghost",size:"sm",onClick:Ne},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:404,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:340,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{layout:{width:"100%",height:nf,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:8,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:Re,layout:{...of,height:nf}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:424,columnNumber:13},void 0),i.jsxDEV(sf,{label:"Song Len",value:z,min:1,max:256,onChange:ye,width:48},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:427,columnNumber:13},void 0),i.jsxDEV(af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:436,columnNumber:13},void 0),i.jsxDEV(sf,{label:"Speed",value:n,min:1,max:31,onChange:s,width:44},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:439,columnNumber:13},void 0),i.jsxDEV(bh,{label:K,variant:W?"ft2":"ghost",color:W?"blue":"default",size:"sm",active:W,onClick:he},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:440,columnNumber:13},void 0),i.jsxDEV(af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:449,columnNumber:13},void 0),i.jsxDEV(sf,{label:"Length",value:X,min:1,max:256,onChange:ve,width:48,presets:[{label:"16 rows",value:16},{label:"32 rows",value:32},{label:"48 rows",value:48},{label:"64 rows (default)",value:64},{label:"96 rows",value:96},{label:"128 rows",value:128},{label:"192 rows",value:192},{label:"256 rows (max)",value:256}]},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:452,columnNumber:13},void 0),i.jsxDEV(af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:471,columnNumber:13},void 0),i.jsxDEV("pixiBitmapText",{text:"PAT",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:e.textMuted.color,layout:{alignSelf:"center"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:474,columnNumber:13},void 0),i.jsxDEV(zg,{value:Z,onChange:we,onSubmit:Qe,onCancel:De,placeholder:"Pattern name...",width:110,height:22,fontSize:10,font:"mono"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:480,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:493,columnNumber:13},void 0),i.jsxDEV(bh,{label:"REC",variant:R?"ft2":"ghost",color:R?"red":"default",size:"sm",active:R,onClick:L},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:494,columnNumber:13},void 0),i.jsxDEV(bh,{label:"Stop",variant:"ft2",color:"default",size:"sm",onClick:Ee},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:502,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:413,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:337,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:O?0:220,height:72,overflow:"hidden"},children:!O&&i.jsxDEV(i.Fragment,{children:[i.jsxDEV(ef,{width:220,height:72},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:523,columnNumber:15},void 0),i.jsxDEV("pixiContainer",{layout:{position:"absolute",top:4,right:4,flexDirection:"row",gap:4},children:[i.jsxDEV(bh,{label:"PAT",variant:F?"ft2":"ghost",color:F?"blue":"default",size:"sm",active:F,onClick:ke},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:534,columnNumber:17},void 0),i.jsxDEV(bh,{label:"AUTO",variant:G?"ft2":"ghost",color:G?"blue":"default",size:"sm",active:G,onClick:Se},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:542,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:525,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:521,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:513,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:329,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{alpha:O?0:1,renderable:!O,eventMode:O?"none":"static",layout:{width:"100%",height:32,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:8,gap:4},children:[i.jsxDEV("pixiGraphics",{draw:Ue,layout:{...of,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:571,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Load",variant:"ghost",size:"sm",onClick:()=>b.info("Use File menu to load")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:573,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Save",variant:"ghost",size:"sm",onClick:()=>b.info("Use File menu to save")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:574,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Revisions",variant:"ghost",size:"sm",onClick:ge},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:575,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Export",variant:"ghost",size:"sm",onClick:ne},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:576,columnNumber:9},void 0),i.jsxDEV(bh,{label:"New",variant:"ghost",size:"sm",onClick:()=>U()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:577,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Clear",variant:"ghost",size:"sm",onClick:()=>b.info("Use File menu to clear")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:578,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Order",variant:"ghost",size:"sm",onClick:Ae},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:579,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Instruments",variant:"ghost",size:"sm",onClick:ce},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:580,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Pads",variant:"ghost",size:"sm",onClick:ue},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:581,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Master FX",variant:"masterFx"===T?"ft2":"ghost",color:"masterFx"===T?"blue":"default",size:"sm",active:"masterFx"===T,onClick:se},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:582,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Reference",variant:"ghost",size:"sm",onClick:()=>oe("chip-effects")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:590,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Help",variant:"ghost",size:"sm",onClick:()=>oe("shortcuts")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:591,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Settings",variant:"ghost",size:"sm",onClick:de},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:592,columnNumber:9},void 0),i.jsxDEV(bh,{label:Pe?"":"",variant:Pe?"ft2":"ghost",color:Pe?"blue":"default",size:"sm",active:Pe,onClick:Ve},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:593,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:557,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiFT2Toolbar.tsx",lineNumber:307,columnNumber:5},void 0)},cf=({layout:e,children:t,zIndex:r=10,className:n,style:o,visible:s=!0,autoHeight:a=!1})=>{const l=ae.useRef(null),c=ae.useRef(null),A=ae.useRef(null),u=ae.useRef(a);u.current=a;const d=ae.useRef(s);d.current=s;const h=ae.useRef(null);ae.useEffect(()=>{const e=document.createElement("div");return n&&(e.className=n),e.style.position="fixed",e.style.zIndex=String(r),e.style.pointerEvents="auto",e.style.display="none",o&&Object.assign(e.style,o),document.body.appendChild(e),c.current=e,A.current=I.createRoot(e),()=>{A.current?.unmount(),A.current=null,e.remove(),c.current=null}},[]),ae.useEffect(()=>{A.current?.render(t)},[t]),ae.useEffect(()=>{if(!a)return;const e=c.current,t=l.current;if(!e||!t)return;const i=new ResizeObserver(e=>{for(const i of e){const e=Math.round(i.contentRect.height);if(e>0&&e!==h.current){h.current=e;const i=t.layout;i?.style&&(i.style.height=e)}}});return i.observe(e),()=>i.disconnect()},[a]),ae.useEffect(()=>{let e,t=0,i=-1,r=-1,n=-1,o=-1;const s=()=>{if(t++,t%2==0){const e=l.current,t=c.current;if(e&&t){const s=e.layout,a=s?._computedLayout;if(a&&a.width>0&&a.height>0){const s=e.toGlobal({x:0,y:0}),l=e.toGlobal({x:a.width,y:a.height}),c=Math.round(s.x),A=Math.round(s.y),h=Math.round(Math.abs(l.x-s.x)),g=Math.round(Math.abs(l.y-s.y));c===i&&A===r&&h===n&&g===o||(i=c,r=A,n=h,o=g,t.style.left=`${c}px`,t.style.top=`${A}px`,t.style.width=`${h}px`,u.current||(t.style.height=`${g}px`),d.current&&(t.style.display="")),t.style.display=d.current&&n>0?"":"none"}}}e=requestAnimationFrame(s)};return e=requestAnimationFrame(s),()=>cancelAnimationFrame(e)},[]);const g=ae.useMemo(()=>a&&null!==h.current?{...e,height:h.current}:e,[e,a]);return i.jsxDEV("pixiContainer",{ref:l,layout:g},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/components/PixiDOMOverlay.tsx",lineNumber:175,columnNumber:10},void 0)},Af=()=>{const[t,r]=ae.useState(null),n=f(e=>e.editorMode);ae.useEffect(()=>{e(()=>import("./index-zx6LJBPK.js").then(e=>e.eL),__vite__mapDeps([2,3,4,5,6,7])).then(e=>{r(()=>e.InstrumentList)})},[]);const o=ae.useCallback(()=>{l.getState().openModal("instruments")},[]);return t?i.jsxDEV(t,{variant:"ft2",showPreviewOnClick:!0,showPresetButton:!0,showSamplePackButton:!0,showEditButton:!0,onEditInstrument:o,showHivelyImport:"hively"===n},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiInstrumentPanel.tsx",lineNumber:39,columnNumber:5},void 0):null},uf=({width:e,height:t})=>i.jsxDEV(cf,{layout:{width:e,height:t},style:{overflow:"hidden"},children:i.jsxDEV("div",{style:{width:"100%",height:"100%"},children:i.jsxDEV(Af,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiInstrumentPanel.tsx",lineNumber:58,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiInstrumentPanel.tsx",lineNumber:57,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiInstrumentPanel.tsx",lineNumber:53,columnNumber:5},void 0),df=({width:e,height:t})=>{const{pattern:r,columnVisibility:n}=f(g(e=>({pattern:e.patterns[e.currentPatternIndex],columnVisibility:e.columnVisibility}))),o=r?.channels.length||4,{channelOffsets:s,channelWidths:a}=ae.useMemo(()=>{if(!r)return{channelOffsets:[],channelWidths:[]};const e=r.channels.length,t=n.flag1||n.flag2,i=n.probability,o=[],s=[];let a=40;for(let n=0;n<e;n++){const e=r.channels[n],l=e?.collapsed;if(l){const e=68;o.push(a),s.push(e),a+=e}else{const r=28+(40+28*(e?.channelMeta?.effectCols??2)+(t?24:0)+(i?20:0))+60;o.push(a),s.push(r),a+=r}}return{channelOffsets:o,channelWidths:s}},[r,n]),l=ae.useRef(null),c=ae.useRef([]),A=ae.useRef([]),u=ae.useRef(o),d=ae.useRef(e),h=ae.useRef(t),m=ae.useRef(s),x=ae.useRef(a);return ae.useEffect(()=>{u.current=o},[o]),ae.useEffect(()=>{d.current=e},[e]),ae.useEffect(()=>{h.current=t},[t]),ae.useEffect(()=>{m.current=s},[s]),ae.useEffect(()=>{x.current=a},[a]),ae.useEffect(()=>{c.current=Array.from({length:o},()=>({level:0}))},[o]),ae.useEffect(()=>{let e;const t=()=>{const i=l.current;if(!i)return void(e=requestAnimationFrame(t));i.clear(),i.rect(0,0,d.current,h.current),i.fill({color:0,alpha:0});if(!p.getState().isPlaying){for(const e of c.current)e.level=0;return void(e=requestAnimationFrame(t))}const r=u.current,n=h.current,o=m.current,s=x.current;let a,g;try{const e=E();a=e.getChannelTriggerLevels(r),g=e.getChannelTriggerGenerations(r)}catch{return void(e=requestAnimationFrame(t))}if(A.current.length<r){const e=A.current;A.current=new Array(r).fill(0);for(let t=0;t<e.length;t++)A.current[t]=e[t]}for(let e=0;e<r;e++){const t=c.current[e];if(!t)continue;if(s[e]&&s[e]<20)continue;const l=.012*e;g[e]!==A.current[e]&&a[e]>0?(t.level=a[e],A.current[e]=g[e]):(t.level*=.92-l,t.level<.01&&(t.level=0));const u=t.level>.02?25*Math.sin(.0025*performance.now()+.45*e):0;let h;if(void 0!==o[e]&&s[e]){h=o[e]-40+s[e]/2}else{const t=d.current/r;h=e*t+t/2}const f=h-14+u,p=Math.round(26*t.level),m=Math.min(p,Math.ceil(15.6));if(m>0){for(let e=0;e<m;e++){const t=n-2-8*e-4;i.rect(f,t,28,4)}i.fill({color:2278750,alpha:.9})}const x=m,E=Math.min(p,Math.ceil(26*.85));if(E>x){for(let e=x;e<E;e++){const t=n-2-8*e-4;i.rect(f,t,28,4)}i.fill({color:15381256,alpha:.9})}if(p>E){for(let e=E;e<p;e++){const t=n-2-8*e-4;i.rect(f,t,28,4)}i.fill({color:15680580,alpha:.9})}}e=requestAnimationFrame(t)};return e=requestAnimationFrame(t),()=>cancelAnimationFrame(e)},[]),i.jsxDEV("pixiGraphics",{ref:l,draw:()=>{},layout:{width:e,height:t},interactiveChildren:!1},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiChannelVUMeters.tsx",lineNumber:244,columnNumber:5},void 0)},hf=({height:e})=>{const t=ph(),{patterns:r,currentPatternIndex:n,cursor:o,selection:s}=f(g(e=>({patterns:e.patterns,currentPatternIndex:e.currentPatternIndex,cursor:e.cursor,selection:e.selection}))),{isPlaying:a,currentRow:l}=p(g(e=>({isPlaying:e.isPlaying,currentRow:e.currentRow}))),c=r[n],A=c?.length??64,u=e/A,d=Math.min(a?l:o.rowIndex,A-1),h=ae.useMemo(()=>{if(!c)return new Uint8Array(0);const e=new Uint8Array(A);for(let t=0;t<A;t++){let i=0;for(let e=0;e<c.channels.length;e++){const r=c.channels[e].rows[t];r&&(r.note>0||r.effTyp>0||r.volume>=16)&&i++}e[t]=i}return e},[c,A]),m=ae.useCallback(t=>{const i=t.getLocalPosition(t.currentTarget).y,r=Math.floor(i/e*A),n=Math.max(0,Math.min(A-1,r));f.getState().moveCursorToRow(n)},[e,A]),x=ae.useCallback(i=>{if(i.clear(),i.rect(0,0,16,e),i.fill({color:t.bg.color}),i.rect(0,0,1,e),i.fill({color:t.border.color,alpha:t.border.alpha}),!c||0===h.length)return;let r=1;for(let e=0;e<h.length;e++)h[e]>r&&(r=h[e]);for(let e=0;e<A;e++){const t=h[e];if(0===t)continue;const n=e*u,o=t/r*14,s=e%4==0?3900150:6514417;i.rect(1,n,o,Math.max(1,u-.5)),i.fill({color:s,alpha:.5})}if(s){const e=Math.min(s.startRow,s.endRow),t=Math.max(s.startRow,s.endRow);i.rect(0,e*u,16,(t-e+1)*u),i.fill({color:16436245,alpha:.2})}const n=a?2278750:15680580;i.rect(0,d*u,16,Math.max(2,u)),i.fill({color:n,alpha:.8})},[e,t,c,h,A,u,s,a,d]);return c?i.jsxDEV("pixiGraphics",{draw:x,eventMode:"static",cursor:"pointer",onPointerDown:m,layout:{width:16,height:e}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternMinimap.tsx",lineNumber:119,columnNumber:5},void 0):null},gf=20,ff=({width:e,height:t,patternId:r,patternLength:n,rowHeight:o,channelCount:s,parameter:a="cutoff",prevPatternId:l,prevPatternLength:c,nextPatternId:A,nextPatternLength:u})=>{const d=ph(),h=y(e=>e.curves),g=y(e=>e.addPoint),f=y(e=>e.removePoint),p=y(e=>e.channelLanes),[m,x]=ae.useState(null),E=ae.useRef({time:0,row:-1}),C=ae.useMemo(()=>{const e=[];for(let t=0;t<s;t++){const i=p.get(t);e.push(i?.activeParameter||a)}return e},[s,p,a]),B=ae.useMemo(()=>{const e=[];for(let t=0;t<s;t++){const i=C[t],n=h.find(e=>e.patternId===r&&e.channelIndex===t&&e.parameter===i);e.push(n&&n.points.length>0?n:null)}return e},[r,s,C,h]),b=ae.useMemo(()=>l?Array.from({length:s},(e,t)=>{const i=C[t],r=h.find(e=>e.patternId===l&&e.channelIndex===t&&e.parameter===i);return r&&r.points.length>0?r:null}):[],[l,s,C,h]),I=ae.useMemo(()=>A?Array.from({length:s},(e,t)=>{const i=C[t],r=h.find(e=>e.patternId===A&&e.channelIndex===t&&e.parameter===i);return r&&r.points.length>0?r:null}):[],[A,s,C,h]),w=B.some(e=>null!==e)||b.some(e=>null!==e)||I.some(e=>null!==e),Q=ae.useCallback(t=>{const i=t.getLocalPosition(t.currentTarget),r=e/s;for(let e=0;e<s;e++){const t=(e+1)*r-gf-4;if(i.x>=t&&i.x<=t+gf){const r=B[e];if(!r)continue;const s=Math.floor(i.y/o);if(s<0||s>=n)continue;const a=Math.max(0,Math.min(1,(i.x-t-1)/18)),l=Date.now();if(E.current.row===s&&l-E.current.time<300){return r.points.find(e=>e.row===s)&&f(r.id,s),void(E.current={time:0,row:-1})}return E.current={time:l,row:s},g(r.id,s,a),void x({curveId:r.id,channelIndex:e})}}},[e,s,B,o,n,g,f]),D=ae.useCallback(t=>{if(!m)return;const i=t.getLocalPosition(t.currentTarget),r=B[m.channelIndex];if(!r)return;const a=e/s,l=(m.channelIndex+1)*a-gf-4,c=Math.floor(i.y/o);if(c<0||c>=n)return;const A=Math.max(0,Math.min(1,(i.x-l-1)/18));g(r.id,c,A)},[m,B,e,s,o,n,g]),N=ae.useCallback(()=>{x(null)},[]),k=(t,i,r,n,a,l)=>{const c=e/s,A=d.accent.color;for(let e=0;e<i.length;e++){const s=i[e];if(!s)continue;const u=(e+1)*c-gf-4,d=[];for(let e=0;e<r;e++){const t=v(s.points,e,s.interpolation,s.mode);if(null!==t){const i=u+18*t+1,r=n+e*o+o/2;d.push({x:i,y:r})}}if(!(d.length<2)){t.moveTo(u+gf,n);for(let e=d.length-1;e>=0;e--)t.lineTo(d[e].x,d[e].y);t.lineTo(u+gf,n+r*o),t.closePath(),t.fill({color:A,alpha:.1*a}),t.moveTo(d[0].x,d[0].y);for(let e=1;e<d.length;e++)t.lineTo(d[e].x,d[e].y);if(t.stroke({color:A,alpha:.6*a,width:1.5}),l)for(const e of s.points){const i=u+18*e.value+1,r=n+e.row*o+o/2;t.circle(i,r,2),t.fill({color:A,alpha:.8})}}}},S=ae.useCallback(e=>{if(e.clear(),!w)return;const t=l?c||n:0;if(b.length>0&&t>0&&k(e,b,t,-t*o,.5,!1),k(e,B,n,0,1,!0),I.length>0){k(e,I,u||n,n*o,.5,!1)}},[w,B,b,I,n,c,u,l,o,e,s,d]);return w?i.jsxDEV("pixiGraphics",{draw:S,eventMode:"static",cursor:"crosshair",onPointerDown:Q,onPointerMove:D,onPointerUp:N,onPointerUpOutside:N,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiAutomationLanes.tsx",lineNumber:240,columnNumber:5},void 0):null},pf=14,mf={cutoff:2278750,resonance:15381256,envMod:440020,pan:3900150},xf=({width:e,height:t,patternLength:r,rowHeight:n,channelCount:o})=>{const s=f(e=>e.columnVisibility),a=f(e=>e.patterns),l=f(e=>e.currentPatternIndex),c=f(e=>e.setCell),[A,u]=ae.useState(!1),d=ae.useRef(null),h=a[l],g=ae.useMemo(()=>{const e=[];return s.cutoff&&e.push("cutoff"),s.resonance&&e.push("resonance"),s.envMod&&e.push("envMod"),s.pan&&e.push("pan"),e},[s]),p=ae.useCallback((t,i)=>{if(!h||0===g.length)return null;const s=e/o;for(let e=0;e<o;e++){const o=(e+1)*s;for(let s=0;s<g.length;s++){const a=o-16*(g.length-s)-4;if(t>=a&&t<=a+pf){const o=Math.floor(i/n);if(o>=0&&o<r){const i=Math.max(0,Math.min(1,(t-a-2)/10));return{channelIndex:e,parameter:g[s],row:o,value:Math.round(255*i),laneLeft:a}}}}}return null},[h,g,e,o,n,r]),m=ae.useCallback(e=>{const t=e.getLocalPosition(e.currentTarget),i=p(t.x,t.y);i&&(e.shiftKey?c(i.channelIndex,i.row,{[i.parameter]:void 0}):(u(!0),d.current={channelIndex:i.channelIndex,parameter:i.parameter},c(i.channelIndex,i.row,{[i.parameter]:i.value})))},[p,c]),x=ae.useCallback(t=>{if(!A||!d.current)return;const i=t.getLocalPosition(t.currentTarget),{channelIndex:s,parameter:a}=d.current,l=Math.floor(i.y/n);if(l<0||l>=r)return;const u=(s+1)*(e/o),h=g.indexOf(a),f=u-16*(g.length-h)-4,p=Math.max(0,Math.min(1,(i.x-f-2)/10)),m=Math.round(255*p);c(s,l,{[a]:m})},[A,n,r,e,o,g,c]),E=ae.useCallback(()=>{u(!1),d.current=null},[]),C=ae.useCallback(t=>{if(t.clear(),!h||0===g.length)return;const i=e/o;for(let e=0;e<Math.min(o,h.channels.length);e++){const r=h.channels[e];if(!r||r.collapsed)continue;const o=(e+1)*i;for(let e=0;e<g.length;e++){const i=g[e],s=mf[i]||2278750,a=o-16*(g.length-e)-4,l=[];for(let e=0;e<r.rows.length;e++){const t=r.rows[e][i];if(null!=t){const i=a+t/255*10+2,r=e*n+n/2;l.push({x:i,y:r})}}if(!(l.length<1)){if(l.length>=2){t.moveTo(l[0].x,l[0].y);for(let e=1;e<l.length;e++)t.lineTo(l[e].x,l[e].y);t.stroke({color:s,alpha:.6,width:1.5})}for(const e of l)t.rect(e.x-1.5,e.y-1.5,3,3),t.fill({color:s,alpha:.9})}}}},[h,g,e,o,n]);return h&&0!==g.length?i.jsxDEV("pixiGraphics",{draw:C,eventMode:"static",cursor:"crosshair",onPointerDown:m,onPointerMove:x,onPointerUp:E,onPointerUpOutside:E,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroLanes.tsx",lineNumber:170,columnNumber:5},void 0):null},Ef=({width:e})=>{const t=ph(),r=f(e=>e.macroSlots),n=f(e=>e.writeMacroSlot),o=f(e=>e.readMacroSlot),s=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,32),i.fill({color:t.bgTertiary.color}),i.rect(0,0,e,1),i.fill({color:t.border.color,alpha:t.border.alpha})},[e,t]),a=e=>null==e||0===e?"..":e.toString(16).padStart(2,"0").toUpperCase();return i.jsxDEV("pixiContainer",{layout:{width:e,height:32,flexDirection:"row",alignItems:"center",paddingLeft:4,gap:2},children:[i.jsxDEV("pixiGraphics",{draw:s,layout:{position:"absolute",width:e,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroSlotsPanel.tsx",lineNumber:40,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"MACRO",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:t.textMuted.color,layout:{marginRight:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroSlotsPanel.tsx",lineNumber:42,columnNumber:7},void 0),r.map((e,r)=>{const s=0===e.note&&0===e.instrument&&0===e.volume&&0===e.effTyp&&0===e.eff,l=s?`${r+1}:----`:`${r+1}:${a(e.instrument)}${a(e.volume)}`;return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:1,alignItems:"center"},children:[i.jsxDEV("pixiBitmapText",{text:l,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:s?t.textMuted.color:t.accent.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroSlotsPanel.tsx",lineNumber:58,columnNumber:13},void 0),i.jsxDEV(bh,{label:"W",variant:"ghost",size:"sm",onClick:()=>n(r)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroSlotsPanel.tsx",lineNumber:64,columnNumber:13},void 0),i.jsxDEV(bh,{label:"R",variant:"ghost",size:"sm",onClick:()=>o(r)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroSlotsPanel.tsx",lineNumber:65,columnNumber:13},void 0)]},r,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroSlotsPanel.tsx",lineNumber:57,columnNumber:11},void 0)})]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMacroSlotsPanel.tsx",lineNumber:39,columnNumber:5},void 0)},Cf=[{id:"303",label:"303"},{id:"Siren",label:"SIR"},{id:"FX",label:"FX"},{id:"Mixer",label:"MIX"}],Bf=({width:e})=>{const t=ph(),r=u(e=>e.knobBank),n=u(e=>e.setKnobBank),o=u(e=>e.isInitialized),s=u(e=>e.inputDevices),a=u(e=>e.showKnobBar),l=u(e=>e.setShowKnobBar);if(!o||0===s.length)return null;const c=d[r],A=a?56:20,h=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,A),i.fill({color:t.bgTertiary.color}),i.rect(0,0,e,1),i.fill({color:t.border.color,alpha:t.border.alpha})},[e,A,t]),g=ae.useCallback(()=>{l(!a)},[a,l]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:A,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:h,layout:{position:"absolute",width:e,height:A}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:57,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:20,flexDirection:"row",alignItems:"center",paddingLeft:8,gap:4},children:[i.jsxDEV("pixiBitmapText",{text:"MIDI",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:t.success.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:61,columnNumber:9},void 0),a&&Cf.map(e=>i.jsxDEV(bh,{label:e.label,variant:r===e.id?"ft2":"ghost",color:r===e.id?"blue":void 0,size:"sm",active:r===e.id,onClick:()=>n(e.id)},e.id,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:69,columnNumber:11},void 0)),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:80,columnNumber:9},void 0),i.jsxDEV(bh,{label:a?"HIDE":"SHOW",variant:"ghost",size:"sm",onClick:g},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:82,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:60,columnNumber:7},void 0),a&&i.jsxDEV("pixiContainer",{layout:{width:e,height:36,flexDirection:"row",paddingLeft:8,paddingRight:8,gap:4,alignItems:"center"},children:c.map((e,t)=>i.jsxDEV(bf,{assignment:e,index:t},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:94,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:92,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:56,columnNumber:5},void 0)},bf=({assignment:e,index:t})=>{const r=ph(),[n,o]=ae.useState(!1),s=ae.useCallback(e=>{e.clear(),e.rect(0,0,80,2),e.fill({color:r.accent.color,alpha:n?.5:.2}),n&&(e.roundRect(0,2,80,30,3),e.fill({color:r.accent.color,alpha:.1}))},[n,r]);return i.jsxDEV("pixiContainer",{eventMode:"static",onPointerEnter:()=>o(!0),onPointerLeave:()=>o(!1),layout:{flex:1,height:32,flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[i.jsxDEV("pixiGraphics",{draw:s,layout:{position:"absolute",width:80,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:126,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:`K${t+1} (CC ${e.cc})`,style:{fontFamily:sh,fontSize:7,fill:16777215},tint:n?r.textSecondary.color:r.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:127,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:e.label.toUpperCase().slice(0,8),style:{fontFamily:ah,fontSize:8,fill:16777215},tint:r.accent.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:133,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMIDIKnobBar.tsx",lineNumber:120,columnNumber:5},void 0)},If=[{value:"tracker",label:"Tracker"},{value:"grid",label:"Grid"},{value:"pianoroll",label:"Piano Roll"},{value:"tb303",label:"TB-303"},{value:"arrangement",label:"Arrangement"},{value:"dj",label:"DJ Mixer"},{value:"drumpad",label:"Drum Pads"},{value:"vj",label:"VJ View"}],yf=()=>{const e=ph();return i.jsxDEV("pixiGraphics",{draw:t=>{t.clear(),t.rect(0,4,1,24),t.fill({color:e.border.color,alpha:.25})},layout:{width:1,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:55,columnNumber:5},void 0)},vf=()=>{const e=f(e=>e.applySystemPreset),t=ae.useMemo(()=>{const e=Q(),t=[];for(const i of e){t.push({value:"__group__",label:i.label,disabled:!0});for(const e of i.presets)t.push({value:e.id,label:e.name.toUpperCase()})}return t},[]),r=ae.useCallback(t=>{if("__group__"===t)return;e(t);const i=D.find(e=>e.id===t);b.success(`Hardware System: ${i?.name.toUpperCase()??t}`)},[e]);return i.jsxDEV(Xg,{options:t,value:"__none__",onChange:r,width:150,height:24,placeholder:"HW SYSTEM..."},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:92,columnNumber:5},void 0)},wf=()=>{const e=f(e=>e.currentPatternIndex),t=f(e=>e.patterns),r=f(e=>e.loadPatterns),n=f(e=>e.setPatternOrder),o=p(e=>e.setBPM),s=p(e=>e.setSpeed),a=t[e],l=a?.importMetadata?.furnaceData,c=ae.useMemo(()=>l?.subsongNames||[],[l?.subsongNames]),A=ae.useMemo(()=>l?.allSubsongs||[],[l?.allSubsongs]),u=ae.useMemo(()=>c.map((e,t)=>({value:String(t),label:`${t+1}. ${e||`Subsong ${t+1}`}`})),[c]),d=ae.useCallback(e=>{const t=Number(e);if(!l)return;const i=l.currentSubsong??0;if(t!==i)if(0===t)b.success(`Switched to: ${c[0]}`),f.setState(e=>{const t=e.patterns[0];t?.importMetadata?.furnaceData&&(t.importMetadata.furnaceData.currentSubsong=0)});else{const e=A.find(e=>e.subsongIndex===t);if(!e)return void b.error(`Subsong ${t} data not found`);const i=e.patterns.map((e,i)=>{const r=Math.max(...e.map(e=>e.length)),n=e.map((e,t)=>({id:`ch-${Date.now()}-${t}`,name:`Channel ${t+1}`,rows:e.slice(0,r),muted:!1,solo:!1,collapsed:!1,volume:80,pan:0,instrumentId:null,color:null}));return{id:`pat-${Date.now()}-${i}`,name:`Subsong ${t} Pattern ${i}`,length:r,channels:n,importMetadata:a?.importMetadata}});r(i),n(e.patternOrderTable||Array.from({length:e.ordersLen||1},(e,t)=>t)),o(e.initialBPM||120),s(e.initialSpeed||6),f.setState(e=>{const i=e.patterns[0];i?.importMetadata?.furnaceData&&(i.importMetadata.furnaceData.currentSubsong=t)}),b.success(`Switched to: ${c[t]||`Subsong ${t+1}`}`)}},[l,c,A,a,r,n,o,s]),h=!!(l&&l.subsongCount&&l.subsongCount>1),g=String(l?.currentSubsong??0);return i.jsxDEV(Xg,{options:h?u:[{value:"0",label:""}],value:g,onChange:d,width:140,height:24,layout:{display:h?"flex":"none"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:189,columnNumber:5},void 0)},Qf=({viewMode:e,onViewModeChange:t,gridChannelIndex:r,onGridChannelChange:n})=>{const o=ph(),s=w(),{recordMode:a,showGhostPatterns:A,channelCount:u}=f(g(e=>({recordMode:e.recordMode,showGhostPatterns:e.showGhostPatterns,channelCount:e.patterns[e.currentPatternIndex]?.channels?.length||4}))),{grooveTemplateId:d,swing:h,jitter:m,useMpcScale:x,smoothScrolling:E}=p(g(e=>({grooveTemplateId:e.grooveTemplateId,swing:e.swing,jitter:e.jitter,useMpcScale:e.useMpcScale,smoothScrolling:e.smoothScrolling}))),C=c(e=>e.masterMuted),B=l(e=>e.statusMessage),b="straight"!==d||h!==(x?50:100)||m>0,I=ae.useMemo(()=>Array.from({length:u},(e,t)=>({value:String(t),label:`Ch ${t+1}`})),[u]),y=ae.useCallback(e=>{const i=e;"arrangement"===i||"dj"===i||"drumpad"===i||"pianoroll"===i||"vj"===i?setTimeout(()=>l.getState().setActiveView(i),0):setTimeout(()=>t(i),0)},[t]),v=ae.useCallback(e=>{setTimeout(()=>n(Number(e)),0)},[n]),Q=ae.useCallback(()=>{f.getState().toggleRecordMode()},[]),D=ae.useCallback(()=>{const e=f.getState();e.setShowGhostPatterns(!e.showGhostPatterns)},[]),N=ae.useCallback(()=>{c.getState().toggleMasterMute()},[]),k=ae.useCallback(()=>{const e=p.getState();e.setSmoothScrolling(!e.smoothScrolling)},[]),S=ae.useCallback(()=>{l.getState().openModal("grooveSettings")},[]),P=ae.useCallback(()=>{l.getState().openModal("automation")},[]),M=ae.useCallback(()=>{l.getState().openModal("drumpads")},[]),V=ae.useCallback(()=>{l.getState().openModal("settings")},[]),_=ae.useCallback(e=>{e.clear(),e.rect(0,0,4e3,32),e.fill({color:o.bgTertiary.color}),e.rect(0,31,4e3,1),e.fill({color:o.border.color,alpha:o.border.alpha})},[o]),L="high"===s.quality?o.success.color:"medium"===s.quality?o.warning.color:o.error.color;return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:32,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:8,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:_,layout:{position:"absolute",width:"100%",height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:329,columnNumber:7},void 0),i.jsxDEV(Xg,{options:If,value:e,onChange:y,width:110,height:24},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:332,columnNumber:7},void 0),i.jsxDEV(Xg,{options:I,value:String(r),onChange:v,width:64,height:24,layout:{display:"tracker"!==e?"flex":"none"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:341,columnNumber:7},void 0),i.jsxDEV(yf,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:350,columnNumber:7},void 0),i.jsxDEV(vf,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:353,columnNumber:7},void 0),i.jsxDEV(wf,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:356,columnNumber:7},void 0),i.jsxDEV(yf,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:358,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Ghosts",variant:A?"ft2":"ghost",color:A?"blue":void 0,size:"sm",active:A,onClick:D,layout:{display:"tracker"===e?"flex":"none"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:361,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Auto",variant:"ghost",size:"sm",onClick:P,layout:{display:"tracker"===e?"flex":"none"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:372,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Pads",variant:"ghost",size:"sm",onClick:M},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:381,columnNumber:7},void 0),i.jsxDEV(bh,{label:"REC",variant:a?"ft2":"ghost",color:a?"red":void 0,size:"sm",active:a,onClick:Q},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:389,columnNumber:7},void 0),i.jsxDEV(bh,{label:"...",variant:"ghost",size:"sm",onClick:V},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:399,columnNumber:7},void 0),i.jsxDEV(yf,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:406,columnNumber:7},void 0),i.jsxDEV(bh,{label:C?"Unmute":"Mute",variant:C?"ft2":"ghost",color:C?"red":void 0,size:"sm",active:C,onClick:N},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:409,columnNumber:7},void 0),i.jsxDEV(bh,{label:E?"Smooth":"Stepped",variant:E?"ft2":"ghost",color:E?"blue":void 0,size:"sm",active:E,onClick:k},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:419,columnNumber:7},void 0),i.jsxDEV(bh,{label:"GROOVE",variant:b?"ft2":"ghost",color:b?"blue":void 0,size:"sm",active:b,onClick:S},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:429,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:439,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:B?.toUpperCase()??"",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:o.accent.color,layout:{display:B?"flex":"none",marginRight:8}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:442,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:`${s.averageFps}FPS`,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:L,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:450,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiEditorControlsBar.tsx",lineNumber:318,columnNumber:5},void 0)},Df=[0,2,3,5,7,8,10];function Nf(e,t){return Math.floor(Math.random()*(t-e+1))+e}const kf=({isOpen:e,onClose:t,channelIndex:r=0})=>{const n=f(e=>e.setChannelRows),o=f(e=>e.patterns),s=f(e=>e.currentPatternIndex),[a,l]=ae.useState(50),[c,A]=ae.useState(3),[u,d]=ae.useState(30),h=ae.useCallback(()=>{const e=o[s];if(!e)return;const i=N("C0"),l=[];for(let t=0;t<e.length;t++){if(100*Math.random()>=a){l.push({note:0,instrument:0,volume:0,effTyp:0,eff:0,effTyp2:0,eff2:0});continue}const e=Nf(2,2+c),t=Nf(0,Df.length-1),r=i+Df[t]+12*e,n=k(Math.max(0,Math.min(127,r))),o=100*Math.random()<u?1:void 0;l.push({note:n,instrument:0,volume:0,effTyp:0,eff:0,effTyp2:0,eff2:0,flag1:o})}n(r,l),t()},[o,s,a,c,u,r,n,t]);return e?i.jsxDEV(Rg,{isOpen:e,onClose:t,width:300,height:320,children:[i.jsxDEV(Ug,{title:"Randomize",onClose:t},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:73,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,padding:12,flexDirection:"column",gap:16,alignItems:"center"},children:[i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:16,justifyContent:"center"},children:[i.jsxDEV(kg,{value:a,min:0,max:100,defaultValue:50,label:"DENSITY",size:"md",formatValue:e=>`${Math.round(e)}%`,onChange:l},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:77,columnNumber:11},void 0),i.jsxDEV(kg,{value:c,min:1,max:5,defaultValue:3,label:"OCTAVES",size:"md",formatValue:e=>`${Math.round(e)}`,onChange:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:87,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:76,columnNumber:9},void 0),i.jsxDEV(kg,{value:u,min:0,max:100,defaultValue:30,label:"ACCENTS",size:"md",formatValue:e=>`${Math.round(e)}%`,onChange:d},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:99,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"Generates random notes in C minor scale",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:110,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:75,columnNumber:7},void 0),i.jsxDEV(Tg,{children:[i.jsxDEV(bh,{label:"Cancel",variant:"ghost",onClick:t},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:114,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Randomize",variant:"primary",onClick:h},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:115,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:113,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiRandomizeDialog.tsx",lineNumber:72,columnNumber:5},void 0):null},Sf=({isOpen:e,onClose:t,channelIndex:r=0})=>{const n=f(e=>e.setChannelRows),o=f(e=>e.patterns),s=f(e=>e.currentPatternIndex),a=S(e=>e.instruments),l=S(e=>e.createInstrument),[c,A]=ae.useState(60),[u,d]=ae.useState(60),[h,g]=ae.useState(50),[p,m]=ae.useState(40),x=a.find(e=>"TB303"===e.synthType||"Buzz3o3"===e.synthType),E=ae.useCallback(()=>{const e=o[s];if(!e)return;let i=x?.id;i||(i=l({name:"TB-303",synthType:"TB303"}));const a={patternLength:e.length,density:c,spread:u,accentsDensity:h,slidesDensity:p,scale:"MINOR",rootNote:"C2",instrumentId:i},A=P(a);n(r,A),t()},[o,s,x,l,c,u,h,p,r,n,t]),C=ae.useCallback(()=>{A(Math.floor(60*Math.random())+40),d(Math.floor(60*Math.random())+40),g(Math.floor(60*Math.random())+20),m(Math.floor(60*Math.random())+20)},[]);return e?i.jsxDEV(Rg,{isOpen:e,onClose:t,width:340,height:380,children:[i.jsxDEV(Ug,{title:"Acid Pattern Generator",onClose:t},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:66,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,padding:12,flexDirection:"column",gap:12,alignItems:"center"},children:[i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:16,justifyContent:"center"},children:[i.jsxDEV(kg,{value:c,min:0,max:100,defaultValue:60,label:"DENSITY",size:"md",color:16737792,formatValue:e=>`${Math.round(e)}%`,onChange:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:70,columnNumber:11},void 0),i.jsxDEV(kg,{value:u,min:0,max:100,defaultValue:60,label:"SPREAD",size:"md",color:3394815,formatValue:e=>`${Math.round(e)}%`,onChange:d},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:81,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:69,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:16,justifyContent:"center"},children:[i.jsxDEV(kg,{value:h,min:0,max:100,defaultValue:50,label:"ACCENTS",size:"md",color:16711782,formatValue:e=>`${Math.round(e)}%`,onChange:g},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:95,columnNumber:11},void 0),i.jsxDEV(kg,{value:p,min:0,max:100,defaultValue:40,label:"SLIDES",size:"md",color:10053375,formatValue:e=>`${Math.round(e)}%`,onChange:m},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:106,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:94,columnNumber:9},void 0),i.jsxDEV(Ig,{text:x?`Using: ${x.name}`:"Will create new TB-303",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:119,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:68,columnNumber:7},void 0),i.jsxDEV(Tg,{children:[i.jsxDEV(bh,{label:"Random",variant:"ghost",onClick:C},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:127,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Cancel",variant:"ghost",onClick:t},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:128,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Generate",variant:"primary",onClick:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:126,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/dialogs/PixiAcidPatternDialog.tsx",lineNumber:65,columnNumber:5},void 0):null},Pf=20,Mf=({width:e,height:t,nativeData:r,currentPosition:n,onPositionChange:o,onOrderChange:s})=>{const a=ph(),l=p(e=>e.isPlaying),c=r.subsongs[r.activeSubsong],A=c?.channels.length??0,u=c?.ordersLen??0,[d,h]=ae.useState(0),[g,f]=ae.useState(0),[m,x]=ae.useState(-1),[E,C]=ae.useState(""),B=ae.useRef(0),b=ae.useRef(null),I=u*Pf,y=Math.floor((t-22)/Pf);ae.useEffect(()=>{if(l){const e=B.current,t=n*Pf;if(t<e||t>=e+y*Pf){const e=Math.max(0,t-Math.floor(y/2)*Pf);B.current=e,b.current&&(b.current.scrollTop=e)}}},[n,l,y]);const v=ae.useCallback(e=>{B.current=e.target.scrollTop},[]),w=ae.useCallback((e,t)=>{h(e),f(t),x(0),C(""),o?.(e)},[o]),Q=ae.useCallback(e=>{if(c)switch(e.key){case"ArrowUp":e.preventDefault(),h(e=>{const t=Math.max(0,e-1);return o?.(t),t});break;case"ArrowDown":e.preventDefault(),h(e=>{const t=Math.min(u-1,e+1);return o?.(t),t});break;case"ArrowLeft":e.preventDefault(),f(e=>Math.max(0,e-1));break;case"ArrowRight":e.preventDefault(),f(e=>Math.min(A-1,e+1));break;case"Escape":e.preventDefault(),x(-1),C("");break;default:if(/^[0-9a-fA-F]$/.test(e.key)&&m>=0){e.preventDefault();const t=E+e.key;if(t.length>=2){const e=parseInt(t,16);s?.(g,d,e),x(-1),C(""),h(e=>Math.min(u-1,e+1))}else C(t)}}},[c,u,A,m,E,o,s,g]),D=Math.floor(B.current/Pf),N=Math.min(u,D+y+1),k=36+48*A;return i.jsxDEV("div",{ref:b,style:{width:e,height:t,overflow:"auto",backgroundColor:`#${a.bg.color.toString(16).padStart(6,"0")}`,fontFamily:"JetBrains Mono, monospace",fontSize:11,outline:"none",userSelect:"none"},tabIndex:0,onKeyDown:Q,onScroll:v,children:[i.jsxDEV("div",{style:{display:"flex",position:"sticky",top:0,zIndex:1,backgroundColor:`#${a.bgSecondary.color.toString(16).padStart(6,"0")}`,borderBottom:`1px solid #${a.border.color.toString(16).padStart(6,"0")}`,height:22,lineHeight:"22px"},children:[i.jsxDEV("div",{style:{width:36,textAlign:"center",color:`#${a.textMuted.color.toString(16).padStart(6,"0")}`},children:"Pos"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:177,columnNumber:9},void 0),c&&Array.from({length:A},(e,t)=>i.jsxDEV("div",{style:{width:48,textAlign:"center",color:`#${a.textSecondary.color.toString(16).padStart(6,"0")}`,overflow:"hidden"},children:c.channels[t]?.name?.substring(0,5)||`CH${t}`},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:181,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:167,columnNumber:7},void 0),i.jsxDEV("div",{style:{height:I,position:"relative"},children:c&&Array.from({length:N-D},(e,t)=>{const r=D+t,o=r===n,s=r===d;return i.jsxDEV("div",{style:{display:"flex",position:"absolute",top:r*Pf,height:Pf,width:k,lineHeight:"20px",backgroundColor:o?`#${a.trackerRowCurrent.color.toString(16).padStart(6,"0")}`:s?`#${a.trackerRowCursor.color.toString(16).padStart(6,"0")}40`:r%2==0?"transparent":`#${a.trackerRowOdd.color.toString(16).padStart(6,"0")}`},children:[i.jsxDEV("div",{style:{width:36,textAlign:"center",color:`#${a.textMuted.color.toString(16).padStart(6,"0")}`},children:r.toString(16).toUpperCase().padStart(2,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:219,columnNumber:15},void 0),Array.from({length:A},(e,t)=>{const n=c.orders[t]?.[r]??0,o=s&&t===g;return i.jsxDEV("div",{onClick:()=>w(r,t),style:{width:48,textAlign:"center",cursor:"pointer",color:`#${a.cellNote.color.toString(16).padStart(6,"0")}`,backgroundColor:o?`#${a.accent.color.toString(16).padStart(6,"0")}40`:"transparent",borderLeft:`1px solid #${a.border.color.toString(16).padStart(6,"0")}20`},children:n.toString(16).toUpperCase().padStart(2,"0")},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:233,columnNumber:19},void 0)})]},r,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:200,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:193,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceOrderMatrix.tsx",lineNumber:150,columnNumber:5},void 0)},Vf=20,_f=["C-","C#","D-","D#","E-","F-","F#","G-","G#","A-","A#","B-"];function Lf(e){if(-1===e)return"---";if(253===e)return"===";if(254===e)return"REL";if(255===e)return"MRL";if(e>=0&&e<180){const t=e%12,i=Math.floor(e/12);return`${_f[t]}${i}`}return"---"}function Rf(e,t){return-1===e?"-".repeat(t):e.toString(16).toUpperCase().padStart(t,"0")}function Uf(e,t){return e<=0?Tf(t.cellEmpty.color):e>=1&&e<=3?"#00ff00":10===e||5===e||6===e||7===e||12===e?"#ff8800":8===e?"#ff00ff":15===e||9===e?"#ffff00":11===e||13===e?"#ff4444":Tf(t.cellEffect.color)}function Tf(e){return`#${e.toString(16).padStart(6,"0")}`}const Of=({width:e,height:t,nativeData:r,currentPosition:n,playbackRow:o})=>{const s=ph(),a=p(e=>e.isPlaying),l=r.subsongs[r.activeSubsong],c=l?.channels.length??0,A=l?.patLen??64,[u,d]=ae.useState(0),[h,g]=ae.useState(0),[f,m]=ae.useState("note"),x=ae.useRef(null),E=ae.useRef(0),C=Math.floor((t-24)/Vf);ae.useEffect(()=>{const e=a?o:u,t=E.current,i=e*Vf;if(i<t||i>=t+C*Vf){const e=Math.max(0,i-Math.floor(C/2)*Vf);E.current=e,x.current&&(x.current.scrollTop=e)}},[u,o,a,C]);const B=ae.useMemo(()=>l?l.channels.map(e=>68+36*e.effectCols+2):[],[l]),b=32+B.reduce((e,t)=>e+t,0),I=ae.useCallback((e,t)=>{if(!l)return null;const i=l.orders[e]?.[n];if(void 0===i)return null;const r=l.channels[e]?.patterns.get(i);return r?.rows[t]??null},[l,n]),y=ae.useCallback(e=>{switch(e.key){case"ArrowUp":e.preventDefault(),d(e=>Math.max(0,e-1));break;case"ArrowDown":e.preventDefault(),d(e=>Math.min(A-1,e+1));break;case"ArrowLeft":if(e.preventDefault(),"note"===f){if(h>0){g(e=>e-1);const e=l?.channels[h-1]?.effectCols??1;m(e-1)}}else"ins"===f?m("note"):"vol"===f?m("ins"):"number"==typeof f&&m(0===f?"vol":f-1);break;case"ArrowRight":if(e.preventDefault(),"note"===f)m("ins");else if("ins"===f)m("vol");else if("vol"===f)m(0);else if("number"==typeof f){const e=l?.channels[h]?.effectCols??1;f<e-1?m(f+1):h<c-1&&(g(e=>e+1),m("note"))}break;case"Tab":e.preventDefault(),e.shiftKey?g(e=>Math.max(0,e-1)):g(e=>Math.min(c-1,e+1)),m("note");break;case"PageUp":e.preventDefault(),d(e=>Math.max(0,e-16));break;case"PageDown":e.preventDefault(),d(e=>Math.min(A-1,e+16));break;case"Home":e.preventDefault(),d(0);break;case"End":e.preventDefault(),d(A-1)}},[f,h,c,A,l]),v=ae.useCallback(e=>{E.current=e.target.scrollTop},[]),w=Math.floor(E.current/Vf),Q=Math.min(A,w+C+2);return i.jsxDEV("div",{ref:x,style:{width:e,height:t,overflow:"auto",backgroundColor:Tf(s.bg.color),fontFamily:"JetBrains Mono, monospace",fontSize:11,outline:"none",userSelect:"none"},tabIndex:0,onKeyDown:y,onScroll:v,children:[i.jsxDEV("div",{style:{display:"flex",position:"sticky",top:0,zIndex:2,backgroundColor:Tf(s.bgSecondary.color),borderBottom:`1px solid ${Tf(s.border.color)}`,height:24,lineHeight:"24px"},children:[i.jsxDEV("div",{style:{width:32,textAlign:"center",color:Tf(s.textMuted.color)},children:"Row"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:259,columnNumber:9},void 0),l&&l.channels.map((e,t)=>i.jsxDEV("div",{style:{width:B[t],textAlign:"center",color:Tf(s.textSecondary.color),borderLeft:`1px solid ${Tf(s.border.color)}`,overflow:"hidden",whiteSpace:"nowrap"},children:[e.name||`CH ${t}`,i.jsxDEV("span",{style:{color:Tf(s.textMuted.color),marginLeft:4,fontSize:9},children:["(",e.effectCols,"fx)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:272,columnNumber:13},void 0)]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:263,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:249,columnNumber:7},void 0),i.jsxDEV("div",{style:{height:A*Vf,position:"relative"},children:Array.from({length:Q-w},(e,t)=>{const r=w+t,n=r===u,c=r%16==0,A=r%4==0;let p="transparent";return a&&r===o?p=Tf(s.trackerRowCurrent.color):n?p=`${Tf(s.trackerRowCursor.color)}30`:c?p=`${Tf(s.trackerRowHighlight.color)}40`:A?p=`${Tf(s.trackerRowHighlight.color)}20`:r%2==1&&(p=Tf(s.trackerRowOdd.color)),i.jsxDEV("div",{style:{display:"flex",position:"absolute",top:r*Vf,height:Vf,width:b,lineHeight:"20px",backgroundColor:p},children:[i.jsxDEV("div",{style:{width:32,textAlign:"center",color:Tf(c?s.text.color:s.textMuted.color)},children:r.toString(16).toUpperCase().padStart(2,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:311,columnNumber:15},void 0),l&&l.channels.map((e,t)=>{const o=I(t,r),a=e.effectCols;return i.jsxDEV("div",{style:{display:"flex",width:B[t],borderLeft:`1px solid ${Tf(s.border.color)}20`},children:[i.jsxDEV("span",{onClick:()=>{d(r),g(t),m("note")},style:{width:28,textAlign:"center",cursor:"pointer",color:o&&-1!==o.note?Tf(s.cellNote.color):Tf(s.cellEmpty.color),backgroundColor:n&&t===h&&"note"===f?`${Tf(s.accent.color)}40`:"transparent"},children:o?Lf(o.note):"---"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:336,columnNumber:21},void 0),i.jsxDEV("span",{onClick:()=>{d(r),g(t),m("ins")},style:{width:20,textAlign:"center",cursor:"pointer",color:o&&-1!==o.ins?Tf(s.cellInstrument.color):Tf(s.cellEmpty.color),backgroundColor:n&&t===h&&"ins"===f?`${Tf(s.accent.color)}40`:"transparent"},children:o?Rf(o.ins,2):"--"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:354,columnNumber:21},void 0),i.jsxDEV("span",{onClick:()=>{d(r),g(t),m("vol")},style:{width:20,textAlign:"center",cursor:"pointer",color:o&&-1!==o.vol?Tf(s.cellVolume.color):Tf(s.cellEmpty.color),backgroundColor:n&&t===h&&"vol"===f?`${Tf(s.accent.color)}40`:"transparent"},children:o?Rf(o.vol,2):"--"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:372,columnNumber:21},void 0),Array.from({length:a},(e,a)=>{const l=o?.effects[a],c=l&&(l.cmd>0||l.val>0),A=n&&t===h&&f===a;return i.jsxDEV("span",{onClick:()=>{d(r),g(t),m(a)},style:{width:36,textAlign:"center",cursor:"pointer",color:c?Uf(l.cmd,s):Tf(s.cellEmpty.color),backgroundColor:A?`${Tf(s.accent.color)}40`:"transparent"},children:c?`${Rf(l.cmd,2)}${Rf(l.val,2)}`:"----"},a,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:396,columnNumber:25},void 0)})]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:327,columnNumber:19},void 0)})]},r,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:298,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:280,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnacePatternEditor.tsx",lineNumber:232,columnNumber:5},void 0)},Ff=({width:e,height:t})=>{const r=ph(),n=f(e=>e.furnaceNative),o=f(e=>e.currentPositionIndex),s=f(e=>e.setCurrentPosition),a=f(e=>e.setFurnaceOrderEntry),l=p(e=>e.isPlaying),c=p(e=>e.currentRow),[A,u]=ae.useState(0),d=l?o:A,h=ae.useCallback(e=>{u(e),l||s(e)},[l,s]),g=ae.useCallback((e,t,i)=>{a(e,t,i)},[a]),m=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:r.bg.color})},[e,t,r]),x=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,32),t.fill({color:r.bgSecondary.color}),t.rect(0,31,e,1),t.fill({color:r.border.color,alpha:.5})},[e,r]);if(!n)return i.jsxDEV("pixiContainer",{layout:{width:e,height:t,alignItems:"center",justifyContent:"center"},children:[i.jsxDEV("pixiGraphics",{draw:m,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:73,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"No Furnace module loaded",style:{fontFamily:sh,fontSize:13,fill:16777215},tint:r.textMuted.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:77,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:72,columnNumber:7},void 0);const E=n.subsongs[n.activeSubsong],C=e-220,B=t-32,b=[`Subsong: ${E?.name||"0"}`,`Spd: ${E?.speed1}/${E?.speed2}`,`Hz: ${E?.hz?.toFixed(1)}`,`Len: ${E?.patLen}`,`Pos: ${d.toString(16).toUpperCase().padStart(2,"0")}/${(E?.ordersLen??0).toString(16).toUpperCase().padStart(2,"0")}`,`CH: ${E?.channels.length??0}`].join("  |  ");return i.jsxDEV("pixiContainer",{layout:{width:e,height:t,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:m,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:103,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:32,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:8,gap:12},children:[i.jsxDEV("pixiGraphics",{draw:x,layout:{position:"absolute",width:e,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:117,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"FURNACE",style:{fontFamily:ah,fontSize:11,fill:16777215},tint:r.accent.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:118,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:b,style:{fontFamily:sh,fontSize:11,fill:16777215},tint:r.textSecondary.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:123,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:106,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:e,height:B,flexDirection:"row"},children:[i.jsxDEV("pixiContainer",{layout:{width:220,height:B},children:i.jsxDEV(Mf,{width:220,height:B,nativeData:n,currentPosition:d,onPositionChange:h,onOrderChange:g},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:134,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:133,columnNumber:9},void 0),i.jsxDEV(Of,{width:C,height:B,nativeData:n,currentPosition:d,playbackRow:c},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:145,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:131,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/furnace/PixiFurnaceView.tsx",lineNumber:102,columnNumber:5},void 0)},Gf="#ffff88",jf="#808080";const Hf=({width:e,height:t,nativeData:r,currentPosition:n,onPositionChange:o,onFocusTrackEditor:s})=>{const a=r.channels,l=r.positions.length,[c,A]=ae.useState(0),[u,d]=ae.useState("track"),h=Math.floor(3.5),g=Math.max(0,n-h),f=Math.min(l,g+7),p=ae.useCallback(e=>{switch(e.key){case"ArrowUp":e.preventDefault(),o?.(Math.max(0,n-1));break;case"ArrowDown":e.preventDefault(),o?.(Math.min(l-1,n+1));break;case"ArrowLeft":e.preventDefault(),"transpose"===u?d("track"):c>0&&(A(e=>e-1),d("transpose"));break;case"ArrowRight":e.preventDefault(),"track"===u?d("transpose"):c<a-1&&(A(e=>e+1),d("track"));break;case"Enter":e.preventDefault(),s?.();break;case"Tab":e.preventDefault(),e.shiftKey?A(e=>Math.max(0,e-1)):A(e=>Math.min(a-1,e+1))}},[n,c,u,a,l,o,s]);return i.jsxDEV("div",{style:{width:e,height:t,overflow:"hidden",backgroundColor:"#000000",fontFamily:"JetBrains Mono, monospace",fontSize:11,outline:"none",userSelect:"none"},tabIndex:0,onKeyDown:p,children:[i.jsxDEV("div",{style:{display:"flex",height:20,lineHeight:"20px",borderBottom:"1px solid #333"},children:[i.jsxDEV("div",{style:{width:32,textAlign:"center",color:jf},children:"Pos"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:134,columnNumber:9},void 0),Array.from({length:a},(e,t)=>i.jsxDEV("div",{style:{width:80,textAlign:"center",color:jf,borderLeft:"1px solid #333"},children:["CH ",t]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:138,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:128,columnNumber:7},void 0),Array.from({length:f-g},(e,t)=>{const s=g+t,l=s===n,A=r.positions[s];return i.jsxDEV("div",{onClick:()=>o?.(s),style:{display:"flex",height:18,lineHeight:"18px",backgroundColor:l?"#780000":"transparent",cursor:"pointer"},children:[i.jsxDEV("div",{style:{width:32,textAlign:"center",color:l?Gf:jf},children:[l?">":" ",s.toString().padStart(2,"0")]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:168,columnNumber:13},void 0),A&&Array.from({length:a},(e,t)=>{const r=A.track[t]??0,n=A.transpose[t]??0,o=l&&t===c&&"track"===u,s=l&&t===c&&"transpose"===u;return i.jsxDEV("div",{style:{width:80,display:"flex",borderLeft:"1px solid #222",justifyContent:"center",gap:4},children:[i.jsxDEV("span",{style:{color:"#ffffff",backgroundColor:o?Gf+"40":"transparent",padding:"0 2px"},children:r.toString().padStart(3,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:191,columnNumber:19},void 0),i.jsxDEV("span",{style:{color:0===n?jf:n>0?"#88ff88":"#ff8888",backgroundColor:s?Gf+"40":"transparent",padding:"0 2px"},children:(a=n,0===a?"+00":a>0?`+${a.toString(16).toUpperCase().padStart(2,"0")}`:`-${Math.abs(a).toString(16).toUpperCase().padStart(2,"0")}`)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:198,columnNumber:19},void 0)]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:184,columnNumber:17},void 0);var a})]},s,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:156,columnNumber:11},void 0)})]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyPositionEditor.tsx",lineNumber:113,columnNumber:5},void 0)},Xf=20,zf=112,Jf="#ffffff",Wf="#ffff88",Kf="#808080",Yf=["C-","C#","D-","D#","E-","F-","F#","G-","G#","A-","A#","B-"];function qf(e,t){if(0===e)return"---";const i=e+t;if(i<1||i>60)return"???";const r=(i-1)%12,n=Math.floor((i-1)/12);return`${Yf[r]}${n}`}function Zf(e,t){return 0===e&&0===t?"000":`${e.toString(16).toUpperCase()}${t.toString(16).toUpperCase().padStart(2,"0")}`}const $f=({width:e,height:t,nativeData:r,currentPosition:n,onFocusPositionEditor:o})=>{const s=p(e=>e.isPlaying),a=p(e=>e.currentRow),l=r.trackLength,c=r.channels,A=r.positions[n],[u,d]=ae.useState(0),[h,g]=ae.useState(0),[f,m]=ae.useState("note"),x=ae.useRef(null),E=ae.useRef(0),C=Math.floor((t-24)/Xf);ae.useEffect(()=>{const e=s?a:u,t=E.current,i=e*Xf;if(i<t||i>=t+C*Xf){const e=Math.max(0,i-Math.floor(C/2)*Xf);E.current=e,x.current&&(x.current.scrollTop=e)}},[u,a,s,C]);const B=ae.useCallback(e=>{switch(e.key){case"ArrowUp":e.preventDefault(),d(e=>Math.max(0,e-1));break;case"ArrowDown":e.preventDefault(),d(e=>Math.min(l-1,e+1));break;case"ArrowLeft":e.preventDefault(),"fxb"===f?m("fx"):"fx"===f?m("ins"):"ins"===f?m("note"):h>0&&(g(e=>e-1),m("fxb"));break;case"ArrowRight":e.preventDefault(),"note"===f?m("ins"):"ins"===f?m("fx"):"fx"===f?m("fxb"):h<c-1&&(g(e=>e+1),m("note"));break;case"Tab":e.preventDefault(),e.shiftKey?g(e=>Math.max(0,e-1)):g(e=>Math.min(c-1,e+1)),m("note");break;case"Enter":e.preventDefault(),o?.();break;case"PageUp":e.preventDefault(),d(e=>Math.max(0,e-16));break;case"PageDown":e.preventDefault(),d(e=>Math.min(l-1,e+16));break;case"Home":e.preventDefault(),d(0);break;case"End":e.preventDefault(),d(l-1)}},[f,h,c,l,o]),b=ae.useCallback(e=>{E.current=e.target.scrollTop},[]),I=Math.floor(E.current/Xf),y=Math.min(l,I+C+2),v=28+c*zf;return i.jsxDEV("div",{ref:x,style:{width:e,height:t,overflow:"auto",backgroundColor:"#000000",fontFamily:"JetBrains Mono, monospace",fontSize:11,outline:"none",userSelect:"none"},tabIndex:0,onKeyDown:B,onScroll:b,children:[i.jsxDEV("div",{style:{display:"flex",position:"sticky",top:0,zIndex:2,backgroundColor:"#111",borderBottom:"1px solid #333",height:24,lineHeight:"24px"},children:[i.jsxDEV("div",{style:{width:28,textAlign:"center",color:Kf},children:"Row"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:211,columnNumber:9},void 0),A&&Array.from({length:c},(e,t)=>{const r=A.track[t]??0,n=A.transpose[t]??0;return i.jsxDEV("div",{style:{width:zf,textAlign:"center",color:Kf,borderLeft:"1px solid #333",overflow:"hidden",whiteSpace:"nowrap"},children:["CH",t," ",i.jsxDEV("span",{style:{color:Jf},children:["T",r.toString().padStart(3,"0")]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:227,columnNumber:22},void 0),0!==n&&i.jsxDEV("span",{style:{color:n>0?"#88ff88":"#ff8888",marginLeft:4},children:[n>0?"+":"",n]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:229,columnNumber:17},void 0)]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:219,columnNumber:13},void 0)})]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:201,columnNumber:7},void 0),i.jsxDEV("div",{style:{height:l*Xf,position:"relative"},children:Array.from({length:y-I},(e,t)=>{const n=I+t,o=n===u;let l="transparent";return s&&n===a?l="#780000":o&&(l="#1a1a00"),i.jsxDEV("div",{style:{display:"flex",position:"absolute",top:n*Xf,height:Xf,width:v,lineHeight:"20px",backgroundColor:l},children:[i.jsxDEV("div",{style:{width:28,textAlign:"center",color:n%16==0?Jf:Kf},children:n.toString(16).toUpperCase().padStart(2,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:263,columnNumber:15},void 0),A&&Array.from({length:c},(e,t)=>{const s=A.track[t]??0,a=A.transpose[t]??0,l=r.tracks[s],c=l?.steps[n];if(!c)return i.jsxDEV("div",{style:{width:zf,textAlign:"center",color:Kf,borderLeft:"1px solid #222"},children:"--- -- 000 000"},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:280,columnNumber:21},void 0);const u=o&&t===h&&"note"===f,p=o&&t===h&&"ins"===f,x=o&&t===h&&"fx"===f,E=o&&t===h&&"fxb"===f;return i.jsxDEV("div",{style:{display:"flex",width:zf,borderLeft:"1px solid #222",justifyContent:"center",gap:2},children:[i.jsxDEV("span",{onClick:()=>{d(n),g(t),m("note")},style:{width:28,textAlign:"center",cursor:"pointer",color:c.note>0?"#ffffff":Kf,backgroundColor:u?Wf+"30":"transparent"},children:qf(c.note,a)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:305,columnNumber:21},void 0),i.jsxDEV("span",{onClick:()=>{d(n),g(t),m("ins")},style:{width:20,textAlign:"center",cursor:"pointer",color:c.instrument>0?"#aaffaa":Kf,backgroundColor:p?Wf+"30":"transparent"},children:c.instrument>0?(C=c.instrument,B=2,0===C&&B<=2?"-".repeat(B):C.toString(16).toUpperCase().padStart(B,"0")):"--"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:319,columnNumber:21},void 0),i.jsxDEV("span",{onClick:()=>{d(n),g(t),m("fx")},style:{width:28,textAlign:"center",cursor:"pointer",color:c.fx>0||c.fxParam>0?"#ffaa55":Kf,backgroundColor:x?Wf+"30":"transparent"},children:Zf(c.fx,c.fxParam)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:333,columnNumber:21},void 0),i.jsxDEV("span",{onClick:()=>{d(n),g(t),m("fxb")},style:{width:28,textAlign:"center",cursor:"pointer",color:c.fxb>0||c.fxbParam>0?"#55aaff":Kf,backgroundColor:E?Wf+"30":"transparent"},children:Zf(c.fxb,c.fxbParam)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:347,columnNumber:21},void 0)]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:297,columnNumber:19},void 0);var C,B})]},n,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:250,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:239,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyTrackEditor.tsx",lineNumber:184,columnNumber:5},void 0)},ep=32,tp=160,ip=16777096,rp=5592405,np=({width:e,height:t})=>{const r=ph(),n=f(e=>e.hivelyNative),o=f(e=>e.currentPositionIndex),s=f(e=>e.setCurrentPosition),a=p(e=>e.isPlaying),[l,c]=ae.useState(0),[A,u]=ae.useState("track"),d=a?o:l,h=ae.useCallback(e=>{const t=M().getSong();if(!t)return;const i=V(t,{format:e}),r=URL.createObjectURL(i.data),n=document.createElement("a");n.href=r,n.download=i.filename,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),i.warnings.length},[]),g=ae.useCallback(e=>{c(e),a||s(e)},[a,s]),m=ae.useCallback(()=>{u("track")},[]),x=ae.useCallback(()=>{u("position")},[]),E=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:0})},[e,t]),C=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,ep),t.fill({color:1118481}),t.rect(0,31,e,1),t.fill({color:3355443})},[e]),B=ae.useCallback(t=>{t.clear(),t.rect(0,158,e,2),t.fill({color:"position"===A?ip:3355443})},[e,A]);if(!n)return i.jsxDEV("pixiContainer",{layout:{width:e,height:t,alignItems:"center",justifyContent:"center"},children:[i.jsxDEV("pixiGraphics",{draw:E,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:108,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"No HivelyTracker module loaded",style:{fontFamily:sh,fontSize:13,fill:16777215},tint:r.textMuted.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:109,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:107,columnNumber:7},void 0);const b=n.channels<=4?"AHX":"HVL",I=t-ep-tp,y=[`Tempo: ${n.tempo}`,`Speed: ${n.speedMultiplier}x`,`Tracks: ${n.tracks.length}`,`Positions: ${n.positions.length}`,`CH: ${n.channels}`,`Pos: ${d.toString().padStart(3,"0")}/${n.positions.length.toString().padStart(3,"0")}`].join("  |  ");return i.jsxDEV("pixiContainer",{layout:{width:e,height:t,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:E,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:132,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:ep,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:8,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:C,layout:{position:"absolute",width:e,height:ep}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:146,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:b,style:{fontFamily:ah,fontSize:11,fill:16777215},tint:ip},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:149,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"|",style:{fontFamily:sh,fontSize:11,fill:16777215},tint:rp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:155,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:y,style:{fontFamily:sh,fontSize:11,fill:16777215},tint:r.textSecondary.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:162,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,height:ep}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:169,columnNumber:9},void 0),i.jsxDEV(bh,{label:"HVL",variant:"ft2",size:"sm",color:"green",onClick:()=>h("hvl")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:172,columnNumber:9},void 0),i.jsxDEV(bh,{label:"AHX",variant:"ft2",size:"sm",color:"green",onClick:()=>h("ahx")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:179,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"|",style:{fontFamily:sh,fontSize:11,fill:16777215},tint:rp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:187,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:x,layout:{height:ep,alignItems:"center"},children:i.jsxDEV("pixiBitmapText",{text:"[POS]",style:{fontFamily:sh,fontSize:11,fill:16777215},tint:"position"===A?ip:r.textMuted.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:200,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:194,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:m,layout:{height:ep,alignItems:"center"},children:i.jsxDEV("pixiBitmapText",{text:"[TRK]",style:{fontFamily:sh,fontSize:11,fill:16777215},tint:"track"===A?ip:r.textMuted.color},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:213,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:207,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:135,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:tp},children:[i.jsxDEV(Hf,{width:e,height:tp,nativeData:n,currentPosition:d,onPositionChange:g,onFocusTrackEditor:m},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:223,columnNumber:9},void 0),i.jsxDEV("pixiGraphics",{draw:B,layout:{position:"absolute",width:e,height:tp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:231,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:222,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:e,height:I},children:i.jsxDEV($f,{width:e,height:I,nativeData:n,currentPosition:d,onFocusPositionEditor:x},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:239,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:238,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/hively/PixiHivelyView.tsx",lineNumber:131,columnNumber:5},void 0)},op=24,sp=16498468,ap=[{label:"+16",pitch:16,major:!0},{label:"",pitch:12,major:!1},{label:"+8",pitch:8,major:!0},{label:"",pitch:6,major:!1},{label:"+4",pitch:4,major:!0},{label:"",pitch:2,major:!1},{label:"0",pitch:0,major:!0},{label:"",pitch:-2,major:!1},{label:"-4",pitch:-4,major:!0},{label:"",pitch:-6,major:!1},{label:"-8",pitch:-8,major:!0},{label:"",pitch:-12,major:!1},{label:"-16",pitch:-16,major:!0}];const lp=({width:e,height:t})=>{const r=ph(),n=p(e=>e.globalPitch),o=p(e=>e.setGlobalPitch),[s,a]=ae.useState(n),[l,c]=ae.useState(!1),A=ae.useRef(s),u=ae.useRef(l);ae.useEffect(()=>{A.current=s},[s]),ae.useEffect(()=>{u.current=l},[l]),ae.useEffect(()=>{l||a(n)},[n,l]);const d=ae.useRef(null),h=ae.useRef(0),g=ae.useCallback(e=>{const t=(i=e,r=-16,n=16,Math.max(r,Math.min(n,i)));var i,r,n;a(t),o(t),_().setGlobalPitchOffset(t)},[o]),f=ae.useCallback(()=>{g(0)},[g]),{scaleW:m,housingW:x}={scaleW:14,housingW:e-14};const E=t-26,C=26+function(e,t){return 4+(16-e)/32*(t-op-8)}(s,E),B=Math.abs(s)<.05,b=s>0?`+${s.toFixed(1)}`:s.toFixed(1),I=ae.useCallback(e=>{e.clear();const t=E-op-8;for(const i of ap){const n=30+(16-i.pitch)/32*t+12,o=0===i.pitch,s=o?sp:r.textMuted.color,a=o?.5:.3,l=i.major?6:4;e.rect(m-l,n-.5,l,1),e.fill({color:s,alpha:a})}},[E,m,r]),y=ae.useCallback(e=>{e.clear();const t=m+x/2-1.5;e.rect(t,30,3,E-8),e.fill({color:0,alpha:.75})},[m,x,E]),v=ae.useCallback(e=>{e.clear();const t=m+2,i=x-4,n=C,o=l?2760720:1973019,s=l?sp:r.border.color,a=l?.5:1;e.roundRect(t,n,i,op,2),e.fill({color:o}),e.roundRect(t,n,i,op,2),e.stroke({color:s,alpha:a,width:1});const c=l?.15:.08;e.rect(t+1,n+1,i-2,1),e.fill({color:l?sp:16777215,alpha:c});const A=l?sp:16777215,u=l?.4:.12,d=l?.6:.18,h=l?.4:.12,g=t+4,f=i-8;e.rect(g,n+5,f,1),e.fill({color:A,alpha:u}),e.rect(g,n+12-.5,f,1),e.fill({color:A,alpha:d}),e.rect(g,n+op-5-1,f,1),e.fill({color:A,alpha:h})},[C,l,m,x,r]),w=ae.useCallback(e=>{if(e.stopPropagation(),2===e.button)return void f();const t=Date.now();if(t-h.current<300)return f(),void(h.current=0);h.current=t,c(!0);const i=e.globalY,r=A.current,n=E-op-8,o=d.current?.stage;if(!o)return;const s=e=>{const t=e.shiftKey,o=e.globalY-i,s=function(e,t,i,r){return e-t/i*32*(r?.1:1)}(r,o,n,t);g(s)},a=()=>{c(!1),o.off("pointermove",s),o.off("pointerup",a),o.off("pointerupoutside",a)};o.on("pointermove",s),o.on("pointerup",a),o.on("pointerupoutside",a)},[E,g,f]);return i.jsxDEV("pixiContainer",{ref:d,eventMode:"static",cursor:"ns-resize",onPointerDown:w,onRightClick:e=>{e.stopPropagation(),f()},layout:{width:e,height:t,flexDirection:"column",alignItems:"center"},children:[i.jsxDEV("pixiBitmapText",{text:"PITCH",style:{fontFamily:sh,fontSize:9,fill:16777215},tint:r.textMuted.color,layout:{height:10}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPitchSlider.tsx",lineNumber:285,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:b,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:B?r.textMuted.color:sp,layout:{height:12}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPitchSlider.tsx",lineNumber:293,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:I,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPitchSlider.tsx",lineNumber:301,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:y,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPitchSlider.tsx",lineNumber:307,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:v,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPitchSlider.tsx",lineNumber:313,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPitchSlider.tsx",lineNumber:276,columnNumber:5},void 0)},cp=36,Ap=28,up=76,dp=222,hp=16763904,gp=440020,fp=16750848,pp=16724787,mp=e=>`${Math.round(314*Math.pow(2394/314,e))}Hz`,xp=e=>`${Math.round(100*e)}%`,Ep=e=>`${Math.round(200*Math.pow(10,e))}ms`,Cp=e=>`${Math.round(2*Math.pow(180,e))}ms`,Bp=e=>`${(.3*Math.pow(100,e)).toFixed(1)}ms`,bp=e=>e<.05?"SAW":e>.95?"SQR":`${Math.round(100*e)}%`,Ip=e=>`${Math.round(50+49*e)}%`,yp=e=>e<.5?"-2 Oct":"-1 Oct",vp=e=>e<.05?"LP":e>.95?"BP":"Mix",wp=e=>`${Math.round(100*e)}%`,Qp=e=>(10*e).toFixed(1),Dp=[{id:"osc",label:"OSC",color:gp},{id:"mojo",label:"MOJO",color:fp},{id:"devilfish",label:"DEVILFISH",color:pp}],Np=({width:e})=>{const t=ph(),{tb303Collapsed:r,toggleTB303Collapsed:n}=l(g(e=>({tb303Collapsed:e.tb303Collapsed,toggleTB303Collapsed:e.toggleTB303Collapsed}))),{instruments:o,updateInstrument:s}=S(g(e=>({instruments:e.instruments,updateInstrument:e.updateInstrument}))),{controlledInstrumentId:a}=u(),c=a?o.find(e=>e.id===a&&"TB303"===e.synthType):o.find(e=>"TB303"===e.synthType),[A,d]=ce.useState("osc"),h=ae.useCallback((e,t)=>{if(!c)return;const i=S.getState().instruments.find(e=>e.id===c.id);i?.tb303&&s(c.id,{tb303:{...i.tb303,[e]:t}})},[c,s]),f=ae.useCallback((e,t)=>{if(!c)return;const i=S.getState().instruments.find(e=>e.id===c.id);i?.tb303&&s(c.id,{tb303:{...i.tb303,filter:{...i.tb303.filter,[e]:t}}})},[c,s]),p=ae.useCallback((e,t)=>{if(!c)return;const i=S.getState().instruments.find(e=>e.id===c.id);if(!i?.tb303)return;const r={filterEnvelope:{...i.tb303.filterEnvelope,[e]:t}};"decay"===e&&(r.devilFish={...L.devilFish,...i.tb303.devilFish||{},normalDecay:t}),s(c.id,{tb303:{...i.tb303,...r}})},[c,s]),m=ae.useCallback(e=>{if(!c)return;const t=S.getState().instruments.find(e=>e.id===c.id);t?.tb303&&s(c.id,{tb303:{...t.tb303,accent:{...t.tb303.accent,amount:e}}})},[c,s]),x=ae.useCallback((e,t)=>{if(!c)return;const i=S.getState().instruments.find(e=>e.id===c.id);i?.tb303&&s(c.id,{tb303:{...i.tb303,oscillator:{...i.tb303.oscillator,[e]:t}}})},[c,s]),E=ae.useCallback((e,t)=>{if(!c)return;const i=S.getState().instruments.find(e=>e.id===c.id);if(!i?.tb303)return;const r=i.tb303.devilFish||{enabled:!0,normalDecay:.5,accentDecay:.5,vegDecay:.5,vegSustain:0,softAttack:0,filterTracking:0,filterFmDepth:0,sweepSpeed:"normal",accentSweepEnabled:!0,highResonance:!1,muffler:"off"};s(c.id,{tb303:{...i.tb303,devilFish:{...r,[e]:t}}})},[c,s]),C=ae.useCallback(e=>{if(!c)return;const t=S.getState().instruments.find(e=>e.id===c.id);t?.tb303&&s(c.id,{tb303:{...t.tb303,slide:{...t.tb303.slide,time:e}}})},[c,s]),B=c?.tb303,b=B?{...L,...B,oscillator:{...L.oscillator,...B.oscillator},filter:{...L.filter,...B.filter},filterEnvelope:{...L.filterEnvelope,...B.filterEnvelope},accent:{...L.accent,...B.accent},slide:{...L.slide,...B.slide}}:null,I=c?o.indexOf(c):-1,y=I>=0?`CH${String(I+1).padStart(2,"0")}`:"CH--",v=ae.useCallback(i=>{const n=r?40:dp;i.clear(),i.rect(0,0,e,n),i.fill({color:1710618}),i.rect(0,0,e,1),i.fill({color:t.border.color,alpha:.5})},[e,t,r]),w=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,cp),i.fill({color:1315860}),i.rect(0,35,e,1),i.fill({color:t.border.color,alpha:.3})},[e,t]),Q=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,1),i.fill({color:t.border.color,alpha:.25})},[e,t]),D=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,Ap),i.fill({color:1118481}),i.rect(0,0,e,1),i.fill({color:t.border.color,alpha:.2}),i.rect(0,27,e,1),i.fill({color:t.border.color,alpha:.2})},[e,t]),N=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,up),t.fill({color:1447446})},[e]);return c&&b?r?i.jsxDEV("pixiContainer",{layout:{width:e,height:40,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:v,layout:{position:"absolute",width:e,height:40}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:338,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:40,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:4,gap:6},children:[i.jsxDEV("pixiBitmapText",{text:"TB-303",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:t.accent.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:353,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:y,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:t.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:361,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:c.name,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:t.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:369,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:377,columnNumber:11},void 0),i.jsxDEV(bh,{label:" EXPAND",variant:"ghost",size:"sm",onClick:n},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:380,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:341,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:337,columnNumber:7},void 0):i.jsxDEV("pixiContainer",{layout:{width:e,height:dp,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:v,layout:{position:"absolute",width:e,height:dp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:395,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:cp,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:w,layout:{position:"absolute",width:e,height:cp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:399,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:cp,flexDirection:"row",alignItems:"center",paddingLeft:10,paddingRight:6,gap:8},children:[i.jsxDEV("pixiBitmapText",{text:"DB-303",style:{fontFamily:ah,fontSize:12,fill:16777215},tint:16763904,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:412,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:"TB-303 WASM ENGINE",style:{fontFamily:sh,fontSize:7,fill:16777215},tint:t.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:419,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:y,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:t.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:427,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:c.name,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:t.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:435,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:443,columnNumber:11},void 0),i.jsxDEV(bh,{label:" COLLAPSE",variant:"ghost",size:"sm",onClick:n},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:446,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:400,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:398,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:80,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16,gap:8},children:[i.jsxDEV(kg,{value:b.tuning??.5,min:0,max:1,defaultValue:.5,bipolar:!0,onChange:e=>h("tuning",e),label:"TUNING",size:"sm",color:hp,formatValue:e=>(e-.5>0?"+":"")+Math.round(100*(e-.5))+"c"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:468,columnNumber:9},void 0),i.jsxDEV(kg,{value:b.filter.cutoff,min:0,max:1,defaultValue:.5,onChange:e=>f("cutoff",e),label:"CUTOFF",size:"sm",color:hp,formatValue:mp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:482,columnNumber:9},void 0),i.jsxDEV(kg,{value:b.filter.resonance,min:0,max:1,defaultValue:0,onChange:e=>f("resonance",e),label:"RESO",size:"sm",color:hp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:495,columnNumber:9},void 0),i.jsxDEV(kg,{value:b.filterEnvelope.envMod,min:0,max:1,defaultValue:.5,onChange:e=>p("envMod",e),label:"ENV MOD",size:"sm",color:hp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:508,columnNumber:9},void 0),i.jsxDEV(kg,{value:b.filterEnvelope.decay,min:0,max:1,defaultValue:.5,onChange:e=>p("decay",e),label:"DECAY",size:"sm",color:hp,formatValue:Ep},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:521,columnNumber:9},void 0),i.jsxDEV(kg,{value:b.accent.amount,min:0,max:1,defaultValue:.5,onChange:m,label:"ACCENT",size:"sm",color:hp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:534,columnNumber:9},void 0),i.jsxDEV(kg,{value:b.volume??.75,min:0,max:1,defaultValue:.75,onChange:e=>h("volume",e),label:"VOLUME",size:"sm",color:gp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:547,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:456,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:Q,layout:{width:e,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:561,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:Ap,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:D,layout:{position:"absolute",width:e,height:Ap}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:565,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:Ap,flexDirection:"row",alignItems:"center",paddingLeft:10,paddingRight:10,gap:4},children:Dp.map(e=>i.jsxDEV(bh,{label:e.label,variant:A===e.id?"ft2":"ghost",size:"sm",active:A===e.id,onClick:()=>d(e.id)},e.id,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:578,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:566,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:564,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:up,flexDirection:"column"},children:[i.jsxDEV("pixiGraphics",{draw:N,layout:{position:"absolute",width:e,height:up}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:592,columnNumber:9},void 0),"osc"===A&&i.jsxDEV("pixiContainer",{layout:{width:e,height:up,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16,gap:8},children:[i.jsxDEV(kg,{value:b.oscillator.waveformBlend??("square"===b.oscillator.type?1:0),min:0,max:1,defaultValue:0,onChange:e=>x("waveformBlend",e),label:"WAVEFORM",size:"sm",color:gp,formatValue:bp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:611,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.oscillator.pulseWidth??0,min:0,max:1,defaultValue:0,onChange:e=>x("pulseWidth",e),label:"PULSE W",size:"sm",color:gp,formatValue:Ip},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:624,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.oscillator.subOscGain??0,min:0,max:1,defaultValue:0,onChange:e=>x("subOscGain",e),label:"SUB OSC",size:"sm",color:gp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:637,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.oscillator.subOscBlend??1,min:0,max:1,defaultValue:1,onChange:e=>x("subOscBlend",e),label:"SUB WAVE",size:"sm",color:gp,formatValue:yp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:650,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,paddingLeft:8},children:[i.jsxDEV(bh,{label:"SAW",variant:(b.oscillator.waveformBlend??0)<.5?"ft2":"ghost",size:"sm",active:(b.oscillator.waveformBlend??0)<.5,onClick:()=>x("waveformBlend",0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:664,columnNumber:15},void 0),i.jsxDEV(bh,{label:"SQR",variant:(b.oscillator.waveformBlend??0)>=.5?"ft2":"ghost",size:"sm",active:(b.oscillator.waveformBlend??0)>=.5,onClick:()=>x("waveformBlend",1)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:671,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:663,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:599,columnNumber:11},void 0),"mojo"===A&&i.jsxDEV("pixiContainer",{layout:{width:e,height:up,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16,gap:8},children:[i.jsxDEV(kg,{value:b.devilFish?.passbandCompensation??.09,min:0,max:1,defaultValue:.09,onChange:e=>E("passbandCompensation",e),label:"BASS",size:"sm",color:fp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:696,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.resTracking??.257,min:0,max:1,defaultValue:.257,onChange:e=>E("resTracking",e),label:"REZ TRK",size:"sm",color:fp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:709,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.filterInputDrive??.169,min:0,max:1,defaultValue:.169,onChange:e=>E("filterInputDrive",e),label:"SATUR",size:"sm",color:fp,formatValue:Qp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:722,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.diodeCharacter??1,min:0,max:1,defaultValue:1,onChange:e=>E("diodeCharacter",e),label:"BITE",size:"sm",color:fp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:735,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.duffingAmount??.03,min:-1,max:1,defaultValue:.03,bipolar:!0,onChange:e=>E("duffingAmount",e),label:"TENSION",size:"sm",color:fp,formatValue:wp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:748,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.lpBpMix??0,min:0,max:1,defaultValue:0,onChange:e=>E("lpBpMix",e),label:"LP/BP",size:"sm",color:fp,formatValue:vp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:762,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,paddingLeft:8},children:[i.jsxDEV(bh,{label:"DIODE",variant:0===(b.devilFish?.filterSelect??0)?"ft2":"ghost",size:"sm",active:0===(b.devilFish?.filterSelect??0),color:"yellow",onClick:()=>E("filterSelect",0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:776,columnNumber:15},void 0),i.jsxDEV(bh,{label:"KORG",variant:5===(b.devilFish?.filterSelect??0)?"ft2":"ghost",size:"sm",active:5===(b.devilFish?.filterSelect??0),onClick:()=>E("filterSelect",5)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:784,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:775,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:684,columnNumber:11},void 0),"devilfish"===A&&i.jsxDEV("pixiContainer",{layout:{width:e,height:up,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16,gap:8},children:[i.jsxDEV(kg,{value:b.devilFish?.filterFmDepth??0,min:0,max:1,defaultValue:0,onChange:e=>E("filterFmDepth",e),label:"FILT FM",size:"sm",color:pp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:809,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.filterTracking??0,min:0,max:1,defaultValue:0,onChange:e=>E("filterTracking",e),label:"FILT TRK",size:"sm",color:pp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:822,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.slide?.time??.17,min:0,max:1,defaultValue:.17,onChange:C,label:"SLIDE",size:"sm",color:pp,formatValue:Cp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:835,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.softAttack??0,min:0,max:1,defaultValue:0,onChange:e=>E("softAttack",e),label:"S.ATK",size:"sm",color:pp,formatValue:Bp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:848,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.normalDecay??.164,min:0,max:1,defaultValue:.164,onChange:e=>E("normalDecay",e),label:"N.DEC",size:"sm",color:pp,formatValue:Ep},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:861,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.accentDecay??.006,min:0,max:1,defaultValue:.006,onChange:e=>E("accentDecay",e),label:"ACC DEC",size:"sm",color:pp,formatValue:Ep},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:874,columnNumber:13},void 0),i.jsxDEV(kg,{value:b.devilFish?.accentSoftAttack??.1,min:0,max:1,defaultValue:.1,onChange:e=>E("accentSoftAttack",e),label:"ACC SOFT",size:"sm",color:pp,formatValue:xp},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:887,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:797,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:591,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:394,columnNumber:5},void 0):i.jsxDEV("pixiContainer",{layout:{width:0,height:0}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303KnobPanel.tsx",lineNumber:330,columnNumber:12},void 0)};Np.displayName="PixiTB303KnobPanel";const kp=32,Sp=64,Pp=40,Mp=28,Vp=[{value:"16",label:"16 rows"},{value:"32",label:"32 rows"},{value:"64",label:"64 rows"},{value:"128",label:"128 rows"}],_p=[{value:"16",label:"16"},{value:"32",label:"32"},{value:"64",label:"64"},{value:"128",label:"128"}],Lp=({pattern:e,index:t,isActive:r,isQueued:n,isPendingDelete:o,isDragging:s,dragTargetIndex:a,width:l,onSelect:c,onRename:A,onClone:u,onDelete:d,onDragStart:h})=>{const g=ph(),[f,p]=ae.useState(null),m=ae.useCallback(e=>{e.clear(),o?(e.rect(0,0,l,Mp),e.fill({color:g.error.color,alpha:.2})):r?(e.rect(0,0,l,Mp),e.fill({color:g.accent.color,alpha:.2})):(e.rect(0,0,l,Mp),e.fill({color:g.bg.color,alpha:0})),e.rect(0,27,l,1),e.fill({color:g.border.color,alpha:.3}),n?(e.rect(0,0,3,Mp),e.fill({color:16746496,alpha:.9})):r&&(e.rect(0,0,3,Mp),e.fill({color:g.accent.color,alpha:1})),a!==t||s||(e.rect(0,0,l,2),e.fill({color:g.accent.color,alpha:.8}))},[l,r,n,o,a,t,s,g]),x=ae.useCallback(e=>{e.clear();const t=g.textMuted.color;for(let i=0;i<3;i++)e.rect(2,6+5*i,8,2),e.fill({color:t,alpha:.5})},[g]),E=ae.useCallback(e=>t=>{if(t.clear(),f!==e)return;const i="delete"===e?g.error.color:g.accent.color;t.roundRect(0,0,24,18,3),t.fill({color:i,alpha:.25})},[f,g]),C=24,B=18,b=l-16-22-28-76-8;return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",alpha:s?.45:1,layout:{width:l,height:Mp,flexDirection:"row",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:m,layout:{position:"absolute",width:l,height:Mp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:155,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"grab",onPointerDown:e=>{e.stopPropagation(),h(t)},layout:{width:16,height:Mp,justifyContent:"center",alignItems:"center"},children:i.jsxDEV("pixiGraphics",{draw:x,layout:{width:12,height:Mp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:167,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:158,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",onPointerUp:c,layout:{width:22,height:Mp,justifyContent:"center",alignItems:"center"},children:i.jsxDEV("pixiBitmapText",{text:t.toString().padStart(2,"0"),style:{fontFamily:ah,fontSize:10,fill:16777215},tint:r?g.accent.color:g.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:176,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:171,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",onPointerUp:c,layout:{width:b,height:Mp,alignItems:"center",overflow:"hidden"},children:i.jsxDEV("pixiBitmapText",{text:e.name.toUpperCase().slice(0,20),style:{fontFamily:sh,fontSize:10,fill:16777215},tint:r?g.text.color:g.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:190,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:185,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",onPointerUp:c,layout:{width:28,height:Mp,alignItems:"center",justifyContent:"flex-end",paddingRight:2},children:i.jsxDEV("pixiBitmapText",{text:String(e.length),style:{fontFamily:sh,fontSize:9,fill:16777215},tint:g.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:204,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:199,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:76,height:Mp,flexDirection:"row",alignItems:"center",gap:2},children:[i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerOver:()=>p("rename"),onPointerOut:()=>p(null),onPointerUp:e=>{e.stopPropagation(),A()},layout:{width:C,height:B,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:E("rename"),layout:{position:"absolute",width:C,height:B}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:223,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:"RN",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:"rename"===f?g.accent.color:g.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:224,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:215,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerOver:()=>p("clone"),onPointerOut:()=>p(null),onPointerUp:e=>{e.stopPropagation(),u()},layout:{width:C,height:B,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:E("clone"),layout:{position:"absolute",width:C,height:B}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:241,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:"CP",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:"clone"===f?g.accent.color:g.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:242,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:233,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerOver:()=>p("delete"),onPointerOut:()=>p(null),onPointerUp:e=>{e.stopPropagation(),d()},layout:{width:C,height:B,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:E("delete"),layout:{position:"absolute",width:C,height:B}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:259,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:o?"DEL":"X",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:o||"delete"===f?g.error.color:g.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:260,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:251,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:213,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:148,columnNumber:5},void 0)},Rp=({width:e,height:t})=>{const r=ph(),n=f(e=>e.patterns),o=f(e=>e.currentPatternIndex),s=f(e=>e.setCurrentPattern),a=f(e=>e.addPattern),l=f(e=>e.deletePattern),c=f(e=>e.clonePattern),A=f(e=>e.resizePattern),u=f(e=>e.reorderPatterns),d=f(e=>e.updatePatternName),{pendingPatternIndex:h}=R(),[g,p]=ae.useState("64"),[m,x]=ae.useState(null),E=ae.useRef(null),[C,B]=ae.useState(null),[b,I]=ae.useState(null);ae.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]);const y=ae.useCallback(()=>{a(parseInt(g,10))},[a,g]),v=ae.useCallback(e=>{const t=n[e];if(!t)return;const i=window.prompt("Rename pattern:",t.name);i&&i.trim()&&d(e,i.trim())},[n,d]),w=ae.useCallback(e=>{c(e)},[c]),Q=ae.useCallback(e=>{1!==n.length?m===e?(l(e),x(null),E.current&&clearTimeout(E.current)):(x(e),E.current&&clearTimeout(E.current),E.current=setTimeout(()=>x(null),3e3)):window.alert("Cannot delete the last pattern.")},[n.length,m,l]),D=ae.useCallback(e=>{A(o,parseInt(e,10))},[A,o]),N=ae.useCallback(e=>{B(e),I(e)},[]);ae.useEffect(()=>{if(null===C)return;const e=e=>{const t=document.querySelector("canvas");if(!t)return;const i=t.getBoundingClientRect(),r=e.clientY-i.top-kp-Sp-Pp,o=Math.max(0,Math.min(n.length-1,Math.floor(r/Mp)));I(o)},t=()=>{null!==C&&null!==b&&C!==b&&u(C,b),B(null),I(null)};return document.addEventListener("pointermove",e),document.addEventListener("pointerup",t),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",t)}},[C,b,n.length,u]);const k=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,kp),t.fill({color:r.bgTertiary.color}),t.rect(0,31,e,1),t.fill({color:r.border.color,alpha:r.border.alpha})},[e,r]),S=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,Sp),t.fill({color:r.bgSecondary.color}),t.rect(0,63,e,1),t.fill({color:r.border.color,alpha:r.border.alpha})},[e,r]),P=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,Pp),t.fill({color:r.bgSecondary.color}),t.rect(0,39,e,1),t.fill({color:r.border.color,alpha:r.border.alpha})},[e,r]),M=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,80),t.fill({color:r.bgSecondary.color}),t.rect(0,0,e,1),t.fill({color:r.border.color,alpha:r.border.alpha})},[e,r]),V=t-kp-Sp-Pp-80,_=n.length*Mp,L=n[o],U=L?.length??64,T=ae.useCallback(e=>t=>{t.clear();const i=e===o;t.roundRect(0,0,32,20,4),i?(t.fill({color:r.accent.color,alpha:.85}),t.roundRect(0,0,32,20,4),t.stroke({color:r.accent.color,alpha:1,width:1})):(t.fill({color:r.bgTertiary.color,alpha:1}),t.roundRect(0,0,32,20,4),t.stroke({color:r.border.color,alpha:.5,width:1}))},[o,r]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:t,flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:e,height:kp,alignItems:"center",paddingLeft:10},children:[i.jsxDEV("pixiGraphics",{draw:k,layout:{position:"absolute",width:e,height:kp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:455,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"PATTERN MANAGER",style:{fontFamily:ah,fontSize:11,fill:16777215},tint:r.text.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:456,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:454,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:Sp,flexDirection:"column",justifyContent:"center",paddingLeft:8,paddingRight:8,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:S,layout:{position:"absolute",width:e,height:Sp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:476,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",gap:6,width:e-16},children:[i.jsxDEV("pixiBitmapText",{text:"SIZE:",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:r.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:480,columnNumber:11},void 0),i.jsxDEV(Xg,{options:Vp,value:g,onChange:p,width:e-16-48,height:22},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:486,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:479,columnNumber:9},void 0),i.jsxDEV(bh,{label:"+ ADD PATTERN",variant:"ft2",color:"green",size:"sm",width:e-16,onClick:y,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:496,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:465,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:Pp,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:8,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:P,layout:{position:"absolute",width:e,height:Pp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:519,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:(L?.name??"NONE").toUpperCase().slice(0,16),style:{fontFamily:ah,fontSize:10,fill:16777215},tint:r.accent.color,layout:{flexGrow:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:521,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"RESIZE:",style:{fontFamily:sh,fontSize:9,fill:16777215},tint:r.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:528,columnNumber:9},void 0),i.jsxDEV(Xg,{options:_p,value:String(U),onChange:D,width:60,height:22},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:535,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:508,columnNumber:7},void 0),i.jsxDEV(Og,{width:e,height:V,contentHeight:_,direction:"vertical",showScrollbar:!0,children:n.map((t,r)=>i.jsxDEV(Lp,{pattern:t,index:r,isActive:r===o,isQueued:h===r,isPendingDelete:m===r,isDragging:C===r,dragTargetIndex:b,totalPatterns:n.length,width:e,onSelect:()=>s(r),onRename:()=>v(r),onClone:()=>w(r),onDelete:()=>Q(r),onDragStart:N},t.id,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:553,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:545,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:80,flexDirection:"column",paddingLeft:8,paddingRight:8,paddingTop:6,gap:4},children:[i.jsxDEV("pixiGraphics",{draw:M,layout:{position:"absolute",width:e,height:80}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:585,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:"PLAYBACK SEQUENCE",style:{fontFamily:ah,fontSize:9,fill:16777215},tint:r.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:587,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",flexWrap:"wrap",gap:4,width:e-16},children:n.map((e,t)=>{const n=t===o;return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:()=>s(t),layout:{width:32,height:20,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:T(t),layout:{position:"absolute",width:32,height:20}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:613,columnNumber:17},void 0),i.jsxDEV("pixiBitmapText",{text:t.toString().padStart(2,"0"),style:{fontFamily:ah,fontSize:9,fill:16777215},tint:n?16777215:r.textSecondary.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:617,columnNumber:17},void 0)]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:606,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:595,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",gap:4,marginTop:2},children:i.jsxDEV("pixiBitmapText",{text:"DRAG ROWS TO REORDER",style:{fontFamily:sh,fontSize:8,fill:16777215},tint:r.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:630,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:629,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:574,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternManagement.tsx",lineNumber:451,columnNumber:5},void 0)},Up=18,Tp=52,Op=20,Fp=11,Gp=8421504,jp=3355443,Hp=({width:e,height:t,onSeek:r})=>{ph();const n=f(e=>e.channelTrackTables),o=f(e=>e.channelSpeeds),s=f(e=>e.currentPositionIndex),a=p(e=>e.speed),l=n?.length??0,c=n?Math.max(0,...n.map(e=>e.length)):0,A=Math.floor(3.5),u=Math.max(0,Math.min(s-A,c-7)),d=Math.min(c,u+7),h=ae.useMemo(()=>Array.from({length:d-u},(e,t)=>u+t),[u,d]),g=36+l*Tp,m=ae.useCallback(i=>{i.clear(),i.rect(0,0,g,146),i.fill({color:0}),i.rect(0,19,g,1),i.fill({color:jp});for(let e=0;e<h.length;e++){const t=h[e]===s,r=Op+e*Up;t&&(i.rect(0,r,g,Up),i.fill({color:7864320}));for(let e=0;e<l;e++){const n=36+e*Tp;i.rect(n,r,1,Up),i.fill({color:t?0:2236962})}}for(let e=0;e<l;e++){const t=36+e*Tp;i.rect(t,0,1,Op),i.fill({color:jp})}i.rect(0,0,e,t),i.fill({color:0,alpha:0})},[g,h,s,l,e,t]),x=ae.useMemo(()=>{if(!n||0===l)return[];const e=[];e.push({x:4,y:4.5,text:"Pos",color:Gp});for(let t=0;t<l;t++){const i=o?.[t],r=void 0!==i&&i!==a,n=36+t*Tp+26,s=r?-2:4.5;e.push({x:n-12,y:s,text:`CH${t+1}`,color:Gp}),r&&e.push({x:n-16,y:s+Fp+1,text:`S:${i}`,color:16498468})}for(let t=0;t<h.length;t++){const i=h[t],r=i===s,o=Op+t*Up+3.5,a=`${r?">":""}${i.toString().padStart(2,"0")}`;e.push({x:2,y:o,text:a,color:r?16777096:Gp});for(let t=0;t<l;t++){const r=n[t]?.[i],s=void 0===r,a=36+t*Tp+4;e.push({x:a,y:o,text:s?"":r.toString().padStart(3,"0"),color:s?Gp:16777215})}}return e},[n,o,l,a,h,s]),E=ae.useCallback(e=>{if(!r)return;const t=e.getLocalPosition(e.currentTarget).y-Op;if(t<0)return;const i=Math.floor(t/Up);if(i>=0&&i<h.length){const e=h[i];void 0!==e&&r(e)}},[r,h]);return n&&0!==l?i.jsxDEV("pixiContainer",{layout:{width:e,height:t},eventMode:"static",cursor:"pointer",onPointerUp:E,children:[i.jsxDEV("pixiGraphics",{draw:m,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLineTrackTable.tsx",lineNumber:218,columnNumber:7},void 0),x.map((e,t)=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:sh,fontSize:Fp,fill:16777215},tint:e.color,x:e.x,y:e.y},`ttl-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLineTrackTable.tsx",lineNumber:225,columnNumber:9},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLineTrackTable.tsx",lineNumber:211,columnNumber:5},void 0):null},Xp=18,zp=20,Jp=11,Wp=["C-","C#","D-","D#","E-","F-","F#","G-","G#","A-","A#","B-"];function Kp(e){if(!e)return"---";if(97===e)return"===";const t=e-1;return Wp[t%12]+Math.floor(t/12)}function Yp(e){return e?e.toString(16).toUpperCase().padStart(2,"0"):"--"}const qp=3355443,Zp=1973790,$p=3355443,em=({width:e,height:t})=>{ph();const r=f(e=>e.channelTrackTables),n=f(e=>e.patterns),o=f(e=>e.currentPositionIndex),s=p(e=>e.currentRow),[a,l]=ae.useState(0),c=ae.useRef(0);ae.useEffect(()=>{c.current=a},[a]),ae.useEffect(()=>{const e=s*Xp-(t-zp)/2+9,i=Math.max(0,e);l(i),c.current=i},[s,t]);const A=ae.useMemo(()=>r?r.map(e=>{const t=e[o]??0;return n[t]??null}):[],[r,n,o]),u=A.length,d=A[0]?.length??128,h=d*Xp,g=t-zp,m=Math.max(0,h-g),x=36+80*u,E=ae.useCallback(e=>{e.stopPropagation(),l(t=>{const i=Math.max(0,Math.min(m,t+e.deltaY));return c.current=i,i})},[m]),C=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,zp),t.fill({color:1710618}),t.rect(0,19,e,1),t.fill({color:qp});for(let e=0;e<u;e++){const i=36+80*e;t.rect(i,0,1,zp),t.fill({color:qp})}t.rect(0,0,e,zp),t.fill({color:0,alpha:0})},[e,u]),B=ae.useCallback(t=>{t.clear(),t.rect(0,0,e,g),t.fill({color:855309});const i=Math.floor(a/Xp),r=Math.min(d-1,Math.ceil((a+g)/Xp));for(let e=i;e<=r;e++){const i=e*Xp-a;if(i+Xp<0||i>g)continue;const r=e===s,n=Math.floor(e/4)%2==0;r?(t.rect(0,i,x,Xp),t.fill({color:1718810})):n||(t.rect(0,i,x,Xp),t.fill({color:657930})),e%4==3&&(t.rect(0,i+Xp-1,x,1),t.fill({color:Zp}));for(let e=0;e<u;e++){const r=36+80*e;t.rect(r,i,1,Xp),t.fill({color:Zp})}}if(m>0){const i=g-4,r=Math.max(20,g/h*i),n=2+a/m*(i-r);t.roundRect(e-6-2,2,6,i,3),t.fill({color:3355443,alpha:.4}),t.roundRect(e-6-2,n,6,r,3),t.fill({color:6710886,alpha:.6})}t.rect(0,0,e,g),t.fill({color:0,alpha:0})},[e,g,a,d,s,x,u,m,h]),b=ae.useMemo(()=>{const e=[];e.push({x:2,y:4.5,text:"ROW",color:5592405});for(let t=0;t<u;t++){const i=r?.[t]?.[o]??0,s=`CH${t+1} ${n[i]?`P:${i.toString().padStart(2,"0")}`:"???"}`;e.push({x:36+80*t+4,y:4.5,text:s,color:11184810})}return e},[u,r,o,n]),I=ae.useMemo(()=>{const e=[],t=Math.floor(a/Xp),i=Math.min(d-1,Math.ceil((a+g)/Xp));for(let r=t;r<=i;r++){const t=r*Xp-a+3.5;if(t+Xp<0||t>g)continue;const i=r===s,n=r%4==0?5592405:3355443;e.push({x:2,y:t,text:r.toString().padStart(3,"0"),color:n});for(let o=0;o<u;o++){const n=A[o],s=n?.channels[0]?.rows[r],a=void 0!==s&&s.note>0,l=36+80*o+4,c=a?i?8978312:13421772:$p,u=a&&s&&s.instrument?16755268:$p;e.push({x:l,y:t,text:s?Kp(s.note):"---",color:c}),e.push({x:l+28,y:t,text:s?Yp(s.instrument):"--",color:u})}}return e},[a,d,g,s,u,A]);return r&&0!==r.length?i.jsxDEV("pixiContainer",{layout:{width:e,height:t,flexDirection:"column"},eventMode:"static",onWheel:E,children:[i.jsxDEV("pixiContainer",{layout:{width:e,height:zp},children:[i.jsxDEV("pixiGraphics",{draw:C,layout:{position:"absolute",width:e,height:zp}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:303,columnNumber:9},void 0),b.map((e,t)=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:sh,fontSize:Jp,fill:16777215},tint:e.color,x:e.x,y:e.y},`hl-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:308,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:302,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:g},children:[i.jsxDEV("pixiGraphics",{draw:B,layout:{position:"absolute",width:e,height:g}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:322,columnNumber:9},void 0),I.map((e,t)=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:sh,fontSize:Jp,fill:16777215},tint:e.color,x:e.x,y:e.y},`cl-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:329,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:320,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:296,columnNumber:5},void 0):i.jsxDEV("pixiContainer",{layout:{width:e,height:t},children:i.jsxDEV("pixiBitmapText",{text:"No channel data",style:{fontFamily:sh,fontSize:Jp,fill:16777215},tint:5592405,x:8,y:8},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:284,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiMusicLinePatternViewer.tsx",lineNumber:283,columnNumber:7},void 0)},tm=10,im=40,rm=["C-","C#","D-","D#","E-","F-","F#","G-","G#","A-","A#","B-"];function nm(e){if(0===e)return"---";if(97===e)return"OFF";const t=e-1,i=t%12,r=Math.floor(t/12);return`${rm[i]}${r}`}function om(e){return e.toString(16).toUpperCase().padStart(2,"0")}function sm(e,t,i){if(0===e&&0===t)return"...";return`${e<10?String(e):String.fromCharCode(55+e)}${i?om(t):t.toString().padStart(2,"0")}`}const am=16096779,lm=440020,cm=16436245,Am=2282478;function um(e){return e>=75?4906624:e>=50?16436245:e>=25?16486972:16281969}const dm=({width:e,height:t})=>{const r=ph(),{pattern:n,patterns:o,currentPatternIndex:a,cursor:c,selection:u,showGhostPatterns:d,columnVisibility:h,recordMode:x,addChannel:E,toggleChannelMute:C,toggleChannelSolo:B,toggleChannelCollapse:b,setChannelColor:I,updateChannelName:y,setCell:v,copyTrack:w,cutTrack:Q,pasteTrack:D}=f(g(e=>({pattern:e.patterns[e.currentPatternIndex],patterns:e.patterns,currentPatternIndex:e.currentPatternIndex,cursor:e.cursor,selection:e.selection,showGhostPatterns:e.showGhostPatterns,columnVisibility:e.columnVisibility,recordMode:e.recordMode,addChannel:e.addChannel,toggleChannelMute:e.toggleChannelMute,toggleChannelSolo:e.toggleChannelSolo,toggleChannelCollapse:e.toggleChannelCollapse,setChannelColor:e.setChannelColor,updateChannelName:e.updateChannelName,setCell:e.setCell,moveCursorToChannelAndColumn:e.moveCursorToChannelAndColumn,copyTrack:e.copyTrack,cutTrack:e.cutTrack,pasteTrack:e.pasteTrack}))),N=l(e=>e.useHexNumbers),k=l(e=>e.blankEmptyCells),S=l(e=>e.trackerZoom),P=l(e=>e.rowHighlightInterval),V=l(e=>e.showBeatLabels),_=Math.round(S/100*24),L=ae.useRef(_);ae.useEffect(()=>{L.current=_},[_]);const R=s(e=>e.trackerVisualBg),z=p(e=>e.isPlaying),J=p(e=>e.smoothScrolling),W=U(),[K,Y]=ae.useState(null),q=ae.useCallback(e=>{if(!n)return;const t=W.cellInfo?.channelIndex??c.channelIndex,i=u?.startRow??c.rowIndex,r=u?.endRow??Math.min(c.rowIndex+15,n.length-1);Y({isOpen:!0,field:e,channelIndex:t,startRow:i,endRow:r}),W.closeMenu()},[W,c,u,n]),Z=T(),$=ae.useCallback(e=>{const t=u?Math.min(u.startRow,u.endRow):0,i=u?Math.max(u.startRow,u.endRow):(n?.length??64)-1;return{patternIndex:a,channelIndex:e,startRow:t,endRow:i}},[u,a,n?.length]),ee=ae.useCallback(e=>Z.applyReverseVisual($(e)),[Z,$]),te=ae.useCallback(e=>{const t=$(e);Z.applyPolyrhythm(t.patternIndex,[e],[3],t.startRow,t.endRow)},[Z,$]),ie=ae.useCallback(e=>Z.applyFibonacciSequence($(e)),[Z,$]),re=ae.useCallback(e=>Z.applyEuclideanPattern($(e),5,8),[Z,$]),ne=ae.useCallback(e=>Z.applyPingPong($(e)),[Z,$]),oe=ae.useCallback(e=>Z.applyGlitch($(e)),[Z,$]),se=ae.useCallback(e=>Z.applyStrobe($(e)),[Z,$]),le=ae.useCallback(e=>Z.applyVisualEcho($(e)),[Z,$]),ce=ae.useCallback(e=>Z.applyConverge($(e)),[Z,$]),Ae=ae.useCallback(e=>Z.applySpiral($(e)),[Z,$]),ue=ae.useCallback(e=>Z.applyBounce($(e)),[Z,$]),de=ae.useCallback(e=>Z.applyChaos($(e)),[Z,$]),he=ae.useCallback((e,t)=>{if(!n)return;const i=O[t];if(!i)return;const r=n.channels[e].instrumentId??1;i.generate({patternLength:n.length,instrumentId:r,note:49,velocity:64}).forEach((t,i)=>{v(e,i,t)})},[n,v]),ge=ae.useCallback(e=>{if(n){for(let t=0;t<n.length;t++)v(e,t,{note:0,instrument:0,volume:0,effTyp:0,eff:0});l.getState().setStatusMessage("CHANNEL CLEARED")}},[n,v]),pe=ae.useCallback((e,t)=>{if(n){for(let i=0;i<n.length;i++){const r=n.channels[e].rows[i];if(r.note&&0!==r.note&&97!==r.note){const n=Math.max(1,Math.min(96,r.note+t));v(e,i,{...r,note:n})}}l.getState().setStatusMessage(`TRANSPOSE ${t>0?"+":""}${t}`)}},[n,v]),me=ae.useCallback(e=>{if(n){for(let t=0;t<n.length;t++){const i=n.channels[e].rows[t];if(null!==i.volume&&i.volume>=16){const r=Math.floor(8*Math.random())-4,n=Math.max(16,Math.min(80,i.volume+r));v(e,t,{...i,volume:n})}}l.getState().setStatusMessage("HUMANIZED")}},[n,v]),xe=ae.useCallback(e=>{if(!n)return;const t=n.channels[e];if(!t)return;let i=-1,r=-1,o=0,s=0;for(let l=0;l<n.length;l++){const e=t.rows[l];null!==e.volume&&e.volume>=16&&e.volume<=80&&(-1===i&&(i=l,o=e.volume),r=l,s=e.volume)}if(-1===i||-1===r||r-i<2)return;const a=r-i;for(let n=i+1;n<r;n++){const r=(n-i)/a,l=Math.round(o+(s-o)*r);v(e,n,{...t.rows[n],volume:l})}l.getState().setStatusMessage("INTERPOLATED")},[n,v]),[Ee,Ce]=ae.useState(null),[Be,be]=ae.useState(!1);ae.useEffect(()=>{let e=0;const t=t=>{t.dataTransfer?.types.includes("application/x-devilbox-instrument")&&(e++,be(!0))},i=()=>{e--,e<=0&&(e=0,be(!1))},r=()=>{e=0,be(!1)};return document.addEventListener("dragenter",t),document.addEventListener("dragleave",i),document.addEventListener("dragend",r),document.addEventListener("drop",r),()=>{document.removeEventListener("dragenter",t),document.removeEventListener("dragleave",i),document.removeEventListener("dragend",r),document.removeEventListener("drop",r)}},[]);const Ie=ae.useRef({row:0,channel:0,active:!1,patternIndex:-1}),ye=ae.useRef(null);ae.useEffect(()=>A.subscribe(e=>{Ie.current={row:e.peerCursorRow,channel:e.peerCursorChannel,active:"connected"===e.status&&"shared"===e.listenMode,patternIndex:e.peerPatternIndex},ye.current="connected"===e.status&&"shared"===e.listenMode?e.peerSelection:null}),[]),ae.useEffect(()=>f.subscribe((e,t)=>{if(e.selection===t.selection)return;if("connected"!==A.getState().status)return;const i=e.selection;i?m()?.send({type:"peer_selection",patternIndex:e.currentPatternIndex,startChannel:i.startChannel,endChannel:i.endChannel,startRow:i.startRow,endRow:i.endRow}):m()?.send({type:"peer_selection_clear"})}),[]);const[ve,we]=ae.useState(0),Qe=ae.useRef(0),De=ae.useRef(0),[Ne,ke]=ae.useState({row:0,smoothOffset:0,patternIndex:0}),{numChannels:Se,channelOffsets:Pe,channelWidths:Me,totalChannelsWidth:Ve}=ae.useMemo(()=>{if(!n)return{numChannels:0,channelOffsets:[],channelWidths:[],totalChannelsWidth:0};const e=n.channels.length,t=h.flag1||h.flag2,i=h.probability,r=[],o=[];let s=im;for(let a=0;a<e;a++){const e=n.channels[a],l=e?.collapsed;if(l){const e=74;r.push(s),o.push(e),s+=e}else{const n=34+(48+34*(e?.channelMeta?.effectCols??2)+(t?28:0)+(i?24:0))+60;r.push(s),o.push(n),s+=n}}return{numChannels:e,channelOffsets:r,channelWidths:o,totalChannelsWidth:s-im}},[n,h]),_e=ae.useMemo(()=>!n||0===Se||im+Ve<=e,[Ve,Se,e,n]);ae.useEffect(()=>{_e&&ve>0&&(Qe.current=0,we(0))},[_e,ve]);const Le=ae.useRef({row:-1,smoothOffset:0,patternIndex:-1});ae.useEffect(()=>{let e;const t=()=>{if(!z)return Le.current={row:-1,smoothOffset:0,patternIndex:-1},void(e=requestAnimationFrame(t));const i=M(),r=fe()+.01,n=i.getStateAtTime(r),o=f.getState();let s,a,l;if(n){if(s=n.row,l=n.pattern,a=0,J){const e=p.getState().bpm,t=p.getState().speed,o=i.getStateAtTime(r+.5,!0),s=o&&o.row!==n.row?o.time-n.time:2.5/e*t;a=Math.min(Math.max((r-n.time)/s,0),1)*L.current}}else s=p.getState().currentRow,a=0,l=o.currentPatternIndex;const c=Le.current;if(s!==c.row||l!==c.patternIndex||Math.abs(a-c.smoothOffset)>.5){const e={row:s,smoothOffset:a,patternIndex:l};Le.current=e,ke(e)}e=requestAnimationFrame(t)};return e=requestAnimationFrame(t),()=>cancelAnimationFrame(e)},[z,J]);const Re=z?Ne.row:c.rowIndex,Ue=z?Ne.smoothOffset:0,Te=z?o[Ne.patternIndex]??n:n,Oe=z?Ne.patternIndex:a,Fe=t-28-(_e?0:12),Ge=Math.ceil(Fe/_)+2,je=Math.floor(Ge/2),He=Math.floor(Fe/2)-_/2,Xe=He-je*_-Ue,ze=Re-je,Je=Te?.length??64,We=ae.useCallback((e,t)=>{if(!n)return null;const i=Math.floor((t-He)/_),r=Re+i;let o=0,s=!1;for(let n=0;n<Se;n++){const t=Pe[n]-Qe.current,i=Me[n];if(e>=t&&e<t+i){o=n,s=!0;break}}if(!s)return null;const a=n.channels[o]?.collapsed;if(a)return{rowIndex:Math.max(0,Math.min(r,Je-1)),channelIndex:o,columnType:"note"};const l=e-(Pe[o]-Qe.current)-8;let c="note";if(l>=38){const e=l-42,t=h.flag1||h.flag2,i=h.probability,r=34*(n.channels[o]?.channelMeta?.effectCols??2);if(e<24)c="instrument";else if(e<48)c="volume";else if(e<48+r){const t=e-48;c=0===Math.floor(t/34)?"effTyp":"effTyp2"}else{const n=e-(48+r);c=t&&h.flag1&&n<14?"flag1":t&&h.flag2&&n<28?"flag2":i?"probability":"effTyp"}}return{rowIndex:Math.max(0,Math.min(r,Je-1)),channelIndex:o,columnType:c}},[n,Se,Pe,Me,He,Re,Je,h]),Ke=ae.useCallback(e=>{e.preventDefault();const t=e.currentTarget.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,n=We(i,r);n?(Ce({channelIndex:n.channelIndex,rowIndex:n.rowIndex}),e.dataTransfer.dropEffect="copy"):Ce(null)},[We]),Ye=ae.useCallback(()=>{Ce(null)},[]),qe=ae.useCallback(e=>{Ce(null),be(!1);const t=e.dataTransfer.getData("application/x-devilbox-instrument");if(!t)return;e.preventDefault(),e.stopPropagation();const i=e.currentTarget.getBoundingClientRect(),r=e.clientX-i.left,n=e.clientY-i.top,o=We(r,n);if(o)try{const{id:e}=JSON.parse(t);f.getState().setCell(o.channelIndex,o.rowIndex,{instrument:e}),F.success()}catch(s){}},[We]),Ze=ae.useRef(!1),$e=ae.useRef(!1),et=ae.useCallback(e=>{const t=e.getLocalPosition(e.currentTarget),i=We(t.x,t.y);if(!i)return;const r=f.getState(),n=e.nativeEvent;if(2!==n.button){if(rt.current.isPlaying&&0===n.button&&!n.shiftKey&&!n.metaKey&&!n.ctrlKey){$e.current=!0,Ze.current=!1;return void G().onGrabStart(n.clientY,performance.now())}n.shiftKey?r.updateSelection(i.channelIndex,i.rowIndex):(r.moveCursorToRow(i.rowIndex),r.moveCursorToChannelAndColumn(i.channelIndex,i.columnType),r.startSelection()),Ze.current=!0}else W.openMenu({clientX:n.clientX,clientY:n.clientY,preventDefault:()=>{},stopPropagation:()=>{}},i.rowIndex,i.channelIndex)},[We,W]),tt=ae.useCallback(e=>{if($e.current){const t=e.nativeEvent;return void G().onGrabMove(t.clientY,performance.now())}if(!Ze.current)return;const t=e.getLocalPosition(e.currentTarget),i=We(t.x,t.y);i&&f.getState().updateSelection(i.channelIndex,i.rowIndex,i.columnType)},[We]),it=ae.useCallback(()=>{if($e.current)return $e.current=!1,void G().onGrabEnd(performance.now());Ze.current=!1},[]),rt=ae.useRef({isPlaying:z,allChannelsFit:_e,channelOffsets:Pe,totalChannelsWidth:Ve,width:e});rt.current={isPlaying:z,allChannelsFit:_e,channelOffsets:Pe,totalChannelsWidth:Ve,width:e},ae.useEffect(()=>{const e=document.querySelector("canvas[data-pixijs]")??document.querySelector("#pixi-app canvas")??document.querySelector("canvas");if(!e)return;const t=e=>{const{isPlaying:t,allChannelsFit:i,channelOffsets:r,totalChannelsWidth:n,width:o}=rt.current;if(e.preventDefault(),t&&Math.abs(e.deltaY)>Math.abs(e.deltaX)){return void G().onScrollDelta(e.deltaY,performance.now(),e.deltaMode)}if(!t)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){const t=2*Math.sign(e.deltaY),i=f.getState(),r=i.patterns[i.currentPatternIndex];if(!r)return;const n=Math.max(0,Math.min(r.length+32,i.cursor.rowIndex+t));i.moveCursorToRow(n)}else if(!i&&(De.current+=e.deltaX,Math.abs(De.current)>50)){const e=Math.sign(De.current);De.current=0;let t=0;for(let n=0;n<r.length;n++){if(!(r[n]-im<=Qe.current+5))break;t=n}const i=Math.max(0,Math.min(r.length-1,t+e)),s=Math.max(0,im+n-o),a=Math.max(0,Math.min(s,r[i]-im));Qe.current=a,we(a)}};return e.addEventListener("wheel",t,{passive:!1}),()=>e.removeEventListener("wheel",t)},[]);const nt=ae.useRef(null),ot=ae.useRef("none");ae.useEffect(()=>{const e=document.querySelector("canvas[data-pixijs]")??document.querySelector("canvas");if(!e)return;const t=e=>{let t=0;for(let i=0;i<e.length;i++)t+=e[i].clientY;return t/e.length},i=e=>{if(!rt.current.isPlaying)return;const i=G(),r=e.touches.length;if(i.isGrabTouch(r)){e.preventDefault(),ot.current="grab";const r=t(e.touches);i.onGrabStart(r,performance.now())}else 2===r&&(ot.current="nudge",nt.current=t(e.touches))},r=e=>{if(!rt.current.isPlaying)return;const i=G(),r=e.touches.length;if("nudge"===ot.current&&i.isGrabTouch(r)){ot.current="grab";const r=t(e.touches);return i.onGrabStart(r,performance.now()),void e.preventDefault()}if("grab"===ot.current){e.preventDefault();const r=t(e.touches);i.onGrabMove(r,performance.now())}else if("nudge"===ot.current&&null!==nt.current){const r=t(e.touches),n=nt.current-r;nt.current=r,Math.abs(n)>1&&(e.preventDefault(),i.onScrollDelta(n,performance.now()))}},n=e=>{const i=G();"grab"===ot.current?e.touches.length<o&&(i.onGrabEnd(performance.now()),ot.current=e.touches.length>=2?"nudge":"none","nudge"===ot.current&&(nt.current=t(e.touches))):e.touches.length<2&&(ot.current="none",nt.current=null)},o=3;return e.addEventListener("touchstart",i,{passive:!1}),e.addEventListener("touchmove",r,{passive:!1}),e.addEventListener("touchend",n,{passive:!0}),e.addEventListener("touchcancel",n,{passive:!0}),()=>{e.removeEventListener("touchstart",i),e.removeEventListener("touchmove",r),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n)}},[]);const st=ae.useCallback(t=>{t.clear(),R||(t.rect(0,0,e,Fe),t.fill({color:r.bg.color}));for(let o=0;o<Ge;o++){const i=ze+o,n=Xe+o*_;if(n+_<0||n>Fe)continue;const s=i>=0&&i<Je,a=!s&&d,l=a?.35:1;if(s||a){const o=i>=0&&i%P===0;t.rect(im,n,e-im,_),t.fill({color:o?r.trackerRowHighlight.color:r.trackerRowOdd.color,alpha:(o?r.trackerRowHighlight.alpha:r.trackerRowOdd.alpha)*l})}i===Re&&(t.rect(0,n,e,_),t.fill({color:r.accentGlow.color,alpha:R?.5:r.accentGlow.alpha}))}for(let o=0;o<Se;o++){const i=Pe[o]-Qe.current,n=Me[o];if(i+n<0||i>e)continue;o===c.channelIndex&&(t.rect(i,0,n,Fe),t.fill({color:16777215,alpha:.02}));const s=Te?.channels[o]?.color;s&&(t.rect(i,0,2,Fe),t.fill({color:parseInt(s.replace("#",""),16),alpha:.4})),t.rect(i+n-1,0,1,Fe),t.fill({color:r.border.color,alpha:r.border.alpha})}if(u&&Te){const e=Math.min(u.startChannel,u.endChannel),i=Math.max(u.startChannel,u.endChannel),n=Math.min(u.startRow,u.endRow),o=Math.max(u.startRow,u.endRow);for(let s=e;s<=i&&s<Se;s++){const e=Pe[s]-Qe.current,i=Me[s],a=Xe+(n-ze)*_,l=(o-n+1)*_;t.rect(e,a,i,l),t.fill({color:r.accentGlow.color,alpha:.15})}}const i=ye.current;if(i&&i.patternIndex===a){const e=Math.min(i.startChannel,i.endChannel),r=Math.max(i.startChannel,i.endChannel),n=Math.min(i.startRow,i.endRow),o=Math.max(i.startRow,i.endRow);for(let i=e;i<=r&&i<Se;i++){const e=Pe[i]-Qe.current,r=Me[i],s=Xe+(n-ze)*_,a=(o-n+1)*_;t.rect(e,s,r,a),t.fill({color:11032055,alpha:.12}),t.rect(e,s,r,1),t.fill({color:11032055,alpha:.45}),t.rect(e,s+a-1,r,1),t.fill({color:11032055,alpha:.45}),t.rect(e,s,1,a),t.fill({color:11032055,alpha:.45}),t.rect(e+r-1,s,1,a),t.fill({color:11032055,alpha:.45})}}const n=Ie.current;if(n.active&&n.patternIndex===a&&n.channel<Se){const e=Xe+(n.row-ze)*_,i=Pe[n.channel]-Qe.current+8;t.rect(i,e,34,_),t.fill({color:11032055,alpha:.55})}if(!z){const e=c.channelIndex;if(e>=0&&e<Se){const i=Pe[e]-Qe.current,n=Xe+(c.rowIndex-ze)*_;let o=34,s=i+8;const a=34;"instrument"===c.columnType?(s=i+8+a+4,o=20):"volume"===c.columnType?(s=i+8+a+4+20+4,o=20):"effTyp"===c.columnType?(s=i+8+a+40+12,o=30):"effTyp2"===c.columnType?(s=i+8+a+70+16,o=30):"flag1"===c.columnType?(s=i+8+a+100+20,o=tm):"flag2"===c.columnType?(s=i+8+a+110+24,o=tm):"probability"===c.columnType&&(s=i+8+a+120+28,o=20),t.rect(s,n,o,_),t.fill({color:x?r.error.color:r.accent.color,alpha:.45})}}t.rect(0,0,im,Fe),t.fill({color:r.bg.color,alpha:.85})},[e,Fe,r,Ge,ze,Xe,Je,Re,d,R,Se,Pe,Me,c,u,Te,z,x,ve,Oe,_,P]),at=ae.useMemo(()=>{if(!Te)return[];const t=[];for(let i=0;i<Ge;i++){const n=ze+i,s=Xe+i*_+_/2-5.5;if(s+_<-_||s>Fe+_)continue;let a=n,l=Te,c=!1;if(n<0||n>=Je){if(!d)continue;if(c=!0,n<0){const e=Oe>0?Oe-1:o.length-1;if(l=o[e],!l)continue;if(a=l.length+n,a<0)continue}else{const e=Oe<o.length-1?Oe+1:0;if(l=o[e],!l)continue;if(a=n-Je,a>=l.length)continue}}const A=a%P===0;let u;if(V){u=`${Math.floor(a/P)+1}.${a%P+1}`}else u=N?a.toString(16).toUpperCase().padStart(2,"0"):a.toString().padStart(2,"0");t.push({x:4,y:s,text:u,color:A?r.accentSecondary.color:r.textMuted.color,bold:A,alpha:c?.35:void 0});for(let i=0;i<Se;i++){const o=Pe[i]-Qe.current;if(o+Me[i]<0||o>e)continue;const A=l.channels[i];if(!A)continue;const u=A.collapsed,d=A.rows[a];if(!d)continue;const g=n===Re,f=o+8,p=nm(d.note??0),m=97===d.note?r.cellEffect.color:d.note>0&&d.note<97?g?16777215:r.cellNote.color:r.cellEmpty.color;if("---"===p&&k||t.push({x:f,y:s,text:p,color:m,alpha:c?.35:void 0}),u)continue;let x=f+34+4;const E=d.instrument>0?om(d.instrument):k?"":"..";E&&t.push({x:x,y:s,text:E,color:d.instrument>0?r.cellInstrument.color:r.cellEmpty.color,alpha:c?.35:void 0}),x+=24;const C=d.volume>=16&&d.volume<=80,B=C?om(d.volume):k?"":"..";B&&t.push({x:x,y:s,text:B,color:C?r.cellVolume.color:r.cellEmpty.color,alpha:c?.35:void 0}),x+=24;const b=A.channelMeta?.effectCols??2;for(let e=0;e<b;e++){const i=0===e?d.effTyp??0:d.effTyp2??0,n=0===e?d.eff??0:d.eff2??0,o=sm(i,n,N);"..."===o&&k||t.push({x:x,y:s,text:o,color:i>0||n>0?r.cellEffect.color:r.cellEmpty.color,alpha:c?.35:void 0}),x+=34}if(h.flag1&&void 0!==d.flag1){const e=1===d.flag1?"A":2===d.flag1?"S":".",i=1===d.flag1?am:2===d.flag1?lm:r.cellEmpty.color;t.push({x:x,y:s,text:e,color:i,alpha:c?.35:void 0}),x+=14}if(h.flag2&&void 0!==d.flag2){const e=1===d.flag2?"M":2===d.flag2?"H":".",i=1===d.flag2?cm:2===d.flag2?Am:r.cellEmpty.color;t.push({x:x,y:s,text:e,color:i,alpha:c?.35:void 0}),x+=14}if(h.probability&&void 0!==d.probability){const e=d.probability>0?N?om(d.probability):d.probability.toString().padStart(2,"0"):k?"":"..";e&&t.push({x:x,y:s,text:e,color:d.probability>0?um(d.probability):r.cellEmpty.color,alpha:c?.35:void 0})}}}return t},[Te,o,Oe,Ge,ze,Xe,Fe,Je,d,N,k,Se,Pe,Me,e,Re,r,h,ve,_,P,V]);return n?i.jsxDEV("pixiContainer",{layout:{width:e,height:t,flexDirection:"column"},children:[i.jsxDEV(cf,{layout:{display:_e?"none":"flex",width:e,height:12},style:{zIndex:25},visible:!_e,children:i.jsxDEV(gm,{totalWidth:Ve,scrollLeft:ve,onScrollChange:e=>{Qe.current=e,we(e)}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1107,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1102,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{width:e,height:28},style:{overflow:"hidden",zIndex:20,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:i.jsxDEV(hm,{pattern:n,channelWidths:Me,totalChannelsWidth:Ve,scrollLeft:ve,onScrollChange:e=>{Qe.current=e,we(e)},channelSpeeds:M().getSong()?.channelSpeeds,songInitialSpeed:M().getSong()?.initialSpeed,onToggleMute:C,onToggleSolo:B,onToggleCollapse:b,onSetColor:I,onUpdateName:y,onAddChannel:E,onFillPattern:he,onClearChannel:ge,onCopyChannel:e=>w(e),onCutChannel:e=>Q(e),onPasteChannel:e=>D(e),onTranspose:pe,onHumanize:me,onInterpolate:xe,onReverseVisual:ee,onPolyrhythm:te,onFibonacci:ie,onEuclidean:re,onPingPong:ne,onGlitch:oe,onStrobe:se,onVisualEcho:le,onConverge:ce,onSpiral:Ae,onBounce:ue,onChaos:de},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1119,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1115,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:e,height:Fe},eventMode:"static",cursor:z?"grab":"text",onPointerDown:et,onPointerMove:tt,onPointerUp:it,onPointerUpOutside:it,children:[i.jsxDEV(cf,{layout:{position:"absolute",width:e,height:Fe,left:0,top:0},style:{pointerEvents:"none",zIndex:0},visible:R,children:i.jsxDEV(j,{width:e,height:Fe},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1172,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1167,columnNumber:9},void 0),i.jsxDEV("pixiGraphics",{draw:st,layout:{position:"absolute",width:e,height:Fe}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1175,columnNumber:9},void 0),at.map((e,t)=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:e.bold?ah:sh,fontSize:11,fill:16777215},tint:e.color,alpha:e.alpha??1,x:e.x,y:e.y},`cell-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1181,columnNumber:11},void 0)),i.jsxDEV(cf,{layout:{position:"absolute",width:e,height:Fe,left:0,top:0},style:{pointerEvents:Be?"auto":"none",zIndex:10,background:Be&&Ee?"rgba(99,102,241,0.08)":"transparent",transition:"background 0.15s"},visible:Be,children:i.jsxDEV("div",{style:{width:"100%",height:"100%"},onDragOver:Ke,onDragLeave:Ye,onDrop:qe},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1198,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1193,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1157,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{position:"absolute",width:e,height:t,left:0,top:0},style:{pointerEvents:"none",zIndex:30},children:[i.jsxDEV(H,{isOpen:W.isOpen,position:W.position,onClose:W.closeMenu,channelIndex:W.cellInfo?.channelIndex??0,rowIndex:W.cellInfo?.rowIndex??0,onOpenParameterEditor:q,onReverseVisual:()=>ee(W.cellInfo?.channelIndex??0),onPolyrhythm:()=>te(W.cellInfo?.channelIndex??0),onFibonacci:()=>ie(W.cellInfo?.channelIndex??0),onEuclidean:()=>re(W.cellInfo?.channelIndex??0),onPingPong:()=>ne(W.cellInfo?.channelIndex??0),onGlitch:()=>oe(W.cellInfo?.channelIndex??0),onStrobe:()=>se(W.cellInfo?.channelIndex??0),onVisualEcho:()=>le(W.cellInfo?.channelIndex??0),onConverge:()=>ce(W.cellInfo?.channelIndex??0),onSpiral:()=>Ae(W.cellInfo?.channelIndex??0),onBounce:()=>ue(W.cellInfo?.channelIndex??0),onChaos:()=>de(W.cellInfo?.channelIndex??0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1213,columnNumber:9},void 0),K?.isOpen&&i.jsxDEV(X,{onClose:()=>Y(null),channelIndex:K.channelIndex,startRow:K.startRow,endRow:K.endRow,field:K.field},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1236,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1208,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1098,columnNumber:5},void 0):i.jsxDEV("pixiContainer",{layout:{width:e,height:t},children:i.jsxDEV("pixiBitmapText",{text:"No pattern loaded",style:{fontFamily:sh,fontSize:12,fill:16777215},tint:r.textMuted.color,layout:{marginTop:40,marginLeft:20}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1087,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1086,columnNumber:7},void 0)},hm=({pattern:e,channelWidths:t,totalChannelsWidth:r,scrollLeft:n,onScrollChange:o,channelSpeeds:s,songInitialSpeed:a,onToggleMute:c,onToggleSolo:A,onToggleCollapse:u,onSetColor:d,onUpdateName:h,onAddChannel:g,onFillPattern:f,onClearChannel:p,onCopyChannel:m,onCutChannel:x,onPasteChannel:E,onTranspose:C,onHumanize:B,onInterpolate:b,onReverseVisual:I,onPolyrhythm:y,onFibonacci:v,onEuclidean:w,onPingPong:Q,onGlitch:D,onStrobe:N,onVisualEcho:k,onConverge:S,onSpiral:P,onBounce:M,onChaos:V})=>{const _=ae.useRef(null),L=l(e=>e.showChannelNames),R=ae.useCallback(e=>{const t=e.currentTarget.scrollLeft;setTimeout(()=>o(t),0)},[o]);return ae.useEffect(()=>{_.current&&Math.abs(_.current.scrollLeft-n)>1&&(_.current.scrollLeft=n)},[n]),i.jsxDEV("div",{className:"flex-shrink-0 bg-dark-bgTertiary border-dark-border z-20 relative h-[28px]",children:i.jsxDEV("div",{className:"flex h-full",children:[i.jsxDEV("div",{className:"flex-shrink-0 px-2 text-text-muted text-xs font-medium text-center border-r border-dark-border flex items-center justify-center",style:{width:im},children:"ROW"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1344,columnNumber:9},void 0),i.jsxDEV("div",{ref:_,onScroll:R,className:"overflow-x-hidden overflow-y-hidden flex-1","data-vu-scroll":!0,children:i.jsxDEV("div",{className:"flex",style:{width:r},children:[e.channels.map((r,n)=>{const o=t[n],l=r.collapsed;return i.jsxDEV("div",{className:`flex-shrink-0 flex items-center justify-between gap-1 ${l?"px-1":"px-2"} py-1\n                    border-r border-dark-border transition-colors relative\n                    ${r.muted?"opacity-50":""}\n                    ${r.solo?"bg-accent-primary/10":""}`,style:{width:o,backgroundColor:r.color?`${r.color}15`:void 0,boxShadow:r.color?`inset 2px 0 0 ${r.color}`:void 0},children:[!l&&i.jsxDEV("div",{className:"flex items-center gap-1.5 overflow-hidden flex-1 min-w-0",children:[i.jsxDEV("span",{className:"font-bold font-mono text-[11px] flex-shrink-0 opacity-80",style:{color:r.color||"var(--color-accent)"},children:(n+1).toString().padStart(2,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1378,columnNumber:23},void 0),s&&void 0!==s[n]&&s[n]!==a&&i.jsxDEV("span",{className:"flex-shrink-0 font-mono text-[9px] font-bold px-0.5 rounded",style:{background:"rgba(251,191,36,0.15)",color:"#fbbf24",border:"1px solid rgba(251,191,36,0.35)"},title:`Channel speed: ${s[n]} ticks/row${s[n]>0&&s[n]!==(a??0)?` (song: ${a})`:""}`,children:["S:",s[n]]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1385,columnNumber:25},void 0),L&&i.jsxDEV("input",{type:"text",className:"bg-transparent border-none outline-none font-mono text-[10px] font-bold text-text-primary focus:text-accent-primary transition-colors min-w-0 flex-1 overflow-hidden text-ellipsis uppercase px-0 placeholder:text-text-muted/50",value:r.name||"",placeholder:`CH${n+1}`,onChange:e=>setTimeout(()=>h(n,e.target.value),0),onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},title:`Click to rename channel (Short: ${r.shortName||n+1})`},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1394,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1377,columnNumber:21},void 0),!l&&i.jsxDEV("div",{className:"flex items-center gap-0.5 flex-shrink-0 ml-1",children:[i.jsxDEV(z,{channelIndex:n,channel:r,patternId:e.id,patternLength:e.length,onFillPattern:f,onClearChannel:p,onCopyChannel:m,onCutChannel:x,onPasteChannel:E,onTranspose:C,onHumanize:B,onInterpolate:b,onAcidGenerator:()=>{},onRandomize:()=>{},onToggleCollapse:u,onReverseVisual:I,onPolyrhythm:y,onFibonacci:v,onEuclidean:w,onPingPong:Q,onGlitch:D,onStrobe:N,onVisualEcho:k,onConverge:S,onSpiral:P,onBounce:M,onChaos:V},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1409,columnNumber:23},void 0),i.jsxDEV(J,{currentColor:r.color,onColorSelect:e=>setTimeout(()=>d(n,e),0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1438,columnNumber:23},void 0),i.jsxDEV("button",{onClick:()=>setTimeout(()=>c(n),0),className:"p-1 rounded transition-colors "+(r.muted?"bg-accent-error/20 text-accent-error":"text-text-muted hover:text-text-primary hover:bg-dark-bgHover"),title:r.muted?"Unmute":"Mute",children:r.muted?i.jsxDEV(pe,{size:12},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1451,columnNumber:42},void 0):i.jsxDEV(me,{size:12},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1451,columnNumber:66},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1442,columnNumber:23},void 0),i.jsxDEV("button",{onClick:()=>setTimeout(()=>A(n),0),className:"p-1 rounded transition-colors "+(r.solo?"bg-accent-primary/20 text-accent-primary":"text-text-muted hover:text-text-primary hover:bg-dark-bgHover"),title:r.solo?"Unsolo":"Solo",children:i.jsxDEV(xe,{size:12},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1462,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1453,columnNumber:23},void 0),i.jsxDEV("button",{onClick:()=>setTimeout(()=>u(n),0),className:"p-1 rounded transition-colors text-text-muted hover:text-text-primary hover:bg-dark-bgHover",title:"Collapse Channel",children:i.jsxDEV(Ee,{size:12},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1469,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1464,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1408,columnNumber:21},void 0),l&&i.jsxDEV("div",{className:"flex items-center justify-between w-full px-1",children:[i.jsxDEV("span",{className:"font-bold font-mono text-[9px] flex-shrink-0 opacity-80",style:{color:r.color||"var(--color-accent)"},children:(n+1).toString().padStart(2,"0")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1477,columnNumber:23},void 0),i.jsxDEV("button",{onClick:()=>setTimeout(()=>u(n),0),className:"p-0.5 rounded transition-colors text-text-muted hover:text-text-primary hover:bg-dark-bgHover",title:"Expand Channel",children:i.jsxDEV(Ce,{size:10},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1488,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1483,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1476,columnNumber:21},void 0)]},r.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1364,columnNumber:17},void 0)}),e.channels.length<16&&i.jsxDEV("button",{onClick:()=>setTimeout(()=>g(),0),className:"flex-shrink-0 w-12 flex items-center justify-center border-r border-dark-border\n                  text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Add Channel",children:i.jsxDEV(Be,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1504,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1498,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1358,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1352,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1342,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1341,columnNumber:5},void 0)},gm=({totalWidth:e,scrollLeft:t,onScrollChange:r})=>{const n=ae.useRef(null),o=ae.useCallback(e=>{const t=e.currentTarget.scrollLeft;setTimeout(()=>r(t),0)},[r]);return ae.useEffect(()=>{n.current&&Math.abs(n.current.scrollLeft-t)>1&&(n.current.scrollLeft=t)},[t]),i.jsxDEV("div",{ref:n,onScroll:o,className:"h-3 bg-dark-bgTertiary border-b border-dark-border overflow-x-auto",style:{paddingLeft:im},children:i.jsxDEV("div",{style:{width:e,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1546,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiPatternEditor.tsx",lineNumber:1540,columnNumber:5},void 0)},fm=["B","A#","A","G#","G","F#","F","E","D#","D","C#","C"],pm=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],mm=[11,10,9,8,7,6,5,4,3,2,1,0],xm=48,Em=32,Cm=24,Bm=({channelIndex:e,width:r,height:n})=>{const o=ph(),s=t(e=>e.getCurrentTheme().colors),{gridPattern:a,baseOctave:l,setBaseOctave:c,maxSteps:A,setMaxSteps:u,setNote:d,toggleAccent:h,toggleSlide:m,toggleMute:x,toggleHammer:C,setOctaveShift:B,setVelocity:b,clearAll:I}=W(e),{currentRow:y,isPlaying:v}=p(g(e=>({currentRow:e.currentRow,isPlaying:e.isPlaying}))),w=v?y%A:-1,[Q,D]=ae.useState("chromatic"),[N]=ae.useState(0),[k,P]=ae.useState({noteIndex:11,stepIndex:0}),M=ae.useRef(a.steps);ae.useEffect(()=>{M.current=a.steps},[a.steps]);const V=ae.useMemo(()=>{const e=Y[Q];return e&&"chromatic"!==Q?mm.filter(t=>K(t,N,e)):mm},[Q,N]),_=ae.useMemo(()=>{const e=r-xm-16,t=Math.floor(e/A);return Math.max(14,Math.min(28,t-2))},[r,A]),L=ae.useMemo(()=>{if(w<0)return new Map;const e=new Map;for(let t=1;t<=7;t++){const i=(w-t+A)%A;e.set(i,.5-.07*(t-1))}return e},[w,A]),R=ae.useCallback((t,i=0)=>{try{const r=E();if(!r)return;const{patterns:n,currentPatternIndex:o}=f.getState(),s=n[o],a=s?.channels[e],c=a?.instrumentId??1,A=S.getState().instruments.find(e=>e.id===c);if(A){const e=`${pm[t]}${l+i}`;r.triggerNote(c,e,.2,fe(),.8,A,!1,!1)}}catch(r){}},[e,l]),U=ae.useCallback((e,t)=>{const i=M.current[t];if(i?.noteIndex===e)d(t,null);else{const r=null!==i?.noteIndex?i.octaveShift:0;d(t,e,r),R(e,r)}},[d,R]),T=ae.useCallback(e=>{const t=e.getLocalPosition(e.currentTarget),i=t.x-xm,r=t.y-Em;if(i<0||r<0)return;const n=Math.floor(i/(_+2)),o=Math.floor(r/Cm);if(n<0||n>=A||o<0||o>=V.length)return;const s=V[o];P({noteIndex:s,stepIndex:n});const a=e.nativeEvent;if(a.shiftKey){const e=M.current[n];e?.noteIndex===s&&h(n)}else if(a.ctrlKey||a.metaKey){const e=M.current[n];e?.noteIndex===s&&m(n)}else if(a.altKey){const e=M.current[n];if(e?.noteIndex===s){const t=e.octaveShift;B(n,0===t?1:1===t?-1:0)}}else U(s,n)},[_,A,V,U,h,m,B]),O=ae.useCallback(e=>{e.clear();const t=A*(_+2),i=V.length*Cm,n=Em+i;e.rect(0,0,Math.max(r,xm+t+8),n),e.fill({color:o.bg.color}),e.rect(xm,0,t,Em),e.fill({color:o.bgSecondary.color});for(let r=0;r<A;r++){const t=xm+r*(_+2),i=w===r,n=r%4==0;i&&(e.rect(t,0,_,Em),e.fill({color:15680580,alpha:.6})),n&&!i&&(e.rect(t,30,_,2),e.fill({color:o.accent.color,alpha:.15}))}for(let r=0;r<V.length;r++){const i=V[r],n=Em+r*Cm,s=i===N,l=fm[mm.indexOf(i)].includes("#");e.rect(0,n,xm+t+8,Cm),e.fill({color:l?o.bgSecondary.color:o.bg.color,alpha:l?.6:1}),s&&(e.rect(0,n,2,Cm),e.fill({color:o.accent.color})),e.rect(0,n+Cm-1,xm+t+8,1),e.fill({color:o.border.color,alpha:.08});for(let t=0;t<A;t++){const r=xm+t*(_+2),s=a.steps[t],l=s?.noteIndex===i,c=w===t,A=t%4==0,u=L.get(t)??0,d=k?.noteIndex===i&&k?.stepIndex===t;if(l){const t=s?.accent?14251782:o.accent.color;e.roundRect(r,n+1,_,22,2),e.fill({color:t,alpha:.85}),s?.slide&&(e.moveTo(r+_-6,n+2),e.lineTo(r+_-1,n+7),e.stroke({color:o.accentSecondary.color,width:1.5,alpha:.9})),1===s?.octaveShift?(e.roundRect(r+1,n+2,_-2,20,2),e.stroke({color:2282478,width:1.5,alpha:.6})):-1===s?.octaveShift&&(e.roundRect(r+1,n+2,_-2,20,2),e.stroke({color:15485081,width:1.5,alpha:.6})),s?.mute&&(e.moveTo(r+2,n+2),e.lineTo(r+_-2,n+Cm-2),e.moveTo(r+_-2,n+2),e.lineTo(r+2,n+Cm-2),e.stroke({color:16729156,width:1,alpha:.7})),s?.hammer&&(e.rect(r+2,n+Cm-5,_-4,2),e.fill({color:2282478,alpha:.8}))}else e.roundRect(r,n+1,_,22,2),e.fill({color:o.bgTertiary.color,alpha:A?.6:.3});c&&(e.roundRect(r,n+1,_,22,2),e.fill({color:15680580,alpha:l?.5:.15})),u>0&&!c&&(e.roundRect(r,n+1,_,22,2),e.fill({color:15680580,alpha:.12*u})),d&&(e.roundRect(r-.5,n+.5,_+1,23,2),e.stroke({color:o.accent.color,width:1.5,alpha:.8}))}}e.rect(0,31,xm+t+8,1),e.fill({color:o.border.color,alpha:.2})},[r,o,A,_,V,a.steps,w,N,L,k]),F=ae.useMemo(()=>{const e=[];for(let t=0;t<A;t++)e.push({x:xm+t*(_+2)+_/2-5,text:t.toString().padStart(2,"0"),highlight:w===t});return e},[A,_,w]),G=ae.useMemo(()=>V.map((e,t)=>{const i=mm.indexOf(e);return{y:Em+t*Cm+12-4,text:fm[i],isRoot:e===N,isSharp:fm[i].includes("#")}}),[V,N]);ae.useEffect(()=>{const e=e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLSelectElement)return;if(!k)return;const{noteIndex:t,stepIndex:i}=k,r=M.current[i],n=r?.noteIndex===t;if("ArrowRight"===e.key)e.preventDefault(),P({noteIndex:t,stepIndex:Math.min(i+1,A-1)});else if("ArrowLeft"===e.key)e.preventDefault(),P({noteIndex:t,stepIndex:Math.max(i-1,0)});else if("ArrowDown"===e.key){e.preventDefault();const r=V.indexOf(t),n=Math.min(r+1,V.length-1);P({noteIndex:V[n],stepIndex:i})}else if("ArrowUp"===e.key){e.preventDefault();const r=V.indexOf(t),n=Math.max(r-1,0);P({noteIndex:V[n],stepIndex:i})}else if("Enter"===e.key||" "===e.key)e.preventDefault(),U(t,i);else if(n)if("a"===e.key||"A"===e.key)e.preventDefault(),h(i);else if("s"===e.key||"S"===e.key)e.preventDefault(),m(i);else if("m"===e.key||"M"===e.key)e.preventDefault(),x(i);else if("h"===e.key||"H"===e.key)e.preventDefault(),C(i);else if("o"===e.key||"O"===e.key){e.preventDefault();const t=r.octaveShift;B(i,0===t?1:1===t?-1:0)}else"+"===e.key||"="===e.key?(e.preventDefault(),b(i,Math.min(127,(r?.velocity??100)+10))):"-"!==e.key&&"_"!==e.key||(e.preventDefault(),b(i,Math.max(1,(r?.velocity??100)-10)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[k,A,V,U,h,m,x,C,B,b]);const j=ae.useCallback(()=>{for(let e=0;e<A;e++)if(Math.random()<.7){const t=Math.floor(12*Math.random()),i=Math.random()<.3?Math.random()<.5?-1:1:0;d(e,t,i),Math.random()<.25&&h(e),e>0&&Math.random()<.2&&m(e)}else d(e,null)},[A,d,h,m]),H=ae.useCallback(e=>{e.clear(),e.rect(0,0,r,36),e.fill({color:o.bgSecondary.color}),e.rect(0,35,r,1),e.fill({color:o.border.color,alpha:o.border.alpha})},[r,o]),X=n-36;return i.jsxDEV("pixiContainer",{layout:{width:r,height:n,flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:r,height:36,flexDirection:"row",alignItems:"center",paddingLeft:8,gap:8},children:[i.jsxDEV("pixiGraphics",{draw:H,layout:{position:"absolute",width:r,height:36}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:436,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"OCTAVE",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:438,columnNumber:9},void 0),i.jsxDEV(bh,{label:"-",variant:"ghost",size:"sm",onClick:()=>c(Math.max(1,l-1))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:439,columnNumber:9},void 0),i.jsxDEV(Ig,{text:`${l}`,size:"sm",weight:"bold"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:440,columnNumber:9},void 0),i.jsxDEV(bh,{label:"+",variant:"ghost",size:"sm",onClick:()=>c(Math.min(6,l+1))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:441,columnNumber:9},void 0),i.jsxDEV("pixiGraphics",{draw:e=>{e.clear(),e.rect(0,4,1,24),e.fill({color:o.border.color,alpha:.25})},layout:{width:1,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:444,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"STEPS",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:449,columnNumber:9},void 0),i.jsxDEV(jg,{value:A,min:4,max:64,onChange:u,width:44},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:450,columnNumber:9},void 0),i.jsxDEV(cf,{layout:{height:24,width:100},style:{overflow:"visible"},children:i.jsxDEV("select",{value:Q,onChange:e=>D(e.target.value),style:{width:"100%",height:"100%",padding:"0 4px",fontSize:"11px",fontFamily:"monospace",background:s.bg,color:s.text,border:`1px solid ${s.border}`,borderRadius:"3px",cursor:"pointer",outline:"none"},children:Object.keys(Y).map(e=>i.jsxDEV("option",{value:e,children:e.toUpperCase()},e,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:463,columnNumber:43},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:454,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:453,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:468,columnNumber:9},void 0),i.jsxDEV(bh,{label:"RANDOM",variant:"ghost",size:"sm",onClick:j},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:470,columnNumber:9},void 0),i.jsxDEV(bh,{label:"CLEAR",variant:"ghost",size:"sm",color:"red",onClick:I},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:471,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:426,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:r,height:X},eventMode:"static",cursor:"pointer",onPointerDown:T,children:[i.jsxDEV("pixiGraphics",{draw:O,layout:{position:"absolute",width:r,height:X}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:481,columnNumber:9},void 0),F.map(e=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:e.highlight?16777215:o.textMuted.color,layout:{position:"absolute",left:e.x,top:11}},`step-${e.text}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:485,columnNumber:11},void 0)),G.map(e=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:e.isRoot?ah:sh,fontSize:10,fill:16777215},tint:e.isRoot?o.accent.color:e.isSharp?o.textMuted.color:o.textSecondary.color,layout:{position:"absolute",left:16,top:e.y}},`note-${e.text}-${e.y}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:496,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:475,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiGridSequencer.tsx",lineNumber:424,columnNumber:5},void 0)},bm=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Im=e=>{if("number"==typeof e){if(0===e||97===e)return{note:"C",octave:2};const t=q(e),i=t.substring(0,2),r=parseInt(t.substring(2),10);let n=2;return r<=2?n=1:r>=4&&(n=3),{note:i.replace("-",""),octave:n}}if("string"==typeof e){if(!e||"..."===e||"==="===e)return{note:"C",octave:2};const t=e.substring(0,2),i=parseInt(e.substring(2),10);let r=2;return i<=2?r=1:i>=4&&(r=3),{note:t.replace("-",""),octave:r}}return{note:"C",octave:2}},ym=(e,t)=>{const i=1===t?2:2===t?3:4,r=1===e.length?`${e}-`:e;return Z(`${r}${i}`)},vm=48,wm=120,Qm=({channelIndex:e=0,width:t,height:r})=>{const n=ph(),{patterns:o,currentPatternIndex:s,setCell:a}=f(g(e=>({patterns:e.patterns,currentPatternIndex:e.currentPatternIndex,setCell:e.setCell}))),{instruments:l,updateInstrument:c}=S(g(e=>({instruments:e.instruments,updateInstrument:e.updateInstrument}))),A=p(e=>e.isPlaying),u=p(e=>e.currentRow),d=p(e=>e.bpm),h=o[s],m=h?.channels[e],x=m?.instrumentId??0;let C=l.find(e=>e.id===x);const B=ae.useMemo(()=>l.filter(e=>"TB303"===e.synthType||"Buzz3o3"===e.synthType),[l]);ae.useEffect(()=>{(!C||"TB303"!==C.synthType&&"Buzz3o3"!==C.synthType)&&1===B.length&&f.setState(t=>{const i=t.patterns[t.currentPatternIndex];i?.channels[e]&&(i.channels[e].instrumentId=B[0].id)})},[C,B,e]),C=l.find(e=>e.id===(m?.instrumentId??0));const b=A?u%16:-1,I=ae.useRef(C),y=ae.useRef(C?.tb303);ae.useEffect(()=>{I.current=C,y.current=C?.tb303},[C]);const v=ae.useRef(null),w=ae.useCallback(e=>{v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{c(x,e),v.current=null},300)},[x,c]),Q=C?.tb303,D="square"===Q?.oscillator.type?1:0,N=Q?.filter.cutoff??.5,k=Q?.filter.resonance??.5,P=Q?.filterEnvelope.envMod??.5,M=Q?.devilFish?.enabled?Q?.devilFish?.normalDecay??.164:Q?.filterEnvelope.decay??.5,V=Q?.accent.amount??.5,_=ae.useMemo(()=>{if(!h||!h.channels[e])return Array.from({length:16},()=>({active:!1,note:"C",octave:2,accent:!1,slide:!1}));const t=h.channels[e],i=[];for(let e=0;e<16;e++){const r=t.rows[e],n=!(!r||!r.note||0===r.note||97===r.note),{note:o,octave:s}=n?Im(r.note):{note:"C",octave:2};i.push({active:n,note:o,octave:s,accent:!(1!==r?.flag1&&1!==r?.flag2),slide:!(2!==r?.flag1&&2!==r?.flag2)})}return i},[h,e]),R=ae.useCallback(e=>t=>{const i=y.current;if(!I.current||!i)return;const r=e(i,t);E().updateTB303Parameters(x,r),w({tb303:r})},[x,w]),U=R((e,t)=>({...e,filter:{...e.filter,cutoff:t}})),T=R((e,t)=>({...e,filter:{...e.filter,resonance:t}})),O=R((e,t)=>({...e,filterEnvelope:{...e.filterEnvelope,envMod:t}})),F=R((e,t)=>({...e,filterEnvelope:{...e.filterEnvelope,decay:t},devilFish:{...L.devilFish,...e.devilFish||{},normalDecay:t}})),G=R((e,t)=>({...e,accent:{...e.accent,amount:t}})),j=R((e,t)=>({...e,oscillator:{...e.oscillator,type:t<.5?"sawtooth":"square"}})),H=ae.useCallback(t=>{const i=_[t];a(e,t,{note:i.active?0:ym(i.note,i.octave),flag1:i.accent?1:void 0,flag2:i.slide?2:void 0})},[e,a,_]),X=ae.useCallback(t=>{const i=_[t];i.active&&a(e,t,{note:ym(i.note,i.octave),flag1:i.accent?0:1,flag2:i.slide?2:void 0})},[e,a,_]),z=ae.useCallback(t=>{const i=_[t];i.active&&a(e,t,{note:ym(i.note,i.octave),flag1:i.accent?1:void 0,flag2:i.slide?0:2})},[e,a,_]),J=ae.useCallback((t,i)=>{const r=_[t];if(!r.active)return;const n=bm.indexOf(r.note);a(e,t,{note:ym(bm[(n+i+12)%12],r.octave),flag1:r.accent?1:void 0,flag2:r.slide?2:void 0})},[e,a,_]),W=ae.useCallback(t=>{const i=_[t];if(!i.active)return;const r=1===i.octave?2:2===i.octave?3:1;a(e,t,{note:ym(i.note,r),flag1:i.accent?1:void 0,flag2:i.slide?2:void 0})},[e,a,_]),K=ae.useCallback(()=>{for(let t=0;t<16;t++)a(e,t,{note:0,flag1:0,flag2:0})},[e,a]),Y=ae.useCallback(()=>{for(let t=0;t<16;t++){const i=Math.random()>.3,r=bm[Math.floor(12*Math.random())],n=Math.floor(3*Math.random())+1;a(e,t,{note:i?ym(r,n):0,flag1:Math.random()>.7?1:0,flag2:Math.random()>.8?2:0})}},[e,a]),q=ae.useCallback(e=>{const t=e.getLocalPosition(e.currentTarget),i=t.x-8,r=t.y;if(i<0)return;const n=Math.floor(i/51);if(n<0||n>=16)return;const o=r,s=e.nativeEvent;o<12?H(n):o<38?J(n,s.shiftKey?-1:1):o<63?W(n):o<88?X(n):z(n)},[H,J,W,X,z]),Z=ae.useCallback(e=>{e.clear();e.rect(0,0,Math.max(t,832),132),e.fill({color:n.bg.color});for(let t=0;t<16;t++){const i=8+51*t,r=_[t],o=b===t,s=t%4==0;e.roundRect(i,12,vm,wm,4),e.fill({color:r.active?o?15680580:n.accent.color:s?n.bgTertiary.color:n.bgSecondary.color,alpha:r.active?o?.5:.25:.8}),e.roundRect(i,12,vm,wm,4),e.stroke({color:r.active?n.accent.color:n.border.color,width:1,alpha:r.active?.6:.3}),e.circle(i+24,4,3),e.fill({color:o?15680580:r.active?n.accent.color:n.textMuted.color,alpha:o?1:.3}),r.active&&(r.accent&&(e.rect(i+2,102,44,12),e.fill({color:14251782,alpha:.5})),r.slide&&(e.rect(i+2,116,44,12),e.fill({color:n.accentSecondary.color,alpha:.5}))),o&&(e.roundRect(i-1,11,50,122,5),e.stroke({color:15680580,width:2,alpha:.7}))}},[t,832,n,_,b]),$=ae.useMemo(()=>{const e=[];for(let t=0;t<16;t++){const i=8+51*t,r=_[t];if(e.push({x:i+24-5,y:16,text:(t+1).toString().padStart(2,"0"),color:n.textMuted.color}),r.active){e.push({x:i+24-6,y:32,text:r.note,color:16777215,bold:!0});const t=1===r.octave?"DN":3===r.octave?"UP":"--";e.push({x:i+24-6,y:50,text:t,color:2!==r.octave?n.accent.color:n.textMuted.color}),e.push({x:i+24-5,y:104,text:"AC",color:r.accent?14251782:n.textMuted.color,bold:r.accent}),e.push({x:i+24-5,y:118,text:"SL",color:r.slide?n.accentSecondary.color:n.textMuted.color,bold:r.slide})}}return e},[_,n]),ee=ae.useCallback(e=>{e.clear(),e.rect(0,0,t,32),e.fill({color:n.bgSecondary.color}),e.rect(0,31,t,1),e.fill({color:n.border.color,alpha:n.border.alpha})},[t,n]),te=!!C;return i.jsxDEV("pixiContainer",{layout:{width:t,height:r},children:[i.jsxDEV("pixiBitmapText",{alpha:te?0:1,renderable:!te,text:te?"":`No instrument on Ch ${e+1}`,style:{fontFamily:sh,fontSize:12,fill:16777215},tint:n.error.color,layout:{position:"absolute",marginTop:40,marginLeft:20}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:399,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{alpha:te?1:0,renderable:te,eventMode:te?"static":"none",layout:{width:t,height:r,flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:t,height:32,flexDirection:"row",alignItems:"center",paddingLeft:8,gap:8},children:[i.jsxDEV("pixiGraphics",{draw:ee,layout:{position:"absolute",width:t,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:412,columnNumber:11},void 0),i.jsxDEV(Ig,{text:"TB-303",size:"sm",weight:"bold",color:"accent"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:414,columnNumber:11},void 0),A&&i.jsxDEV(Ig,{text:`Step ${(b+1).toString().padStart(2,"0")}/16 @ ${d} BPM`,size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:417,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:420,columnNumber:11},void 0),i.jsxDEV(bh,{label:"RANDOM",variant:"ghost",size:"sm",onClick:Y},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:422,columnNumber:11},void 0),i.jsxDEV(bh,{label:"CLEAR",variant:"ghost",size:"sm",color:"red",onClick:K},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:423,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:411,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:t,height:136},eventMode:"static",cursor:"pointer",onPointerDown:q,children:[i.jsxDEV("pixiGraphics",{draw:Z,layout:{position:"absolute",width:t,height:136}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:433,columnNumber:11},void 0),$.map((e,t)=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:e.bold?ah:sh,fontSize:9,fill:16777215},tint:e.color,layout:{position:"absolute",left:e.x,top:e.y}},t,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:437,columnNumber:13},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:427,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:t,height:130,flexDirection:"row",gap:12,paddingLeft:16,paddingTop:8},children:[i.jsxDEV(kg,{label:"Waveform",value:D,min:0,max:1,onChange:j,size:"sm"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:449,columnNumber:11},void 0),i.jsxDEV(kg,{label:"Cutoff",value:N,min:0,max:1,onChange:U,size:"sm"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:450,columnNumber:11},void 0),i.jsxDEV(kg,{label:"Resonance",value:k,min:0,max:1,onChange:T,size:"sm"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:451,columnNumber:11},void 0),i.jsxDEV(kg,{label:"Env Mod",value:P,min:0,max:1,onChange:O,size:"sm"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:452,columnNumber:11},void 0),i.jsxDEV(kg,{label:"Decay",value:M,min:0,max:1,onChange:F,size:"sm"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:453,columnNumber:11},void 0),i.jsxDEV(kg,{label:"Accent",value:V,min:0,max:1,onChange:G,size:"sm"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:454,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:448,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:409,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/tracker/PixiTB303View.tsx",lineNumber:396,columnNumber:5},void 0)},Dm=["C-","C#","D-","D#","E-","F-","F#","G-","G#","A-","A#","B-"];function Nm(e){if(0===e)return"---";if(97===e)return"OFF";const t=e-1,i=t%12,r=Math.floor(t/12);return`${Dm[i]}${r}`}function km(e){return e.toString(16).toUpperCase().padStart(2,"0")}function Sm(e,t){if(0===e&&0===t)return"...";return`${e<10?String(e):String.fromCharCode(55+e)}${km(t)}`}const Pm=18,Mm=24,Vm=32,_m=({channelIndex:e=0,width:t,height:r})=>{const n=ph(),{patterns:o,currentPatternIndex:s,setCell:a}=f(g(e=>({patterns:e.patterns,currentPatternIndex:e.currentPatternIndex,setCell:e.setCell}))),l=p(e=>e.isPlaying),c=p(e=>e.currentRow),A=p(e=>e.bpm),u=o[s],d=u?.channels[e],h=u?.length??64,m=d?.channelMeta?.sunvoxModuleId,[x,E]=ae.useState(0),C=ae.useRef(0),B=f(e=>e.cursor.rowIndex),b=l?c%h:B,I=r-32-Mm,y=Math.ceil(I/Pm)+2,v=Math.floor(y/2),w=Math.floor(I/2)-9;ae.useEffect(()=>{const e=b-v;e!==C.current&&(C.current=e,E(e))},[b,v]);const Q=x,D=w-v*Pm,N=ae.useCallback(()=>{if(u)for(let t=0;t<h;t++)a(e,t,{note:0,instrument:0,volume:0,effTyp:0,eff:0})},[e,a,u,h]),k=ae.useCallback(e=>{e.clear(),e.rect(0,0,t,I),e.fill({color:n.bg.color});for(let i=0;i<y;i++){const r=Q+i,o=D+i*Pm;if(o+Pm<0||o>I)continue;if(r<0||r>=h)continue;const s=r%4==0;e.rect(Vm,o,t-Vm,Pm),e.fill({color:s?n.trackerRowHighlight.color:n.trackerRowOdd.color,alpha:s?n.trackerRowHighlight.alpha:n.trackerRowOdd.alpha}),r===b&&(e.rect(0,o,t,Pm),e.fill({color:n.accentGlow.color,alpha:n.accentGlow.alpha}))}e.rect(0,0,Vm,I),e.fill({color:n.bg.color,alpha:.85}),e.rect(31,0,1,I),e.fill({color:n.border.color,alpha:n.border.alpha})},[t,I,n,y,Q,D,h,b]),S=ae.useCallback(e=>{e.clear(),e.rect(0,0,t,Mm),e.fill({color:n.bgTertiary.color}),e.rect(0,23,t,1),e.fill({color:n.border.color,alpha:n.border.alpha})},[t,n]),P=ae.useMemo(()=>{if(!d)return[];const e=[];for(let t=0;t<y;t++){const i=Q+t,r=D+t*Pm+9-5.5;if(r+Pm<-18||r>I+Pm)continue;if(i<0||i>=h)continue;const o=i%4==0,s=i.toString(16).toUpperCase().padStart(2,"0");e.push({x:4,y:r,text:s,color:o?n.accentSecondary.color:n.textMuted.color});const a=d.rows[i];if(!a)continue;const l=i===b;let c=40;const A=Nm(a.note??0),u=97===a.note?n.cellEffect.color:a.note>0&&a.note<97?l?16777215:n.cellNote.color:n.cellEmpty.color;e.push({x:c,y:r,text:A,color:u}),c+=34;const g=a.instrument>0?km(a.instrument):"..",f=a.instrument>0?n.cellInstrument.color:n.cellEmpty.color;e.push({x:c,y:r,text:g,color:f}),c+=24;const p=a.volume>=16&&a.volume<=80,m=p?km(a.volume):"..",x=p?n.cellVolume.color:n.cellEmpty.color;e.push({x:c,y:r,text:m,color:x}),c+=24;const E=Sm(a.effTyp??0,a.eff??0),C=(a.effTyp??0)>0||(a.eff??0)>0?n.cellEffect.color:n.cellEmpty.color;e.push({x:c,y:r,text:E,color:C}),c+=34;const B=Sm(a.effTyp2??0,a.eff2??0),y=(a.effTyp2??0)>0||(a.eff2??0)>0?n.cellEffect.color:n.cellEmpty.color;e.push({x:c,y:r,text:B,color:y})}return e},[d,y,Q,D,I,h,b,n]),M=ae.useMemo(()=>{let e=40;const t=[{x:4,text:"ROW",color:n.textMuted.color},{x:e,text:"NOTE",color:n.textMuted.color}];return e+=34,t.push({x:e,text:"INS",color:n.textMuted.color}),e+=24,t.push({x:e,text:"VOL",color:n.textMuted.color}),e+=24,t.push({x:e,text:"EFF1",color:n.textMuted.color}),e+=34,t.push({x:e,text:"EFF2",color:n.textMuted.color}),t.map(e=>({...e,y:6.5}))},[n]),V=ae.useCallback(e=>{e.clear(),e.rect(0,0,t,32),e.fill({color:n.bgSecondary.color}),e.rect(0,31,t,1),e.fill({color:n.border.color,alpha:n.border.alpha})},[t,n]),_=!!d;return i.jsxDEV("pixiContainer",{layout:{width:t,height:r},children:[i.jsxDEV("pixiBitmapText",{alpha:_?0:1,renderable:!_,text:_?"":`No channel at index ${e}`,style:{fontFamily:sh,fontSize:12,fill:16777215},tint:n.error.color,layout:{position:"absolute",marginTop:40,marginLeft:20}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:288,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{alpha:_?1:0,renderable:_,eventMode:_?"static":"none",layout:{width:t,height:r,flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:t,height:32,flexDirection:"row",alignItems:"center",paddingLeft:8,gap:8},children:[i.jsxDEV("pixiGraphics",{draw:V,layout:{position:"absolute",width:t,height:32}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:302,columnNumber:11},void 0),i.jsxDEV(Ig,{text:"SUNVOX",size:"sm",weight:"bold",color:"accent"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:304,columnNumber:11},void 0),void 0!==m&&i.jsxDEV(Ig,{text:`MOD:${m}`,size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:307,columnNumber:13},void 0),i.jsxDEV(Ig,{text:`CH ${(e+1).toString().padStart(2,"0")}`,size:"xs",color:"textSecondary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:310,columnNumber:11},void 0),l&&i.jsxDEV(Ig,{text:`ROW ${b.toString(16).toUpperCase().padStart(2,"0")} / ${h.toString(16).toUpperCase().padStart(2,"0")} @ ${A} BPM`,size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:313,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:320,columnNumber:11},void 0),i.jsxDEV(bh,{label:"CLEAR",variant:"ghost",size:"sm",color:"red",onClick:N},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:322,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:301,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:t,height:Mm},children:[i.jsxDEV("pixiGraphics",{draw:S,layout:{position:"absolute",width:t,height:Mm}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:327,columnNumber:11},void 0),M.map((e,t)=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:ah,fontSize:9,fill:16777215},tint:e.color,layout:{position:"absolute",left:e.x,top:e.y}},`hdr-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:329,columnNumber:13},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:326,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{width:t,height:I},children:[i.jsxDEV("pixiGraphics",{draw:k,layout:{position:"absolute",width:t,height:I}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:341,columnNumber:11},void 0),P.map((e,t)=>i.jsxDEV("pixiBitmapText",{text:e.text,style:{fontFamily:sh,fontSize:11,fill:16777215},tint:e.color,layout:{position:"absolute",left:e.x,top:e.y}},`cell-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:344,columnNumber:13},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:340,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:298,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/sunvox/PixiSunVoxChannelView.tsx",lineNumber:285,columnNumber:5},void 0)},Lm=new Set([1,3,6,8,10]),Rm=({width:e=60,height:t,noteHeight:r=12,scrollNote:n=36,totalNotes:o=128})=>{const s=ph(),a=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:s.bgSecondary.color});const a=Math.ceil(t/r)+1,l=Math.max(0,Math.floor(n)),c=Math.min(o,l+a);for(let o=l;o<c;o++){const a=t-(o-n+1)*r;if(a>t||a+r<0)continue;const l=o%12;Lm.has(l)?(i.rect(0,a,.65*e,r),i.fill({color:1710621}),i.rect(0,a,.65*e,1),i.fill({color:3355448})):(i.rect(0,a,e,r),i.fill({color:15263976}),i.rect(0,a+r-1,e,1),i.fill({color:13421772})),0===l&&(i.rect(0,a+r-1,e,1),i.fill({color:s.accent.color,alpha:.3}))}i.rect(e-1,0,1,t),i.fill({color:s.border.color,alpha:.3})},[e,t,r,n,o,s]),l=ae.useMemo(()=>{const e=[],i=Math.ceil(t/r)+1,s=Math.max(0,Math.floor(n)),a=Math.min(o,s+i);for(let o=s;o<a;o++)if(o%12==0){const i=t-(o-n+1)*r;if(i>=0&&i<=t){const t=Math.floor(o/12)-1;e.push({y:i+1,text:`C${t}`})}}return e},[t,r,n,o]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:t},children:[i.jsxDEV("pixiGraphics",{draw:a,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiPianoKeyboard.tsx",lineNumber:98,columnNumber:7},void 0),l.map(({y:t,text:r})=>i.jsxDEV("pixiBitmapText",{text:r,style:{fontFamily:sh,fontSize:8,fill:16777215},tint:3355448,layout:{position:"absolute",left:.68*e,top:t}},r,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiPianoKeyboard.tsx",lineNumber:100,columnNumber:9},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiPianoKeyboard.tsx",lineNumber:97,columnNumber:5},void 0)},Um=new Set([1,3,6,8,10]),Tm=({width:e,height:t,notes:r,noteHeight:n=12,pixelsPerBeat:o=40,scrollNote:s=36,scrollBeat:a=0,totalBeats:l=64,gridDivision:c=4,selectedNotes:A,onNotesChanged:u})=>{const d=ph(),h=ae.useCallback((e,i)=>{const r=Math.floor(e/o+a),l=Math.floor((t-i)/n+s);return{beat:Math.max(0,r),midiNote:Math.max(0,Math.min(127,l))}},[o,a,n,s,t]),g=ae.useCallback(e=>{const t=$.getState().tool,i=e.getLocalPosition(e.currentTarget),{beat:r,midiNote:n}=h(i.x,i.y),o=f.getState(),s=$.getState().view,a=o.patterns[o.currentPatternIndex];if(!a||r>=a.length)return;const l=s.channelIndex,c=n-11;if(!(c<1||c>96))if("draw"===t){const e=S.getState().currentInstrumentId??1;o.setCell(l,r,{note:c,instrument:e,volume:64}),u?.()}else if("erase"===t){const e=a.channels[l];e&&e.rows[r]&&e.rows[r].note>0&&(o.clearCell(l,r),u?.())}},[h,u]),p=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:d.bg.color});const u=Math.ceil(t/n)+1,h=Math.max(0,Math.floor(s)),g=Math.min(128,h+u);for(let r=h;r<g;r++){const o=t-(r-s+1)*n;if(o>t||o+n<0)continue;const a=r%12,l=Um.has(a);i.rect(0,o,e,n),i.fill({color:l?d.bgSecondary.color:d.bg.color,alpha:l?.6:1}),i.rect(0,o+n-1,e,1),i.fill({color:d.border.color,alpha:0===a?.3:.08})}const f=Math.floor(a),p=Math.ceil(a+e/o);for(let r=f;r<=Math.min(p,l);r++)for(let n=0;n<c;n++){const s=(r+n/c-a)*o;s<0||s>e||(i.rect(s,0,1,t),i.fill({color:d.border.color,alpha:0===n?.25:.08}))}for(let l=0;l<r.length;l++){const c=r[l],u=(c.start-a)*o,h=t-(c.note-s+1)*n,g=c.duration*o;if(u+g<0||u>e||h+n<0||h>t)continue;const f=A?.has(l),p=.4+c.velocity/127*.6;i.roundRect(u+.5,h+1,Math.max(2,g-1),n-2,2),i.fill({color:f?d.warning.color:d.accent.color,alpha:p}),i.roundRect(u+.5,h+1,Math.max(2,g-1),n-2,2),i.stroke({color:f?d.warning.color:d.accent.color,alpha:.8,width:1})}},[e,t,r,n,o,s,a,l,c,A,d]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:t},eventMode:"static",cursor:"crosshair",onPointerDown:g,children:i.jsxDEV("pixiGraphics",{draw:p,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiPianoRollGrid.tsx",lineNumber:164,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiPianoRollGrid.tsx",lineNumber:158,columnNumber:5},void 0)},Om=({width:e,height:t=80,notes:r,pixelsPerBeat:n=40,scrollBeat:o=0,selectedIndices:s})=>{const a=ph(),l=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:a.bgSecondary.color,alpha:.5}),i.rect(0,0,e,1),i.fill({color:a.border.color,alpha:a.border.alpha});for(const r of[.25,.5,.75]){const n=t-r*(t-4);i.rect(0,n,e,1),i.fill({color:a.border.color,alpha:.1})}const l=Math.max(2,.15*n);for(let c=0;c<r.length;c++){const A=r[c],u=(A.start-o)*n;if(u<-l||u>e)continue;const d=A.velocity/127*(t-4),h=s?.has(c);i.rect(u,t-d-2,l,d),i.fill({color:h?a.warning.color:a.accent.color,alpha:.7})}},[e,t,r,n,o,s,a]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:t},children:[i.jsxDEV("pixiGraphics",{draw:l,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiVelocityLane.tsx",lineNumber:70,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"VEL",style:{fontFamily:sh,fontSize:8,fill:16777215},tint:a.textMuted.color,layout:{position:"absolute",left:4,top:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiVelocityLane.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/pianoroll/PixiVelocityLane.tsx",lineNumber:69,columnNumber:5},void 0)},Fm=[1,2,4,8,16],Gm={z:0,s:1,x:2,d:3,c:4,v:5,g:6,b:7,h:8,n:9,j:10,m:11,q:12,2:13,w:14,3:15,e:16,r:17,5:18,t:19,6:20,y:21,7:22,u:23,i:24,9:25,o:26,0:27,p:28},jm=()=>{const e=ph(),r=t(e=>e.getCurrentTheme().colors),n=$(e=>e.tool),o=$(e=>e.setTool),s=$(e=>e.view),[a,c]=ae.useState(0),A=ae.useCallback(()=>c(e=>e+1),[]),u=ee(s.channelIndex);ae.useEffect(()=>{const e=e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)return;const t=e.key.toLowerCase(),i=e.ctrlKey||e.metaKey,r=$.getState(),a=Array.from(r.selection.notes);if(i){if("c"===t){const t=u.notes.filter(e=>r.selection.notes.has(e.id));return t.length>0&&r.copyNotes(t),void e.preventDefault()}if("x"===t){const t=u.notes.filter(e=>r.selection.notes.has(e.id));return t.length>0&&(r.copyNotes(t),u.deleteNotes(a),r.clearSelection(),A()),void e.preventDefault()}if("v"===t){const t=r.clipboard;return t&&(u.pasteNotes(t,Math.floor(r.view.scrollX),Math.round(r.view.scrollY+60),s.channelIndex),A()),void e.preventDefault()}return"z"===t?(e.preventDefault(),e.shiftKey?te.getState().redo():te.getState().undo(),void A()):"y"===t?(e.preventDefault(),te.getState().redo(),void A()):"a"===t?(e.preventDefault(),void r.selectAll(u.notes.map(e=>e.id))):"d"===t?(e.preventDefault(),void(a.length>0&&(u.duplicateNotes(a),A()))):void 0}if("delete"===t||"backspace"===t)return a.length>0&&(u.deleteNotes(a),r.clearSelection(),A()),void e.preventDefault();if("escape"!==t){if(a.length>0){if("arrowup"===t)return u.transposeNotes(a,e.shiftKey?12:1),A(),void e.preventDefault();if("arrowdown"===t)return u.transposeNotes(a,e.shiftKey?-12:-1),A(),void e.preventDefault();if("arrowleft"===t&&e.shiftKey){const t=Math.max(1,Math.floor(4/r.view.gridDivision));return u.adjustNoteLengths(a,-t),A(),void e.preventDefault()}if("arrowright"===t&&e.shiftKey){const t=Math.max(1,Math.floor(4/r.view.gridDivision));return u.adjustNoteLengths(a,t),A(),void e.preventDefault()}}if("draw"!==n){if("1"===t)return o("select"),void e.preventDefault();if("2"===t)return o("draw"),void e.preventDefault();if("3"===t)return o("erase"),void e.preventDefault()}if("select"===n&&a.length>0){if("q"===t)return u.quantizeNotes(a,r.view.gridDivision),void A();if("s"===t)return u.toggleSlide(a,!0),void A();if("a"===t)return u.toggleAccent(a,!0),void A()}if("+"!==t&&"="!==t)if("-"!==t&&"_"!==t){if("draw"===n){const i=Gm[t];if(null!=i){const t=12*4+i,n=Math.max(1,Math.floor(4/r.view.gridDivision));u.addNote(t,Math.floor(r.view.scrollX),n,100),A(),e.preventDefault()}}}else a.length>0&&(u.adjustVelocities(a,-10),A());else a.length>0&&(u.adjustVelocities(a,10),A())}else r.clearSelection()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,o,s.channelIndex,u,A]);const d=ae.useMemo(()=>{const e=f.getState(),t=e.patterns[e.currentPatternIndex];if(!t)return[];const i=t.channels[s.channelIndex];if(!i)return[];const r=[];for(let n=0;n<t.length;n++){const e=i.rows[n];if(e&&e.note>0&&e.note<97){let o=1;for(let e=n+1;e<t.length;e++){const t=i.rows[e];if(t&&(t.note>0||97===t.note))break;o++}r.push({note:e.note+11,start:n,duration:o,velocity:null!==e.volume?e.volume:64})}}return r},[s.channelIndex,a]),h=ae.useCallback(()=>{const e=$.getState(),t=Fm.indexOf(e.view.gridDivision),i=Fm[(t+1)%Fm.length];e.setGridDivision(i)},[]),g=ae.useCallback(()=>{$.setState(e=>{e.view.snapToGrid=!e.view.snapToGrid})},[]),p=ae.useCallback(t=>{t.clear(),t.rect(0,0,4e3,36),t.fill({color:e.bgSecondary.color}),t.rect(0,35,4e3,1),t.fill({color:e.border.color,alpha:e.border.alpha})},[e]);return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:"100%",flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:"100%",height:36,flexDirection:"row",alignItems:"center",paddingLeft:8,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:p,layout:{position:"absolute",width:"100%",height:36}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:271,columnNumber:9},void 0),i.jsxDEV(cf,{layout:{height:24,width:100},style:{overflow:"visible"},children:i.jsxDEV("select",{value:"pianoroll",onChange:e=>{const t=e.target.value;setTimeout(()=>l.getState().setActiveView(t),0)},style:{width:"100%",height:"100%",padding:"0 4px",fontSize:"11px",fontFamily:"monospace",background:r.bg,color:r.text,border:`1px solid ${r.border}`,borderRadius:"3px",cursor:"pointer",outline:"none"},children:[i.jsxDEV("option",{value:"tracker",children:"Tracker"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:298,columnNumber:13},void 0),i.jsxDEV("option",{value:"arrangement",children:"Arrangement"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:299,columnNumber:13},void 0),i.jsxDEV("option",{value:"pianoroll",children:"Piano Roll"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:300,columnNumber:13},void 0),i.jsxDEV("option",{value:"dj",children:"DJ Mixer"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:301,columnNumber:13},void 0),i.jsxDEV("option",{value:"drumpad",children:"Drum Pads"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:302,columnNumber:13},void 0),i.jsxDEV("option",{value:"vj",children:"VJ View"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:303,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:278,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:274,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"PIANO ROLL",size:"sm",weight:"bold",color:"accent"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:307,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Select",variant:"select"===n?"ft2":"ghost",color:"select"===n?"blue":void 0,size:"sm",active:"select"===n,onClick:()=>o("select")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:309,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Draw",variant:"draw"===n?"ft2":"ghost",color:"draw"===n?"green":void 0,size:"sm",active:"draw"===n,onClick:()=>o("draw")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:317,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Erase",variant:"erase"===n?"ft2":"ghost",color:"erase"===n?"red":void 0,size:"sm",active:"erase"===n,onClick:()=>o("erase")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:325,columnNumber:9},void 0),i.jsxDEV(bh,{label:`Grid:1/${s.gridDivision}`,variant:"ghost",size:"sm",onClick:h},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:334,columnNumber:9},void 0),i.jsxDEV(bh,{label:s.snapToGrid?"Snap:ON":"Snap:OFF",variant:s.snapToGrid?"ft2":"ghost",color:s.snapToGrid?"blue":void 0,size:"sm",active:s.snapToGrid,onClick:g},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:340,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:349,columnNumber:9},void 0),i.jsxDEV(Ig,{text:`Ch ${s.channelIndex+1}`,size:"xs",color:"textMuted",layout:{marginRight:8}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:351,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:261,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%",flexDirection:"row"},children:[i.jsxDEV(Rm,{width:60,height:4e3},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:367,columnNumber:9},void 0),i.jsxDEV(Tm,{width:4e3,height:4e3,notes:d,onNotesChanged:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:368,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:360,columnNumber:7},void 0),i.jsxDEV(Om,{width:4e3,height:80,notes:d.map(e=>({start:e.start,velocity:e.velocity}))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:377,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiPianoRollView.tsx",lineNumber:253,columnNumber:5},void 0)},Hm=({visible:e,onClick:t})=>{const r=ph(),n=ae.useCallback(e=>{e.clear(),e.rect(0,0,1,9999),e.fill({color:r.border.color,alpha:.25})},[r]);return i.jsxDEV("pixiContainer",{layout:{width:24,height:"100%",alignItems:"center",justifyContent:"center"},eventMode:"static",cursor:"pointer",onPointerUp:t,children:[i.jsxDEV("pixiGraphics",{draw:n,layout:{position:"absolute",left:0,top:0,width:1,height:"100%"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:389,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:e?"":"",style:{fontFamily:ah,fontSize:10,fill:16777215},tint:e?r.accent.color:r.textMuted.color,layout:{alignSelf:"center"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:391,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:382,columnNumber:5},void 0)},Xm=36,zm=({deckId:e})=>{const t=ph(),r=h(t=>t.decks[e].isPlaying),n=h(t=>t.decks[e].cuePoint),o="A"===e?"B":"A",s=h(t=>t.decks[e].effectiveBPM),a=h(e=>e.decks[o].effectiveBPM),l=Math.abs(s-a)<.5,c=ae.useCallback(async()=>{const t=ne().getDeck(e);r?(t.pause(),h.getState().setDeckPlaying(e,!1)):(await t.play(),h.getState().setDeckPlaying(e,!0))},[e,r]),A=ae.useCallback(()=>{ne().getDeck(e).cue(n)},[e,n]),u=ae.useCallback(()=>{try{const t=ne(),i=t.getDeck(e),r=t.getDeck(o),n=h.getState().decks[o];if(!n.fileName)return;if("audio"===r.playbackMode||"audio"===i.playbackMode){const t=n.detectedBPM,i=h.getState().decks[e].detectedBPM;if(t>0&&i>0){const r=t/i,n=12*Math.log2(r);h.getState().setDeckPitch(e,n)}}else{if(!r.replayer.getSong())return;const t=be.syncBPM(r,i);h.getState().setDeckPitch(e,t)}}catch{}},[e,o]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:6,alignItems:"center"},children:[i.jsxDEV(Jm,{label:r?"PAUSE":"PLAY",color:r?t.success.color:t.textMuted.color,isActive:r,onClick:c},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTransport.tsx",lineNumber:76,columnNumber:7},void 0),i.jsxDEV(Jm,{label:"CUE",color:t.warning.color,onClick:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTransport.tsx",lineNumber:84,columnNumber:7},void 0),i.jsxDEV(Jm,{label:"SYNC",color:l?t.success.color:t.accent.color,isActive:l,onClick:u},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTransport.tsx",lineNumber:91,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTransport.tsx",lineNumber:74,columnNumber:5},void 0)},Jm=({label:e,color:t,isActive:r,onClick:n})=>{const o=ph(),s=ae.useCallback(e=>{e.clear(),e.roundRect(0,0,Xm,Xm,6),r?(e.fill({color:t,alpha:.2}),e.roundRect(0,0,Xm,Xm,6),e.stroke({color:t,alpha:.6,width:1})):(e.fill({color:o.bgTertiary.color}),e.roundRect(0,0,Xm,Xm,6),e.stroke({color:o.border.color,alpha:.4,width:1}))},[t,r,o]);return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:n,layout:{width:Xm,height:Xm,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:s,layout:{position:"absolute",width:Xm,height:Xm}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTransport.tsx",lineNumber:139,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:e,style:{fontFamily:ah,fontSize:8,fill:16777215},tint:r?t:o.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTransport.tsx",lineNumber:140,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTransport.tsx",lineNumber:128,columnNumber:5},void 0)},Wm=({deckId:e,size:t=100})=>{const r=ph(),n=h(t=>t.decks[e].isPlaying),o=h(t=>t.decks[e].audioPosition),s=mh(),{deckA:a,deckB:l,deckC:c}=xh(s,r.accent,r.accentSecondary),A="A"===e?a:"B"===e?l:c,u=t/2,d=t/2,g=t/2-4,f=t/6,p=o/1e3*Math.PI*2*.5555,m=ae.useCallback(e=>{e.clear(),e.circle(u,d,g),e.fill({color:r.bg.color}),e.circle(u,d,g),e.stroke({color:A,alpha:n?.6:.2,width:2});for(let n=f+6;n<g-4;n+=4)e.circle(u,d,n),e.stroke({color:r.border.color,alpha:.15,width:.5});e.circle(u,d,f),e.fill({color:A,alpha:.15}),e.circle(u,d,f),e.stroke({color:A,alpha:.3,width:1});const t=u+Math.cos(p)*(g-2),i=d+Math.sin(p)*(g-2),o=u+Math.cos(p)*f,s=d+Math.sin(p)*f;e.moveTo(o,s),e.lineTo(t,i),e.stroke({color:A,alpha:n?.8:.3,width:1}),e.circle(u,d,3),e.fill({color:A,alpha:.6})},[u,d,g,f,p,n,r,A]);return i.jsxDEV("pixiContainer",{layout:{width:t,height:t,justifyContent:"center",alignItems:"center"},children:i.jsxDEV("pixiGraphics",{draw:m,layout:{width:t,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTurntable.tsx",lineNumber:77,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckTurntable.tsx",lineNumber:69,columnNumber:5},void 0)},Km=({deckId:e,width:t,height:r})=>{const n=ph(),o=h(t=>t.decks[e].waveformPeaks),s=h(t=>t.decks[e].audioPosition),a=h(t=>t.decks[e].durationMs),l=mh(),{deckA:c,deckB:A,deckC:u}=xh(l,n.accent,n.accentSecondary),d="A"===e?c:"B"===e?A:u,g=ae.useCallback(i=>{if(!o||0===o.length||a<=0)return;const r=i.getLocalPosition(i.currentTarget).x,n=o.length,l=a>0?s/a:0,c=Math.floor(l*n),A=t,u=(Math.max(0,c-Math.floor(A/2))+r)/n*a;try{const t=ne();t.getDeck(e).cue(u/1e3)}catch{}},[e,o,s,a,t]),f=ae.useCallback(e=>{if(e.clear(),e.roundRect(0,0,t,r,4),e.fill({color:n.bg.color}),e.roundRect(0,0,t,r,4),e.stroke({color:n.border.color,alpha:.3,width:1}),!o||0===o.length)return;const i=o.length,l=a>0?s/a:0,c=Math.floor(l*i),A=t,u=Math.max(0,c-Math.floor(A/2)),h=Math.min(i,u+A),g=r/2,f=(r-8)/2;for(let t=u;t<h;t++){const i=t-u,r=(o[t]??0)*f;if(r>.5){const n=t<c?.4:.8;e.rect(i,g-r,1,2*r),e.fill({color:d,alpha:n})}}const p=Math.min(t-1,Math.floor(A/2));e.rect(p,0,1,r),e.fill({color:16777215,alpha:.8})},[o,s,a,t,r,n,d]);return i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:g,layout:{width:t,height:r},children:[i.jsxDEV("pixiGraphics",{draw:f,layout:{width:t,height:r}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckWaveform.tsx",lineNumber:94,columnNumber:7},void 0),(!o||0===o.length)&&i.jsxDEV("pixiBitmapText",{text:"No waveform data",style:{fontFamily:sh,fontSize:9,fill:16777215},tint:n.textMuted.color,layout:{position:"absolute",top:r/2-6,left:t/2-40}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckWaveform.tsx",lineNumber:96,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDeckWaveform.tsx",lineNumber:93,columnNumber:5},void 0)};function Ym(e){const t=Math.floor(e/1e3);return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`}const qm=({deckId:e})=>{const t=ph(),r=h(t=>t.decks[e].isPlaying),n=h(t=>t.decks[e].effectiveBPM),o=h(t=>t.decks[e].trackName),s=h(t=>t.decks[e].pitchOffset),a=h(e=>e.setDeckPitch),l=h(t=>t.decks[e].loopActive),c=h(t=>t.decks[e].loopMode),A=h(t=>t.decks[e].audioPosition),u=h(t=>t.decks[e].durationMs),d=h(t=>t.decks[e].cuePoint),g=ae.useCallback(()=>{const t=h.getState().decks[e].audioPosition;h.getState().setDeckCuePoint(e,t)},[e]),f=ae.useCallback(()=>{try{const t=ne().getDeck(e),i=h.getState().decks[e].cuePoint;t.cue(i/1e3)}catch{}},[e]),p=ae.useCallback(t=>{try{ne().getDeck(e).nudge(2*t,8)}catch{}},[e]),m=ae.useCallback(()=>{const t=h.getState(),i="line"===t.decks[e].loopMode&&t.decks[e].loopActive;t.setDeckLoop(e,"line",!i)},[e]),x=ae.useCallback(()=>{const t=h.getState(),i="pattern"===t.decks[e].loopMode&&t.decks[e].loopActive;t.setDeckLoop(e,"pattern",!i)},[e]),E=ae.useCallback(()=>{h.getState().setDeckLoop(e,"off",!1)},[e]),C=mh(),{deckA:B,deckB:b,deckC:I}=xh(C,t.accent,t.accentSecondary),y="A"===e?B:"B"===e?b:I;return i.jsxDEV("pixiContainer",{layout:{flex:1,height:"100%",flexDirection:"column",padding:8,gap:6},children:[i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",gap:8},children:[i.jsxDEV("pixiBitmapText",{text:`DECK ${e}`,style:{fontFamily:ah,fontSize:13,fill:16777215},tint:y,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:103,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:r?"PLAYING":"STOPPED",style:{fontFamily:sh,fontSize:9,fill:16777215},tint:r?t.success.color:t.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:109,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:115,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:`${n.toFixed(1)} BPM`,style:{fontFamily:ah,fontSize:11,fill:16777215},tint:y,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:102,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:o||"No track loaded",style:{fontFamily:lh,fontSize:11,fill:16777215},tint:o?t.text.color:t.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:125,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:8,alignItems:"center"},children:[i.jsxDEV(Wm,{deckId:e,size:90},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:134,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:2,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"PITCH",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:138,columnNumber:11},void 0),i.jsxDEV(Mg,{value:s??0,min:-.08,max:.08,orientation:"vertical",length:80,detent:0,onChange:t=>a?.(e,t)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:139,columnNumber:11},void 0),i.jsxDEV("pixiBitmapText",{text:`${(100*(s??0)).toFixed(1)}%`,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:t.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:148,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:137,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:133,columnNumber:7},void 0),i.jsxDEV(Km,{deckId:e,width:280,height:60},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:158,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{height:16,width:280},children:[i.jsxDEV("pixiGraphics",{draw:e=>{e.clear();const i=280;e.roundRect(0,0,i,16,2),e.fill({color:t.bg.color});const r=u>0?Math.min(1,A/u):0;if(r>0){const t=Math.max(2,278*r);e.roundRect(1,1,t,14,2),e.fill({color:y,alpha:.3})}if(r>0){const t=Math.floor(278*r)+1;e.rect(t,0,1,16),e.fill({color:y,alpha:.9})}e.roundRect(0,0,i,16,2),e.stroke({color:t.border.color,alpha:.2,width:1})},layout:{width:280,height:16}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:162,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{text:u>0?`${Ym(A)} / ${Ym(u)}`:"No track loaded",style:{fontFamily:sh,fontSize:7,fill:16777215},tint:t.textMuted.color,layout:{position:"absolute",left:4,top:3}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:190,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:161,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"LOOP",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:203,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Line",variant:l&&"line"===c?"ft2":"ghost",color:l&&"line"===c?"green":void 0,size:"sm",active:l&&"line"===c,onClick:m},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:204,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Pattern",variant:l&&"pattern"===c?"ft2":"ghost",color:l&&"pattern"===c?"blue":void 0,size:"sm",active:l&&"pattern"===c,onClick:x},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:212,columnNumber:9},void 0),l&&i.jsxDEV(bh,{label:"Off",variant:"ghost",size:"sm",onClick:E},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:221,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:202,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"CUE",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:227,columnNumber:9},void 0),i.jsxDEV(bh,{label:"SET",variant:"ghost",size:"sm",onClick:g},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:228,columnNumber:9},void 0),i.jsxDEV(bh,{label:"GO",variant:d>0?"ft2":"ghost",color:d>0?"yellow":void 0,size:"sm",onClick:f},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:229,columnNumber:9},void 0),d>0&&i.jsxDEV("pixiBitmapText",{text:Ym(d),style:{fontFamily:sh,fontSize:8,fill:16777215},tint:t.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:237,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:226,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"NUDGE",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:248,columnNumber:9},void 0),i.jsxDEV(bh,{label:"<< -",variant:"ghost",size:"sm",onClick:()=>p(-1)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:249,columnNumber:9},void 0),i.jsxDEV(bh,{label:"+ >>",variant:"ghost",size:"sm",onClick:()=>p(1)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:250,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:247,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{width:280,height:56},style:{overflow:"hidden"},children:i.jsxDEV(Ie,{deckId:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:258,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:254,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{width:280,height:36},style:{overflow:"hidden"},children:i.jsxDEV(ye,{deckId:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:266,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:262,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{width:280,height:32},style:{overflow:"hidden"},children:i.jsxDEV(ve,{deckId:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:274,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:270,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{width:280,height:64},style:{overflow:"hidden"},children:i.jsxDEV(we,{deckId:e,size:60},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:282,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:278,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:286,columnNumber:7},void 0),i.jsxDEV(zm,{deckId:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:289,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJDeck.tsx",lineNumber:92,columnNumber:5},void 0)},Zm=220,$m=()=>{const e=ph(),t=ae.useCallback(t=>{t.clear(),t.rect(0,0,1,9999),t.fill({color:e.border.color,alpha:.3}),t.rect(219,0,1,9999),t.fill({color:e.border.color,alpha:.3}),t.rect(1,0,218,9999),t.fill({color:e.bgSecondary.color,alpha:.5})},[e]);return i.jsxDEV("pixiContainer",{layout:{width:Zm,height:"100%",flexDirection:"column",alignItems:"center",padding:8,gap:8},children:[i.jsxDEV("pixiGraphics",{draw:t,layout:{position:"absolute",width:Zm,height:"100%"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:42,columnNumber:7},void 0),i.jsxDEV(Ig,{text:"MIXER",size:"md",weight:"bold",color:"accent"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:44,columnNumber:7},void 0),i.jsxDEV(ex,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:47,columnNumber:7},void 0),i.jsxDEV(tx,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:50,columnNumber:7},void 0),i.jsxDEV(nx,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:53,columnNumber:7},void 0),i.jsxDEV(ox,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:56,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:59,columnNumber:7},void 0),i.jsxDEV(sx,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:62,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:12,alignItems:"center"},children:[i.jsxDEV(ax,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:66,columnNumber:9},void 0),i.jsxDEV(lx,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:67,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:65,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:32,columnNumber:5},void 0)},ex=()=>{const e=ph(),t=h(e=>e.decks.A.filterPosition),r=h(e=>e.decks.B.filterPosition),n=h(e=>e.setDeckFilter),o=ae.useCallback(t=>{t.clear(),t.rect(0,0,204,1),t.fill({color:e.border.color,alpha:.2})},[e]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"FILTER",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:89,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:16},children:[i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"A",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:94,columnNumber:11},void 0),i.jsxDEV(kg,{value:t,min:-1,max:1,defaultValue:0,size:"sm",label:"FLT",bipolar:!0,onChange:e=>n("A",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:95,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:93,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"B",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:100,columnNumber:11},void 0),i.jsxDEV(kg,{value:r,min:-1,max:1,defaultValue:0,size:"sm",label:"FLT",bipolar:!0,onChange:e=>n("B",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:101,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:99,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:91,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:o,layout:{width:204,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:105,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:88,columnNumber:5},void 0)},tx=()=>{const e=ph(),t=h(e=>e.decks.A.eqHigh),r=h(e=>e.decks.A.eqMid),n=h(e=>e.decks.A.eqLow),o=h(e=>e.decks.B.eqHigh),s=h(e=>e.decks.B.eqMid),a=h(e=>e.decks.B.eqLow),l=h(e=>e.setDeckEQ),c=ae.useCallback(t=>{t.clear(),t.rect(0,0,204,1),t.fill({color:e.border.color,alpha:.2})},[e]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"EQ",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:130,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:16},children:[i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"A",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:135,columnNumber:11},void 0),i.jsxDEV(kg,{value:t,min:-24,max:6,defaultValue:0,size:"sm",label:"HI",bipolar:!0,onChange:e=>l("A","high",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:136,columnNumber:11},void 0),i.jsxDEV(kg,{value:r,min:-24,max:6,defaultValue:0,size:"sm",label:"MID",bipolar:!0,onChange:e=>l("A","mid",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:137,columnNumber:11},void 0),i.jsxDEV(kg,{value:n,min:-24,max:6,defaultValue:0,size:"sm",label:"LO",bipolar:!0,onChange:e=>l("A","low",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:138,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:134,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"B",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:143,columnNumber:11},void 0),i.jsxDEV(kg,{value:o,min:-24,max:6,defaultValue:0,size:"sm",label:"HI",bipolar:!0,onChange:e=>l("B","high",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:144,columnNumber:11},void 0),i.jsxDEV(kg,{value:s,min:-24,max:6,defaultValue:0,size:"sm",label:"MID",bipolar:!0,onChange:e=>l("B","mid",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:145,columnNumber:11},void 0),i.jsxDEV(kg,{value:a,min:-24,max:6,defaultValue:0,size:"sm",label:"LO",bipolar:!0,onChange:e=>l("B","low",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:146,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:132,columnNumber:7},void 0),i.jsxDEV("pixiGraphics",{draw:c,layout:{width:204,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:150,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:129,columnNumber:5},void 0)};function ix(e){return e>=17?15680580:e>=12?15381256:2278750}function rx(e){return e<=-60?0:e>=0?20:Math.round((e+60)/60*20)}const nx=()=>{const e=ph(),t=ae.useRef(null),r=ae.useRef({a:0,b:0});return ae.useEffect(()=>{let i;const n=()=>{const o=t.current;if(!o)return void(i=requestAnimationFrame(n));try{const e=ne(),t=e.getDeck("A").getLevel(),i=e.getDeck("B").getLevel();r.current.a=rx(t),r.current.b=rx(i)}catch{r.current.a=Math.max(0,r.current.a-1),r.current.b=Math.max(0,r.current.b-1)}o.clear();const{a:s,b:a}=r.current;for(let t=0;t<2;t++){const i=0===t?s:a,r=16*t;for(let t=0;t<20;t++){const n=79-3.9*(t+1),s=t<i;o.rect(r,n,12,2.9),o.fill({color:s?ix(t):e.bgTertiary?.color??3224132,alpha:s?.9:.3})}}i=requestAnimationFrame(n)};return i=requestAnimationFrame(n),()=>cancelAnimationFrame(i)},[e]),i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:2,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"LEVEL",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:229,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:4,width:28,height:80},children:i.jsxDEV("pixiGraphics",{ref:t,draw:()=>{},layout:{position:"absolute",width:28,height:80}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:231,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:230,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",justifyContent:"space-between",width:28},children:[i.jsxDEV(Ig,{text:"A",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:238,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"B",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:239,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:237,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:228,columnNumber:5},void 0)},ox=()=>{const e=h(e=>e.decks.A.volume),t=h(e=>e.decks.B.volume),r=h(e=>e.setDeckVolume);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:24,alignItems:"center"},children:[i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"CH A",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:256,columnNumber:9},void 0),i.jsxDEV(Mg,{value:e??.8,min:0,max:1,orientation:"vertical",length:100,onChange:e=>r?.("A",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:257,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:255,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV(Ig,{text:"CH B",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:269,columnNumber:9},void 0),i.jsxDEV(Mg,{value:t??.8,min:0,max:1,orientation:"vertical",length:100,onChange:e=>r?.("B",e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:270,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:268,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:253,columnNumber:5},void 0)},sx=()=>{const e=ph(),t=h(e=>e.crossfaderPosition),r=h(e=>e.setCrossfader),n=h(e=>e.crossfaderCurve),o=ae.useCallback(e=>{h.getState().setCrossfaderCurve(e);try{ne().mixer.setCurve(e)}catch{}},[]),s=ae.useCallback(t=>{t.clear(),t.rect(0,0,204,1),t.fill({color:e.border.color,alpha:.2})},[e]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:s,layout:{width:204,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:304,columnNumber:7},void 0),i.jsxDEV(Ig,{text:"CROSSFADER",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:305,columnNumber:7},void 0),i.jsxDEV(Mg,{value:t,min:0,max:1,orientation:"horizontal",length:180,detent:.5,onChange:e=>r?.(e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:306,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",justifyContent:"space-between",width:180},children:[i.jsxDEV(Ig,{text:"A",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:316,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"B",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:317,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:315,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:2,alignItems:"center"},children:[i.jsxDEV(bh,{label:"Lin",variant:"linear"===n?"ft2":"ghost",color:"linear"===n?"blue":void 0,size:"sm",active:"linear"===n,onClick:()=>o("linear")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:321,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Cut",variant:"cut"===n?"ft2":"ghost",color:"cut"===n?"red":void 0,size:"sm",active:"cut"===n,onClick:()=>o("cut")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:329,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Smo",variant:"smooth"===n?"ft2":"ghost",color:"smooth"===n?"green":void 0,size:"sm",active:"smooth"===n,onClick:()=>o("smooth")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:337,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:320,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:303,columnNumber:5},void 0)},ax=()=>{const e=ph(),t=h(e=>e.masterVolume),r=ae.useCallback(e=>{h.getState().setMasterVolume(e),ne().mixer.setMasterVolume(e)},[]),n=ae.useCallback(t=>{t.clear(),t.rect(0,0,204,1),t.fill({color:e.border.color,alpha:.2})},[e]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center",marginBottom:4},children:[i.jsxDEV("pixiGraphics",{draw:n,layout:{width:204,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:369,columnNumber:7},void 0),i.jsxDEV(kg,{value:t,min:0,max:1.5,size:"sm",label:"MASTER",onChange:r},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:370,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:368,columnNumber:5},void 0)},lx=()=>{const e=ph(),t=h(e=>e.decks.A.pflEnabled),r=h(e=>e.decks.B.pflEnabled),n=h(e=>e.cueVolume),o=ae.useCallback(e=>{const t="A"===e?h.getState().decks.A.pflEnabled:h.getState().decks.B.pflEnabled;h.getState().setDeckPFL(e,!t)},[]),s=ae.useCallback(e=>{h.getState().setCueVolume(e)},[]),a=ae.useCallback(t=>{t.clear(),t.rect(0,0,1,40),t.fill({color:e.border.color,alpha:.2})},[e]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:4,alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:a,layout:{position:"absolute",width:1,height:40,left:-6}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:409,columnNumber:7},void 0),i.jsxDEV(kg,{value:n,min:0,max:1.5,size:"sm",label:"CUE",onChange:s},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:410,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:2,alignItems:"center"},children:[i.jsxDEV(bh,{label:"1",variant:t?"ft2":"ghost",color:t?"yellow":void 0,size:"sm",active:t,onClick:()=>o("A")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:420,columnNumber:9},void 0),i.jsxDEV(bh,{label:"2",variant:r?"ft2":"ghost",color:r?"yellow":void 0,size:"sm",active:r,onClick:()=>o("B")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:428,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:419,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/dj/PixiDJMixer.tsx",lineNumber:408,columnNumber:5},void 0)},cx=({browserPanel:e,onBrowserPanelChange:r})=>{const n=ph(),o=t(e=>e.getCurrentTheme().colors),s=l(e=>e.modalOpen),a=ae.useCallback(()=>{const e=l.getState();"fileBrowser"===e.modalOpen?e.closeModal():e.openModal("fileBrowser")},[]),c=ae.useCallback(t=>{r(e===t?"none":t)},[e,r]),A=ae.useCallback(()=>{const e=l.getState();"masterFx"===e.modalOpen?e.closeModal():e.openModal("masterFx")},[]),u=ae.useCallback(()=>{l.getState().openModal("drumpads")},[]),d=ae.useCallback(()=>{const e=l.getState();"settings"===e.modalOpen?e.closeModal():e.openModal("settings")},[]),h=ae.useCallback(e=>{e.clear(),e.rect(0,0,4e3,40),e.fill({color:n.bgSecondary.color}),e.rect(0,39,4e3,1),e.fill({color:n.border.color,alpha:n.border.alpha})},[n]);return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:40,flexDirection:"row",alignItems:"center",paddingLeft:12,paddingRight:12,gap:6},children:[i.jsxDEV("pixiGraphics",{draw:h,layout:{position:"absolute",width:"100%",height:40}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:159,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{height:24,width:100},style:{overflow:"visible"},children:i.jsxDEV("select",{value:"dj",onChange:e=>{const t=e.target.value;setTimeout(()=>l.getState().setActiveView(t),0)},style:{width:"100%",height:"100%",padding:"0 4px",fontSize:"11px",fontFamily:"monospace",background:o.bg,color:o.text,border:`1px solid ${o.border}`,borderRadius:"3px",cursor:"pointer",outline:"none"},children:[i.jsxDEV("option",{value:"tracker",children:"Tracker"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:186,columnNumber:11},void 0),i.jsxDEV("option",{value:"arrangement",children:"Arrangement"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:187,columnNumber:11},void 0),i.jsxDEV("option",{value:"pianoroll",children:"Piano Roll"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:188,columnNumber:11},void 0),i.jsxDEV("option",{value:"dj",children:"DJ Mixer"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:189,columnNumber:11},void 0),i.jsxDEV("option",{value:"drumpad",children:"Drum Pads"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:190,columnNumber:11},void 0),i.jsxDEV("option",{value:"vj",children:"VJ View"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:191,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:166,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:162,columnNumber:7},void 0),i.jsxDEV("pixiBitmapText",{text:"DEViLBOX DJ",style:{fontFamily:ah,fontSize:12,fill:16777215},tint:n.accent.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:195,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Files",variant:"fileBrowser"===s?"ft2":"ghost",color:"fileBrowser"===s?"blue":void 0,size:"sm",active:"fileBrowser"===s,onClick:a},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:203,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Playlists",variant:"playlists"===e?"ft2":"ghost",color:"playlists"===e?"blue":void 0,size:"sm",active:"playlists"===e,onClick:()=>c("playlists")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:211,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Modland",variant:"modland"===e?"ft2":"ghost",color:"modland"===e?"blue":void 0,size:"sm",active:"modland"===e,onClick:()=>c("modland")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:219,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Serato",variant:"serato"===e?"ft2":"ghost",color:"serato"===e?"blue":void 0,size:"sm",active:"serato"===e,onClick:()=>c("serato")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:227,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:236,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{height:28,width:130},style:{overflow:"visible"},children:i.jsxDEV(Pe,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:243,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:239,columnNumber:7},void 0),i.jsxDEV(cf,{layout:{height:28,width:130},style:{overflow:"visible"},children:i.jsxDEV(Me,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:251,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:247,columnNumber:7},void 0),i.jsxDEV(bh,{label:"FX",variant:"masterFx"===s?"ft2":"ghost",color:"masterFx"===s?"green":void 0,size:"sm",active:"masterFx"===s,onClick:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:254,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Pads",variant:"ghost",size:"sm",onClick:u},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:262,columnNumber:7},void 0),i.jsxDEV(bh,{label:"Settings",variant:"settings"===s?"ft2":"ghost",color:"settings"===s?"blue":void 0,size:"sm",active:"settings"===s,onClick:d},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:268,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:148,columnNumber:5},void 0)},Ax=({width:e,height:t,beatsPerBar:r=4,pixelsPerBeat:n=20,scrollBeat:o=0,totalBeats:s=128,playbackBeat:a,clips:l=[],trackHeight:c=40})=>{const A=ph(),u=24,d=t-u,h=ae.useCallback(i=>{i.clear(),i.rect(0,0,e,t),i.fill({color:A.bg.color}),i.rect(0,0,e,u),i.fill({color:A.bgSecondary.color}),i.rect(0,23,e,1),i.fill({color:A.border.color,alpha:A.border.alpha});const h=l.length>0?Math.max(...l.map(e=>e.trackIndex))+1:0;for(let r=1;r<=h;r++){const n=u+r*c;if(n>t)break;i.rect(0,n,e,1),i.fill({color:A.border.color,alpha:.15})}const g=Math.floor(o),f=Math.ceil(o+e/n);for(let t=g;t<=Math.min(f,s);t++){const s=(t-o)*n;if(s<0||s>e)continue;const a=t%r===0;i.rect(s,u,1,d),i.fill({color:A.border.color,alpha:a?.3:.1}),a&&(i.rect(s,16,1,8),i.fill({color:A.textMuted.color,alpha:.5}))}for(const t of l){const r=(t.startRow-o)*n,s=t.lengthRows*n,l=u+t.trackIndex*c+2,A=c-4;if(!(r+s<0||r>e)&&(i.roundRect(r+2,l,s-4,A,3),i.fill({color:t.color,alpha:t.muted?.15:.35}),i.roundRect(r+2,l,s-4,4,3),i.fill({color:t.color,alpha:t.muted?.3:.8}),i.roundRect(r+2,l,s-4,A,3),i.stroke({color:t.selected?16777215:t.color,alpha:t.selected?.8:.4,width:t.selected?2:1}),null!=a&&a>=t.startRow&&a<t.startRow+t.lengthRows)){const e=(a-t.startRow)/t.lengthRows,n=Math.max(2,e*(s-8));i.roundRect(r+2+1,l+1,n,A-2,2),i.fill({color:t.color,alpha:.2})}}if(null!=a){const r=(a-o)*n;r>=0&&r<=e&&(i.rect(r,0,2,t),i.fill({color:A.accent.color,alpha:.8}))}},[e,t,o,n,s,r,a,A,u,d,l,c]),g=ae.useMemo(()=>{const t=[],i=Math.floor(o),a=Math.ceil(o+e/n);for(let l=i;l<=Math.min(a,s);l++)if(l%r===0){const i=(l-o)*n;i>=0&&i<=e&&t.push({x:i,text:String(Math.floor(l/r)+1)})}return t},[o,e,n,s,r]),f=ae.useMemo(()=>{const t=[];for(const i of l){const r=(i.startRow-o)*n,s=i.lengthRows*n;r+s<0||r>e||s>30&&t.push({x:r+2+4,y:u+i.trackIndex*c+2+6,text:i.name.length>20?i.name.slice(0,18)+"..":i.name,color:i.color,muted:i.muted})}return t},[l,o,n,e,c]);return i.jsxDEV("pixiContainer",{layout:{width:e,height:t},children:[i.jsxDEV("pixiGraphics",{draw:h,layout:{position:"absolute",width:e,height:t}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiArrangementCanvas.tsx",lineNumber:189,columnNumber:7},void 0),g.map(({x:e,text:t})=>i.jsxDEV("pixiBitmapText",{text:t,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:A.textMuted.color,layout:{position:"absolute",left:e+3,top:3}},`bar-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiArrangementCanvas.tsx",lineNumber:193,columnNumber:9},void 0)),f.map(({x:e,y:t,text:r,color:n,muted:o})=>i.jsxDEV("pixiBitmapText",{text:r,style:{fontFamily:sh,fontSize:8,fill:16777215},tint:o?A.textMuted.color:n,alpha:o?.5:.9,layout:{position:"absolute",left:e,top:t}},`clip-${r}-${e}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiArrangementCanvas.tsx",lineNumber:204,columnNumber:9},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiArrangementCanvas.tsx",lineNumber:188,columnNumber:5},void 0)},ux=({tracks:e,trackHeight:t=40,width:r=160,scrollY:n=0,onToggleMute:o,onToggleSolo:s})=>{const a=ph(),l=ae.useCallback(e=>{e.clear(),e.rect(0,0,r,9999),e.fill({color:a.bgSecondary.color,alpha:.5}),e.rect(r-1,0,1,9999),e.fill({color:a.border.color,alpha:.3})},[r,a]);return i.jsxDEV("pixiContainer",{layout:{width:r,height:"100%",overflow:"hidden"},children:[i.jsxDEV("pixiGraphics",{draw:l,layout:{position:"absolute",width:r,height:"100%"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:49,columnNumber:7},void 0),e.map((e,l)=>{const c=l*t-n;return i.jsxDEV("pixiContainer",{layout:{position:"absolute",left:0,top:c,width:r,height:t,flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:4,gap:4},children:[i.jsxDEV("pixiGraphics",{draw:i=>{i.clear(),i.roundRect(0,0,3,t-8,2),i.fill({color:e.color,alpha:e.muted?.3:1})},layout:{width:3,height:t-8}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:70,columnNumber:13},void 0),i.jsxDEV("pixiBitmapText",{text:e.name,style:{fontFamily:sh,fontSize:10,fill:16777215},tint:e.muted?a.textMuted.color:a.text.color,layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:80,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:()=>o?.(e.id),layout:{width:16,height:16,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:t=>{t.clear(),t.roundRect(0,0,16,16,3),e.muted?(t.fill({color:a.error.color,alpha:.25}),t.roundRect(0,0,16,16,3),t.stroke({color:a.error.color,alpha:.6,width:1})):(t.fill({color:a.bgTertiary.color,alpha:.5}),t.roundRect(0,0,16,16,3),t.stroke({color:a.border.color,alpha:.3,width:1}))},layout:{position:"absolute",width:16,height:16}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:94,columnNumber:15},void 0),i.jsxDEV("pixiBitmapText",{text:"M",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:e.muted?a.error.color:a.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:110,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:88,columnNumber:13},void 0),i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:()=>s?.(e.id),layout:{width:16,height:16,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:t=>{t.clear(),t.roundRect(0,0,16,16,3),e.solo?(t.fill({color:a.warning.color,alpha:.25}),t.roundRect(0,0,16,16,3),t.stroke({color:a.warning.color,alpha:.6,width:1})):(t.fill({color:a.bgTertiary.color,alpha:.5}),t.roundRect(0,0,16,16,3),t.stroke({color:a.border.color,alpha:.3,width:1}))},layout:{position:"absolute",width:16,height:16}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:125,columnNumber:15},void 0),i.jsxDEV("pixiBitmapText",{text:"S",style:{fontFamily:ah,fontSize:8,fill:16777215},tint:e.solo?a.warning.color:a.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:119,columnNumber:13},void 0),i.jsxDEV("pixiGraphics",{draw:e=>{e.clear(),e.rect(0,t-1,r,1),e.fill({color:a.border.color,alpha:.15})},layout:{position:"absolute",left:0,top:t-1,width:r,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:150,columnNumber:13},void 0)]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:54,columnNumber:11},void 0)})]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/arrangement/PixiTrackHeaders.tsx",lineNumber:48,columnNumber:5},void 0)},dx=[6333946,16281969,4906624,16498468,10980346,16486972,3718648,15235577];function hx(e,t){if(!e)return t;const i=e.replace("#","");return parseInt(i,16)||t}const gx=({layout:e,config:t,onChange:r})=>{const n=ph(),o=ae.useRef(t);ae.useEffect(()=>{o.current=t});const[s,a]=ae.useState(e.tabs?.[0]?.id??null),l=ae.useCallback((e,t)=>{const i=e.split(".");if(1===i.length)r({[e]:t});else{const[e,...n]=i;let s={...o.current[e]||{}},a=s;for(let t=0;t<n.length-1;t++){const e=a[n[t]]||{};a[n[t]]={...e},a=a[n[t]]}a[n[n.length-1]]=t,r({[e]:s})}},[r]),c=e=>{const i=e.split(".");let r=t;for(const t of i){if(null==r||"object"!=typeof r)return;r=r[t]}return r},A=e.tabs?e.tabs.find(e=>e.id===s)?.sections??[]:e.sections??[];return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:"100%",flexDirection:"column",gap:8,padding:8},children:[i.jsxDEV(Ig,{text:e.name,size:"md",weight:"bold",color:"accent"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:79,columnNumber:7},void 0),e.tabs&&i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",gap:4,marginBottom:4},children:e.tabs.map(e=>i.jsxDEV("pixiContainer",{eventMode:"static",cursor:"pointer",onPointerUp:()=>a(e.id),layout:{height:24,paddingLeft:8,paddingRight:8,justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiGraphics",{draw:t=>{t.clear(),t.roundRect(0,0,60,22,4),s===e.id?(t.fill({color:n.accent.color,alpha:.15}),t.roundRect(0,0,60,22,4),t.stroke({color:n.accent.color,alpha:.5,width:1})):(t.fill({color:n.bgTertiary.color}),t.roundRect(0,0,60,22,4),t.stroke({color:n.border.color,alpha:.3,width:1}))},layout:{position:"absolute",width:60,height:22}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:98,columnNumber:15},void 0),i.jsxDEV("pixiBitmapText",{text:e.label,style:{fontFamily:sh,fontSize:9,fill:16777215},tint:s===e.id?n.accent.color:n.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:114,columnNumber:15},void 0)]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:85,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:83,columnNumber:9},void 0),A.map((e,t)=>i.jsxDEV(fx,{section:e,getValue:c,updateParam:l},`${s}-${t}`,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:127,columnNumber:9},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:69,columnNumber:5},void 0)},fx=({section:e,getValue:t,updateParam:r})=>{const n=ph(),o=ae.useCallback(e=>{e.clear(),e.rect(0,0,9999,1),e.fill({color:n.border.color,alpha:.15})},[n]);return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:6},children:[i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",alignItems:"center",gap:8},children:[i.jsxDEV("pixiBitmapText",{text:e.label,style:{fontFamily:ah,fontSize:9,fill:16777215},tint:n.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:159,columnNumber:9},void 0),i.jsxDEV("pixiGraphics",{draw:o,layout:{flex:1,height:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:165,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:158,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flexDirection:"row",flexWrap:"wrap",gap:8},children:e.controls.map(e=>i.jsxDEV(px,{descriptor:e,value:t(e.key),onChange:t=>r(e.key,t)},e.key,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:171,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:169,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:156,columnNumber:5},void 0)},px=({descriptor:e,value:t,onChange:r})=>{switch(e.type){case"knob":return i.jsxDEV(kg,{value:"number"==typeof t?t:e.defaultValue??.5,min:e.min??0,max:e.max??1,defaultValue:e.defaultValue??.5,label:e.label,size:e.size??"sm",bipolar:e.bipolar,formatValue:e.formatValue,onChange:e=>r(e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:195,columnNumber:9},void 0);case"toggle":return i.jsxDEV(Pg,{label:e.label,value:Boolean(t),onChange:e=>r(e),size:"sm"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:210,columnNumber:9},void 0);case"slider":return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:2,alignItems:"center"},children:[i.jsxDEV(Ig,{text:e.label,size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:221,columnNumber:11},void 0),i.jsxDEV(Mg,{value:"number"==typeof t?t:.5,min:e.min??0,max:e.max??1,orientation:e.orientation??"vertical",length:60,detent:e.centerDetent?((e.min??0)+(e.max??1))/2:void 0,onChange:e=>r(e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:222,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:220,columnNumber:9},void 0);case"switch3way":return i.jsxDEV("pixiContainer",{layout:{flexDirection:"column",gap:2,alignItems:"center"},children:[i.jsxDEV(Ig,{text:e.label,size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:237,columnNumber:11},void 0),i.jsxDEV(Lg,{value:"number"==typeof t?t:0,labels:e.labels,onChange:e=>r(e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:238,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/instruments/PixiSynthPanel.tsx",lineNumber:236,columnNumber:9},void 0);default:return null}},mx=e=>`${Math.round(100*e)}%`,xx={name:"TB-303 Bass Line",configKey:"tb303",tabs:[{id:"main",label:"MAIN",sections:[{label:"FILTER",controls:[{type:"knob",key:"filter.cutoff",label:"CUTOFF",color:"#ffcc00",formatValue:e=>`${Math.round(314*Math.pow(2394/314,e))} Hz`},{type:"knob",key:"filter.resonance",label:"RESO",color:"#ff6600",formatValue:mx},{type:"knob",key:"filter.envMod",label:"ENV MOD",color:"#ff3366",formatValue:mx},{type:"knob",key:"filter.decay",label:"DECAY",color:"#33ccff",formatValue:e=>`${Math.round(200+1800*e)} ms`}]},{label:"AMP",controls:[{type:"knob",key:"filter.accent",label:"ACCENT",color:"#ff0066",formatValue:mx},{type:"knob",key:"volume",label:"VOLUME",color:"#00ff99",formatValue:e=>`${Math.round(60*e-60)} dB`}]},{label:"OSCILLATOR",controls:[{type:"knob",key:"waveform",label:"WAVE",color:"#9966ff",formatValue:e=>e<.5?"SAW":"SQR"},{type:"knob",key:"tuning",label:"TUNE",color:"#66ccff",formatValue:e=>`${Math.round(400+80*e)} Hz`}]}]},{id:"devilfish",label:"DEVIL",sections:[{label:"DEVIL FISH MODS",controls:[{type:"knob",key:"devilFish.normalDecay",label:"NORM DEC",formatValue:e=>`${Math.round(30+2970*e)} ms`},{type:"knob",key:"devilFish.accentDecay",label:"ACC DEC",formatValue:e=>`${Math.round(30+2970*e)} ms`},{type:"knob",key:"devilFish.softAttack",label:"SOFT ATK",formatValue:e=>`${Math.round(.3+3e3*e)} ms`},{type:"knob",key:"devilFish.filterInputDrive",label:"DRIVE",formatValue:mx},{type:"knob",key:"devilFish.diodeCharacter",label:"DIODE",formatValue:mx},{type:"knob",key:"devilFish.duffingAmount",label:"DUFF",formatValue:mx}]}]}]},Ex=e=>`${Math.round(99*e)}`,Cx=e=>({id:`op${e}`,label:`OP ${e}`,sections:[{label:`OPERATOR ${e}`,controls:[{type:"knob",key:`operators.${e-1}.level`,label:"LEVEL",formatValue:Ex},{type:"knob",key:`operators.${e-1}.velocity`,label:"VEL",formatValue:Ex},{type:"knob",key:`operators.${e-1}.detune`,label:"DETUNE",defaultValue:.5,bipolar:!0}]},{label:"ENVELOPE",controls:[{type:"knob",key:`operators.${e-1}.envR1`,label:"R1",formatValue:Ex},{type:"knob",key:`operators.${e-1}.envR2`,label:"R2",formatValue:Ex},{type:"knob",key:`operators.${e-1}.envR3`,label:"R3",formatValue:Ex},{type:"knob",key:`operators.${e-1}.envR4`,label:"R4",formatValue:Ex},{type:"knob",key:`operators.${e-1}.envL1`,label:"L1",formatValue:Ex},{type:"knob",key:`operators.${e-1}.envL2`,label:"L2",formatValue:Ex},{type:"knob",key:`operators.${e-1}.envL3`,label:"L3",formatValue:Ex},{type:"knob",key:`operators.${e-1}.envL4`,label:"L4",formatValue:Ex}]}]}),Bx=e=>`${Math.round(2e3*e)} Hz`,bx=e=>`${Math.round(100*e)}%`,Ix=e=>`${Math.round(100*e)}%`,yx=e=>e<.1?`${Math.round(1e3*e)}ms`:`${e.toFixed(2)}s`,vx=e=>`${Math.round(e)} Hz`,wx=e=>`${Math.round(e)} ms`,Qx=e=>`${Math.round(e)}%`,Dx=e=>`${Math.round(e)} ms`,Nx=e=>`${Math.round(e)} Hz`,kx=e=>`${Math.round(e)}%`,Sx=e=>`${Math.round(100*e)}%`,Px=e=>`${Math.round(100*e)}%`,Mx=e=>`${Math.round(100*e)}%`,Vx={TB303:xx,Buzz3o3:xx,Dexed:{name:"DX7 (Dexed)",configKey:"dexed",tabs:[{id:"global",label:"GLOBAL",sections:[{label:"GLOBAL",controls:[{type:"knob",key:"algorithm",label:"ALGO",min:0,max:31,defaultValue:0,formatValue:e=>`${Math.round(e)}`},{type:"knob",key:"feedback",label:"FB",formatValue:e=>`${Math.round(7*e)}`},{type:"knob",key:"lfoSpeed",label:"LFO SPD",formatValue:Ex},{type:"knob",key:"lfoDelay",label:"LFO DLY",formatValue:Ex},{type:"knob",key:"lfoPitchModDepth",label:"P.MOD",formatValue:Ex},{type:"knob",key:"lfoAmpModDepth",label:"A.MOD",formatValue:Ex}]},{label:"PITCH ENVELOPE",controls:[{type:"knob",key:"pitchEnvR1",label:"R1",formatValue:Ex},{type:"knob",key:"pitchEnvR2",label:"R2",formatValue:Ex},{type:"knob",key:"pitchEnvR3",label:"R3",formatValue:Ex},{type:"knob",key:"pitchEnvR4",label:"R4",formatValue:Ex}]}]},Cx(1),Cx(2),Cx(3),Cx(4),Cx(5),Cx(6)]},DubSiren:{name:"Dub Siren",configKey:"dubSiren",sections:[{label:"OSCILLATOR",controls:[{type:"knob",key:"frequency",label:"FREQ",color:"#ff6600",formatValue:Bx},{type:"knob",key:"waveform",label:"WAVE",color:"#ff3366",formatValue:e=>["SIN","SQR","SAW","TRI"][Math.round(3*e)]??"SIN"},{type:"knob",key:"volume",label:"VOLUME",color:"#00ff99",formatValue:bx}]},{label:"LFO / SIREN",controls:[{type:"knob",key:"lfoRate",label:"RATE",color:"#9966ff",formatValue:e=>`${(20*e).toFixed(1)} Hz`},{type:"knob",key:"lfoDepth",label:"DEPTH",color:"#cc66ff",formatValue:bx},{type:"knob",key:"lfoWaveform",label:"LFO WAV",formatValue:e=>["SIN","SQR","SAW","TRI"][Math.round(3*e)]??"SIN"}]},{label:"DELAY",controls:[{type:"knob",key:"delayTime",label:"TIME",color:"#33ccff",formatValue:e=>`${Math.round(1e3*e)} ms`},{type:"knob",key:"delayFeedback",label:"FDBK",color:"#3399ff",formatValue:bx},{type:"knob",key:"delayMix",label:"MIX",color:"#66ccff",formatValue:bx}]},{label:"FILTER",controls:[{type:"knob",key:"filterCutoff",label:"CUTOFF",color:"#ffcc00",formatValue:Bx},{type:"knob",key:"filterResonance",label:"RESO",color:"#ff9900",formatValue:bx}]}]},OBXd:{name:"OB-Xd Analog",configKey:"obxd",tabs:[{id:"osc",label:"OSC",sections:[{label:"OSCILLATOR 1",controls:[{type:"knob",key:"osc1Level",label:"LEVEL",formatValue:Ix},{type:"knob",key:"osc1PulseWidth",label:"PW",formatValue:Ix},{type:"knob",key:"osc1Detune",label:"DETUNE",bipolar:!0,formatValue:e=>`${(100*e).toFixed(0)}ct`}]},{label:"OSCILLATOR 2",controls:[{type:"knob",key:"osc2Level",label:"LEVEL",formatValue:Ix},{type:"knob",key:"osc2PulseWidth",label:"PW",formatValue:Ix},{type:"knob",key:"osc2Detune",label:"DETUNE",bipolar:!0,formatValue:e=>`${(100*e).toFixed(0)}ct`}]},{label:"MIXER",controls:[{type:"knob",key:"noiseLevel",label:"NOISE",formatValue:Ix},{type:"knob",key:"subOscLevel",label:"SUB",formatValue:Ix},{type:"toggle",key:"oscSync",label:"SYNC"}]}]},{id:"filter",label:"FILTER",sections:[{label:"FILTER",controls:[{type:"knob",key:"filterCutoff",label:"CUTOFF",color:"#ffcc00",formatValue:Ix},{type:"knob",key:"filterResonance",label:"RESO",color:"#ff6600",formatValue:Ix},{type:"knob",key:"filterEnvAmount",label:"ENV AMT",formatValue:Ix},{type:"knob",key:"filterKeyTrack",label:"KEY TRK",formatValue:Ix}]},{label:"FILTER ENVELOPE",controls:[{type:"knob",key:"filterAttack",label:"A",formatValue:yx},{type:"knob",key:"filterDecay",label:"D",formatValue:yx},{type:"knob",key:"filterSustain",label:"S",formatValue:Ix},{type:"knob",key:"filterRelease",label:"R",formatValue:yx}]}]},{id:"amp",label:"AMP",sections:[{label:"AMP ENVELOPE",controls:[{type:"knob",key:"ampAttack",label:"A",formatValue:yx},{type:"knob",key:"ampDecay",label:"D",formatValue:yx},{type:"knob",key:"ampSustain",label:"S",formatValue:Ix},{type:"knob",key:"ampRelease",label:"R",formatValue:yx}]},{label:"LFO",controls:[{type:"knob",key:"lfoRate",label:"RATE",formatValue:Ix},{type:"knob",key:"lfoOscAmount",label:"OSC",formatValue:Ix},{type:"knob",key:"lfoFilterAmount",label:"FLT",formatValue:Ix},{type:"knob",key:"lfoPwAmount",label:"PW",formatValue:Ix}]},{label:"GLOBAL",controls:[{type:"knob",key:"masterVolume",label:"VOLUME",formatValue:Ix},{type:"knob",key:"portamento",label:"PORTA",formatValue:Ix},{type:"knob",key:"drift",label:"DRIFT",formatValue:Ix}]}]}]},ChipSynth:{name:"Chip Synth",configKey:"chipSynth",tabs:[{id:"main",label:"MAIN",sections:[{label:"SOUND",controls:[{type:"knob",key:"bitDepth",label:"BITS",min:4,max:16,defaultValue:8,formatValue:e=>`${Math.round(e)}`},{type:"knob",key:"sampleRate",label:"RATE",min:4e3,max:44100,defaultValue:22050,formatValue:vx}]},{label:"ENVELOPE",controls:[{type:"knob",key:"envelope.attack",label:"A",formatValue:wx},{type:"knob",key:"envelope.decay",label:"D",formatValue:wx},{type:"knob",key:"envelope.sustain",label:"S",formatValue:Qx},{type:"knob",key:"envelope.release",label:"R",formatValue:wx}]},{label:"VIBRATO",controls:[{type:"knob",key:"vibrato.speed",label:"SPEED",formatValue:vx},{type:"knob",key:"vibrato.depth",label:"DEPTH",formatValue:Qx},{type:"knob",key:"vibrato.delay",label:"DELAY",formatValue:wx}]}]}]},HarmonicSynth:{name:"Harmonic Synth",configKey:"harmonicSynth",tabs:[{id:"harmonics",label:"HARM",sections:[{label:"SPECTRAL",controls:[{type:"knob",key:"spectralTilt",label:"TILT",min:-100,max:100,defaultValue:0,bipolar:!0,formatValue:e=>`${Math.round(e)}`},{type:"knob",key:"evenOddBalance",label:"E/O BAL",min:-100,max:100,defaultValue:0,bipolar:!0,formatValue:e=>`${Math.round(e)}`}]},{label:"FILTER",controls:[{type:"knob",key:"filter.cutoff",label:"CUTOFF",min:20,max:2e4,defaultValue:8e3,color:"#ffcc00",formatValue:e=>`${Math.round(e)} Hz`},{type:"knob",key:"filter.resonance",label:"RESO",min:0,max:30,defaultValue:1,color:"#ff6600",formatValue:e=>`${e.toFixed(1)}`}]}]},{id:"env",label:"ENV",sections:[{label:"AMP ENVELOPE",controls:[{type:"knob",key:"envelope.attack",label:"A",formatValue:Dx},{type:"knob",key:"envelope.decay",label:"D",formatValue:Dx},{type:"knob",key:"envelope.sustain",label:"S",formatValue:e=>`${Math.round(100*e)}%`},{type:"knob",key:"envelope.release",label:"R",formatValue:Dx}]},{label:"LFO",controls:[{type:"knob",key:"lfo.rate",label:"RATE",min:.1,max:20,defaultValue:2,formatValue:e=>`${e.toFixed(1)} Hz`},{type:"knob",key:"lfo.depth",label:"DEPTH",min:0,max:100,defaultValue:0,formatValue:e=>`${Math.round(e)}%`}]}]}]},SpaceLaser:{name:"Space Laser",configKey:"spaceLaser",tabs:[{id:"laser",label:"LASER",sections:[{label:"SWEEP",controls:[{type:"knob",key:"laser.startFreq",label:"START",min:100,max:1e4,defaultValue:5e3,color:"#ff3366",formatValue:Nx},{type:"knob",key:"laser.endFreq",label:"END",min:20,max:5e3,defaultValue:100,color:"#33ccff",formatValue:Nx},{type:"knob",key:"laser.sweepTime",label:"TIME",min:10,max:5e3,defaultValue:500,formatValue:e=>`${Math.round(e)} ms`}]},{label:"FM",controls:[{type:"knob",key:"fm.amount",label:"AMOUNT",min:0,max:100,defaultValue:20,color:"#9966ff",formatValue:kx},{type:"knob",key:"fm.ratio",label:"RATIO",min:.5,max:16,defaultValue:2,formatValue:e=>`${e.toFixed(1)}x`}]}]},{id:"fx",label:"FX",sections:[{label:"NOISE",controls:[{type:"knob",key:"noise.amount",label:"NOISE",min:0,max:100,defaultValue:10,formatValue:kx}]},{label:"FILTER",controls:[{type:"knob",key:"filter.cutoff",label:"CUTOFF",min:20,max:2e4,defaultValue:8e3,color:"#ffcc00",formatValue:Nx},{type:"knob",key:"filter.resonance",label:"RESO",min:0,max:100,defaultValue:20,color:"#ff6600",formatValue:kx}]},{label:"DELAY",controls:[{type:"toggle",key:"delay.enabled",label:"DELAY"},{type:"knob",key:"delay.time",label:"TIME",formatValue:e=>`${e.toFixed(2)}s`},{type:"knob",key:"delay.feedback",label:"FDBK",formatValue:kx},{type:"knob",key:"delay.wet",label:"WET",formatValue:kx}]}]}]},Odin2:{name:"Odin2 Hybrid",configKey:"wam",sections:[{label:"OSCILLATORS",controls:[{type:"knob",key:"parameterValues.osc1_vol",label:"OSC 1",formatValue:Sx},{type:"knob",key:"parameterValues.osc2_vol",label:"OSC 2",formatValue:Sx},{type:"knob",key:"parameterValues.osc3_vol",label:"OSC 3",formatValue:Sx}]},{label:"FILTER",controls:[{type:"knob",key:"parameterValues.fil1_freq",label:"CUTOFF",color:"#ffcc00",formatValue:Sx},{type:"knob",key:"parameterValues.fil1_res",label:"RESO",color:"#ff6600",formatValue:Sx},{type:"knob",key:"parameterValues.fil1_env",label:"ENV AMT",formatValue:Sx}]},{label:"ENVELOPE",controls:[{type:"knob",key:"parameterValues.amp_attack",label:"A",formatValue:Sx},{type:"knob",key:"parameterValues.amp_decay",label:"D",formatValue:Sx},{type:"knob",key:"parameterValues.amp_sustain",label:"S",formatValue:Sx},{type:"knob",key:"parameterValues.amp_release",label:"R",formatValue:Sx}]}]},Surge:{name:"Surge XT",configKey:"wam",sections:[{label:"OSCILLATOR",controls:[{type:"knob",key:"parameterValues.osc1_level",label:"OSC 1",formatValue:Px},{type:"knob",key:"parameterValues.osc2_level",label:"OSC 2",formatValue:Px},{type:"knob",key:"parameterValues.osc3_level",label:"OSC 3",formatValue:Px}]},{label:"FILTER",controls:[{type:"knob",key:"parameterValues.filter1_cutoff",label:"CUTOFF",color:"#ffcc00",formatValue:Px},{type:"knob",key:"parameterValues.filter1_resonance",label:"RESO",color:"#ff6600",formatValue:Px},{type:"knob",key:"parameterValues.filter1_envmod",label:"ENV MOD",formatValue:Px}]},{label:"ENVELOPE",controls:[{type:"knob",key:"parameterValues.env1_attack",label:"A",formatValue:Px},{type:"knob",key:"parameterValues.env1_decay",label:"D",formatValue:Px},{type:"knob",key:"parameterValues.env1_sustain",label:"S",formatValue:Px},{type:"knob",key:"parameterValues.env1_release",label:"R",formatValue:Px}]}]},Vital:{name:"Vital Wavetable",configKey:"wam",sections:[{label:"OSCILLATORS",controls:[{type:"knob",key:"parameterValues.osc_1_level",label:"OSC 1",formatValue:Mx},{type:"knob",key:"parameterValues.osc_2_level",label:"OSC 2",formatValue:Mx},{type:"knob",key:"parameterValues.osc_3_level",label:"OSC 3",formatValue:Mx}]},{label:"FILTER",controls:[{type:"knob",key:"parameterValues.filter_1_cutoff",label:"CUTOFF",color:"#ffcc00",formatValue:Mx},{type:"knob",key:"parameterValues.filter_1_resonance",label:"RESO",color:"#ff6600",formatValue:Mx},{type:"knob",key:"parameterValues.filter_1_env_depth",label:"ENV",formatValue:Mx}]},{label:"ENVELOPE",controls:[{type:"knob",key:"parameterValues.env_1_attack",label:"A",formatValue:Mx},{type:"knob",key:"parameterValues.env_1_decay",label:"D",formatValue:Mx},{type:"knob",key:"parameterValues.env_1_sustain",label:"S",formatValue:Mx},{type:"knob",key:"parameterValues.env_1_release",label:"R",formatValue:Mx}]},{label:"MODULATION",controls:[{type:"knob",key:"parameterValues.lfo_1_frequency",label:"LFO RATE",formatValue:Mx},{type:"knob",key:"parameterValues.macro_control_1",label:"MACRO 1",formatValue:Mx},{type:"knob",key:"parameterValues.macro_control_2",label:"MACRO 2",formatValue:Mx}]}]}};const _x=({synthType:e,config:t,onChange:r,instrumentName:n})=>{const o=ph(),s=function(e){return Vx[e]}(e),a=ae.useCallback(e=>{e.clear(),e.rect(0,0,4e3,40),e.fill({color:o.bgSecondary.color}),e.rect(0,39,4e3,1),e.fill({color:o.border.color,alpha:o.border.alpha})},[o]);return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:"100%",flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:"100%",height:40,flexDirection:"row",alignItems:"center",paddingLeft:12,paddingRight:12,gap:12},children:[i.jsxDEV("pixiGraphics",{draw:a,layout:{position:"absolute",width:"100%",height:40}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:59,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"INSTRUMENT EDITOR",size:"sm",weight:"bold",color:"accent"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:61,columnNumber:9},void 0),n&&i.jsxDEV(Ig,{text:n,size:"sm",color:"textSecondary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:64,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:67,columnNumber:9},void 0),i.jsxDEV(Ig,{text:e,size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:69,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:48,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%",overflow:"hidden"},children:s?i.jsxDEV(gx,{layout:s,config:t,onChange:r},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:81,columnNumber:11},void 0):i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%",justifyContent:"center",alignItems:"center"},children:[i.jsxDEV("pixiBitmapText",{text:`No PixiJS layout for "${e}"`,style:{fontFamily:sh,fontSize:12,fill:16777215},tint:o.textMuted.color,layout:{}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:95,columnNumber:13},void 0),i.jsxDEV("pixiBitmapText",{text:"Add layout config to src/pixi/views/instruments/layouts/",style:{fontFamily:sh,fontSize:10,fill:16777215},tint:o.textMuted.color,layout:{marginTop:4}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:101,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:87,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiInstrumentEditor.tsx",lineNumber:40,columnNumber:5},void 0)},Lx=ae.createContext({camera:{x:0,y:0,scale:1},focusWindow:()=>{},setSnapLines:()=>{}});const Rx={tracker:{title:"Tracker",component:()=>{ie(),re();const[e,t]=ae.useState("tracker"),[r,n]=ae.useState(0),o=l(e=>e.showPatterns),s=l(e=>e.modalOpen),a=l(e=>e.closeModal),c=f(e=>e.editorMode),{width:A,height:u}=Eh(),d=l(e=>e.showMacroSlots),[h,g]=(l(e=>e.compactToolbar),ae.useState(!0)),p=A>=900,m="tb303"!==e&&"sunvox"!==e&&p&&h,x=l(e=>e.showAutomationLanes),E=l(e=>e.showMacroLanes),C=l(e=>e.tb303Collapsed),B=S(e=>e.instruments.some(e=>"TB303"===e.synthType)),b=f(e=>e.patterns[e.currentPatternIndex]?.id??""),I=f(e=>e.patterns[e.currentPatternIndex]?.length??64),y=f(e=>e.patterns[e.currentPatternIndex]?.channels?.length??4),v=f(e=>{const t=e.currentPositionIndex>0?e.currentPositionIndex-1:-1;return t>=0?e.patterns[e.patternOrder[t]]?.id??void 0:void 0}),w=f(e=>{const t=e.currentPositionIndex>0?e.currentPositionIndex-1:-1;return t>=0?e.patterns[e.patternOrder[t]]?.length??void 0:void 0}),Q=f(e=>{const t=e.currentPositionIndex<e.patternOrder.length-1?e.currentPositionIndex+1:-1;return t>=0?e.patterns[e.patternOrder[t]]?.id??void 0:void 0}),D=f(e=>{const t=e.currentPositionIndex<e.patternOrder.length-1?e.currentPositionIndex+1:-1;return t>=0?e.patterns[e.patternOrder[t]]?.length??void 0:void 0}),N=B&&"tb303"!==e&&"sunvox"!==e?C?40:222:0,k=u-98-132-32-32-(d?32:0)-(o?180:0)-N,P=A-(m?200:0)-16;return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:"100%",flexDirection:"column"},children:[i.jsxDEV(lf,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:124,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:"100%",height:N},alpha:N>0?1:0,renderable:N>0,children:i.jsxDEV(Np,{width:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:128,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:127,columnNumber:7},void 0),i.jsxDEV(Qf,{viewMode:e,onViewModeChange:t,gridChannelIndex:r,onGridChannelChange:n},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:132,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{width:"100%",height:o?180:0},alpha:o?1:0,renderable:o,children:i.jsxDEV(Rp,{width:A,height:180},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:136,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:135,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%",height:k,flexDirection:"row"},children:[i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%",height:"100%"},children:[i.jsxDEV("pixiContainer",{alpha:"tracker"===e&&"classic"===c?1:0,renderable:"tracker"===e&&"classic"===c,eventMode:"tracker"===e&&"classic"===c?"static":"none",layout:{flex:"tracker"===e&&"classic"===c?1:0,height:"tracker"===e&&"classic"===c?"100%":0,width:"tracker"===e&&"classic"===c?"100%":0},children:i.jsxDEV(dm,{width:Math.max(100,P),height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:167,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:157,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"grid"===e?1:0,renderable:"grid"===e,eventMode:"grid"===e?"static":"none",layout:{flex:"grid"===e?1:0,height:"grid"===e?"100%":0,width:"grid"===e?"100%":0},children:i.jsxDEV(Bm,{channelIndex:r,width:Math.max(100,P),height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:181,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:171,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"pianoroll"===e?1:0,renderable:"pianoroll"===e,eventMode:"pianoroll"===e?"static":"none",layout:{flex:"pianoroll"===e?1:0,height:"pianoroll"===e?"100%":0,width:"pianoroll"===e?"100%":0},children:i.jsxDEV(jm,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:195,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:185,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"tb303"===e?1:0,renderable:"tb303"===e,eventMode:"tb303"===e?"static":"none",layout:{flex:"tb303"===e?1:0,height:"tb303"===e?"100%":0,width:"tb303"===e?"100%":0},children:i.jsxDEV(Qm,{channelIndex:r,width:Math.max(100,P),height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:209,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:199,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"sunvox"===e?1:0,renderable:"sunvox"===e,eventMode:"sunvox"===e?"static":"none",layout:{flex:"sunvox"===e?1:0,height:"sunvox"===e?"100%":0,width:"sunvox"===e?"100%":0},children:i.jsxDEV(_m,{channelIndex:r,width:Math.max(100,P),height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:223,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:213,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"tracker"===e&&"furnace"===c?1:0,renderable:"tracker"===e&&"furnace"===c,eventMode:"tracker"===e&&"furnace"===c?"static":"none",layout:{flex:"tracker"===e&&"furnace"===c?1:0,height:"tracker"===e&&"furnace"===c?"100%":0,width:"tracker"===e&&"furnace"===c?"100%":0},children:i.jsxDEV(Ff,{width:Math.max(100,P),height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:237,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:227,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"tracker"===e&&"hively"===c?1:0,renderable:"tracker"===e&&"hively"===c,eventMode:"tracker"===e&&"hively"===c?"static":"none",layout:{flex:"tracker"===e&&"hively"===c?1:0,height:"tracker"===e&&"hively"===c?"100%":0,width:"tracker"===e&&"hively"===c?"100%":0},children:i.jsxDEV(np,{width:Math.max(100,P),height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:251,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:241,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"tracker"===e&&"musicline"===c?1:0,renderable:"tracker"===e&&"musicline"===c,eventMode:"tracker"===e&&"musicline"===c?"static":"none",layout:{flex:"tracker"===e&&"musicline"===c?1:0,height:"tracker"===e&&"musicline"===c?"100%":0,width:"tracker"===e&&"musicline"===c?"100%":0,flexDirection:"column"},children:[i.jsxDEV(Hp,{width:Math.max(100,P),height:220,onSeek:e=>{f.getState().setCurrentPosition(e),M().jumpToPosition(e,0)}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:266,columnNumber:13},void 0),i.jsxDEV(em,{width:Math.max(100,P),height:Math.max(50,k-220)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:274,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:255,columnNumber:11},void 0),(()=>{const t=k-28-12,r=Math.max(50,Math.floor(40+(t-24)/2));return i.jsxDEV("pixiContainer",{alpha:"tracker"===e&&"classic"===c?1:0,renderable:"tracker"===e&&"classic"===c,eventMode:"tracker"===e&&"classic"===c?"static":"none",layout:{position:"absolute",width:Math.max(100,P),height:r},children:i.jsxDEV(df,{width:Math.max(100,P),height:r},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:296,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:295,columnNumber:15},void 0)})(),i.jsxDEV("pixiContainer",{alpha:"tracker"===e&&x&&b?1:0,renderable:"tracker"===e&&x&&!!b,eventMode:"tracker"===e&&x&&b?"static":"none",layout:{position:"absolute"},children:i.jsxDEV(ff,{width:Math.max(100,P),height:Math.max(100,k),patternId:b||"",patternLength:I,rowHeight:18,channelCount:y,prevPatternId:v,prevPatternLength:w,nextPatternId:Q,nextPatternLength:D},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:301,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:300,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:"tracker"===e&&E?1:0,renderable:"tracker"===e&&E,eventMode:"tracker"===e&&E?"static":"none",layout:{position:"absolute"},children:i.jsxDEV(xf,{width:Math.max(100,P),height:Math.max(100,k),patternLength:I,rowHeight:18,channelCount:y},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:315,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:314,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:149,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{alpha:"tracker"===e?1:0,renderable:"tracker"===e,eventMode:"tracker"===e?"static":"none",layout:{width:"tracker"===e?16:0},children:i.jsxDEV(hf,{height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:327,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:326,columnNumber:9},void 0),i.jsxDEV(lp,{width:32,height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:331,columnNumber:9},void 0),p&&"tb303"!==e&&"sunvox"!==e&&i.jsxDEV(Hm,{visible:m,onClick:()=>g(e=>!e)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:335,columnNumber:11},void 0),i.jsxDEV("pixiContainer",{alpha:m?1:0,renderable:m,eventMode:m?"static":"none",layout:{width:m?200:0,height:"100%"},children:i.jsxDEV(uf,{width:200,height:Math.max(100,k)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:343,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:342,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:140,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{alpha:d&&"tracker"===e?1:0,renderable:d&&"tracker"===e,eventMode:d&&"tracker"===e?"static":"none",layout:{width:"100%",height:d&&"tracker"===e?32:0},children:i.jsxDEV(Ef,{width:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:349,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:348,columnNumber:7},void 0),i.jsxDEV(Bf,{width:A},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:353,columnNumber:7},void 0),i.jsxDEV(kf,{isOpen:"randomize"===s,onClose:a,channelIndex:r},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:356,columnNumber:7},void 0),i.jsxDEV(Sf,{isOpen:"acidPattern"===s,onClose:a,channelIndex:r},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:361,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiTrackerView.tsx",lineNumber:116,columnNumber:5},void 0)}},pianoroll:{title:"Piano Roll",component:jm},arrangement:{title:"Arrangement",component:()=>{const e=ph(),r=t(e=>e.getCurrentTheme().colors),n=p(e=>e.isPlaying),o=ae.useRef(0),s=se(e=>e.tracks),a=se(e=>e.isArrangementMode),c=se(e=>e.playbackRow),A=se(e=>e.tool),u=se(e=>e.setTool),d=se(e=>e.view),h=f(e=>{const t=e.patterns[e.currentPatternIndex];return t?.channels||[]}),g=ae.useMemo(()=>s.length>0?s.map((e,t)=>({id:e.id,name:e.name,muted:e.muted,solo:e.solo,color:hx(e.color,dx[t%dx.length])})):h.map((e,t)=>({id:e.id,name:e.name||`Ch ${t+1}`,muted:e.muted,solo:e.solo,color:hx(e.color,dx[t%dx.length])})),[s,h]),m=se(e=>e.clips),x=se(e=>e.selectedClipIds),E=f(e=>e.patterns),C=ae.useMemo(()=>{const e=new Map;return g.forEach((t,i)=>e.set(t.id,i)),m.map(t=>{let i=t.clipLengthRows??64;if(null==t.clipLengthRows){const e=E.find(e=>e.id===t.patternId);if(e){const r=e.channels[0]?.rows?.length??64;i=Math.max(1,r-(t.offsetRows||0))}}const r=e.get(t.trackId)??0,n=g[r]?.color??3900150,o=t.color?hx(t.color,n):n;let s=t.name||"";if(!s){const e=E.find(e=>e.id===t.patternId);s=e?.name||`Pattern ${t.sourceChannelIndex}`}return{id:t.id,startRow:t.startRow,lengthRows:i,trackIndex:r,color:o,name:s,muted:t.muted,selected:x.has(t.id)}})},[m,g,x,E]),B=s.length>0;ae.useEffect(()=>{se.getState().setIsArrangementMode(!0);const e=se.getState();if(0===e.tracks.length){const t=f.getState();t.patternOrder.length>0&&(e.importFromPatternOrder(t.patternOrder,t.patterns),e.zoomToFit())}return()=>{se.getState().setIsArrangementMode(!1)}},[]),ae.useEffect(()=>{if(!n||!a)return;let e;const t=()=>{const i=p.getState().currentGlobalRow;i!==o.current&&(o.current=i,se.getState().setPlaybackRow(i)),e=requestAnimationFrame(t)};return e=requestAnimationFrame(t),()=>cancelAnimationFrame(e)},[n,a]),Ve();const b=ae.useCallback(e=>{if(B)se.getState().toggleTrackMute(e);else{const t=f.getState(),i=t.patterns[t.currentPatternIndex],r=i?.channels.findIndex(t=>t.id===e)??-1;r>=0&&t.toggleChannelMute(r)}},[B]),I=ae.useCallback(e=>{if(B)se.getState().toggleTrackSolo(e);else{const t=f.getState(),i=t.patterns[t.currentPatternIndex],r=i?.channels.findIndex(t=>t.id===e)??-1;r>=0&&t.toggleChannelSolo(r)}},[B]),y=ae.useCallback(e=>{u(e)},[u]);ae.useEffect(()=>{const e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.ctrlKey||e.metaKey))switch(e.key.toLowerCase()){case"v":y("select");break;case"d":y("draw");break;case"e":y("erase");break;case"s":y("split")}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y]);const v=ae.useCallback(()=>{const e=se.getState();e.setPixelsPerRow(2*e.view.pixelsPerRow)},[]),w=ae.useCallback(()=>{const e=se.getState();e.setPixelsPerRow(e.view.pixelsPerRow/2)},[]),Q=[1,2,4,8,16],D=ae.useCallback(()=>{const e=se.getState(),t=Q.indexOf(e.view.snapDivision),i=Q[(t+1)%Q.length];e.setSnapDivision(i)},[]),N=ae.useCallback(()=>{const e=se.getState();e.setFollowPlayback(!e.view.followPlayback)},[]),k=ae.useCallback(()=>{se.getState().addTrack()},[]),S=ae.useCallback(t=>{t.clear(),t.rect(0,0,4e3,36),t.fill({color:e.bgSecondary.color}),t.rect(0,35,4e3,1),t.fill({color:e.border.color,alpha:e.border.alpha})},[e]);return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:"100%",flexDirection:"column"},children:[i.jsxDEV("pixiContainer",{layout:{width:"100%",height:36,flexDirection:"row",alignItems:"center",paddingLeft:8,gap:8},children:[i.jsxDEV("pixiGraphics",{draw:S,layout:{position:"absolute",width:"100%",height:36}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:260,columnNumber:9},void 0),i.jsxDEV(cf,{layout:{height:24,width:100},style:{overflow:"visible"},children:i.jsxDEV("select",{value:"arrangement",onChange:e=>{const t=e.target.value;setTimeout(()=>l.getState().setActiveView(t),0)},style:{width:"100%",height:"100%",padding:"0 4px",fontSize:"11px",fontFamily:"monospace",background:r.bg,color:r.text,border:`1px solid ${r.border}`,borderRadius:"3px",cursor:"pointer",outline:"none"},children:[i.jsxDEV("option",{value:"tracker",children:"Tracker"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:287,columnNumber:13},void 0),i.jsxDEV("option",{value:"arrangement",children:"Arrangement"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:288,columnNumber:13},void 0),i.jsxDEV("option",{value:"pianoroll",children:"Piano Roll"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:289,columnNumber:13},void 0),i.jsxDEV("option",{value:"dj",children:"DJ Mixer"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:290,columnNumber:13},void 0),i.jsxDEV("option",{value:"drumpad",children:"Drum Pads"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:291,columnNumber:13},void 0),i.jsxDEV("option",{value:"vj",children:"VJ View"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:292,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:267,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:263,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"ARRANGEMENT",size:"sm",weight:"bold",color:"accent"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:296,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Select",variant:"select"===A?"ft2":"ghost",color:"select"===A?"blue":void 0,size:"sm",active:"select"===A,onClick:()=>y("select")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:298,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Draw",variant:"draw"===A?"ft2":"ghost",color:"draw"===A?"green":void 0,size:"sm",active:"draw"===A,onClick:()=>y("draw")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:306,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Erase",variant:"erase"===A?"ft2":"ghost",color:"erase"===A?"red":void 0,size:"sm",active:"erase"===A,onClick:()=>y("erase")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:314,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Split",variant:"split"===A?"ft2":"ghost",color:"split"===A?"yellow":void 0,size:"sm",active:"split"===A,onClick:()=>y("split")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:322,columnNumber:9},void 0),i.jsxDEV(bh,{label:"-",variant:"ghost",size:"sm",onClick:w},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:332,columnNumber:9},void 0),i.jsxDEV(Ig,{text:"Zoom",size:"xs",color:"textMuted"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:333,columnNumber:9},void 0),i.jsxDEV(bh,{label:"+",variant:"ghost",size:"sm",onClick:v},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:334,columnNumber:9},void 0),i.jsxDEV(bh,{label:`Snap:${d.snapDivision}`,variant:"ghost",size:"sm",onClick:D},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:337,columnNumber:9},void 0),i.jsxDEV(bh,{label:"Follow",variant:d.followPlayback?"ft2":"ghost",color:d.followPlayback?"blue":void 0,size:"sm",active:d.followPlayback,onClick:N},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:345,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:354,columnNumber:9},void 0),i.jsxDEV(bh,{label:"+ Track",variant:"ghost",size:"sm",onClick:k},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:357,columnNumber:9},void 0),i.jsxDEV(Ig,{text:`Row: ${d.scrollRow}`,size:"xs",color:"textMuted",layout:{marginRight:8}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:359,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:250,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%",flexDirection:"row"},children:[i.jsxDEV(ux,{tracks:g,width:160,onToggleMute:b,onToggleSolo:I},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:375,columnNumber:9},void 0),i.jsxDEV(Ax,{width:4e3,height:4e3,scrollBeat:d.scrollRow,pixelsPerBeat:d.pixelsPerRow,playbackBeat:n?c:void 0,clips:C,trackHeight:40},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:377,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:368,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiArrangementView.tsx",lineNumber:242,columnNumber:5},void 0)}},dj:{title:"DJ",component:()=>{const e=ae.useRef(null),t=h(e=>e.setDJModeActive),r=h(e=>e.thirdDeckActive);Qe(),ae.useEffect(()=>{const{isPlaying:i,stop:r}=p.getState();return i&&r(),E().releaseAll(),e.current=ne(),t(!0),()=>{t(!1),oe(),De(),e.current=null;const i=E();i.setGlobalPlaybackRate(1),i.setGlobalDetune(0),i.releaseAll(),p.getState().setGlobalPitch(0)}},[t]);const[n,o]=ae.useState("none");return i.jsxDEV("pixiContainer",{layout:{width:"100%",height:"100%",flexDirection:"column"},children:[i.jsxDEV(cx,{browserPanel:n,onBrowserPanelChange:o},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:73,columnNumber:7},void 0),"none"!==n&&i.jsxDEV(cf,{layout:{width:"100%",height:280},style:{overflow:"hidden",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:["playlists"===n&&i.jsxDEV(Ne,{onClose:()=>o("none")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:81,columnNumber:44},void 0),"modland"===n&&i.jsxDEV(ke,{onClose:()=>o("none")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:82,columnNumber:42},void 0),"serato"===n&&i.jsxDEV(Se,{onClose:()=>o("none")},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:83,columnNumber:41},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:77,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%",flexDirection:"row"},children:[i.jsxDEV(qm,{deckId:"A"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:95,columnNumber:9},void 0),i.jsxDEV($m,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:96,columnNumber:9},void 0),i.jsxDEV(qm,{deckId:"B"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:97,columnNumber:9},void 0),r&&i.jsxDEV(qm,{deckId:"C"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:98,columnNumber:29},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:88,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiDJView.tsx",lineNumber:65,columnNumber:5},void 0)}},vj:{title:"VJ",component:()=>i.jsxDEV("pixiContainer",{layout:{width:"100%",height:"100%"},children:i.jsxDEV(cf,{layout:{width:"100%",height:"100%"},style:{overflow:"hidden",background:"#000"},children:i.jsxDEV(_e,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiVJView.tsx",lineNumber:19,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiVJView.tsx",lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/views/PixiVJView.tsx",lineNumber:14,columnNumber:5},void 0)},instrument:{title:"Instrument Editor",component:()=>{const e=S(e=>e.instruments.find(t=>t.id===e.currentInstrumentId)??e.instruments[0]),t=S(e=>e.updateInstrument);return e?i.jsxDEV(_x,{synthType:e.synthType,config:e,onChange:i=>t(e.id,i),instrumentName:e.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:49,columnNumber:5},void 0):null}}};function Ux(e,t,i,r){if(e.clear(),i<=.01||0===t.length)return;const n=Math.max(.5,1/r);for(const o of t)"x"===o.axis?(e.moveTo(o.value,o.from),e.lineTo(o.value,o.to)):(e.moveTo(o.from,o.value),e.lineTo(o.to,o.value)),e.stroke({color:4890367,alpha:i,width:n})}const Tx=()=>{const{width:e,height:t}=Eh(),r=ph(),n=Dh(e=>e.camera),o=Dh(e=>e.windows),s=Dh(e=>e.panCamera),a=Dh(e=>e.zoomCamera),l=ae.useRef(null),c=ae.useRef(null),A=ae.useRef(null),u=ae.useRef([]),d=ae.useRef(0),h=ae.useRef(0),g=ae.useRef(null);ae.useEffect(()=>{const e=e=>{l.current&&function(e,t){e.x=t.x,e.y=t.y,e.scale.set(t.scale)}(l.current,e),A.current&&u.current.length>0&&Ux(A.current,u.current,d.current,e.scale),c.current&&(c.current.text=`${Math.round(100*e.scale)}%`)};return e(Dh.getState().camera),Dh.subscribe(t=>e(t.camera))},[]);const f=ae.useCallback(e=>{cancelAnimationFrame(h.current),u.current=e;const t=A.current;if(t)if(e.length>0)d.current=1,Ux(t,e,1,Dh.getState().camera.scale);else{const e=d.current,i=performance.now(),r=()=>{const n=performance.now()-i,o=Math.min(1,n/300),s=e*(1-o);d.current=s,Ux(t,u.current.length>0?u.current:[],s,Dh.getState().camera.scale),o<1?h.current=requestAnimationFrame(r):(u.current=[],t.clear())};h.current=requestAnimationFrame(r)}},[]);ae.useEffect(()=>()=>{cancelAnimationFrame(h.current)},[]);const p=ae.useCallback(()=>{g.current?.cancel(),g.current=null},[]),m=ae.useCallback((e,t)=>{p(),g.current=Mh(e,t)},[p]),x=ae.useCallback(i=>{const r=Dh.getState().windows[i];r&&r.visible&&(jh(440,660,.14,.07),jh(660,990,.1,.04),m(function(e,t,i,r=.85){const n=t*r/e.width,o=i*r/e.height,s=Math.min(n,o,2);return{x:t/2-(e.x+e.width/2)*s,y:i/2-(e.y+e.height/2)*s,scale:s}}(r,e,t)))},[e,t,m]),E=ae.useRef(null);ae.useEffect(()=>{const i=i=>{if("Tab"!==i.key||i.repeat)return;const r=document.activeElement?.tagName.toLowerCase();"input"!==r&&"textarea"!==r&&(i.preventDefault(),E.current={...Dh.getState().camera},m(Ph(Dh.getState().windows,e,t)))},r=e=>{if("Tab"!==e.key)return;e.preventDefault();const t=E.current;t&&m(t,()=>{E.current=null})};return window.addEventListener("keydown",i),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",i),window.removeEventListener("keyup",r)}},[e,t,m]);const C=ae.useRef(null),B=ae.useCallback(e=>{p(),C.current={lastX:e.globalX,lastY:e.globalY},document.body.style.cursor="grabbing";const t=e=>{if(!C.current)return;const t=e.clientX-C.current.lastX,i=e.clientY-C.current.lastY;C.current.lastX=e.clientX,C.current.lastY=e.clientY,s(t,i)},i=()=>{C.current=null,document.body.style.cursor="",document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",i)};document.addEventListener("pointermove",t),document.addEventListener("pointerup",i)},[s,p]),b=ae.useCallback(e=>{const t=Dh.getState().camera,i=(e.clientX-t.x)/t.scale,r=(e.clientY-t.y)/t.scale,n=Dh.getState().windows;if(Object.values(n).some(e=>e.visible&&!e.minimized&&i>=e.x&&i<=e.x+e.width&&r>=e.y&&r<=e.y+e.height))return;e.preventDefault(),p();const o=Math.max(-.4,Math.min(.4,.001*-e.deltaY));a(o,e.clientX,e.clientY)},[a,p]);ae.useEffect(()=>{const e=document.querySelector("canvas");if(e)return e.addEventListener("wheel",b,{passive:!1}),()=>e.removeEventListener("wheel",b)},[b]),ae.useEffect(()=>()=>p(),[p]);const I={camera:n,focusWindow:x,setSnapLines:f};return i.jsxDEV(Lx.Provider,{value:I,children:i.jsxDEV("pixiContainer",{layout:{width:e,height:"100%"},eventMode:"static",children:[i.jsxDEV(cg,{width:e,height:t,camera:n},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:322,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{layout:{position:"absolute",width:e,height:t},eventMode:"static",cursor:"grab",onPointerDown:B},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:325,columnNumber:9},void 0),i.jsxDEV("pixiBitmapText",{ref:c,text:"100%",style:{fontFamily:sh,fontSize:11,fill:16777215},tint:r.textMuted.color,alpha:.5,layout:{position:"absolute",bottom:8,left:10}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:333,columnNumber:9},void 0),i.jsxDEV("pixiContainer",{ref:l,layout:{position:"absolute",width:e,height:t},sortableChildren:!0,children:[Object.entries(Rx).map(([r,{title:s,component:a}])=>{const l=o[r];return l?.visible?i.jsxDEV(gg,{id:r,title:s,camera:n,screenW:e,screenH:t,onFocus:x,children:i.jsxDEV("pixiContainer",{layout:{width:l.width,height:l.height-Ag,flexDirection:"column"},children:i.jsxDEV(a,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:369,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:362,columnNumber:17},void 0)},r,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:353,columnNumber:15},void 0):null}),i.jsxDEV(fg,{fromId:"instrument",toId:"tracker"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:376,columnNumber:11},void 0),i.jsxDEV("pixiGraphics",{ref:A,draw:()=>{},zIndex:9999},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:379,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:343,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:321,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/workbench/WorkbenchContainer.tsx",lineNumber:320,columnNumber:5},void 0)},Ox=()=>{const{width:e,height:t}=Eh(),r=A(e=>e.status),n=l(e=>e.activeView);return ae.useEffect(()=>{if("drumpad"===n){const e=l.getState();"drumpads"!==e.modalOpen&&e.openModal("drumpads")}},[n]),i.jsxDEV("pixiContainer",{layout:{width:e,height:t,flexDirection:"column"},children:[i.jsxDEV(Oh,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiRoot.tsx",lineNumber:42,columnNumber:7},void 0),i.jsxDEV("pixiContainer",{layout:{flex:1,width:"100%"},children:i.jsxDEV(Tx,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiRoot.tsx",lineNumber:46,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiRoot.tsx",lineNumber:45,columnNumber:7},void 0),i.jsxDEV(ag,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiRoot.tsx",lineNumber:50,columnNumber:7},void 0),"connected"===r&&i.jsxDEV(lg,{width:e,height:t},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiRoot.tsx",lineNumber:54,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiRoot.tsx",lineNumber:34,columnNumber:5},void 0)};let Fx=null;var Gx;Gx={Container:Zi,Graphics:ic,BitmapText:class extends Dc{constructor(...e){var t;const i=Nc(e,"BitmapText");i.style??(i.style=i.style||{}),(t=i.style).fill??(t.fill=16777215),super(i,hA),this.renderPipeId="bitmapText"}_onTouch(e){this._gcLastUsed=e;for(const t in this._gpuData)this._gpuData[t]?._onTouch(e)}updateBounds(){const e=this._bounds,t=this._anchor,i=wA.measureText(this.text,this._style),r=i.scale,n=i.offsetY*r;let o=i.width*r,s=i.height*r;const a=this._style._stroke;a&&(o+=a.width,s+=a.width),e.minX=-t._x*o,e.maxX=e.minX+o,e.minY=-t._y*(s+n),e.maxY=e.minY+s}set resolution(e){null!==e&&li()}get resolution(){return this._resolution}},Sprite:er,Text:class extends Dc{constructor(...e){const t=Nc(e,"Text");super(t,hA),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof bt?t.textureStyle:new bt(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let i=0,r=0;if(this._style.trim){const{frame:e,canvasAndContext:t}=uA.getCanvasAndContext({text:this.text,style:this._style,resolution:1});uA.returnCanvasAndContext(t),i=e.width,r=e.height}else{const e=oA.measureText(this._text,this._style);i=e.width,r=e.height}e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*r,e.maxY=e.minY+r}}},Object.assign(Iu,Gx);let jx=null;const Hx=()=>{const{app:e}=Wu(),t=ph();return ae.useEffect(()=>{e?.renderer&&(e.renderer.background.color=t.bg.color)},[e,t.bg.color]),ae.useEffect(()=>{if(e)return Fx=()=>p.getState().isPlaying,function(e){if(!e?.ticker)return()=>{};let t=performance.now(),i=!1;const r=()=>{t=performance.now(),i&&(i=!1,e.ticker.maxFPS=60)},n=["pointerdown","pointermove","wheel","keydown"];for(const s of n)window.addEventListener(s,r,{passive:!0});const o=setInterval(()=>{Fx&&Fx()?r():!i&&performance.now()-t>2e3&&(i=!0,e.ticker.maxFPS=10,e.renderer.render(e.stage))},500);return e.ticker.maxFPS=60,()=>{for(const e of n)window.removeEventListener(e,r);clearInterval(o)}}(e)},[e]),i.jsxDEV(Ox,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiApp.tsx",lineNumber:143,columnNumber:10},void 0)},Xx=Object.freeze(Object.defineProperty({__proto__:null,PixiApp:()=>{const[e,t]=ae.useState(!1),r=ae.useRef(null);return ae.useEffect(()=>{let e=!1;return(jx||(jx=(async()=>{let e=window.__pixiYogaInstance;e||(e=await md(),window.__pixiYogaInstance=e),Bd(e),window.__pixiYogaConfig||(window.__pixiYogaConfig=e.Config.create()),bd(window.__pixiYogaConfig),await hh()})()),jx).then(()=>{e||t(!0)}),()=>{e=!0}},[]),e?i.jsxDEV("div",{ref:r,className:"h-screen w-screen",style:{overflow:"hidden"},children:i.jsxDEV(Ju,{preference:"webgl",backgroundAlpha:1,backgroundColor:657931,antialias:!0,autoDensity:!0,resolution:window.devicePixelRatio||1,resizeTo:window,roundPixels:!0,preserveDrawingBuffer:!0,className:"pixi-canvas",children:i.jsxDEV(Hx,{},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiApp.tsx",lineNumber:115,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiApp.tsx",lineNumber:103,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiApp.tsx",lineNumber:102,columnNumber:5},void 0):i.jsxDEV("div",{ref:r,className:"h-screen w-screen flex items-center justify-center",style:{background:"#0a0a0b"},children:i.jsxDEV("span",{style:{color:"#606068",fontFamily:"JetBrains Mono, monospace",fontSize:14},children:"Loading WebGL UI..."},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiApp.tsx",lineNumber:94,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/pixi/PixiApp.tsx",lineNumber:89,columnNumber:7},void 0)}},Symbol.toStringTag,{value:"Module"}));export{gn as $,io as A,St as B,Zi as C,cr as D,id as E,od as F,ic as G,ts as H,la as I,rs as J,dn as K,Or as L,qe as M,Yn as N,yt as O,Ke as P,un as Q,ct as R,os as S,Dt as T,dr as U,kc as V,js as W,Xs as X,Ys as Y,pc as Z,ea as _,ui as a,fc as a0,En as a1,Qt as a2,sn as a3,Yr as a4,aa as a5,yi as a6,ji as a7,pi as a8,er as a9,gA as aa,Hi as ab,Ni as ac,qi as ad,Ki as ae,Yi as af,bt as ag,Pi as ah,$l as ai,so as aj,ft as ak,ci as al,ht as am,lo as an,qn as ao,Is as ap,cs as aq,Hs as ar,zs as as,$s as at,mc as au,ta as av,ra as aw,Xx as ax,Bs as b,Cs as c,Xe as d,ut as e,Ac as f,Zr as g,at as h,ki as i,Le as j,cc as k,si as l,Qi as m,Sa as n,xa as o,wa as p,fl as q,Ar as r,Pa as s,hn as t,bn as u,Te as v,li as w,pr as x,hi as y,mn as z};
