import{cj as e,ck as t,aY as o,cl as r,s,u as i,cm as n,w as a,x as l,bB as c,j as d,c as m,cn as p,v as u,co as x,cp as b,cq as f,cr as N,cs as h,ct as E}from"./index-zx6LJBPK.js";import{r as g}from"./vendor-utils-XMmR-oGw.js";import{Offline as D,PolySynth as v,Synth as V,Player as y,Sampler as C,NoiseSynth as U,MembraneSynth as L,MetalSynth as O,PluckSynth as B,DuoSynth as j,AMSynth as w,FMSynth as X,MonoSynth as k}from"./vendor-tone-CADp_hfL.js";import{X as S,a1 as M,a6 as A,aw as P,Z as T,d as $,V as R,M as I,z as F}from"./vendor-ui-uomqNFY-.js";import"./vendor-react-DkDaD07v.js";async function G(e,t,o,r={}){const{sampleRate:s=44100,onProgress:i}=r,n=60/o*.25,a=e.length*n+2;i?.(0);const l=await D(({transport:r})=>{r.bpm.value=o;const s=new Map,a=new Set;e.channels.forEach(e=>{null!==e.instrumentId&&a.add(e.instrumentId),e.rows.forEach(e=>{null!==e.instrument&&a.add(e.instrument)})}),t.forEach(e=>{if(!a.has(e.id))return;let t;switch(e.synthType){case"MonoSynth":t=new k({oscillator:{type:e.oscillator?.type||"sawtooth"},envelope:{attack:e.envelope?.attack??.01,decay:e.envelope?.decay??.2,sustain:e.envelope?.sustain??.5,release:e.envelope?.release??.5},filter:{type:e.filter?.type||"lowpass",frequency:e.filter?.frequency??2e3,Q:e.filter?.Q??1}}).toDestination();break;case"FMSynth":t=new v(X).toDestination();break;case"AMSynth":t=new v(w).toDestination();break;case"DuoSynth":t=(new j).toDestination();break;case"PluckSynth":t=(new B).toDestination();break;case"MetalSynth":t=(new O).toDestination();break;case"MembraneSynth":t=(new L).toDestination();break;case"NoiseSynth":t=(new U).toDestination();break;case"Sampler":if(!e.parameters?.sampleUrl)return;t=new C({urls:{C4:e.parameters.sampleUrl},volume:e.volume||-12}).toDestination();break;case"Player":if(!e.parameters?.sampleUrl)return;t=new y({url:e.parameters.sampleUrl,volume:e.volume||-12}).toDestination();break;default:t=new v(V,{oscillator:{type:e.oscillator?.type||"sawtooth"},envelope:{attack:e.envelope?.attack??.01,decay:e.envelope?.decay??.2,sustain:e.envelope?.sustain??.5,release:e.envelope?.release??.5}}).toDestination()}s.set(e.id,t)}),e.channels.forEach(t=>{const o=t.instrumentId??0;t.rows.forEach((i,a)=>{if(0===i.note)return;if(97===i.note)return;const l=a*n,c=i.instrument??o,d=s.get(c);if(!d)return;let m=n;for(let o=a+1;o<e.length;o++){if(0!==t.rows[o].note){m=(o-a)*n;break}}const p=function(e){if(e<=0||e>96)return"";const t=(e-1)%12,o=Math.floor((e-1)/12);return`${["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t]}${o}`}(i.note);if(!p)return;const u=0!==i.volume?i.volume/64:.8;r.schedule(e=>{try{"triggerAttackRelease"in d&&d.triggerAttackRelease(p,m,e,u)}catch(t){}},l)})}),r.start(0),i?.(50)},a,2,s);return i?.(100),l.get()}function z(e){const t=e.numberOfChannels,o=e.sampleRate,r=2*t,s=e.length,i=s*r,n=44+i,a=new ArrayBuffer(n),l=new DataView(a);Y(l,0,"RIFF"),l.setUint32(4,n-8,!0),Y(l,8,"WAVE"),Y(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,t,!0),l.setUint32(24,o,!0),l.setUint32(28,o*r,!0),l.setUint16(32,r,!0),l.setUint16(34,16,!0),Y(l,36,"data"),l.setUint32(40,i,!0);const c=[];for(let m=0;m<t;m++)c.push(e.getChannelData(m));let d=44;for(let m=0;m<s;m++)for(let e=0;e<t;e++){const t=Math.max(-1,Math.min(1,c[e][m])),o=t<0?32768*t:32767*t;l.setInt16(d,o,!0),d+=2}return new Blob([a],{type:"audio/wav"})}function Y(e,t,o){for(let r=0;r<o.length;r++)e.setUint8(t+r,o.charCodeAt(r))}async function H(t,o,r,s=0,i){const n=await async function(t,o,r=0,s){s?.(5);const i=e.getInstance();await i.ready(),s?.(10),await i.load(t.slice(0),o),s?.(20);const n=await i.renderFull(r);s?.(90);const a=new Blob([n],{type:"audio/wav"});return s?.(100),a}(t,o,s,i),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=r.endsWith(".wav")?r:`${r}.wav`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}async function W(e,t,o,r,s,i){if(0===t.length)throw new Error("No patterns in sequence to export");const n=[],a=t.length;for(let p=0;p<t.length;p++){const s=e[t[p]];if(!s)continue;const l=e=>{const t=p/a*100,o=e/100*(100/a);i?.(Math.round(t+o))},c=await G(s,o,r,{sampleRate:44100,onProgress:l});n.push(c)}if(0===n.length)throw new Error("No valid patterns to export");const l=function(e,t){if(0===e.length)throw new Error("No buffers to concatenate");if(1===e.length)return e[0];const o=e[0].numberOfChannels,r=e.reduce((e,t)=>e+t.length,0),s=new OfflineAudioContext(o,r,t).createBuffer(o,r,t);let i=0;for(const n of e){for(let e=0;e<o;e++){const t=s.getChannelData(e),o=n.getChannelData(e);t.set(o,i)}i+=n.length}return s}(n,44100),c=z(l),d=URL.createObjectURL(c),m=document.createElement("a");m.href=d,m.download=s.endsWith(".wav")?s:`${s}.wav`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(d),i?.(100)}const q={type:1,includeAutomation:!0,velocityScale:1,exportMutedChannels:!1},K={cutoff:74,resonance:71,volume:7,pan:10,envMod:78,decay:75,overdrive:76,distortion:76,delay:91,reverb:91},Z=3,Q=47,J=81,_=88;function ee(e,t,o,r={}){const s={...q,...r},i=function(e,t){const o=[];if(0===t.type){const r={name:e.name||"Pattern",events:[]};e.channels.forEach((e,o)=>{if(!t.exportMutedChannels&&e.muted)return;const s=oe(e,o%16,0,t);r.events.push(...s)}),r.events.sort((e,t)=>e.tick-t.tick),o.push(r)}else o.push({name:"Tempo",events:[]}),e.channels.forEach((e,r)=>{if(!t.exportMutedChannels&&e.muted)return;const s=r%16,i={name:e.name||`Channel ${r+1}`,events:oe(e,s,0,t)};o.push(i)});return o}(e,s);return ae(i[0],t,o),le(i,s.type)}function te(e,t,o,r,s,i={}){const n={...q,...i},a=t.map(t=>e.find(e=>e.id===t)).filter(e=>void 0!==e);if(0===a.length)throw new Error("No patterns found in sequence");let l=0;const c=new Map;for(const m of a)c.set(m.id,l),l+=ie(m.length);const d=function(e,t,o){const r=[],s=Math.max(...e.map(e=>e.channels.length));if(0===o.type){const s={name:"Song",events:[]};e.forEach(e=>{const r=t.get(e.id)||0;e.channels.forEach((e,t)=>{if(!o.exportMutedChannels&&e.muted)return;const i=oe(e,t%16,r,o);s.events.push(...i)})}),s.events.sort((e,t)=>e.tick-t.tick),r.push(s)}else{r.push({name:"Tempo",events:[]});for(let i=0;i<s;i++){const s={name:`Channel ${i+1}`,events:[]},n=i%16;e.forEach(e=>{const r=t.get(e.id)||0,a=e.channels[i];if(!a)return;if(!o.exportMutedChannels&&a.muted)return;a.name&&s.name===`Channel ${i+1}`&&(s.name=a.name);const l=oe(a,n,r,o);s.events.push(...l)}),s.events.length>0&&r.push(s)}}return r}(a,c,n);return n.includeAutomation&&s.length>0&&function(e,t,o,r){for(const s of t){if(!s.enabled)continue;const t=K[s.parameter];if(!t)continue;const i=o.find(e=>e.id===s.patternId);if(!i)continue;const n=r.get(s.patternId)||0,a=s.channelIndex%16;let l;e.length>1&&(l=e.find(e=>e.name.includes(`Channel ${s.channelIndex+1}`)||e.name===i.channels[s.channelIndex]?.name)),l||(l=e[0]);for(const e of s.points){const o=n+se(e.row),r=Math.round(127*e.value);l.events.push({tick:o,type:"cc",channel:a,data:[t,r]})}l.events.sort((e,t)=>e.tick-t.tick)}}(d,s,a,c),ae(d[0],o,r),le(d,n.type)}function oe(e,o,r,s){const i=[],n=e.rows.length;for(let a=0;a<n;a++){const l=e.rows[a];if(!l.note||0===l.note)continue;if(97===l.note)continue;const c=t(l.note);if(null===c)continue;const d=r+se(a),m=ne(l.volume,s.velocityScale),p=re(e.rows,a,n),u=Math.max(1,se(p));i.push({tick:d,type:"noteOn",channel:o,data:[c,m]}),i.push({tick:d+u,type:"noteOff",channel:o,data:[c,0]})}return i}function re(e,t,o){for(let r=t+1;r<o;r++){const o=e[r];if(97===o.note)return r-t;if(o.note&&0!==o.note&&97!==o.note)return r-t}return o-t}function se(e){return 120*e}function ie(e){return 120*e}function ne(e,t){const o=e??64,r=Math.round(o/64*127*t);return Math.max(1,Math.min(127,r))}function ae(e,t,o){const r=Math.round(6e7/t);e.events.unshift({tick:0,type:"meta",channel:0,data:[J,3,r>>16&255,r>>8&255,255&r]});const[s,i]=o,n=Math.log2(i);e.events.unshift({tick:0,type:"meta",channel:0,data:[_,4,s,n,24,8]})}function le(e,t){const o=[];o.push(function(e,t,o){const r=new Uint8Array(14),s=new DataView(r.buffer);return r[0]=77,r[1]=84,r[2]=104,r[3]=100,s.setUint32(4,6,!1),s.setUint16(8,e,!1),s.setUint16(10,t,!1),s.setUint16(12,o,!1),r}(t,e.length,480));for(const r of e)o.push(ce(r));return pe(o)}function ce(e){const t=[],o=(new TextEncoder).encode(e.name);t.push(me(0)),t.push(new Uint8Array([255,Z,o.length])),t.push(o);const r=[...e.events].sort((e,t)=>e.tick-t.tick);let s=0;for(const l of r){const e=l.tick-s;t.push(me(e)),t.push(de(l)),s=l.tick}t.push(me(0)),t.push(new Uint8Array([255,Q,0]));const i=pe(t),n=new Uint8Array(8+i.length),a=new DataView(n.buffer);return n[0]=77,n[1]=84,n[2]=114,n[3]=107,a.setUint32(4,i.length,!1),n.set(i,8),n}function de(e){switch(e.type){case"noteOn":return new Uint8Array([144|e.channel,e.data[0],e.data[1]]);case"noteOff":return new Uint8Array([128|e.channel,e.data[0],e.data[1]]);case"cc":return new Uint8Array([176|e.channel,e.data[0],e.data[1]]);case"meta":return new Uint8Array([255,...e.data]);default:return new Uint8Array([])}}function me(e){if(0===e)return new Uint8Array([0]);const t=[];let o=e;for(t.push(127&o),o>>=7;o>0;)t.push(127&o|128),o>>=7;return new Uint8Array(t.reverse())}function pe(e){const t=e.reduce((e,t)=>e+t.length,0),o=new Uint8Array(t);let r=0;for(const s of e)o.set(s,r),r+=s.length;return o}async function ue(e,t,o={}){const r=[],s=o.channelLimit||32,i=o.downmixExtra??!1,n=o.bakeSynthsToSamples??!0,a=o.stripInstrumentEffects??!0,l=o.defaultSpeed||6,c=o.defaultBPM||125,d=o.moduleName||"DEViLBOX Export",m=o.trackerName||"DEViLBOX v1.0",p=e[0]?.importMetadata,u=Math.max(...e.map(e=>e.channels.length));u>s&&r.push(`Pattern has ${u} channels. XM supports max ${s}. Extra channels will be ${i?"downmixed":"truncated"}.`);const x=Math.min(u,s),b=[];for(const N of t){if("Sampler"!==N.synthType&&n)r.push(`Synth instrument "${N.name}" exported as silent placeholder (live synth audio cannot be baked at export time).`),b.push(Ne(N.name));else if("Sampler"===N.synthType){const e=await be(N,p);b.push(e)}else r.push(`Synth instrument "${N.name}" exported as silent placeholder (XM format requires sample data).`),b.push(Ne(N.name));N.effects&&N.effects.length>0&&a&&r.push(`Instrument "${N.name}" has ${N.effects.length} effects that will be lost.`)}const f=function(e){const t=[];t.push(function(e){const t=new Uint8Array(336),o=new DataView(t.buffer);let r=0;const s="Extended Module: ";for(let i=0;i<17;i++)t[r++]=s.charCodeAt(i);ge(t,r,e.moduleName,20),r+=20,t[r++]=26,ge(t,r,e.trackerName,20),r+=20,o.setUint16(r,260,!0),r+=2,o.setUint32(r,276,!0),r+=4,o.setUint16(r,e.songLength,!0),r+=2,o.setUint16(r,e.restartPosition,!0),r+=2,o.setUint16(r,e.channelCount,!0),r+=2,o.setUint16(r,e.patterns.length,!0),r+=2,o.setUint16(r,e.instruments.length,!0),r+=2,o.setUint16(r,e.linearFrequency?1:0,!0),r+=2,o.setUint16(r,e.defaultSpeed,!0),r+=2,o.setUint16(r,e.defaultBPM,!0),r+=2;for(let i=0;i<256;i++)t[r++]=i<e.songLength?i:0;return t}(e));for(const i of e.patterns)t.push(he(i,e.channelCount));for(const i of e.instruments)t.push(Ee(i));const o=t.reduce((e,t)=>e+t.length,0),r=new Uint8Array(o);let s=0;for(const i of t)r.set(i,s),s+=i.length;return r.buffer}({moduleName:d,trackerName:m,patterns:e.map(e=>function(e,t){const o=[];for(let r=0;r<e.length;r++){const s=[];for(let o=0;o<t;o++){const t=e.channels[o]?.rows[r];if(!t){s.push({note:0,instrument:0,volume:0,effectType:0,effectParam:0});continue}const i=xe(t);s.push(i)}o.push(s)}return{rows:o}}(e,x)),instruments:b,channelCount:x,defaultSpeed:l,defaultBPM:c,songLength:e.length,restartPosition:p?.modData?.restartPosition||0,linearFrequency:!p?.modData?.amigaPeriods});return{data:new Blob([f],{type:"application/octet-stream"}),warnings:r,filename:`${d.replace(/[^a-zA-Z0-9]/g,"_")}.xm`}}function xe(e){let t=0;const o=e.note;o&&("number"==typeof o?t=o:"==="===o?t=97:"---"!==o&&(t=function(e){const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=e.match(/^([A-G]#?)-?(\d)$/);if(!o)return 0;const r=t.indexOf(o[1]),s=parseInt(o[2]);return-1===r||s<0||s>7?0:12*s+r+1}(o)));const r=e.instrument||0;let s=0;null!==e.volume?s=16+Math.min(e.volume,64):(void 0!==e.effTyp2&&0!==e.effTyp2||void 0!==e.eff2&&0!==e.eff2)&&(s=function(e,t){if(10===e){const e=t>>4&15,o=15&t;if(e>0)return 112+e;if(o>0)return 96+o}if(14===e){const e=t>>4&15,o=15&t;if(10===e)return 144+o;if(11===e)return 128+o}if(4===e){return 176+(15&t)}if(3===e){const e=Math.floor(t/16);return 240+Math.min(e,15)}return 0}(e.effTyp2??0,e.eff2??0));let i=0,n=0;if(e.effect&&"..."!==e.effect){const t=function(e){if(3!==e.length)return{type:0,param:0};const t=e[0].toUpperCase(),o=parseInt(e.substring(1),16),r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(t);return{type:-1===r?0:r,param:isNaN(o)?0:o}}(e.effect);i=t.type,n=t.param}return{note:t,instrument:r,volume:s,effectType:i,effectParam:n}}async function be(e,t){const o=t?.originalSamples?.[e.id];return o?{name:e.name.substring(0,22),samples:[{name:o.name.substring(0,22),pcmData:o.pcmData,loopStart:o.loopStart*(16===o.bitDepth?2:1),loopLength:o.loopLength*(16===o.bitDepth?2:1),volume:o.volume,finetune:o.finetune,type:fe(o.loopType,o.bitDepth),panning:o.panning,relativeNote:o.relativeNote}],volumeEnvelope:t?.envelopes?.[e.id]?.volumeEnvelope,panningEnvelope:t?.envelopes?.[e.id]?.panningEnvelope,vibratoType:"sine"===t?.envelopes?.[e.id]?.autoVibrato?.type?0:1,vibratoSweep:t?.envelopes?.[e.id]?.autoVibrato?.sweep||0,vibratoDepth:t?.envelopes?.[e.id]?.autoVibrato?.depth||0,vibratoRate:t?.envelopes?.[e.id]?.autoVibrato?.rate||0,volumeFadeout:t?.envelopes?.[e.id]?.fadeout||0}:Ne(e.name)}function fe(e,t){let o=0;return"forward"===e&&(o|=1),"pingpong"===e&&(o|=2),16===t&&(o|=16),o}function Ne(e){return{name:e.substring(0,22),samples:[],vibratoType:0,vibratoSweep:0,vibratoDepth:0,vibratoRate:0,volumeFadeout:0}}function he(e,t){const o=function(e,t){const o=[];for(const r of e)for(let e=0;e<t;e++){const t=r[e]||{note:0,instrument:0,volume:0,effectType:0,effectParam:0};if(0===t.note&&0===t.instrument&&0===t.volume&&0===t.effectType&&0===t.effectParam){o.push(128);continue}let s=128;const i=[];t.note>0&&(s|=1,i.push(t.note)),t.instrument>0&&(s|=2,i.push(t.instrument)),t.volume>0&&(s|=4,i.push(t.volume)),t.effectType>0&&(s|=8,i.push(t.effectType)),t.effectParam>0&&(s|=16,i.push(t.effectParam)),o.push(s),o.push(...i)}return new Uint8Array(o)}(e.rows,t),r=new Uint8Array(9),s=new DataView(r.buffer);s.setUint32(0,9,!0),r[4]=0,s.setUint16(5,e.rows.length,!0),s.setUint16(7,o.length,!0);const i=new Uint8Array(r.length+o.length);return i.set(r,0),i.set(o,r.length),i}function Ee(e){const t=e.samples.length>0?263:29,o=new Uint8Array(t),r=new DataView(o.buffer);return r.setUint32(0,t,!0),ge(o,4,e.name,22),o[26]=0,r.setUint16(27,e.samples.length,!0),e.samples.length,o}function ge(e,t,o,r){for(let s=0;s<r;s++)e[t+s]=s<o.length?o.charCodeAt(s):0}const De={4:"M.K.",6:"6CHN",8:"8CHN"};async function ve(e,t,o={}){const r=[],s=o.channelCount||4,i=o.moduleName||"DEViLBOX Export",n=o.bakeSynthsToSamples??!0;if(![4,6,8].includes(s))throw new Error(`MOD supports 4, 6, or 8 channels (got ${s})`);const a=De[s];if(!a)throw new Error(`No format tag for ${s} channels`);const l=Math.max(...e.map(e=>e.channels.length));l>s&&r.push(`Patterns have ${l} channels but exporting as ${s}-channel MOD. Extra channels will be truncated.`);const c=e[0]?.importMetadata,d=[];for(let f=0;f<Math.min(t.length,31);f++){const e=t[f];if(e){if("Sampler"!==e.synthType&&n)r.push(`Synth instrument "${e.name}" exported as silent placeholder (live synth audio cannot be baked at export time).`),d.push(Ue());else if("Sampler"===e.synthType){const t=await Ce(e,c);d.push(t)}else r.push(`Synth instrument "${e.name}" exported as silent placeholder (MOD format requires sample data).`),d.push(Ue());e.effects&&e.effects.length>0&&r.push(`Instrument "${e.name}" has effects that will be lost (MOD doesn't support effect chains).`)}else d.push(Ue())}for(;d.length<31;)d.push(Ue());const m=e.map((e,t)=>function(e,t,o,r){const s=[];for(let i=0;i<64;i++){const o=[];for(let s=0;s<t;s++){const t=e.channels[s]?.rows[i];if(!t||i>=e.length){o.push({period:0,instrument:0,effect:0,effectParam:0});continue}const n=ye(t,r);o.push(n)}s.push(o)}e.length>64&&r.push(`Pattern ${o} has ${e.length} rows but MOD supports max 64. Extra rows truncated.`);return{rows:s}}(e,s,t,r)),p=Array.from({length:128},(t,o)=>o<e.length?o:0),u=function(e){const t=1084,o=1024*e.patterns.length,r=e.samples.reduce((e,t)=>e+t.pcmData.length,0),s=new Uint8Array(t+o+r);let i=0;Be(s,i,e.title,20),i+=20;for(const n of e.samples)Le(s,i,n),i+=30;s[i++]=Math.min(e.songLength,128),s[i++]=127;for(let n=0;n<128;n++)s[i++]=e.patternOrderTable[n];Be(s,i,e.formatTag,4),i+=4;for(const n of e.patterns)Oe(s,i,n),i+=1024;for(const n of e.samples)n.pcmData.length>0&&(s.set(new Uint8Array(n.pcmData.buffer),i),i+=n.pcmData.length);return s.buffer}({title:i,samples:d,patterns:m,songLength:e.length,formatTag:a,patternOrderTable:p}),x=new Blob([u],{type:"application/octet-stream"}),b=`${i.replace(/[^a-zA-Z0-9]/g,"_")}.mod`;return{data:x,warnings:r,filename:b}}const Ve={"C-0":1712,"C#0":1616,"D-0":1525,"D#0":1440,"E-0":1357,"F-0":1281,"F#0":1209,"G-0":1141,"G#0":1077,"A-0":1017,"A#0":961,"B-0":907,"C-1":856,"C#1":808,"D-1":762,"D#1":720,"E-1":678,"F-1":640,"F#1":604,"G-1":570,"G#1":538,"A-1":508,"A#1":480,"B-1":453,"C-2":428,"C#2":404,"D-2":381,"D#2":360,"E-2":339,"F-2":320,"F#2":302,"G-2":285,"G#2":269,"A-2":254,"A#2":240,"B-2":226,"C-3":214,"C#3":202,"D-3":190,"D#3":180,"E-3":170,"F-3":160,"F#3":151,"G-3":143,"G#3":135,"A-3":127,"A#3":120,"B-3":113};function ye(e,t){let o=0;const r=e.note;if(97===r||"string"==typeof r&&"==="===r)return{period:0,instrument:0,effect:12,effectParam:0};let s=null;if("number"==typeof r&&r>0&&r<97){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],t=(r-1)%12,o=Math.floor((r-1)/12);s=`${e[t]}-${o}`}else"string"==typeof r&&r&&"---"!==r&&(s=r);s&&(o=function(e){const t=e.replace("-","-");return Ve[t]||0}(s),0===o&&t.push(`Note ${s} is out of range for MOD format (C-0 to B-3 supported).`));const i=e.instrument||0;let n=0,a=0;if(e.effect&&"..."!==e.effect){const o=function(e){if(3!==e.length)return{effect:0,param:0};const t=e[0].toUpperCase(),o=parseInt(e.substring(1),16),r="0123456789ABCDEF".indexOf(t);return{effect:-1===r?0:r,param:isNaN(o)?0:o}}(e.effect);n=o.effect,a=o.param,n>15&&(t.push(`Effect ${e.effect} is not supported in MOD format (only 0-F).`),n=0,a=0)}return(void 0!==e.effTyp2&&0!==e.effTyp2||void 0!==e.eff2&&0!==e.eff2)&&t.push("Effect2 column not supported in MOD format (will be lost)."),null!==e.volume&&(0===n&&0===a?(n=12,a=Math.min(e.volume,64)):t.push("Volume column not supported in MOD (use Cxx effect).")),{period:o,instrument:i,effect:n,effectParam:a}}async function Ce(e,t){const o=t?.originalSamples?.[e.id];return o&&8===o.bitDepth?{name:o.name.substring(0,22),length:Math.floor(o.length/2),finetune:o.finetune+8&15,volume:o.volume,loopStart:Math.floor(o.loopStart/2),loopLength:"none"===o.loopType?1:Math.floor(o.loopLength/2),pcmData:new Int8Array(o.pcmData)}:Ue(e.name)}function Ue(e=""){return{name:e.substring(0,22),length:0,finetune:0,volume:64,loopStart:0,loopLength:1,pcmData:new Int8Array(0)}}function Le(e,t,o){const r=new DataView(e.buffer);Be(e,t,o.name,22),t+=22,r.setUint16(t,o.length,!1),t+=2,e[t++]=15&o.finetune,e[t++]=Math.min(o.volume,64),r.setUint16(t,o.loopStart,!1),t+=2,r.setUint16(t,Math.max(o.loopLength,1),!1)}function Oe(e,t,o){for(const r of o.rows)for(const o of r){const r=o.period>>8&15,s=255&o.period,i=o.instrument>>4&15,n=15&o.instrument;e[t++]=r<<4|i,e[t++]=s,e[t++]=n<<4|15&o.effect,e[t++]=255&o.effectParam}}function Be(e,t,o,r){for(let s=0;s<r;s++)e[t+s]=s<o.length?o.charCodeAt(s):0}const je=82,we=83,Xe=84,ke=81,Se=94,Me=95,Ae=80,Pe=160,Te=179,$e=180,Re=185,Ie=210,Fe=98,Ge=99,ze=97,Ye=112,He=102,We=0,qe=4,Ke=8,Ze=12,Qe=16,Je=20,_e=24,et=28,tt=32,ot=36,rt=44,st=48,it=52,nt=92,at=116,lt=128,ct=132,dt=148,mt=156,pt={[o.OPN2]:7670453,[o.OPM]:3579545,[o.PSG]:3579545,[o.OPLL]:3579545,[o.OPL3]:14318180,[o.AY]:1789773,[o.GB]:4194304,[o.NES]:1789773,[o.PCE]:3579545,[o.SCC]:3579545,[o.SID]:1e6};function ut(e){const t=[],o=new DataView(e.buffer,e.byteOffset,e.byteLength);for(let r=0;r+12<=e.length;r+=12){const e=o.getUint32(r,!0),s=o.getUint8(r+4),i=65535&o.getUint32(r+5,!0),n=o.getUint8(r+9);t.push({timestamp:e,chipType:s,port:i,data:n})}return t}function xt(e,t){switch(e){case o.OPN2:return t<256?{cmd:je,adjustedPort:t}:{cmd:we,adjustedPort:t-256};case o.OPM:return{cmd:Xe,adjustedPort:t};case o.OPLL:return{cmd:ke,adjustedPort:t};case o.OPL3:return t<256?{cmd:Se,adjustedPort:t}:{cmd:Me,adjustedPort:t-256};case o.PSG:return{cmd:Ae,adjustedPort:0};case o.AY:return{cmd:Pe,adjustedPort:t};case o.GB:return{cmd:Te,adjustedPort:t};case o.NES:return{cmd:$e,adjustedPort:t};case o.PCE:return{cmd:Re,adjustedPort:t};case o.SCC:return{cmd:Ie,adjustedPort:t};default:return null}}function bt(e,t={}){t.sampleRate;const r=[],s=new Set;for(const o of e)s.add(o.chipType);const i=[...e].sort((e,t)=>e.timestamp-t.timestamp);let n=0,a=0;for(const b of i){const e=b.timestamp-n;if(e>0){a+=e;let t=e;for(;t>0;)if(t>=882&&t<1470)r.push(Ge),t-=882;else if(t>=735)r.push(Fe),t-=735;else if(t>=16){const e=Math.min(t,65535);r.push(ze,255&e,e>>8&255),t-=e}else r.push(Ye+(t-1)),t=0}n=b.timestamp;const t=xt(b.chipType,b.port);t&&(b.chipType===o.PSG?r.push(t.cmd,b.data):r.push(t.cmd,255&t.adjustedPort,b.data))}r.push(He);const l=function(e){const t=[e.title||"DEViLBOX Export","",e.game||"","",e.system||"Furnace Chips","",e.author||"","",e.releaseDate||(new Date).toISOString().slice(0,10),"DEViLBOX Tracker",""],o=[];for(const i of t){for(let e=0;e<i.length;e++){const t=i.charCodeAt(e);o.push(255&t,t>>8&255)}o.push(0,0)}const r=new Uint8Array(12+o.length),s=new DataView(r.buffer);return s.setUint32(0,540238919,!0),s.setUint32(4,256,!0),s.setUint32(8,o.length,!0),r.set(o,12),r}(t),c=256,d=c+r.length-20,m=c+r.length+l.length-4,p=c+r.length+l.length,u=new Uint8Array(p),x=new DataView(u.buffer);if(x.setUint32(We,544040790,!0),x.setUint32(qe,m,!0),x.setUint32(Ke,369,!0),x.setUint32(Je,d,!0),x.setUint32(_e,a,!0),x.setUint32(ot,60,!0),x.setUint32(it,204,!0),s.has(o.OPN2)&&x.setUint32(rt,pt[o.OPN2],!0),s.has(o.OPM)&&x.setUint32(st,pt[o.OPM],!0),s.has(o.PSG)&&x.setUint32(Ze,pt[o.PSG],!0),s.has(o.OPLL)&&x.setUint32(Qe,pt[o.OPLL],!0),s.has(o.OPL3)&&x.setUint32(nt,pt[o.OPL3],!0),s.has(o.AY)&&x.setUint32(at,pt[o.AY],!0),s.has(o.GB)&&x.setUint32(lt,pt[o.GB],!0),s.has(o.NES)&&x.setUint32(ct,pt[o.NES],!0),s.has(o.PCE)&&x.setUint32(dt,pt[o.PCE],!0),s.has(o.SCC)&&x.setUint32(mt,pt[o.SCC],!0),void 0!==t.loopPoint&&t.loopPoint>0){let e=0,o=0;for(let s=0;s<r.length;s++){if(o>=t.loopPoint){e=s;break}const i=r[s];i===Fe?o+=735:i===Ge?o+=882:i===ze?(o+=r[s+1]|r[s+2]<<8,s+=2):i>=Ye&&i<=127&&(o+=i-Ye+1)}e>0&&(x.setUint32(et,c+e-28,!0),x.setUint32(tt,a-t.loopPoint,!0))}return u.set(r,c),u.set(l,c+r.length),u}function ft(e){return 63&e}function Nt(e,t={}){const r=t.tickRate||60,s=44100/r,i=[];let n=!1,a=!1;const l=[...e].sort((e,t)=>e.timestamp-t.timestamp).filter(e=>e.chipType===o.OPM||e.chipType===o.VERA);l.length;let c=0,d=0;for(const b of l){const e=Math.floor(b.timestamp/s),r=e-c;if(r>0){t.loopPoint&&c<t.loopPoint&&e>=t.loopPoint&&(d=i.length);let o=r;for(;o>0;)o<=128?(i.push(128|o-1),o=0):(i.push(255),o-=128);c=e}if(b.chipType===o.OPM){n=!0;const e=255&b.port;e<128?(i.push(64|e>>1),i.push((1&e)<<7|127&b.data)):(i.push(127),i.push(e),i.push(b.data))}else if(b.chipType===o.VERA){a=!0;const e=ft(b.port);i.push(e),i.push(b.data)}}i.push(128,0);const m=i.length,p=function(e,t,o,r,s){const i=new Uint8Array(16),n=new DataView(i.buffer);return i[0]=122,i[1]=109,i[2]=1,n.setUint16(3,e,!0),i[5]=255&t,i[6]=t>>8&255,i[7]=t>>16&255,i[8]=255&o,i[9]=o>>8&255,i[10]=o>>16&255,i[11]=r?255:0,n.setUint16(12,s?65535:0,!0),i[14]=o>0?1:0,i[15]=0,i}(r,d,t.pcmData?16+m:0,n,a),u=16+m+(t.pcmData?.length||0),x=new Uint8Array(u);return x.set(p,0),x.set(i,16),t.pcmData&&x.set(t.pcmData,16+m),x}function ht(e,t){const o=["SAP"];return o.push(`AUTHOR "${e.author||"DEViLBOX"}"`),o.push(`NAME "${e.name||"Untitled"}"`),o.push(`DATE "${e.date||(new Date).getFullYear()}"`),o.push("TYPE R"),e.ntsc&&o.push("NTSC"),e.stereo&&o.push("STEREO"),e.fastplay&&o.push(`FASTPLAY ${e.fastplay}`),e.songs&&e.songs>1&&(o.push(`SONGS ${e.songs}`),e.defaultSong&&o.push(`DEFSONG ${e.defaultSong}`)),o.push(`TIME ${function(e,t){const o=e/t,r=Math.floor(o/60),s=Math.floor(o%60),i=Math.floor(o%1*1e3);return`${String(r).padStart(2,"0")}:${String(s).padStart(2,"0")}.${String(i).padStart(3,"0")}`}(t,e.ntsc?60:50)}`),o.push(""),o.join("\r\n")}function Et(e,t){const r=44100/(t.ntsc?60:50),s=e.filter(e=>e.chipType===o.TIA),i=function(e,t){const o=new Map;for(const r of e){const e=Math.floor(r.timestamp/t);o.has(e)||o.set(e,[]),o.get(e).push(r)}return o}(s.length>0?s:e,r),n=Math.max(...i.keys(),0)+1,a=t.stereo?18:9,l=new Uint8Array(n*a),c=new Uint8Array(t.stereo?18:9);for(let o=0;o<n;o++){const e=i.get(o)||[],r=o*a;for(const o of e){const e=15&o.port;e<=8&&(c[e]=o.data,t.stereo&&o.port>=16&&(c[9+e]=o.data))}l.set(c,r)}return{data:l,frameCount:n}}function gt(e,t={}){const r=[...e].sort((e,t)=>e.timestamp-t.timestamp),{data:s,frameCount:i}=function(e,t){const r=44100/(t.ntsc?60:50),s=e.filter(e=>e.chipType===o.TIA);if(0===s.length)return{data:new Uint8Array(0),frameCount:0};const i=new Map;for(const o of s){const e=Math.floor(o.timestamp/r);i.has(e)||i.set(e,[]),i.get(e).push(o)}const n=Math.max(...i.keys(),0)+1,a=new Uint8Array(6*n),l=new Uint8Array(6);for(let o=0;o<n;o++){const e=i.get(o)||[],t=6*o;for(const o of e){let e=o.port;e>=21&&(e-=21),e>=0&&e<6&&(l[e]=o.data)}a.set(l,t)}return{data:a,frameCount:n}}(r,t);if(0===i)throw new Error("No TIA data to export");const n=function(e,t,o){const r=new Uint8Array(16),s=new DataView(r.buffer);return r[0]=84,r[1]=73,r[2]=117,r[3]=65,r[4]=1,r[5]=0,s.setUint16(6,t,!0),s.setUint16(8,o>=0?o:65535,!0),r[10]=e.ntsc?1:0,r}(t,i,t.loopFrame??-1),a=n.length+s.length,l=new Uint8Array(a);return l.set(n,0),l.set(s,n.length),l}const Dt=0,vt=1,Vt=2,yt=3;const Ct=[78,69,83,77,26];function Ut(e,t={}){const r={initCode:[169,0,133,0,169,0,133,1,169,1,133,2,169,15,141,21,64,169,64,141,23,64,96],playCode:[165,2,240,42,160,0,177,0,240,29,201,255,240,32,170,200,177,0,157,0,64,24,165,0,105,2,133,0,144,227,230,1,76,4,128,230,0,208,2,230,1,96,169,0,133,2,141,21,64,96],baseAddress:32768},s=function(e){const t=[],r=e.filter(e=>e.chipType===o.NES);if(0===r.length)return t.push(255),t;const s=[...r].sort((e,t)=>e.timestamp-t.timestamp);let i=0;for(const o of s){const e=Math.floor(o.timestamp/735);for(;i<e;)t.push(0),i++;const r=31&o.port;r>23||t.push(r,o.data)}return t.push(0),t.push(255),t}(e),i=t.loadAddress||32768,n=t.initAddress||i,a=r.initCode.length,l=t.playAddress||i+a,c=i+(a+r.playCode.length),d=[...r.initCode];d[1]=255&c,d[5]=c>>8&255;const m=[...r.playCode],p=m.indexOf(76);if(-1!==p){const e=i+a+4;m[p+1]=255&e,m[p+2]=e>>8&255}const u=new Uint8Array(d.length+m.length+s.length);u.set(d,0),u.set(m,d.length),u.set(s,d.length+m.length);const x=function(e,t,o,r){const s=new Uint8Array(128),i=new DataView(s.buffer);s.set(Ct,0),s[5]=1,s[6]=e.totalSongs||1,s[7]=e.startingSong||1,i.setUint16(8,t,!0),i.setUint16(10,o,!0),i.setUint16(12,r,!0);const n=e.title||"DEViLBOX Export";for(let d=0;d<Math.min(n.length,31);d++)s[14+d]=n.charCodeAt(d);const a=e.artist||"";for(let d=0;d<Math.min(a.length,31);d++)s[46+d]=a.charCodeAt(d);const l=e.copyright||(new Date).getFullYear().toString();for(let d=0;d<Math.min(l.length,31);d++)s[78+d]=l.charCodeAt(d);i.setUint16(110,e.ntscSpeed||16666,!0),i.setUint16(120,e.palSpeed||2e4,!0);const c=e.region||"ntsc";return s[122]="ntsc"===c?0:"pal"===c?1:2,s[123]=0,s}(t,i,n,l,u.length),b=new Uint8Array(x.length+u.length);return b.set(x,0),b.set(u,x.length),b}const Lt=[71,66,83];function Ot(e,t={}){const r={initCode:[62,0,224,128,62,0,224,129,62,1,224,130,62,128,224,38,62,255,224,37,62,119,224,36,201],playCode:[240,130,183,200,240,128,111,240,129,103,126,183,40,20,254,255,40,26,79,35,126,35,229,38,255,105,119,225,24,232,35,125,224,128,124,224,129,201,175,224,130,224,38,201],baseAddress:16384},s=function(e){const t=[],r=e.filter(e=>e.chipType===o.GB);if(0===r.length)return t.push(255),t;const s=[...r].sort((e,t)=>e.timestamp-t.timestamp);let i=0;for(const o of s){const e=Math.floor(o.timestamp/735);for(;i<e;)t.push(0),i++;const r=255&o.port;r<16||r>63||t.push(r,o.data)}return t.push(0),t.push(255),t}(e),i=t.loadAddress||16384,n=t.initAddress||i,a=r.initCode.length,l=t.playAddress||i+a,c=i+(a+r.playCode.length),d=[...r.initCode];d[1]=255&c,d[5]=c>>8&255;const m=new Uint8Array(d.length+r.playCode.length+s.length);m.set(d,0),m.set(r.playCode,d.length),m.set(s,d.length+r.playCode.length);const p=function(e,t,o,r,s){const i=new Uint8Array(112),n=new DataView(i.buffer);i.set(Lt,0),i[3]=1,i[4]=e.totalSongs||1,i[5]=e.startingSong||1,n.setUint16(6,t,!0),n.setUint16(8,o,!0),n.setUint16(10,r,!0),n.setUint16(12,s,!0),i[14]=e.timerModulo||0,i[15]=e.timerControl||0;const a=e.title||"DEViLBOX Export";for(let d=0;d<Math.min(a.length,31);d++)i[16+d]=a.charCodeAt(d);const l=e.author||"";for(let d=0;d<Math.min(l.length,31);d++)i[48+d]=l.charCodeAt(d);const c=e.copyright||(new Date).getFullYear().toString();for(let d=0;d<Math.min(c.length,31);d++)i[80+d]=c.charCodeAt(d);return i}(t,i,n,l,65534),u=new Uint8Array(p.length+m.length);return u.set(p,0),u.set(m,p.length),u}const Bt=65536,jt=12,wt=28,Xt=108,kt=32e3/60;function St(e,t={}){const r={code:[186,0,0,218,0,143,0,250,143,48,241,228,253,143,128,250,143,1,241,228,253,240,252,141,0,247,0,240,18,104,255,240,22,196,242,252,247,0,196,243,252,47,237,252,96,132,0,196,0,228,1,136,0,196,1,47,210,47,254],entryPoint:512},s=function(e){const t=[],r=e.filter(e=>e.chipType===o.SNES);if(0===r.length)return t.push(255),t;const s=[...r].sort((e,t)=>e.timestamp-t.timestamp);let i=0;for(const o of s){const e=Math.floor(o.timestamp/kt);for(;i<e;)t.push(0),i++;const r=127&o.port;t.push(r,o.data)}return t.push(0),t.push(255),t}(e),i=r.entryPoint,n=i+r.code.length,a=[...r.code];a[1]=255&n,a[2]=n>>8&255;const l=new Uint8Array(Bt);l.set(a,i),l.set(s,n);const c=new Uint8Array(128);c[Xt]=224,c[jt]=127,c[wt]=127;const d=new Uint8Array(65984),m=new DataView(d.buffer),p="SNES-SPC700 Sound File Data v0.30";for(let o=0;o<p.length;o++)d[o]=p.charCodeAt(o);d[33]=26,d[34]=26,d[35]=26,d[36]=30,m.setUint16(37,r.entryPoint,!0),d[39]=0,d[40]=0,d[41]=0,d[42]=0,d[43]=239;const u=function(e){const t=new Uint8Array(210),o=e.title||"DEViLBOX Export";for(let d=0;d<Math.min(o.length,32);d++)t[d]=o.charCodeAt(d);const r=e.game||"";for(let d=0;d<Math.min(r.length,32);d++)t[32+d]=r.charCodeAt(d);const s=e.dumper||"DEViLBOX";for(let d=0;d<Math.min(s.length,16);d++)t[64+d]=s.charCodeAt(d);const i=e.comments||"";for(let d=0;d<Math.min(i.length,32);d++)t[80+d]=i.charCodeAt(d);const n=e.dumpDate||(new Date).toLocaleDateString("en-US");for(let d=0;d<Math.min(n.length,11);d++)t[112+d]=n.charCodeAt(d);const a=(e.songLength||180).toString();for(let d=0;d<Math.min(a.length,3);d++)t[123+d]=a.charCodeAt(d);const l=(e.fadeLength||1e4).toString();for(let d=0;d<Math.min(l.length,5);d++)t[126+d]=l.charCodeAt(d);const c=e.artist||"";for(let d=0;d<Math.min(c.length,32);d++)t[131+d]=c.charCodeAt(d);return t}(t);return d.set(u,46),d.set(l,256),d.set(c,65792),d}const Mt={[o.OPN2]:"YM2612 (Genesis)",[o.OPM]:"YM2151 (Arcade)",[o.OPL3]:"YMF262 (OPL3)",[o.PSG]:"SN76489 (PSG)",[o.NES]:"NES APU",[o.GB]:"Game Boy DMG",[o.PCE]:"HuC6280 (PCE)",[o.SCC]:"K051649 (SCC)",[o.AY]:"AY-3-8910",[o.OPLL]:"YM2413 (OPLL)",[o.SID]:"SID",[o.TIA]:"TIA (Atari 2600)",[o.VERA]:"VERA (X16)",[o.SNES]:"SPC700 (SNES)"},At={vgm:{name:"Video Game Music",extension:"vgm",mimeType:"application/octet-stream",description:"Universal format supporting 40+ chips. Compatible with VGMPlay, foobar2000, and most retro players.",supportedChips:[o.OPN2,o.OPM,o.OPL3,o.PSG,o.AY,o.GB,o.NES,o.PCE,o.SCC,o.OPLL]},zsm:{name:"ZSound Music (Commander X16)",extension:"zsm",mimeType:"application/octet-stream",description:"Native format for Commander X16. Supports YM2151 + VERA PSG/PCM.",supportedChips:[o.OPM,o.VERA]},sap:{name:"Slight Atari Player",extension:"sap",mimeType:"application/octet-stream",description:"Atari 8-bit music format for POKEY chip.",supportedChips:[o.TIA]},tiuna:{name:"TIunA (Atari 2600)",extension:"tia",mimeType:"application/octet-stream",description:"Simple format for Atari 2600 TIA chip.",supportedChips:[o.TIA]},gym:{name:"Genesis YM2612 Music",extension:"gym",mimeType:"application/octet-stream",description:"Sega Genesis/Mega Drive format. Supports YM2612 (FM) + SN76489 (PSG).",supportedChips:[o.OPN2,o.PSG]},nsf:{name:"NES Sound Format",extension:"nsf",mimeType:"application/octet-stream",description:"Nintendo Entertainment System music format with embedded 6502 driver.",supportedChips:[o.NES]},gbs:{name:"Game Boy Sound",extension:"gbs",mimeType:"application/octet-stream",description:"Nintendo Game Boy music format with embedded Z80 driver.",supportedChips:[o.GB]},spc:{name:"SNES SPC700",extension:"spc",mimeType:"application/octet-stream",description:"Super Nintendo music format with SPC700 driver and 64KB RAM dump.",supportedChips:[o.SNES]}};function Pt(e){const t=[],r=At.vgm.supportedChips;return e.some(e=>r.includes(e.chipType))&&t.push("vgm"),function(e){return e.some(e=>e.chipType===o.OPM||e.chipType===o.VERA)}(e)&&t.push("zsm"),function(e){return e.some(e=>e.chipType===o.TIA||e.port>=53760&&e.port<=53791)}(e)&&t.push("sap"),function(e){return e.some(e=>e.chipType===o.TIA)}(e)&&t.push("tiuna"),function(e){const t=[o.OPN2,o.PSG];return e.some(e=>t.includes(e.chipType))}(e)&&t.push("gym"),function(e){return e.some(e=>e.chipType===o.NES)}(e)&&t.push("nsf"),function(e){return e.some(e=>e.chipType===o.GB)}(e)&&t.push("gbs"),function(e){return e.some(e=>e.chipType===o.SNES)}(e)&&t.push("spc"),t}function Tt(e){const t=new Map;for(const s of e)t.set(s.chipType,(t.get(s.chipType)||0)+1);const o=Array.from(t.entries()).map(([e,t])=>({type:e,name:Mt[e]||`Unknown (${e})`,writes:t})).sort((e,t)=>t.writes-e.writes),r=e.reduce((e,t)=>Math.max(e,t.timestamp),0)/44100;return{totalWrites:e.length,duration:r,usedChips:o,frameRate:60}}async function $t(e,t){const r=ut(e);if(0===r.length)throw new Error("No register writes found in log data");const s=At[t.format];let i;switch(t.format){case"vgm":i=bt(r,{title:t.title,author:t.author,loopPoint:t.loopPoint,...t.vgm});break;case"zsm":i=Nt(r,{loopPoint:t.loopPoint,...t.zsm});break;case"sap":i=function(e,t={}){const o=[...e].sort((e,t)=>e.timestamp-t.timestamp),{data:r,frameCount:s}=Et(o,t),i=ht(t,s),n=(new TextEncoder).encode(i),a=n.length+2+r.length,l=new Uint8Array(a);return l.set(n,0),l[n.length]=255,l[n.length+1]=255,l.set(r,n.length+2),l}(r,{name:t.title,author:t.author,...t.sap});break;case"tiuna":i=gt(r,{title:t.title,author:t.author,loopFrame:t.loopPoint,...t.tiuna});break;case"gym":i=function(e){const t=[],r=e.filter(e=>e.chipType===o.OPN2||e.chipType===o.PSG);if(0===r.length)return new Uint8Array(0);const s=[...r].sort((e,t)=>e.timestamp-t.timestamp);let i=0;for(const n of s){const e=n.timestamp-i,r=Math.round(e/735);if(r>0){let e=r;for(;e>0;)if(1===e)t.push(yt),e=0;else{const o=Math.min(e,252);t.push(yt+o),e-=o}}i=n.timestamp,n.chipType===o.OPN2?n.port<256?t.push(Dt,255&n.port,n.data):t.push(vt,n.port-256&255,n.data):n.chipType===o.PSG&&t.push(Vt,n.data)}return new Uint8Array(t)}(r,{title:t.title,author:t.author,...t.gym});break;case"nsf":i=Ut(r,{title:t.title,artist:t.author,...t.nsf});break;case"gbs":i=Ot(r,{title:t.title,author:t.author,...t.gbs});break;case"spc":i=St(r,{title:t.title,artist:t.author,...t.spc});break;default:throw new Error(`Unsupported export format: ${t.format}`)}const n=`${t.title||"export"}.${s.extension}`;return{data:new Blob([i.buffer],{type:s.mimeType}),filename:n,mimeType:s.mimeType,format:t.format}}class Rt{isRecording=!1;engine;constructor(){this.engine=r.getInstance()}startRecording(){this.isRecording||(this.engine.setLogging(!0),this.isRecording=!0)}async stopRecording(){if(!this.isRecording)return new Uint8Array(0);this.engine.setLogging(!1),this.isRecording=!1;return await this.engine.getLog()}getIsRecording(){return this.isRecording}async recordAndExport(e,t){this.startRecording(),await new Promise(t=>setTimeout(t,e));return $t(await this.stopRecording(),t)}}const It={Synth:1,MonoSynth:2,DuoSynth:3,FMSynth:4,AMSynth:5,TB303:10,Sampler:11,WobbleBass:12,DubSiren:13,SpaceLaser:14,V2:20,Synare:15,DrumMachine:16,ChipSynth:17};class Ft{static export(e,t,o,r,s){const i=[];i.push(219,88,78,33),i.push(1),i.push(Math.min(255,r)),i.push(Math.min(255,s));const n=this.getUsedInstrumentIds(t,o),a=e.filter(e=>n.has(e.id));i.push(a.length),i.push(o.length),a.forEach(e=>{i.push(e.id),i.push(It[e.synthType]||0),i.push(Math.round((e.volume+60)/60*255)),i.push(Math.round((e.pan+100)/200*255));this.packSynthParams(e).forEach(e=>i.push(e))}),o.forEach(e=>i.push(e));const l=Array.from(new Set(o));return i.push(l.length),l.forEach(e=>{const o=t[e];if(o){i.push(e),i.push(o.length);for(let e=0;e<o.length;e++){const t=[];o.channels.forEach((o,r)=>{const s=o.rows[e];s&&this.isCellActive(s)&&t.push({cell:s,channel:r})}),0!==t.length?(i.push(t.length),t.forEach(({cell:e,channel:t})=>{let o=0;e.note>0&&(o|=8),e.instrument>0&&(o|=4),e.volume>0&&(o|=2),e.effTyp>0&&(o|=1),i.push(t<<4|o),8&o&&i.push(e.note),4&o&&i.push(e.instrument),2&o&&i.push(e.volume),1&o&&(i.push(e.effTyp),i.push(e.eff))})):i.push(0)}}}),new Uint8Array(i)}static getUsedInstrumentIds(e,t){const o=new Set;return t.forEach(t=>{const r=e[t];r&&r.channels.forEach(e=>{e.rows.forEach(e=>{e.instrument>0&&o.add(e.instrument)})})}),o}static isCellActive(e){return e.note>0||e.instrument>0||e.volume>0||e.effTyp>0}static packSynthParams(e){const t=new Array(8).fill(0);return"TB303"===e.synthType&&e.tb303?(t[0]=e.tb303.filter.cutoff,t[1]=e.tb303.filter.resonance,t[2]=e.tb303.filterEnvelope.envMod,t[3]=e.tb303.filterEnvelope.decay):"SpaceLaser"===e.synthType&&e.spaceLaser?(t[0]=e.spaceLaser.laser.sweepTime/2e3*255,t[1]=e.spaceLaser.fm.amount,t[2]=10*e.spaceLaser.fm.ratio,t[3]=e.spaceLaser.filter.cutoff/100):"V2"===e.synthType&&e.v2&&(t[0]=e.v2.osc1.transpose+64,t[1]=e.v2.osc1.detune+64,t[2]=e.v2.filter1.cutoff,t[3]=e.v2.filter1.resonance),t.map(e=>Math.floor(Math.min(255,Math.max(0,e))))}}const Gt=({isOpen:e,onClose:t})=>{const{patterns:o,currentPatternIndex:r,importPattern:D,setCurrentPattern:v,loadPatterns:V,originalModuleData:y}=s(),{instruments:C,currentInstrumentId:U,addInstrument:L,setCurrentInstrument:O,loadInstruments:B}=i(),{metadata:j,setMetadata:w}=n(),{bpm:X,setBPM:k,isPlaying:Y,stop:q}=a(),{curves:K,loadCurves:Z}=l(),{masterEffects:Q,setMasterEffects:J}=c(),[_,oe]=g.useState("export"),[re,se]=g.useState("song"),[ie,ne]=g.useState({includeAutomation:!0,compress:!1,prettify:!0}),[ae,le]=g.useState("MySound"),[ce,de]=g.useState(r),[me,pe]=g.useState(U||0),[xe,be]=g.useState(!1),[fe,Ne]=g.useState(0),[he,Ee]=g.useState(!1),[ge,De]=g.useState(1),[Ve,ye]=g.useState(!0),[Ce,Ue]=g.useState(!1),[Le,Oe]=g.useState(4),[Be,je]=g.useState(8),[we,Xe]=g.useState(!0),[ke,Se]=g.useState([]),[Me,Ae]=g.useState("vgm"),[Pe]=g.useState(()=>new Rt),[Te,$e]=g.useState(!1),[Re,Ie]=g.useState(0),[Fe,Ge]=g.useState(null),[ze,Ye]=g.useState([]),[He,We]=g.useState([]),[qe,Ke]=g.useState(""),[Ze,Qe]=g.useState(""),[Je,_e]=g.useState(0),{loopStartRow:et,currentRow:tt,setLoopStartRow:ot}=a();g.useEffect(()=>{et>0&&_e(et)},[et]);const rt=g.useRef(null),st=g.useRef(null);if(g.useEffect(()=>{if(!e)return;const o=e=>{"Escape"===e.key&&(e.preventDefault(),t())};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,t]),g.useEffect(()=>{Se([])},[re]),g.useEffect(()=>()=>{st.current&&clearInterval(st.current)},[]),!e)return null;return d.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:d.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col animate-fade-in",children:[d.jsxDEV("div",{className:"bg-dark-bgTertiary border-b border-dark-border px-5 py-4 flex items-center justify-between",children:[d.jsxDEV("h2",{className:"font-mono text-lg font-bold text-text-primary",children:"Export / Import"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:623,columnNumber:11},void 0),d.jsxDEV("button",{onClick:t,className:"btn-icon",children:d.jsxDEV(S,{size:20},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:630,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:626,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:622,columnNumber:9},void 0),d.jsxDEV("div",{className:"bg-dark-bgSecondary border-b border-dark-border flex",children:[d.jsxDEV("button",{onClick:()=>oe("export"),className:`\n              flex-1 px-4 py-3 font-mono text-sm transition-all border-r border-dark-border flex items-center justify-center gap-2\n              ${"export"===_?"bg-accent-primary text-text-inverse font-bold":"text-text-secondary hover:bg-dark-bgHover"}\n            `,children:[d.jsxDEV(M,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:646,columnNumber:13},void 0),"Export"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:636,columnNumber:11},void 0),d.jsxDEV("button",{onClick:()=>oe("import"),className:`\n              flex-1 px-4 py-3 font-mono text-sm transition-all flex items-center justify-center gap-2\n              ${"import"===_?"bg-accent-primary text-text-inverse font-bold":"text-text-secondary hover:bg-dark-bgHover"}\n            `,children:[d.jsxDEV(A,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:659,columnNumber:13},void 0),"Import"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:649,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:635,columnNumber:9},void 0),d.jsxDEV("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-5",children:"export"===_?d.jsxDEV(d.Fragment,{children:[d.jsxDEV("div",{className:"mb-5",children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-3",children:"EXPORT MODE"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:670,columnNumber:17},void 0),d.jsxDEV("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxDEV("button",{onClick:()=>se("song"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"song"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(P,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:684,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"Song"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:685,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:674,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("sfx"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"sfx"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(T,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:697,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"SFX"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:698,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:687,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("instrument"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"instrument"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV($,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:710,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"Instrument"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:711,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:700,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("audio"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"audio"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(R,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:723,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"Audio"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:724,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:713,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("midi"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"midi"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(I,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:736,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"MIDI"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:737,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:726,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("xm"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"xm"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(P,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:749,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"XM"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:750,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:739,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("mod"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"mod"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(P,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:762,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"MOD"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:763,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:752,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("chip"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"chip"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(F,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:775,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"Chip"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:776,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:765,columnNumber:19},void 0),d.jsxDEV("button",{onClick:()=>se("nano"),className:`\n                      p-4 rounded-lg border-2 transition-all text-center\n                      ${"nano"===re?"bg-accent-primary text-text-inverse border-accent-primary glow-sm":"bg-dark-bgSecondary text-text-primary border-dark-border hover:border-dark-borderLight"}\n                    `,children:[d.jsxDEV(T,{size:24,className:"mx-auto mb-2"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:788,columnNumber:21},void 0),d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:"Nano"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:789,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:778,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:673,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:669,columnNumber:15},void 0),"song"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"Song Export"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:797,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-2 text-sm font-mono text-text-primary",children:[d.jsxDEV("div",{children:["Project: ",d.jsxDEV("span",{className:"text-accent-primary",children:j.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:801,columnNumber:35},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:801,columnNumber:21},void 0),d.jsxDEV("div",{children:["Patterns: ",d.jsxDEV("span",{className:"text-accent-primary",children:o.length},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:802,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:802,columnNumber:21},void 0),d.jsxDEV("div",{children:["Instruments: ",d.jsxDEV("span",{className:"text-accent-primary",children:C.length},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:803,columnNumber:39},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:803,columnNumber:21},void 0),d.jsxDEV("div",{children:["BPM: ",d.jsxDEV("span",{className:"text-accent-primary",children:X},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:804,columnNumber:31},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:804,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:800,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:796,columnNumber:17},void 0),"sfx"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"SFX Export"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:811,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"SFX Name"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:816,columnNumber:23},void 0),d.jsxDEV("input",{type:"text",value:ae,onChange:e=>le(e.target.value),className:"input w-full"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:819,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:815,columnNumber:21},void 0),d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Pattern"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:827,columnNumber:23},void 0),d.jsxDEV("select",{value:ce,onChange:e=>de(Number(e.target.value)),className:"input w-full",children:o.map((e,t)=>d.jsxDEV("option",{value:t,children:[t.toString().padStart(2,"0")," - ",e.name]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:836,columnNumber:27},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:830,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:826,columnNumber:21},void 0),d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Instrument"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:843,columnNumber:23},void 0),d.jsxDEV("select",{value:me,onChange:e=>pe(Number(e.target.value)),className:"input w-full",children:C.map(e=>d.jsxDEV("option",{value:e.id,children:[e.id.toString(16).toUpperCase().padStart(2,"0")," - ",e.name]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:852,columnNumber:27},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:846,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:842,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:814,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:810,columnNumber:17},void 0),"instrument"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"Instrument Export"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:864,columnNumber:19},void 0),d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Select Instrument"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:868,columnNumber:21},void 0),d.jsxDEV("select",{value:me,onChange:e=>pe(Number(e.target.value)),className:"input w-full",children:C.map(e=>d.jsxDEV("option",{value:e.id,children:[e.id.toString(16).toUpperCase().padStart(2,"0")," - ",e.name]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:877,columnNumber:25},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:871,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:867,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:863,columnNumber:17},void 0),"audio"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"Audio Export (WAV)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:888,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV("div",{className:"flex gap-2",children:[d.jsxDEV("button",{onClick:()=>Ee(!1),disabled:xe,className:`\n                          flex-1 px-3 py-2 rounded-lg text-sm font-mono transition-all\n                          ${he?"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border":"bg-accent-primary text-text-inverse"}\n                        `,children:"Single Pattern"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:894,columnNumber:23},void 0),d.jsxDEV("button",{onClick:()=>Ee(!0),disabled:xe,className:`\n                          flex-1 px-3 py-2 rounded-lg text-sm font-mono transition-all\n                          ${he?"bg-accent-primary text-text-inverse":"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border"}\n                        `,children:["Full Song (",o.length," patterns)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:907,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:893,columnNumber:21},void 0),!he&&d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Pattern to Render"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:925,columnNumber:25},void 0),d.jsxDEV("select",{value:ce,onChange:e=>de(Number(e.target.value)),className:"input w-full",disabled:xe,children:o.map((e,t)=>d.jsxDEV("option",{value:t,children:[t.toString().padStart(2,"0")," - ",e.name]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:935,columnNumber:29},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:928,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:924,columnNumber:23},void 0),d.jsxDEV("div",{className:"text-sm font-mono text-text-secondary space-y-1",children:[d.jsxDEV("div",{children:["Format: ",d.jsxDEV("span",{className:"text-accent-primary",children:"WAV (16-bit, 44.1kHz)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:944,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:944,columnNumber:23},void 0),d.jsxDEV("div",{children:["BPM: ",d.jsxDEV("span",{className:"text-accent-primary",children:X},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:945,columnNumber:33},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:945,columnNumber:23},void 0),he?d.jsxDEV(d.Fragment,{children:[d.jsxDEV("div",{children:["Patterns: ",d.jsxDEV("span",{className:"text-accent-primary",children:o.length},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:948,columnNumber:42},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:948,columnNumber:27},void 0),d.jsxDEV("div",{children:["Total Rows: ",d.jsxDEV("span",{className:"text-accent-primary",children:o.reduce((e,t)=>e+t.length,0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:949,columnNumber:44},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:949,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:947,columnNumber:25},void 0):d.jsxDEV("div",{children:["Length: ",d.jsxDEV("span",{className:"text-accent-primary",children:[o[ce]?.length||64," rows"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:952,columnNumber:38},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:952,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:943,columnNumber:21},void 0),xe&&d.jsxDEV("div",{className:"mt-3",children:[d.jsxDEV("div",{className:"text-xs font-mono text-text-muted mb-1",children:["Rendering",he?" song":"","... ",fe,"%"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:957,columnNumber:25},void 0),d.jsxDEV("div",{className:"w-full bg-dark-border rounded-full h-2",children:d.jsxDEV("div",{className:"bg-accent-primary h-2 rounded-full transition-all duration-200",style:{width:`${fe}%`}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:961,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:960,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:956,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:891,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:887,columnNumber:17},void 0),"midi"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"MIDI Export (.mid)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:974,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV("div",{className:"flex gap-2",children:[d.jsxDEV("button",{onClick:()=>Ue(!1),className:`\n                          flex-1 px-3 py-2 rounded-lg text-sm font-mono transition-all\n                          ${Ce?"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border":"bg-accent-primary text-text-inverse"}\n                        `,children:"Single Pattern"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:980,columnNumber:23},void 0),d.jsxDEV("button",{onClick:()=>Ue(!0),className:`\n                          flex-1 px-3 py-2 rounded-lg text-sm font-mono transition-all\n                          ${Ce?"bg-accent-primary text-text-inverse":"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border"}\n                        `,children:["Full Song (",o.length," patterns)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:992,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:979,columnNumber:21},void 0),!Ce&&d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Pattern to Export"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1009,columnNumber:25},void 0),d.jsxDEV("select",{value:ce,onChange:e=>de(Number(e.target.value)),className:"input w-full",children:o.map((e,t)=>d.jsxDEV("option",{value:t,children:[t.toString().padStart(2,"0")," - ",e.name]},e.id,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1018,columnNumber:29},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1012,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1008,columnNumber:23},void 0),d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"MIDI Format"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1028,columnNumber:23},void 0),d.jsxDEV("div",{className:"flex gap-2",children:[d.jsxDEV("button",{onClick:()=>De(0),className:`\n                            flex-1 px-3 py-2 rounded-lg text-xs font-mono transition-all\n                            ${0===ge?"bg-accent-secondary text-text-inverse":"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border"}\n                          `,children:"Type 0 (Single Track)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1032,columnNumber:25},void 0),d.jsxDEV("button",{onClick:()=>De(1),className:`\n                            flex-1 px-3 py-2 rounded-lg text-xs font-mono transition-all\n                            ${1===ge?"bg-accent-secondary text-text-inverse":"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border"}\n                          `,children:"Type 1 (Multi-Track)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1044,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1031,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1027,columnNumber:21},void 0),d.jsxDEV("label",{className:"flex items-center gap-3 text-sm font-mono text-text-primary cursor-pointer hover:text-accent-primary transition-colors",children:[d.jsxDEV("input",{type:"checkbox",checked:Ve,onChange:e=>ye(e.target.checked),className:"w-4 h-4 rounded border-dark-border bg-dark-bg text-accent-primary focus:ring-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1061,columnNumber:23},void 0),"Include automation as CC messages"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1060,columnNumber:21},void 0),d.jsxDEV("div",{className:"text-sm font-mono text-text-secondary space-y-1",children:[d.jsxDEV("div",{children:["Format: ",d.jsxDEV("span",{className:"text-accent-primary",children:"Standard MIDI File (SMF)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1071,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1071,columnNumber:23},void 0),d.jsxDEV("div",{children:["Resolution: ",d.jsxDEV("span",{className:"text-accent-primary",children:"480 PPQ"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1072,columnNumber:40},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1072,columnNumber:23},void 0),d.jsxDEV("div",{children:["BPM: ",d.jsxDEV("span",{className:"text-accent-primary",children:X},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1073,columnNumber:33},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1073,columnNumber:23},void 0),d.jsxDEV("div",{children:["Channels: ",d.jsxDEV("span",{className:"text-accent-primary",children:o[ce]?.channels.length||8},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1074,columnNumber:38},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1074,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1070,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:977,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:973,columnNumber:17},void 0),"xm"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"FastTracker II XM Export (.xm)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1082,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Channel Count (max 32)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1088,columnNumber:23},void 0),d.jsxDEV("input",{type:"number",min:2,max:32,value:Be,onChange:e=>je(Math.min(32,Math.max(2,Number(e.target.value)))),className:"input w-full"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1091,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1087,columnNumber:21},void 0),d.jsxDEV("label",{className:"flex items-center gap-3 text-sm font-mono text-text-primary cursor-pointer hover:text-accent-primary transition-colors",children:[d.jsxDEV("input",{type:"checkbox",checked:we,onChange:e=>Xe(e.target.checked),className:"w-4 h-4 rounded border-dark-border bg-dark-bg text-accent-primary focus:ring-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1103,columnNumber:23},void 0),"Include synth instrument slots (audio will be silent)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1102,columnNumber:21},void 0),d.jsxDEV("div",{className:"text-sm font-mono text-text-secondary space-y-1",children:[d.jsxDEV("div",{children:["Format: ",d.jsxDEV("span",{className:"text-accent-primary",children:"FastTracker II Extended Module"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1113,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1113,columnNumber:23},void 0),d.jsxDEV("div",{children:["Patterns: ",d.jsxDEV("span",{className:"text-accent-primary",children:o.length},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1114,columnNumber:38},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1114,columnNumber:23},void 0),d.jsxDEV("div",{children:["Channels: ",d.jsxDEV("span",{className:"text-accent-primary",children:Math.min(o[0]?.channels.length||8,32)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1115,columnNumber:38},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1115,columnNumber:23},void 0),d.jsxDEV("div",{children:["Instruments: ",d.jsxDEV("span",{className:"text-accent-primary",children:Math.min(C.length,128)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1116,columnNumber:41},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1116,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1112,columnNumber:21},void 0),ke.length>0&&d.jsxDEV("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3",children:[d.jsxDEV("h4",{className:"text-xs font-mono font-bold text-orange-400 mb-2",children:["Export Warnings (",ke.length,")"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1122,columnNumber:25},void 0),d.jsxDEV("ul",{className:"text-xs font-mono text-orange-300 space-y-1 max-h-32 overflow-y-auto",children:ke.map((e,t)=>d.jsxDEV("li",{className:"flex items-start gap-2",children:[d.jsxDEV("span",{className:"text-orange-400",children:""},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1128,columnNumber:31},void 0),d.jsxDEV("span",{children:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1129,columnNumber:31},void 0)]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1127,columnNumber:29},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1125,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1121,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1085,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1081,columnNumber:17},void 0),"mod"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"ProTracker MOD Export (.mod)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1141,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"MOD Format"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1147,columnNumber:23},void 0),d.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[d.jsxDEV("button",{onClick:()=>Oe(4),className:`\n                            px-3 py-2 rounded-lg text-xs font-mono transition-all\n                            ${4===Le?"bg-accent-secondary text-text-inverse":"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border"}\n                          `,children:"4 Channel (M.K.)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1151,columnNumber:25},void 0),d.jsxDEV("button",{onClick:()=>Oe(6),className:`\n                            px-3 py-2 rounded-lg text-xs font-mono transition-all\n                            ${6===Le?"bg-accent-secondary text-text-inverse":"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border"}\n                          `,children:"6 Channel (6CHN)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1163,columnNumber:25},void 0),d.jsxDEV("button",{onClick:()=>Oe(8),className:`\n                            px-3 py-2 rounded-lg text-xs font-mono transition-all\n                            ${8===Le?"bg-accent-secondary text-text-inverse":"bg-dark-bg text-text-secondary hover:bg-dark-bgHover border border-dark-border"}\n                          `,children:"8 Channel (8CHN)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1175,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1150,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1146,columnNumber:21},void 0),d.jsxDEV("label",{className:"flex items-center gap-3 text-sm font-mono text-text-primary cursor-pointer hover:text-accent-primary transition-colors",children:[d.jsxDEV("input",{type:"checkbox",checked:we,onChange:e=>Xe(e.target.checked),className:"w-4 h-4 rounded border-dark-border bg-dark-bg text-accent-primary focus:ring-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1192,columnNumber:23},void 0),"Include synth instrument slots (audio will be silent)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1191,columnNumber:21},void 0),d.jsxDEV("div",{className:"text-sm font-mono text-text-secondary space-y-1",children:[d.jsxDEV("div",{children:["Format: ",d.jsxDEV("span",{className:"text-accent-primary",children:"ProTracker MOD"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1202,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1202,columnNumber:23},void 0),d.jsxDEV("div",{children:["Patterns: ",d.jsxDEV("span",{className:"text-accent-primary",children:o.length},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1203,columnNumber:38},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1203,columnNumber:23},void 0),d.jsxDEV("div",{children:["Max Samples: ",d.jsxDEV("span",{className:"text-accent-primary",children:"31"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1204,columnNumber:41},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1204,columnNumber:23},void 0),d.jsxDEV("div",{children:["Max Rows/Pattern: ",d.jsxDEV("span",{className:"text-accent-primary",children:"64"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1205,columnNumber:46},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1205,columnNumber:23},void 0),d.jsxDEV("div",{children:["Note Range: ",d.jsxDEV("span",{className:"text-accent-primary",children:"C-0 to B-3"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1206,columnNumber:40},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1206,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1201,columnNumber:21},void 0),ke.length>0&&d.jsxDEV("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3",children:[d.jsxDEV("h4",{className:"text-xs font-mono font-bold text-orange-400 mb-2",children:["Export Warnings (",ke.length,")"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1212,columnNumber:25},void 0),d.jsxDEV("ul",{className:"text-xs font-mono text-orange-300 space-y-1 max-h-32 overflow-y-auto",children:ke.map((e,t)=>d.jsxDEV("li",{className:"flex items-start gap-2",children:[d.jsxDEV("span",{className:"text-orange-400",children:""},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1218,columnNumber:31},void 0),d.jsxDEV("span",{children:e},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1219,columnNumber:31},void 0)]},t,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1217,columnNumber:29},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1215,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1211,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1144,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1140,columnNumber:17},void 0),"chip"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"Chip Music Export"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1231,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-4",children:[d.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3",children:[d.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[d.jsxDEV("span",{className:"text-xs font-mono text-text-muted",children:"RECORDING"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1238,columnNumber:25},void 0),d.jsxDEV("span",{className:"text-lg font-mono text-accent-primary font-bold",children:(e=>{const t=Math.floor(e/1e3),o=Math.floor(t/60),r=t%60,s=Math.floor(e%1e3/100);return`${o}:${r.toString().padStart(2,"0")}.${s}`})(Re)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1239,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1237,columnNumber:23},void 0),d.jsxDEV("div",{className:"flex gap-2",children:Te?d.jsxDEV("button",{onClick:async()=>{st.current&&(clearInterval(st.current),st.current=null);const e=await Pe.stopRecording();if($e(!1),Ge(e),e.length>0){const t=ut(e);Ye(t);const o=Pt(t);We(o),o.length>0&&!o.includes(Me)&&Ae(o[0])}},className:"flex-1 px-4 py-2 rounded-lg bg-dark-bgHover text-text-primary font-mono text-sm hover:bg-dark-border transition-colors flex items-center justify-center gap-2",children:[d.jsxDEV("span",{className:"w-3 h-3 bg-white"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1257,columnNumber:29},void 0),"Stop"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1253,columnNumber:27},void 0):d.jsxDEV("button",{onClick:()=>{Pe.startRecording(),$e(!0),Ie(0),Ge(null),Ye([]),We([]),st.current=setInterval(()=>{Ie(e=>e+100)},100)},className:"flex-1 px-4 py-2 rounded-lg bg-red-500 text-white font-mono text-sm hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[d.jsxDEV("span",{className:"w-3 h-3 rounded-full bg-white"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1249,columnNumber:29},void 0),"Record"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1245,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1243,columnNumber:23},void 0),d.jsxDEV("p",{className:"text-xs font-mono text-text-muted mt-2",children:Te?"Recording... Play your song now!":ze.length>0?`Captured ${ze.length.toLocaleString()} register writes`:"Press Record, then play your song to capture chip output"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1262,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1236,columnNumber:21},void 0),ze.length>0&&d.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3",children:[d.jsxDEV("h4",{className:"text-xs font-mono text-text-muted mb-2",children:"CAPTURED DATA"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1274,columnNumber:25},void 0),(()=>{const e=Tt(ze);return d.jsxDEV("div",{className:"space-y-1 text-sm font-mono",children:[d.jsxDEV("div",{children:["Duration: ",d.jsxDEV("span",{className:"text-accent-primary",children:[e.duration.toFixed(1),"s"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1279,columnNumber:46},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1279,columnNumber:31},void 0),d.jsxDEV("div",{children:["Writes: ",d.jsxDEV("span",{className:"text-accent-primary",children:e.totalWrites.toLocaleString()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1280,columnNumber:44},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1280,columnNumber:31},void 0),d.jsxDEV("div",{className:"pt-1 border-t border-dark-border mt-2",children:[d.jsxDEV("span",{className:"text-text-muted",children:"Chips used:"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1282,columnNumber:33},void 0),e.usedChips.map(e=>d.jsxDEV("div",{className:"ml-2 text-xs",children:[e.name,": ",d.jsxDEV("span",{className:"text-accent-secondary",children:e.writes.toLocaleString()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1285,columnNumber:50},void 0)]},e.type,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1284,columnNumber:35},void 0))]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1281,columnNumber:31},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1278,columnNumber:29},void 0)})()]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1273,columnNumber:23},void 0),ze.length>0&&d.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3",children:[d.jsxDEV("div",{className:"text-xs font-mono text-text-muted mb-2",children:"QUICK PRESETS"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1298,columnNumber:25},void 0),d.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[d.jsxDEV("button",{onClick:()=>Ae("vgm"),className:"px-3 py-2 rounded-lg bg-dark-bgSecondary border border-dark-border hover:border-accent-primary text-xs font-mono transition-colors text-left",children:" Universal (VGM)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1300,columnNumber:27},void 0),d.jsxDEV("button",{onClick:()=>Ae("gym"),disabled:!He.includes("gym"),className:"px-3 py-2 rounded-lg bg-dark-bgSecondary border border-dark-border hover:border-accent-primary text-xs font-mono transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed",children:" Genesis (GYM)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1306,columnNumber:27},void 0),d.jsxDEV("button",{onClick:()=>Ae("nsf"),disabled:!He.includes("nsf"),className:"px-3 py-2 rounded-lg bg-dark-bgSecondary border border-dark-border hover:border-accent-primary text-xs font-mono transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed",children:" NES (NSF)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1313,columnNumber:27},void 0),d.jsxDEV("button",{onClick:()=>Ae("gbs"),disabled:!He.includes("gbs"),className:"px-3 py-2 rounded-lg bg-dark-bgSecondary border border-dark-border hover:border-accent-primary text-xs font-mono transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed",children:" Game Boy (GBS)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1320,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1299,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1297,columnNumber:23},void 0),d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-2",children:"EXPORT FORMAT"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1333,columnNumber:23},void 0),d.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:["vgm","gym","nsf","gbs","spc","zsm","sap","tiuna"].map(e=>{const t=At[e],o=He.includes(e)||0===ze.length,r={vgm:{supported:!0,type:"custom"},gym:{supported:!1,type:"none"},nsf:{supported:!0,type:"auto"},gbs:{supported:!0,type:"auto"},spc:{supported:!1,type:"none"},zsm:{supported:!1,type:"none"},sap:{supported:!1,type:"none"},tiuna:{supported:!1,type:"none"}}[e];return d.jsxDEV("button",{onClick:()=>o&&Ae(e),disabled:!o&&ze.length>0,className:`\n                                p-3 rounded-lg text-left transition-all\n                                ${Me===e?"bg-accent-primary text-text-inverse":o||0===ze.length?"bg-dark-bg border border-dark-border hover:border-dark-borderLight":"bg-dark-bg border border-dark-border opacity-40 cursor-not-allowed"}\n                              `,children:[d.jsxDEV("div",{className:"flex items-center justify-between",children:[d.jsxDEV("div",{className:"font-mono text-sm font-semibold",children:t.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1369,columnNumber:33},void 0),"custom"===r.type&&d.jsxDEV("span",{className:"text-xs opacity-70",title:"Custom loop point supported",children:""},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1371,columnNumber:35},void 0),"auto"===r.type&&d.jsxDEV("span",{className:"text-xs opacity-70",title:"Loops entire song automatically",children:""},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1374,columnNumber:35},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1368,columnNumber:31},void 0),d.jsxDEV("div",{className:"text-xs opacity-70",children:[".",t.extension]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1377,columnNumber:31},void 0)]},e,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1354,columnNumber:29},void 0)})},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1336,columnNumber:23},void 0),Je>0&&d.jsxDEV("div",{className:"mt-2 text-xs",children:(()=>{const e={vgm:"custom",nsf:"auto",gbs:"auto",gym:"none",spc:"none",zsm:"none",sap:"none",tiuna:"none"}[Me];return"custom"===e?d.jsxDEV("div",{className:"text-green-400",children:[" Loop point at row ",Je," will be used"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1400,columnNumber:33},void 0):"auto"===e?d.jsxDEV("div",{className:"text-yellow-400",children:[" ",Me.toUpperCase()," loops entire song (custom loop points not supported)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1406,columnNumber:33},void 0):d.jsxDEV("div",{className:"text-yellow-400",children:[" ",Me.toUpperCase()," format does not support loop points"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1412,columnNumber:33},void 0)})()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1385,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1332,columnNumber:21},void 0),d.jsxDEV("div",{className:"space-y-2",children:[d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Title"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1425,columnNumber:25},void 0),d.jsxDEV("input",{type:"text",value:qe,onChange:e=>Ke(e.target.value),placeholder:j.name||"Untitled",className:"input w-full"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1428,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1424,columnNumber:23},void 0),d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-1",children:"Author"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1437,columnNumber:25},void 0),d.jsxDEV("input",{type:"text",value:Ze,onChange:e=>Qe(e.target.value),placeholder:j.author||"Unknown",className:"input w-full"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1440,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1436,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1423,columnNumber:21},void 0),d.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3",children:[d.jsxDEV("label",{className:"block text-xs font-mono text-text-muted mb-2",children:"LOOP POINT (Row)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1452,columnNumber:23},void 0),d.jsxDEV("div",{className:"flex gap-2",children:[d.jsxDEV("input",{type:"number",value:Je,onChange:e=>_e(Math.max(0,Number(e.target.value))),min:0,className:"input flex-1 font-mono",placeholder:"0"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1456,columnNumber:25},void 0),d.jsxDEV("button",{onClick:()=>{_e(tt),ot(tt)},className:"px-3 py-2 rounded-lg bg-dark-bgHover text-text-primary font-mono text-xs hover:bg-dark-border transition-colors",title:"Set loop point to current row",children:"From Cursor"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1464,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1455,columnNumber:23},void 0),d.jsxDEV("p",{className:"text-xs font-mono text-text-muted mt-2",children:Je>0?`Music will loop back to row ${Je}`:"Set to 0 for no loop (one-shot playback)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1475,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1451,columnNumber:21},void 0),xe&&"chip"===re&&d.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3",children:[d.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[d.jsxDEV("span",{className:"text-xs font-mono text-text-muted",children:["Exporting ",At[Me].name,"..."]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1486,columnNumber:27},void 0),d.jsxDEV("span",{className:"text-xs font-mono text-accent-primary",children:[fe,"%"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1489,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1485,columnNumber:25},void 0),d.jsxDEV("div",{className:"h-2 bg-dark-border rounded-full overflow-hidden",children:d.jsxDEV("div",{className:"h-full bg-accent-primary transition-all duration-300",style:{width:`${fe}%`}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1494,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1493,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1484,columnNumber:23},void 0),d.jsxDEV("div",{className:"text-xs font-mono text-text-muted bg-dark-bg border border-dark-border rounded-lg p-3",children:At[Me].description},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1503,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1234,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1230,columnNumber:17},void 0),"nano"===re&&d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mb-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"Nano Binary Export (.dbn)"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1512,columnNumber:19},void 0),d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3",children:d.jsxDEV("p",{className:"text-xs font-mono text-text-primary leading-relaxed",children:["Extreme binary compression for demoscene 4k intros. Exports a strictly optimized ",d.jsxDEV("span",{className:"text-accent-secondary",children:"Uint8Array"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1519,columnNumber:54},void 0)," containing only used instruments and bit-masked pattern data."]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1517,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1516,columnNumber:21},void 0),d.jsxDEV("div",{className:"text-sm font-mono text-text-secondary space-y-1",children:[d.jsxDEV("div",{children:["Target Size: ",d.jsxDEV("span",{className:"text-accent-primary",children:"< 4KB"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1524,columnNumber:41},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1524,columnNumber:23},void 0),d.jsxDEV("div",{children:["Format: ",d.jsxDEV("span",{className:"text-accent-primary",children:"DBXN Binary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1525,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1525,columnNumber:23},void 0),d.jsxDEV("div",{children:["Used Instruments: ",d.jsxDEV("span",{className:"text-accent-primary",children:(()=>{const e=new Set;return o.forEach(t=>{t.channels.forEach(t=>{t.rows.forEach(t=>{t.instrument>0&&e.add(t.instrument)})})}),e.size})()},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1526,columnNumber:46},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1526,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1523,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1515,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1511,columnNumber:17},void 0),d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4",children:[d.jsxDEV("h3",{className:"text-sm font-mono font-bold text-accent-primary mb-3",children:"Options"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1546,columnNumber:17},void 0),d.jsxDEV("div",{className:"space-y-2",children:["song"===re&&d.jsxDEV("label",{className:"flex items-center gap-3 text-sm font-mono text-text-primary cursor-pointer hover:text-accent-primary transition-colors",children:[d.jsxDEV("input",{type:"checkbox",checked:ie.includeAutomation,onChange:e=>ne({...ie,includeAutomation:e.target.checked}),className:"w-4 h-4 rounded border-dark-border bg-dark-bg text-accent-primary focus:ring-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1552,columnNumber:23},void 0),"Include automation data"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1551,columnNumber:21},void 0),d.jsxDEV("label",{className:"flex items-center gap-3 text-sm font-mono text-text-primary cursor-pointer hover:text-accent-primary transition-colors",children:[d.jsxDEV("input",{type:"checkbox",checked:ie.prettify,onChange:e=>ne({...ie,prettify:e.target.checked}),className:"w-4 h-4 rounded border-dark-border bg-dark-bg text-accent-primary focus:ring-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1562,columnNumber:21},void 0),"Prettify JSON (human-readable)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1561,columnNumber:19},void 0),d.jsxDEV("label",{className:"flex items-center gap-3 text-sm font-mono text-text-muted cursor-not-allowed",children:[d.jsxDEV("input",{type:"checkbox",checked:ie.compress,disabled:!0,className:"w-4 h-4 rounded opacity-50"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1571,columnNumber:21},void 0),"Compress (coming soon)"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1570,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1549,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1545,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:667,columnNumber:13},void 0):d.jsxDEV(d.Fragment,{children:[d.jsxDEV("div",{className:"text-center py-10",children:[d.jsxDEV("div",{className:"w-20 h-20 mx-auto mb-5 rounded-full bg-dark-bgSecondary border border-dark-border flex items-center justify-center",children:d.jsxDEV(A,{size:32,className:"text-accent-primary"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1587,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1586,columnNumber:17},void 0),d.jsxDEV("h3",{className:"text-xl font-mono font-bold text-text-primary mb-2",children:"Import File"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1589,columnNumber:17},void 0),d.jsxDEV("p",{className:"text-sm font-mono text-text-muted mb-6",children:"Select a .dbx, .sfx.json, or .dbi file"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1592,columnNumber:17},void 0),d.jsxDEV("button",{onClick:()=>{rt.current?.click()},className:"btn-primary px-8 py-3",children:"Choose File"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1595,columnNumber:17},void 0),d.jsxDEV("input",{ref:rt,type:"file",accept:".json",onChange:async e=>{const o=e.target.files?.[0];if(o){if(Y){q();m().releaseAll()}try{switch(await p(o)){case"song":{const e=await f(o);if(e){if(w(e.metadata),k(e.bpm),V(e.patterns),B(e.instruments),e.automationCurves&&e.automationCurves.length>0)Z(e.automationCurves);else if(e.automation){const t=[];Object.entries(e.automation).forEach(([,e])=>{Object.entries(e).forEach(([,e])=>{Object.values(e).forEach(e=>{t.push(e)})})}),t.length>0&&Z(t)}e.masterEffects&&e.masterEffects.length>0&&J(e.masterEffects),u.success(`Song "${e.metadata.name}" imported successfully!`)}break}case"sfx":{const e=await b(o);if(e){const t=D(e.pattern);L(e.instrument),v(t),O(e.instrument.id),u.success(`SFX "${e.name}" imported successfully!`)}break}case"instrument":{const e=await x(o);e&&(L(e.instrument),O(e.instrument.id),u.success(`Instrument "${e.instrument.name}" imported successfully!`));break}default:u.error("Unknown or invalid file format")}t()}catch(r){u.error("Import failed: "+r.message)}}},className:"hidden"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1601,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1585,columnNumber:15},void 0),d.jsxDEV("div",{className:"bg-dark-bgSecondary border border-dark-border rounded-lg p-4 mt-4",children:[d.jsxDEV("h4",{className:"text-xs font-mono font-bold text-accent-primary mb-3",children:"Supported Formats"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1611,columnNumber:17},void 0),d.jsxDEV("ul",{className:"text-sm font-mono text-text-secondary space-y-2",children:[d.jsxDEV("li",{className:"flex items-start gap-2",children:[d.jsxDEV("span",{className:"text-accent-primary",children:""},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1616,columnNumber:21},void 0),d.jsxDEV("span",{children:[d.jsxDEV("strong",{children:".song.json"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1617,columnNumber:27},void 0)," - Full song with all patterns and instruments"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1617,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1615,columnNumber:19},void 0),d.jsxDEV("li",{className:"flex items-start gap-2",children:[d.jsxDEV("span",{className:"text-accent-primary",children:""},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1620,columnNumber:21},void 0),d.jsxDEV("span",{children:[d.jsxDEV("strong",{children:".sfx.json"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1621,columnNumber:27},void 0)," - Single pattern with one instrument"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1621,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1619,columnNumber:19},void 0),d.jsxDEV("li",{className:"flex items-start gap-2",children:[d.jsxDEV("span",{className:"text-accent-primary",children:""},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1624,columnNumber:21},void 0),d.jsxDEV("span",{children:[d.jsxDEV("strong",{children:".dbi"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1625,columnNumber:27},void 0)," - Individual instrument preset"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1625,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1623,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1614,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1610,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1583,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:665,columnNumber:9},void 0),d.jsxDEV("div",{className:"bg-dark-bgSecondary border-t border-dark-border px-5 py-4 flex items-center justify-between",children:[d.jsxDEV("div",{className:"text-xs font-mono text-text-muted",children:"export"===_?"Format: "+("audio"===re?".wav":"midi"===re?".mid":"xm"===re?".xm":"mod"===re?".mod":"chip"===re?`.${At[Me].extension}`:"nano"===re?".dbn":`.${re}.json`):"Select a file to import"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1635,columnNumber:11},void 0),d.jsxDEV("div",{className:"flex gap-3",children:[d.jsxDEV("button",{onClick:t,className:"btn",disabled:xe,children:"Cancel"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1649,columnNumber:13},void 0),"export"===_&&d.jsxDEV("button",{onClick:async()=>{try{switch(re){case"song":{const e=o.map(e=>e.id),t={};o.forEach(e=>{e.channels.forEach((o,r)=>{const s=K.filter(t=>t.patternId===e.id&&t.channelIndex===r);s.length>0&&(t[e.id]||(t[e.id]={}),t[e.id][r]=s.reduce((e,t)=>(e[t.parameter]=t,e),{}))})}),E(j,X,C,o,e,t,Q,K,ie);break}case"sfx":{const e=o[ce],t=C.find(e=>e.id===me);if(!e||!t)return void u.warning("Please select a valid pattern and instrument");h(ae,t,e,X,ie);break}case"instrument":{const e=C.find(e=>e.id===me);if(!e)return void u.warning("Please select a valid instrument");N(e,ie);break}case"audio":be(!0),Ne(0);try{const e=function(e){return e.find(e=>"UADESynth"===e.synthType&&e.uade?.fileData)??null}(C);if(e?.uade?.fileData)await H(e.uade.fileData,e.uade.filename,`${j.name||"song"}.wav`,e.uade.currentSubsong??0,e=>Ne(e));else if(y?.base64){const e=atob(y.base64),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);const o=t.buffer,r=y.sourceFile||`module.${y.format.toLowerCase()}`;await H(o,r,`${j.name||"song"}.wav`,0,e=>Ne(e))}else if(he){const e=o.map((e,t)=>t);await W(o,e,C,X,`${j.name||"song"}.wav`,e=>Ne(e))}else{const e=o[ce];if(!e)return void u.warning("Please select a valid pattern");await async function(e,t,o,r,s){const i=z(await G(e,t,o,{onProgress:s})),n=URL.createObjectURL(i),a=document.createElement("a");a.href=n,a.download=r.endsWith(".wav")?r:`${r}.wav`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}(e,C,X,`${e.name||"pattern"}.wav`,e=>Ne(e))}}finally{be(!1),Ne(0)}break;case"midi":{const e=[4,4],t={type:ge,includeAutomation:Ve,velocityScale:1,exportMutedChannels:!1};let r,s;if(Ce){const i=o.map(e=>e.id);r=te(o,i,X,e,K,t),s=`${j.name||"song"}.mid`}else{const i=o[ce];if(!i)return void u.warning("Please select a valid pattern");r=ee(i,X,e,t),s=`${i.name||"pattern"}.mid`}const i=new Blob([new Uint8Array(r)],{type:"audio/midi"}),n=URL.createObjectURL(i),a=document.createElement("a");a.href=n,a.download=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n),u.success(`MIDI file "${s}" exported successfully!`);break}case"xm":{const e={channelLimit:Be,moduleName:j.name||"DEViLBOX Export",bakeSynthsToSamples:we},r=await ue(o,C,e),s=URL.createObjectURL(r.data),i=document.createElement("a");i.href=s,i.download=r.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),r.warnings.length>0?(Se(r.warnings),u.warning(`XM exported with ${r.warnings.length} warnings. Check the dialog for details.`)):(u.success(`XM file "${r.filename}" exported successfully!`),t());break}case"mod":{const e={channelCount:Le,moduleName:j.name||"DEViLBOX Export",bakeSynthsToSamples:we},r=await ve(o,C,e),s=URL.createObjectURL(r.data),i=document.createElement("a");i.href=s,i.download=r.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),r.warnings.length>0?(Se(r.warnings),u.warning(`MOD exported with ${r.warnings.length} warnings. Check the dialog for details.`)):(u.success(`MOD file "${r.filename}" exported successfully!`),t());break}case"chip":if(!Fe||0===Fe.length)return void u.error("No recording data. Press Record and play your song first.");if(0===ze.length)return void u.error("No register writes captured. Make sure Furnace chips are playing.");if(!He.includes(Me)){const e=Tt(ze).usedChips.map(e=>e.name).join(", ");return void u.error(`${At[Me].name} format is not compatible with chips used: ${e}. Try VGM for universal compatibility.`)}if(!qe.trim())return void u.error("Please enter a title for your export.");be(!0),Ne(0);try{const e=1/(X/60*4),o=Je>0?Math.floor(Je*e*44100):void 0;Ne(50);const r=await $t(Fe,{format:Me,title:qe||j.name||"Untitled",author:Ze||j.author||"Unknown",loopPoint:o});Ne(100);const s=URL.createObjectURL(r.data),i=document.createElement("a");i.href=s,i.download=r.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),u.success(`${At[Me].name} file exported successfully!`),t()}catch(e){u.error(`Export failed: ${e.message}`)}finally{be(!1),Ne(0)}break;case"nano":{const e=o.map((e,t)=>t),r=Ft.export(C,o,e,X,6),s=new Blob([new Uint8Array(r)],{type:"application/octet-stream"}),i=URL.createObjectURL(s),n=document.createElement("a");n.href=i,n.download=`${j.name||"song"}.dbn`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i),u.success(`Nano binary "${j.name||"song"}.dbn" exported successfully! (${r.length} bytes)`),t();break}}"xm"!==re&&"mod"!==re&&t()}catch(e){u.error("Export failed: "+e.message)}},className:"btn-primary flex items-center gap-2",disabled:xe,children:[d.jsxDEV(M,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1662,columnNumber:17},void 0),xe?"Rendering...":"Export"]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1657,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1648,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:1634,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:620,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/lib/export/ExportDialog.tsx",lineNumber:619,columnNumber:5},void 0)};export{Gt as ExportDialog};
