import{aG as e,j as s,aH as n,c as r}from"./index-zx6LJBPK.js";import{r as t}from"./vendor-utils-XMmR-oGw.js";import{w as o,n as i}from"./vendor-ui-uomqNFY-.js";import"./vendor-react-DkDaD07v.js";import"./vendor-tone-CADp_hfL.js";function a(e){const s=e.name.indexOf(":");return s>0?e.name.substring(s+1).trim():e.name}const m=({instrument:m})=>{const[l,c]=t.useState([]),[d,u]=t.useState(new Map),[p,f]=t.useState(!0),N=t.useRef(null),V="cyan-lineart"===e(e=>e.currentThemeId),x=V?"#00ffff":"#a78bfa",b=V?"#00ffff":"#a78bfa",g=V?"bg-[#051515] border-cyan-900/50":"bg-[#1a1a1a] border-purple-900/50";t.useEffect(()=>{let e=!1;const s=async()=>{try{const n=r(),t=n.getInstrumentKey(m.id,-1),o=n.instruments?.get(t);if(!o||!("getParams"in o))return void setTimeout(()=>{e||s()},500);"ensureInitialized"in o&&await o.ensureInitialized(),N.current=o;const i=o.getParams();if(!e){c(i);const e=new Map;for(const s of i)e.set(s.id,s.defaultValue);u(e),f(!1)}}catch{e||f(!1)}};return s(),()=>{e=!0}},[m.id]);const v=t.useCallback((e,s)=>{u(n=>{const r=new Map(n);return r.set(e,s),r}),N.current&&N.current.setParameter(e,s)},[]);if(p)return s.jsxDEV("div",{className:"flex items-center justify-center gap-2 p-8 text-gray-400",children:[s.jsxDEV(o,{size:16,className:"animate-spin"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:132,columnNumber:9},void 0),s.jsxDEV("span",{children:"Loading parameters..."},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:133,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:131,columnNumber:7},void 0);if(0===l.length)return s.jsxDEV("div",{className:"flex items-center justify-center gap-2 p-8 text-gray-500",children:[s.jsxDEV(i,{size:16},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:141,columnNumber:9},void 0),s.jsxDEV("span",{children:"No parameters exposed by this synth"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:140,columnNumber:7},void 0);const E=function(e){const s=new Map;for(const n of e){const e=n.name.indexOf(":"),r=e>0?n.name.substring(0,e):"Parameters";s.has(r)||s.set(r,[]),s.get(r).push(n)}return Array.from(s.entries()).map(([e,s])=>({name:e,params:s}))}(l);return s.jsxDEV("div",{className:"flex flex-col gap-4 p-4 overflow-y-auto",children:E.map(e=>s.jsxDEV("div",{className:`p-4 rounded-xl border ${g}`,children:[s.jsxDEV("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxDEV(i,{size:16,style:{color:x}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:154,columnNumber:13},void 0),s.jsxDEV("h3",{className:"font-bold uppercase tracking-tight text-sm",style:{color:x},children:e.name},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:155,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:153,columnNumber:11},void 0),s.jsxDEV("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-8 gap-3",children:e.params.map(e=>s.jsxDEV(n,{label:a(e),value:d.get(e.id)??e.defaultValue,min:e.min,max:e.max,defaultValue:e.defaultValue,onChange:s=>v(e.id,s),size:"sm",color:b},e.id,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:165,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:163,columnNumber:11},void 0)]},e.name,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:152,columnNumber:9},void 0))},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/controls/VSTBridgePanel.tsx",lineNumber:150,columnNumber:5},void 0)};export{m as VSTBridgePanel};
