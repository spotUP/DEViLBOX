import{j as t}from"./index-zx6LJBPK.js";import{r as e}from"./vendor-utils-XMmR-oGw.js";const o=44100,a=400,l="#192130";function n(t,e,a){const l=2*Math.PI*e/o,n=Math.cos(l),s=Math.sin(l),i=Math.cos(2*l),h=Math.sin(2*l),r=t.b0+t.b1*n+t.b2*i,c=-t.b1*s-t.b2*h,f=1+t.a1*n+t.a2*i,M=-t.a1*s-t.a2*h,b=f*f+M*M,d=Math.sqrt((r*r+c*c)/Math.max(b,1e-30)),p=20*Math.log10(Math.max(d,1e-10));return 4===a?2*p:p}const s=({filterType:s="lowpass",cutoff:i,resonance:h,poles:r=2,freqMin:c=20,freqMax:f=2e4,qMin:M=.5,qMax:b=20,color:d="#22d3ee",width:p=280,height:m=72})=>{const u=e.useRef(null),g=e.useCallback(()=>{const t=u.current;if(!t)return;const e=t.getContext("2d");if(!e)return;const g=window.devicePixelRatio||1;t.width=p*g,t.height=m*g,t.style.width=`${p}px`,t.style.height=`${m}px`,e.scale(g,g);const x=p,k=m,y=c*Math.pow(f/c,Math.max(0,Math.min(1,i))),T=M+Math.max(0,Math.min(1,h))*(b-M),v=function(t,e,a){const l=Math.max(20,Math.min(e,22005.9)),n=2*Math.PI*l/o,s=Math.cos(n),i=Math.sin(n),h=i/(2*Math.max(a,.01)),r=1+h,c=-2*s,f=1-h;let M,b,d;switch(t){case"highpass":M=(1+s)/2,b=-(1+s),d=(1+s)/2;break;case"bandpass":M=i/2,b=0,d=-i/2;break;case"notch":M=1,b=-2*s,d=1;break;default:M=(1-s)/2,b=1-s,d=(1-s)/2}return{b0:M/r,b1:b/r,b2:d/r,a1:c/r,a2:f/r}}(s,y,T),w=Math.log10(f/c),A=t=>(Math.log10(Math.max(t,c))-Math.log10(c))/w*x,P=t=>(1-(Math.max(-60,Math.min(18,t))- -60)/78)*k;e.fillStyle="#0d1117",e.fillRect(0,0,x,k),e.lineWidth=.5;for(const o of[-60,-48,-36,-24,-12,0,12]){const t=Math.round(P(o))+.5;e.beginPath(),e.moveTo(0,t),e.lineTo(x,t),e.strokeStyle=0===o?"#253040":l,e.lineWidth=0===o?1:.5,e.stroke()}e.lineWidth=.5,e.strokeStyle=l;for(const o of[100,1e3,1e4]){const t=Math.round(A(o))+.5;e.beginPath(),e.moveTo(t,0),e.lineTo(t,k),e.stroke()}const S=[],q=[];for(let o=0;o<a;o++){const t=o/399,e=c*Math.pow(f/c,t);S.push(A(e)),q.push(P(n(v,e,r)))}e.beginPath(),e.moveTo(S[0],k);for(let o=0;o<a;o++)e.lineTo(S[o],q[o]);e.lineTo(S[399],k),e.closePath(),e.fillStyle=d,e.globalAlpha=.14,e.fill(),e.globalAlpha=1,e.beginPath(),e.moveTo(S[0],q[0]);for(let o=1;o<a;o++)e.lineTo(S[o],q[o]);e.strokeStyle=d,e.lineWidth=1.5,e.lineJoin="round",e.globalAlpha=1,e.stroke();const R=A(y);e.beginPath(),e.setLineDash([3,3]),e.moveTo(R,0),e.lineTo(R,k),e.strokeStyle=d,e.lineWidth=1,e.globalAlpha=.4,e.stroke(),e.setLineDash([]),e.globalAlpha=1;const W=y>=1e3?`${(y/1e3).toFixed(y>=1e4?0:1)}k`:`${Math.round(y)}`;e.font="7px monospace",e.fillStyle=d,e.globalAlpha=.7,e.textAlign=R>.8*x?"right":"left",e.fillText(W,R+(R>.8*x?-3:3),k-2),e.globalAlpha=1;const j=P(0);e.font="7px monospace",e.fillStyle="#475569",e.textAlign="right",e.fillText("0",x-2,j-2)},[s,i,h,r,c,f,M,b,d,p,m]);return e.useEffect(()=>{g()},[g]),t.jsxDEV("canvas",{ref:u,style:{display:"block",borderRadius:4,border:"1px solid rgba(255,255,255,0.06)"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/instruments/shared/FilterFrequencyResponse.tsx",lineNumber:262,columnNumber:5},void 0)};export{s as F};
