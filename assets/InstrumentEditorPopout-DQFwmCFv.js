import{b as e,q as t,j as s}from"./index-Dy0braHa.js";import{r}from"./vendor-utils-Cm-70yv0.js";import{U as n,E as a,T as i,S as d}from"./EffectChain-Crt3jaCD.js";import{an as o,a4 as l,d as c,p as x,b as m,I as u,aP as b,C as p,a6 as h,am as j}from"./vendor-ui-Cpb_sTe-.js";import"./vendor-react-LeNVipsj.js";import"./vendor-tone-CADp_hfL.js";import"./ModuleRegistry-C5IxiZu0.js";import"./sortable.esm-DgBzBk7W.js";const g=()=>{const j=e(e=>e.instruments),g=e(e=>e.currentInstrumentId),y=e(e=>e.updateInstrument),v=e(e=>e.setCurrentInstrument),N=j.find(e=>e.id===g)||null;r.useEffect(()=>{},[]);const[k,C]=r.useState("sound"),[S,z]=r.useState(!0),[T,w]=r.useState(!1),I=[...j].sort((e,t)=>e.id-t.id),E=I.findIndex(e=>e.id===g),P=r.useCallback(()=>{E>0?v(I[E-1].id):I.length>0&&v(I[I.length-1].id)},[E,I,v]),U=r.useCallback(()=>{E<I.length-1?v(I[E+1].id):I.length>0&&v(I[0].id)},[E,I,v]),$=t(N?.synthType?N.synthType:"TB303"),q=[{id:"sound",label:"Sound",icon:m},{id:"effects",label:"Effects",icon:u}];return N?s.jsxs("div",{className:"bg-dark-bg w-full h-screen flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-border bg-dark-bgSecondary shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:P,className:"p-1.5 rounded hover:bg-dark-bgTertiary text-text-muted hover:text-text-primary transition-colors",title:"Previous instrument",children:s.jsx(l,{size:20})}),s.jsx("div",{className:`p-2 rounded-lg bg-dark-bg ${$?.color||"text-text-primary"}`,children:s.jsx(f,{iconName:$.icon,size:20})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"text",value:N.name,onChange:e=>y(N.id,{name:e.target.value}),className:"bg-transparent text-text-primary font-semibold text-lg focus:outline-none focus:ring-1 focus:ring-accent-primary rounded px-1 -ml-1"}),s.jsxs("span",{className:"text-xs text-text-muted font-mono",children:["(",E+1,"/",I.length,")"]})]}),s.jsxs("p",{className:"text-xs text-text-muted",children:[$?.name||N.synthType," ",s.jsx("span",{className:"opacity-50",children:"|"})," ID:"," ",N.id.toString(16).toUpperCase().padStart(2,"0")]})]}),s.jsx("button",{onClick:U,className:"p-1.5 rounded hover:bg-dark-bgTertiary text-text-muted hover:text-text-primary transition-colors",title:"Next instrument",children:s.jsx(c,{size:20})})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded bg-dark-bg hover:bg-dark-bgTertiary text-text-primary transition-colors text-sm border border-dark-border",title:"Save as preset",children:[s.jsx(x,{size:14}),"Save"]})})]}),s.jsx("div",{className:"flex items-center gap-1 px-4 py-2 border-b border-dark-border bg-dark-bg shrink-0",children:q.map(e=>{const t=e.icon,r=k===e.id;return s.jsxs("button",{onClick:()=>C(e.id),className:`\n                flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border\n                ${r?"bg-dark-bgSecondary text-accent-primary border-accent-primary":"text-text-muted hover:text-text-primary hover:bg-dark-bgSecondary border-transparent"}\n              `,children:[s.jsx(t,{size:16}),e.label]},e.id)})}),s.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-modern",children:["sound"===k&&s.jsx(n,{instrument:N,onChange:e=>{y(N.id,e)}}),"effects"===k&&s.jsx("div",{className:"p-4",children:s.jsx(a,{instrumentId:N.id,effects:N.effects||[]})})]}),s.jsxs("div",{className:"border-t border-dark-border shrink-0",children:[s.jsxs("button",{onClick:()=>z(!S),className:"w-full px-4 py-2 flex items-center justify-between text-sm text-text-muted hover:text-text-primary hover:bg-dark-bgHover transition-colors",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(b,{size:14}),"Test Keyboard"]}),S?s.jsx(p,{size:14}):s.jsx(h,{size:14})]}),S&&s.jsx("div",{className:"p-4 bg-dark-bgSecondary",children:s.jsx(i,{instrument:N})})]}),T&&s.jsx(d,{instrument:N,onClose:()=>w(!1)})]}):s.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"#0b0909",color:"#f2f0f0"},children:s.jsxs("div",{className:"text-center",children:[s.jsx(o,{size:48,className:"mx-auto mb-4 opacity-50 text-gray-500"}),s.jsx("p",{className:"text-gray-400 mb-2",children:"No instrument selected"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Select an instrument in the main window"})]})})},f=({iconName:e,size:t})=>{const r=j[e]||o;return s.jsx(r,{size:t})};export{g as InstrumentEditorPopout,g as default};
