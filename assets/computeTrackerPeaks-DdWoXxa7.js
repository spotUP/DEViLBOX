function t(t,e=800){const o=new Float32Array(e);if(!t||0===t.songLength||0===t.patterns.length)return o;const n=[];for(let f=0;f<t.songLength;f++){const e=t.songPositions[f],o=t.patterns[e];if(!o){for(let t=0;t<64;t++)n.push(0);continue}const l=o.length||64,r=o.channels;for(let t=0;t<l;t++){let e=0;for(let o=0;o<r.length;o++){const n=r[o]?.rows[t];if(n){if(n.note>0&&n.note<97){e+=n.volume>0&&n.volume<=64?n.volume/64:n.volume>=16&&n.volume<=80?(n.volume-16)/64:1}n.effTyp>0&&0===n.note&&(e+=.3)}}n.push(e)}}if(0===n.length)return o;let l=0;for(let f=0;f<n.length;f++)n[f]>l&&(l=n[f]);if(0===l)return o;const r=n.length/e;for(let f=0;f<e;f++){const t=Math.floor(f*r),e=Math.floor((f+1)*r);let s=0;for(let o=t;o<e&&o<n.length;o++)n[o]>s&&(s=n[o]);o[f]=s/l}return o}export{t as computeTrackerPeaks};
