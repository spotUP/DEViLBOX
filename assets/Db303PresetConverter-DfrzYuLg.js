function e(e){const t=(new DOMParser).parseFromString(e,"text/xml"),r=t.querySelector("parsererror");if(r)throw new Error("Invalid XML: "+r.textContent);const i={},l=(e,r=0)=>{const i=t.querySelector(e);if(!i)return r;const l=parseFloat(i.textContent||"");return isNaN(l)?r:l},o=(e,r=0)=>{const i=t.querySelector(e);if(!i)return r;const l=parseInt(i.textContent||"");return isNaN(l)?r:l};t.querySelector("oscillator")&&(i.oscillator={type:0===o("oscillator waveform")?"sawtooth":"square",pulseWidth:l("oscillator pulseWidth",0),subOscGain:l("oscillator subOscGain",0),subOscBlend:l("oscillator subOscBlend",1)});t.querySelector("filter")&&(i.filter={cutoff:l("filter cutoff",.5),resonance:l("filter resonance",.5)},i.filterEnvelope={envMod:l("filter envMod",.5),decay:l("filter decay",.5)},i.accent={amount:l("filter accent",.5)});t.querySelector("devilfish")&&(i.devilFish={enabled:!0,normalDecay:l("devilfish normalDecay",.5),accentDecay:l("devilfish accentDecay",.5),softAttack:l("devilfish softAttack",0),accentSoftAttack:l("devilfish accentSoftAttack",.5),passbandCompensation:l("devilfish passbandCompensation",.09),resTracking:1-l("devilfish resTracking",.743),filterInputDrive:l("devilfish filterInputDrive",.169),filterSelect:o("devilfish filterSelect",1),diodeCharacter:l("devilfish diodeCharacter",1),duffingAmount:l("devilfish duffingAmount",.03),filterFmDepth:l("devilfish filterFmDepth",0),lpBpMix:l("devilfish lpBpMix",0),filterTracking:l("devilfish filterTracking",0),stageNLAmount:l("devilfish stageNLAmount",0),ensembleAmount:l("devilfish ensembleAmount",0),oversamplingOrder:o("devilfish oversamplingOrder",2),accentSweepEnabled:!0,sweepSpeed:"normal",highResonance:!!i.filter?.resonance&&i.filter.resonance>.85,muffler:"off",vegDecay:.5,vegSustain:0},i.slide={time:l("devilfish slideTime",.17),mode:"exponential"});t.querySelector("lfo")&&(i.lfo={waveform:o("lfo waveform",0),rate:l("lfo rate",.5),contour:l("lfo contour",0),pitchDepth:l("lfo pitchDepth",0),pwmDepth:l("lfo pwmDepth",0),filterDepth:l("lfo filterDepth",0),stiffDepth:l("lfo stiffDepth",0)});if(t.querySelector("chorus")){const e=l("chorus mix",.5);i.chorus={enabled:e>.01,mode:o("chorus mode",0),mix:e}}if(t.querySelector("phaser")){const e=l("phaser mix",0);i.phaser={enabled:e>.01,rate:l("phaser rate",.5),depth:l("phaser width",.7),feedback:l("phaser feedback",0),mix:e}}if(t.querySelector("delay")){const e=l("delay mix",0);i.delay={enabled:e>.01,time:l("delay time",.25),feedback:l("delay feedback",.3),tone:l("delay tone",.5),mix:e,stereo:l("delay spread",.5)}}return i}export{e as parseDb303Preset};
