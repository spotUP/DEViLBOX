import{f as e,ar as a,j as t,Z as r,b as s,n}from"./index-DWtmwK1e.js";import{r as o,R as i}from"./vendor-utils-Cm-70yv0.js";import{u as l,a as c,D as d,c as m,S as x,v as u,s as h,K as g,P as p,b,C as f}from"./sortable.esm-DeI3I-SF.js";import{b as y,C as v,X as j,l as N,V as k,b4 as w,S as C,b0 as M,M as P,ay as D,b5 as z,b6 as S,b7 as F,aV as $,R as V,x as E,Z as T,aA as U,aF as W}from"./vendor-ui-CuKercQz.js";import"./vendor-react-LeNVipsj.js";import"./vendor-tone-C_GMrdAr.js";const R={drive:{name:"Drive",id:"drive",value:50,default:50,min:0,max:100,unit:"%",curve:"exponential"},tone:{name:"Tone",id:"tone",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},level:{name:"Level",id:"level",value:75,default:75,min:0,max:100,unit:"%",curve:"linear"},dryWet:{name:"Mix",id:"dryWet",value:100,default:100,min:0,max:100,unit:"%",curve:"linear"},presence:{name:"Presence",id:"presence",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},bass:{name:"Bass",id:"bass",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},mid:{name:"Mid",id:"mid",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},treble:{name:"Treble",id:"treble",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"}},B=[{type:"Compressor",label:"Compressor",category:"Dynamics"},{type:"EQ3",label:"3-Band EQ",category:"Dynamics"},{type:"Distortion",label:"Distortion",category:"Distortion"},{type:"BitCrusher",label:"Bit Crusher",category:"Distortion"},{type:"Chebyshev",label:"Chebyshev",category:"Distortion"},{type:"Reverb",label:"Reverb",category:"Time"},{type:"JCReverb",label:"JC Reverb",category:"Time"},{type:"Delay",label:"Delay",category:"Time"},{type:"FeedbackDelay",label:"Feedback Delay",category:"Time"},{type:"PingPongDelay",label:"Ping Pong Delay",category:"Time"},{type:"SpaceEcho",label:"Space Echo",category:"Time"},{type:"SpaceyDelayer",label:"Spacey Delayer",category:"Time"},{type:"RETapeEcho",label:"RE Tape Echo",category:"Time"},{type:"BiPhase",label:"Bi-Phase",category:"Modulation"},{type:"Chorus",label:"Chorus",category:"Modulation"},{type:"Phaser",label:"Phaser",category:"Modulation"},{type:"Tremolo",label:"Tremolo",category:"Modulation"},{type:"Vibrato",label:"Vibrato",category:"Modulation"},{type:"AutoFilter",label:"Auto Filter",category:"Modulation"},{type:"AutoPanner",label:"Auto Panner",category:"Modulation"},{type:"AutoWah",label:"Auto Wah",category:"Modulation"},{type:"DubFilter",label:"Dub Filter",category:"Filter"},{type:"Filter",label:"Filter",category:"Filter"},{type:"PitchShift",label:"Pitch Shift",category:"Pitch"},{type:"FrequencyShifter",label:"Freq Shifter",category:"Pitch"},{type:"StereoWidener",label:"Stereo Widener",category:"Stereo"}];function A({effect:e,onToggle:a,onRemove:r,onEdit:s,onWetChange:n}){const{attributes:o,listeners:i,setNodeRef:l,transform:c,transition:d,isDragging:m}=b({id:e.id}),x={transform:f.Transform.toString(c),transition:d,opacity:m?.5:1};return t.jsx("div",{ref:l,style:x,className:`\n        bg-dark-bgSecondary border border-dark-border rounded-lg p-3 mb-2\n        ${m?"shadow-lg ring-2 ring-accent-primary":""}\n        ${e.enabled?"":"opacity-60"}\n      `,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{...o,...i,className:"text-text-muted hover:text-accent-primary cursor-grab active:cursor-grabbing p-1",title:"Drag to reorder",children:t.jsx(w,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-sm text-text-primary",children:e.type}),t.jsx("div",{className:"text-xs text-text-muted",children:e.enabled?"Active":"Bypassed"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-text-muted",children:"WET"}),t.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>n(Number(e.target.value)),className:"w-16 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary\n                     [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3\n                     [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-accent-primary [&::-moz-range-thumb]:border-0"}),t.jsxs("span",{className:"text-xs text-accent-primary font-mono w-8 text-right",children:[e.wet,"%"]})]}),t.jsx("button",{onClick:s,className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:t.jsx(C,{size:14})}),t.jsx("button",{onClick:a,className:`\n            p-1.5 rounded transition-colors\n            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n          `,title:e.enabled?"Disable":"Enable",children:t.jsx(M,{size:14})}),t.jsx("button",{onClick:r,className:"p-1.5 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:t.jsx(j,{size:14})})]})})}const q="master-fx-user-presets",H=({onEditEffect:r})=>{const[s,n]=o.useState(!1),[b,f]=o.useState(!1),[w,C]=o.useState(!1),[M,P]=o.useState(""),{masterEffects:D,addMasterEffect:z,removeMasterEffect:S,updateMasterEffect:F,reorderMasterEffects:$,setMasterEffects:V}=e(),E=o.useCallback(()=>{try{const e=localStorage.getItem(q);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),T=o.useCallback(()=>{if(!M.trim())return;const e=E();e.push({name:M.trim(),effects:D.map(e=>({...e}))}),localStorage.setItem(q,JSON.stringify(e)),P(""),C(!1)},[M,D,E]),U=o.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));V(a),f(!1)},[V]),W=o.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));V(a),f(!1)},[V]),R=o.useCallback(e=>{const a=E().filter(a=>a.name!==e);localStorage.setItem(q,JSON.stringify(a))},[E]),H=E(),O=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),I=l(c(p),c(g,{coordinateGetter:h})),L=B.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{});return t.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-dark-bgSecondary border-b border-dark-border",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(y,{size:16,className:"text-accent-primary"}),t.jsx("span",{className:"font-medium text-sm text-text-primary",children:"Master Effects"}),t.jsxs("span",{className:"text-xs text-text-muted px-2 py-0.5 bg-dark-bg rounded",children:[D.length," FX"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>f(!b),className:"px-3 py-1 text-xs font-medium rounded bg-dark-bg text-text-primary\n                       hover:bg-dark-bgHover transition-colors flex items-center gap-1 border border-dark-border",children:["Presets ",t.jsx(v,{size:12})]}),b&&t.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-80 overflow-y-auto",children:[H.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:"User Presets"}),H.map(e=>t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-dark-bgHover cursor-pointer group",children:[t.jsx("span",{onClick:()=>W(e),className:"text-sm text-text-primary flex-1",children:e.name}),t.jsx("button",{onClick:a=>{a.stopPropagation(),R(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:t.jsx(j,{size:12})})]},e.name)),t.jsx("div",{className:"border-t border-dark-border my-1"})]}),Object.entries(O).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:e}),a.map(e=>t.jsxs("div",{onClick:()=>U(e),className:"px-3 py-2 hover:bg-dark-bgHover cursor-pointer",children:[t.jsx("div",{className:"text-sm text-text-primary",children:e.name}),t.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),t.jsx("button",{onClick:()=>C(!0),className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:t.jsx(N,{size:14})}),t.jsx("button",{onClick:()=>n(!s),className:"px-3 py-1 text-xs font-medium rounded bg-accent-primary/10 text-accent-primary\n                     hover:bg-accent-primary/20 transition-colors",children:"+ Add Effect"})]})]}),w&&t.jsx("div",{className:"px-4 py-3 bg-dark-bgTertiary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",placeholder:"Preset name...",value:M,onChange:e=>P(e.target.value),onKeyDown:e=>{"Enter"===e.key&&T(),"Escape"===e.key&&C(!1)},className:"flex-1 px-3 py-1.5 text-sm bg-dark-bg border border-dark-border rounded text-text-primary\n                       placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),t.jsx("button",{onClick:T,className:"px-3 py-1.5 text-xs font-medium rounded bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),t.jsx("button",{onClick:()=>C(!1),className:"px-3 py-1.5 text-xs font-medium rounded bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),s&&t.jsxs("div",{className:"p-4 bg-dark-bgTertiary border-b border-dark-border",children:[t.jsx("div",{className:"text-xs text-text-muted mb-3 font-medium",children:"Select Effect Type:"}),t.jsx("div",{className:"space-y-3",children:Object.entries(L).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-text-muted mb-1.5 uppercase tracking-wide",children:e}),t.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(({type:e,label:a})=>t.jsx("button",{onClick:()=>(z(e),void n(!1)),className:"px-2 py-1 text-xs rounded border border-dark-border bg-dark-bg\n                               hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                               transition-colors",children:a},e))})]},e))})]}),t.jsx("div",{className:"px-4 py-2 bg-dark-bgSecondary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-text-muted overflow-x-auto",children:[t.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),t.jsx("span",{children:"→"}),D.length>0?D.map((e,a)=>t.jsxs(i.Fragment,{children:[t.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<D.length-1&&t.jsx("span",{children:"→"})]},e.id)):t.jsx("span",{className:"italic text-text-muted",children:"direct"}),t.jsx("span",{children:"→"}),t.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[t.jsx(k,{size:12})," OUTPUT"]})]})}),t.jsx("div",{className:"p-4",children:0===D.length?t.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No master effects. All audio passes through unchanged."}):t.jsx(d,{sensors:I,collisionDetection:m,onDragEnd:e=>{const{active:a,over:t}=e;if(t&&a.id!==t.id){const e=D.findIndex(e=>e.id===a.id),r=D.findIndex(e=>e.id===t.id);-1!==e&&-1!==r&&$(e,r)}},children:t.jsx(x,{items:D.map(e=>e.id),strategy:u,children:D.map(e=>t.jsx(A,{effect:e,onToggle:()=>(e=>{const a=D.find(a=>a.id===e);a&&F(e,{enabled:!a.enabled})})(e.id),onRemove:()=>{return a=e.id,void S(a);var a},onEdit:()=>(e=>{r&&r(e)})(e),onWetChange:a=>((e,a)=>{F(e,{wet:a})})(e.id,a)},e.id))})})}),t.jsx("div",{className:"px-4 pb-4",children:t.jsxs("div",{className:"text-xs text-text-muted p-3 bg-dark-bgSecondary rounded border border-dark-border",children:[t.jsx("strong",{children:"Tip:"})," Drag effects to reorder the signal chain. Order matters: compression before reverb sounds different than reverb before compression."]})})]})},O={drive:{...R.drive},tone:{...R.tone},level:{...R.level},dryWet:{...R.dryWet}},I={drive:{...R.drive},presence:{...R.presence},level:{...R.level},dryWet:{...R.dryWet}},L={drive:{...R.drive},bass:{...R.bass},mid:{...R.mid},treble:{...R.treble},presence:{...R.presence},level:{...R.level},dryWet:{...R.dryWet}},Q=[{index:0,name:"TS808",fullName:"Ibanez TS808 Tube Screamer",category:"overdrive",description:"Legendary mid-focused overdrive, smooth and warm",tags:["tubescreamer","classic","smooth","mid-boost","vintage"],parameters:O,characteristics:{gain:"medium",tone:"neutral",character:["warm","smooth","mid-focused","classic"]}},{index:1,name:"ProCo RAT",fullName:"ProCo RAT Distortion",category:"distortion",description:"Aggressive distortion with cutting edge and sustain",tags:["rat","distortion","aggressive","cutting","sustain"],parameters:O,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","saturated","edgy"]}},{index:2,name:"MT-2",fullName:"Boss MT-2 Metal Zone",category:"distortion",description:"Extreme high-gain distortion with active EQ",tags:["metal","high-gain","eq","heavy","modern"],parameters:L,characteristics:{gain:"extreme",tone:"bright",character:["heavy","saturated","aggressive","tight"]}},{index:3,name:"DOD 250",fullName:"DOD 250 Overdrive/Preamp",category:"overdrive",description:"Classic simple overdrive with transparent tone",tags:["dod","overdrive","transparent","simple","vintage"],parameters:{...O,tone:void 0},characteristics:{gain:"medium",tone:"neutral",character:["transparent","simple","responsive","dynamic"]}},{index:4,name:"Big Muff",fullName:"Electro-Harmonix Big Muff Pi",category:"distortion",description:"Thick, creamy fuzz with massive sustain",tags:["fuzz","muff","sustain","thick","vintage"],parameters:O,characteristics:{gain:"high",tone:"dark",character:["thick","woolly","sustaining","vintage"]}},{index:5,name:"MXR Dist+",fullName:"MXR Distortion+",category:"distortion",description:"Simple, raw distortion with lots of character",tags:["mxr","distortion","raw","simple"],parameters:{...O,tone:void 0},characteristics:{gain:"high",tone:"bright",character:["raw","edgy","simple","aggressive"]}},{index:6,name:"Bluesbreaker",fullName:"Marshall Bluesbreaker",category:"overdrive",description:"Legendary transparent amp-like overdrive",tags:["marshall","blues","transparent","amp-like","dynamic"],parameters:O,characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","amp-like","responsive"]}},{index:7,name:"Klon",fullName:"Klon Centaur",category:"overdrive",description:"Boutique transparent overdrive, highly sought after",tags:["klon","centaur","boutique","transparent","legendary"],parameters:O,characteristics:{gain:"medium",tone:"bright",character:["transparent","sparkle","boutique","clean"]}},{index:8,name:"Princeton",fullName:"Fender Princeton Reverb",category:"amplifier",description:"Classic clean Fender amp tone",tags:["fender","amp","clean","vintage","reverb"],parameters:I,characteristics:{gain:"low",tone:"bright",character:["clean","sparkle","classic","warm"]}},{index:9,name:"Plexi",fullName:"Marshall Plexi Super Lead",category:"amplifier",description:"Legendary British rock amp, crunchy and aggressive",tags:["marshall","plexi","rock","british","crunch"],parameters:L,characteristics:{gain:"high",tone:"bright",character:["crunchy","aggressive","british","rock"]}},{index:10,name:"Mesa Recto",fullName:"Mesa Boogie Dual Rectifier",category:"amplifier",description:"Modern high-gain metal amp",tags:["mesa","rectifier","metal","high-gain","modern"],parameters:L,characteristics:{gain:"extreme",tone:"dark",character:["heavy","tight","modern","crushing"]}},{index:11,name:"AC30",fullName:"Vox AC30",category:"amplifier",description:"British chime and jangle, clean to crunch",tags:["vox","ac30","british","jangle","chime"],parameters:I,characteristics:{gain:"medium",tone:"bright",character:["chime","jangle","british","sparkle"]}},{index:12,name:"Bassman",fullName:"Fender Bassman",category:"amplifier",description:"Classic bass amp that guitarists love",tags:["fender","bassman","vintage","clean","bass"],parameters:I,characteristics:{gain:"low",tone:"dark",character:["clean","warm","full","vintage"]}},{index:13,name:"JCM800",fullName:"Marshall JCM800",category:"amplifier",description:"80s British rock and metal tone",tags:["marshall","jcm800","80s","rock","metal"],parameters:L,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","tight","80s"]}},{index:14,name:"SLO100",fullName:"Soldano SLO-100",category:"amplifier",description:"Boutique high-gain with singing leads",tags:["soldano","slo","high-gain","boutique","lead"],parameters:L,characteristics:{gain:"extreme",tone:"bright",character:["singing","smooth","high-gain","boutique"]}},{index:15,name:"5150",fullName:"Peavey 5150",category:"amplifier",description:"Iconic metal amp, tight and aggressive",tags:["peavey","5150","metal","aggressive","modern"],parameters:L,characteristics:{gain:"extreme",tone:"bright",character:["tight","aggressive","metal","modern"]}},{index:16,name:"Dumble ODS",fullName:"Dumble Overdrive Special",category:"amplifier",description:"Legendary boutique amp, smooth and rich",tags:["dumble","boutique","smooth","overdrive","luxury"],parameters:L,characteristics:{gain:"medium",tone:"dark",character:["smooth","rich","boutique","singing"]}},{index:17,name:"Matchless DC30",fullName:"Matchless DC-30",category:"amplifier",description:"Boutique British-style clean to crunch",tags:["matchless","boutique","british","clean"],parameters:I,characteristics:{gain:"medium",tone:"bright",character:["boutique","clean","dynamic","sparkle"]}},{index:18,name:"Orange Rockerverb",fullName:"Orange Rockerverb",category:"amplifier",description:"British alternative rock tone",tags:["orange","british","alternative","rock"],parameters:I,characteristics:{gain:"high",tone:"neutral",character:["thick","british","alternative","punchy"]}},{index:19,name:"ENGL Powerball",fullName:"ENGL Powerball",category:"amplifier",description:"German high-gain metal machine",tags:["engl","metal","high-gain","german","modern"],parameters:L,characteristics:{gain:"extreme",tone:"bright",character:["tight","articulate","metal","modern"]}},{index:20,name:"Friedman BE-100",fullName:"Friedman BE-100",category:"amplifier",description:"Modern boutique high-gain",tags:["friedman","boutique","high-gain","modern"],parameters:L,characteristics:{gain:"extreme",tone:"bright",character:["tight","modern","boutique","versatile"]}},{index:21,name:"Timmy",fullName:"Paul Cochrane Timmy",category:"overdrive",description:"Transparent overdrive with separate bass/treble controls",tags:["timmy","transparent","overdrive","boutique"],parameters:{...O,bass:R.bass,treble:R.treble},characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","versatile","boutique"]}},{index:22,name:"Vertex",fullName:"Vertex Steel String",category:"overdrive",description:"Clean boost to light overdrive",tags:["vertex","clean","boost","transparent"],parameters:O,characteristics:{gain:"low",tone:"bright",character:["clean","transparent","boost","sparkle"]}},{index:23,name:"Fulltone OCD",fullName:"Fulltone Obsessive Compulsive Drive",category:"overdrive",description:"Versatile overdrive from sparkle to crunch",tags:["fulltone","ocd","versatile","overdrive"],parameters:O,characteristics:{gain:"medium",tone:"neutral",character:["versatile","dynamic","amp-like","responsive"]}},{index:24,name:"Horizon",fullName:"Horizon Devices Precision Drive",category:"overdrive",description:"Modern djent and metal tones",tags:["horizon","djent","metal","modern","tight"],parameters:O,characteristics:{gain:"high",tone:"bright",character:["tight","modern","djent","articulate"]}},{index:25,name:"Suhr Riot",fullName:"Suhr Riot Distortion",category:"distortion",description:"British-voiced distortion",tags:["suhr","riot","distortion","british"],parameters:O,characteristics:{gain:"high",tone:"bright",character:["british","aggressive","versatile","cutting"]}},{index:26,name:"Bogner Ecstasy",fullName:"Bogner Ecstasy Blue",category:"overdrive",description:"Boutique amp-in-a-box pedal",tags:["bogner","ecstasy","amp-in-a-box","boutique"],parameters:O,characteristics:{gain:"high",tone:"neutral",character:["boutique","versatile","amp-like","smooth"]}},{index:27,name:"Wampler Pinnacle",fullName:"Wampler Pinnacle",category:"distortion",description:"Brown sound high-gain distortion",tags:["wampler","pinnacle","brown-sound","high-gain"],parameters:O,characteristics:{gain:"extreme",tone:"dark",character:["brown-sound","high-gain","smooth","saturated"]}},{index:28,name:"Fortin 33",fullName:"Fortin 33",category:"overdrive",description:"Modern metal overdrive",tags:["fortin","metal","modern","tight"],parameters:O,characteristics:{gain:"high",tone:"bright",character:["tight","modern","metal","articulate"]}},{index:29,name:"Revv G3",fullName:"Revv G3 Purple",category:"distortion",description:"Modern high-gain distortion",tags:["revv","g3","high-gain","modern"],parameters:O,characteristics:{gain:"extreme",tone:"bright",character:["modern","tight","high-gain","aggressive"]}},{index:30,name:"Way Huge Pork Loin",fullName:"Way Huge Pork Loin",category:"overdrive",description:"Vintage-style overdrive",tags:["way-huge","pork-loin","vintage","overdrive"],parameters:O,characteristics:{gain:"medium",tone:"dark",character:["vintage","warm","smooth","thick"]}},{index:31,name:"Darkglass B7K",fullName:"Darkglass B7K Ultra",category:"distortion",description:"Modern bass distortion and preamp",tags:["darkglass","bass","distortion","modern"],parameters:L,characteristics:{gain:"high",tone:"bright",character:["bass","modern","tight","aggressive"]}},{index:32,name:"Tech 21 SansAmp",fullName:"Tech 21 SansAmp Bass Driver DI",category:"amplifier",description:"Classic bass amp simulation",tags:["tech21","sansamp","bass","di"],parameters:L,characteristics:{gain:"medium",tone:"neutral",character:["bass","classic","versatile","di"]}},{index:33,name:"Ampeg SVT",fullName:"Ampeg SVT Classic",category:"amplifier",description:"Legendary bass amp tone",tags:["ampeg","svt","bass","classic","vintage"],parameters:I,characteristics:{gain:"low",tone:"dark",character:["bass","classic","warm","full"]}},{index:34,name:"Virus Distortion",fullName:"Access Virus Hard Distortion",category:"distortion",description:"Digital synth-style distortion",tags:["virus","synth","digital","experimental"],parameters:O,characteristics:{gain:"extreme",tone:"bright",character:["digital","harsh","experimental","synth"]}},{index:35,name:"Filmosound",fullName:"Bell & Howell Filmosound",category:"amplifier",description:"Vintage tube amp from 1940s projectors",tags:["filmosound","vintage","tube","lo-fi"],parameters:I,characteristics:{gain:"low",tone:"dark",character:["vintage","lo-fi","warm","unique"]}},{index:36,name:"Gibson EH-185",fullName:"Gibson EH-185 Lap Steel Amp",category:"amplifier",description:"Vintage 1940s tube amp",tags:["gibson","vintage","tube","warm"],parameters:I,characteristics:{gain:"low",tone:"dark",character:["vintage","warm","tube","smooth"]}}];class J{modelIndex;schema;constructor(e){this.modelIndex=e;const a=Q[e];this.schema=a?.parameters||{}}getAvailableParameters(){return Object.entries(this.schema).filter(([,e])=>void 0!==e).map(([e,a])=>({key:e,...a,implemented:this.isImplemented(e)}))}getParameter(e){const a=this.schema[e];return a?{...a,implemented:this.isImplemented(e)}:null}mapToCondition(e){return void 0!==e.drive?e.drive/100:void 0!==e.gain?e.gain/100:void 0!==e.tone?e.tone/100:.5}isImplemented(e){return["drive","gain","tone","bass","mid","treble","presence","level","output","dryWet"].includes(e)}getParameterCount(){return Object.keys(this.schema).length}getModelName(){const e=Q[this.modelIndex];return e?.name||"Unknown Model"}getModelFullName(){const e=Q[this.modelIndex];return e?.fullName||e?.name||"Unknown Model"}getModelCategory(){const e=Q[this.modelIndex];return e?.category||"effect"}hasEQ(){return!!(this.schema.bass||this.schema.mid||this.schema.treble)}getDefaultParameters(){const e={};return Object.entries(this.schema).forEach(([a,t])=>{t&&(e[a]=t.default)}),e}}function G({color:e,title:a}){return t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"w-1 h-4 rounded-full",style:{backgroundColor:e}}),t.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:a})]})}function K(e,a,t){const r=e.parameters[a];return"number"==typeof r?r:t}const X=({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"time",.25),o=K(e,"feedback",.5),i="PingPongDelay"===e.type;return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#3b82f6",title:i?"Ping Pong Delay":"Delay"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:1,onChange:e=>a("time",e),label:"Time",color:"#3b82f6",formatValue:e=>`${Math.round(1e3*e)}ms`}),t.jsx(r,{value:o,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#3b82f6",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]})]})})},Z=({effect:e,onUpdateWet:a})=>t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#6b7280",title:e.type}),t.jsx("div",{className:"flex justify-center",children:t.jsx(r,{value:e.wet,min:0,max:100,onChange:a,label:"Mix",size:"lg",color:"#6b7280",formatValue:e=>`${Math.round(e)}%`})}),t.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Use sliders in the expanded view for this effect type."})]})}),Y={Distortion:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"drive",.4);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#ef4444",title:"Distortion"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:1,onChange:e=>a("drive",e),label:"Drive",size:"lg",color:"#ef4444",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#f97316",formatValue:e=>`${Math.round(e)}%`})]})]})})},Reverb:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"decay",1.5),o=K(e,"preDelay",.01);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#6366f1",title:"Reverb"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:.1,max:10,onChange:e=>a("decay",e),label:"Decay",color:"#6366f1",formatValue:e=>`${e.toFixed(1)}s`}),t.jsx(r,{value:o,min:0,max:.5,onChange:e=>a("preDelay",e),label:"Pre-Delay",color:"#6366f1",formatValue:e=>`${Math.round(1e3*e)}ms`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}%`})]})]})})},Delay:X,FeedbackDelay:X,PingPongDelay:X,Chorus:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",1.5),o=K(e,"depth",.7),i=K(e,"delayTime",3.5);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#ec4899",title:"Chorus"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(r,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",size:"sm",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:i,min:2,max:20,onChange:e=>a("delayTime",e),label:"Delay",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}ms`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"sm",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]})]})})},Phaser:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",.5),o=K(e,"octaves",3),i=K(e,"baseFrequency",350);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#a855f7",title:"Phaser"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#a855f7",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(r,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#a855f7",formatValue:e=>e.toFixed(1)}),t.jsx(r,{value:i,min:50,max:1e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#a855f7",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"sm",color:"#c084fc",formatValue:e=>`${Math.round(e)}%`})]})]})})},Tremolo:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",10),o=K(e,"depth",.5);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#f97316",title:"Tremolo"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#f97316",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(r,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#f97316",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})]})]})})},Vibrato:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",5),o=K(e,"depth",.1);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#14b8a6",title:"Vibrato"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#14b8a6",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(r,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#14b8a6",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#2dd4bf",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoFilter:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",1),o=K(e,"baseFrequency",200),i=K(e,"octaves",2.6);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#eab308",title:"Auto Filter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#eab308",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(r,{value:o,min:20,max:2e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#eab308",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(r,{value:i,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#eab308",formatValue:e=>e.toFixed(1)}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"sm",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoPanner:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",1),o=K(e,"depth",1);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#22c55e",title:"Auto Panner"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",color:"#22c55e",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(r,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#22c55e",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#4ade80",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoWah:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"baseFrequency",100),o=K(e,"octaves",6),i=K(e,"sensitivity",0),l=K(e,"Q",2);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#f43f5e",title:"Auto Wah"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:50,max:500,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(r,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)}),t.jsx(r,{value:i,min:-40,max:0,onChange:e=>a("sensitivity",e),label:"Sens",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}dB`}),t.jsx(r,{value:l,min:0,max:10,onChange:e=>a("Q",e),label:"Q",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)})]})]}),t.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#fb7185",formatValue:e=>`${Math.round(e)}%`})})})]})},BitCrusher:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"bits",4);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#84cc16",title:"Bit Crusher"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:1,max:16,onChange:e=>a("bits",Math.round(e)),label:"Bits",size:"lg",color:"#84cc16",formatValue:e=>`${Math.round(e)} bit`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#a3e635",formatValue:e=>`${Math.round(e)}%`})]})]})})},Chebyshev:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"order",50);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#f59e0b",title:"Chebyshev Waveshaper"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:1,max:100,onChange:e=>a("order",Math.round(e)),label:"Order",size:"lg",color:"#f59e0b",formatValue:e=>Math.round(e).toString()}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},FrequencyShifter:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",0);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#06b6d4",title:"Frequency Shifter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:-1e3,max:1e3,onChange:e=>a("frequency",e),label:"Shift",size:"lg",color:"#06b6d4",bipolar:!0,formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#22d3ee",formatValue:e=>`${Math.round(e)}%`})]})]})})},PitchShift:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"pitch",0),o=K(e,"windowSize",.1),i=K(e,"feedback",0);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#8b5cf6",title:"Pitch Shift"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:-12,max:12,onChange:e=>a("pitch",Math.round(e)),label:"Pitch",color:"#8b5cf6",bipolar:!0,formatValue:e=>`${Math.round(e)>0?"+":""}${Math.round(e)}st`}),t.jsx(r,{value:o,min:.01,max:.5,onChange:e=>a("windowSize",e),label:"Window",color:"#8b5cf6",formatValue:e=>`${Math.round(1e3*e)}ms`}),t.jsx(r,{value:i,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`})]})]}),t.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#a78bfa",formatValue:e=>`${Math.round(e)}%`})})})]})},Compressor:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"threshold",-24),o=K(e,"ratio",12),i=K(e,"attack",.003),l=K(e,"release",.25);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#10b981",title:"Compressor"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:-100,max:0,onChange:e=>a("threshold",e),label:"Threshold",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`}),t.jsx(r,{value:o,min:1,max:20,onChange:e=>a("ratio",e),label:"Ratio",size:"sm",color:"#10b981",formatValue:e=>`${e.toFixed(1)}:1`}),t.jsx(r,{value:i,min:0,max:1,onChange:e=>a("attack",e),label:"Attack",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`}),t.jsx(r,{value:l,min:0,max:1,onChange:e=>a("release",e),label:"Release",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`})]})]}),t.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#34d399",formatValue:e=>`${Math.round(e)}%`})})})]})},EQ3:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"low",0),o=K(e,"mid",0),i=K(e,"high",0),l=K(e,"lowFrequency",400),c=K(e,"highFrequency",2500);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#3b82f6",title:"3-Band EQ"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:-20,max:20,onChange:e=>a("low",e),label:"Low",color:"#ef4444",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),t.jsx(r,{value:o,min:-20,max:20,onChange:e=>a("mid",e),label:"Mid",color:"#eab308",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),t.jsx(r,{value:i,min:-20,max:20,onChange:e=>a("high",e),label:"High",color:"#3b82f6",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`})]})]}),t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#6b7280",title:"Crossover"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:l,min:20,max:1e3,onChange:e=>a("lowFrequency",e),label:"Low Freq",size:"sm",color:"#6b7280",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(r,{value:c,min:1e3,max:1e4,onChange:e=>a("highFrequency",e),label:"High Freq",size:"sm",color:"#6b7280",formatValue:e=>`${(e/1e3).toFixed(1)}kHz`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"sm",color:"#9ca3af",formatValue:e=>`${Math.round(e)}%`})]})]})]})},Filter:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"frequency",350),o=K(e,"Q",1),i=K(e,"gain",0);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#f97316",title:"Filter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:20,max:2e4,onChange:e=>a("frequency",e),label:"Frequency",color:"#f97316",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}kHz`:`${Math.round(e)}Hz`}),t.jsx(r,{value:o,min:.001,max:100,onChange:e=>a("Q",e),label:"Q",color:"#f97316",formatValue:e=>e.toFixed(1)}),t.jsx(r,{value:i,min:-40,max:40,onChange:e=>a("gain",e),label:"Gain",color:"#f97316",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`})]})]}),t.jsx("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})})})]})},JCReverb:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"roomSize",.5);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#6366f1",title:"JC Reverb"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:1,onChange:e=>a("roomSize",e),label:"Room Size",size:"lg",color:"#6366f1",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#818cf8",formatValue:e=>`${Math.round(e)}%`})]})]})})},StereoWidener:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"width",.5);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#ec4899",title:"Stereo Widener"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:0,max:1,onChange:e=>a("width",e),label:"Width",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]})]})})},SpaceyDelayer:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"firstTap",250),o=K(e,"tapSize",150),i=K(e,"feedback",40),l=K(e,"multiTap",1),c=K(e,"tapeFilter",0);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#8b5cf6",title:"Spacey Delayer"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:n,min:10,max:2e3,onChange:e=>a("firstTap",e),label:"First Tap",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}ms`}),t.jsx(r,{value:o,min:10,max:1e3,onChange:e=>a("tapSize",e),label:"Tap Size",color:"#a78bfa",formatValue:e=>`${Math.round(e)}ms`}),t.jsx(r,{value:i,min:0,max:95,onChange:e=>a("feedback",e),label:"Feedback",color:"#7c3aed",formatValue:e=>`${Math.round(e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]})]}),t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#a78bfa",title:"Options"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>a("multiTap",l?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(l?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Multi-Tap ",l?"ON":"OFF"]}),t.jsxs("button",{onClick:()=>a("tapeFilter",c?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(c?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Tape Filter ",c?"ON":"OFF"]})]})]})]})},RETapeEcho:({effect:e,onUpdateParameter:a,onUpdateWet:s})=>{const n=K(e,"mode",3),o=K(e,"repeatRate",.5),i=K(e,"intensity",.5),l=K(e,"echoVolume",.8),c=K(e,"wow",0),d=K(e,"flutter",0),m=K(e,"dirt",0),x=K(e,"inputBleed",0),u=K(e,"loopAmount",0),h=K(e,"playheadFilter",1);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#dc2626",title:"RE Tape Echo"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:100*o,min:0,max:100,onChange:e=>a("repeatRate",e/100),label:"Rate",color:"#dc2626",formatValue:e=>`${Math.round(e)}%`}),t.jsx(r,{value:100*i,min:0,max:100,onChange:e=>a("intensity",e/100),label:"Intensity",color:"#ef4444",formatValue:e=>`${Math.round(e)}%`}),t.jsx(r,{value:100*l,min:0,max:100,onChange:e=>a("echoVolume",e/100),label:"Echo Vol",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),t.jsx(r,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]})]}),t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#f97316",title:"Tape Character"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(r,{value:100*c,min:0,max:100,onChange:e=>a("wow",e/100),label:"Wow",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),t.jsx(r,{value:100*d,min:0,max:100,onChange:e=>a("flutter",e/100),label:"Flutter",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`}),t.jsx(r,{value:100*m,min:0,max:100,onChange:e=>a("dirt",e/100),label:"Dirt",color:"#ea580c",formatValue:e=>`${Math.round(e)}%`}),t.jsx(r,{value:100*u,min:0,max:100,onChange:e=>a("loopAmount",e/100),label:"Tape Loop",color:"#a16207",formatValue:e=>`${Math.round(e)}%`})]})]}),t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(G,{color:"#b91c1c",title:"Mode & Options"}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Echo Mode"}),t.jsx("div",{className:"grid grid-cols-6 gap-1",children:["Head 1","Head 2","Both","H1+FB","H2+FB","Both+FB"].map((e,r)=>t.jsx("button",{onClick:()=>a("mode",r),className:"px-2 py-1.5 rounded text-xs font-medium transition-colors "+(n===r?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},r))})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>a("playheadFilter",h?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(h?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Head EQ ",h?"ON":"OFF"]}),t.jsxs("button",{onClick:()=>a("inputBleed",x?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(x?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Bleed ",x?"ON":"OFF"]})]})]})]})}};function _(e){return Y[e]||Z}const ee=({effect:e,onUpdateParameter:a,onUpdateWet:r,onClose:s})=>{const n=_(e.type),o={Distortion:t.jsx(T,{size:20,className:"text-white"}),Reverb:t.jsx(E,{size:20,className:"text-white"}),JCReverb:t.jsx(E,{size:20,className:"text-white"}),Delay:t.jsx(z,{size:20,className:"text-white"}),FeedbackDelay:t.jsx(z,{size:20,className:"text-white"}),PingPongDelay:t.jsx(z,{size:20,className:"text-white"}),Chorus:t.jsx(V,{size:20,className:"text-white"}),Phaser:t.jsx(V,{size:20,className:"text-white"}),Tremolo:t.jsx($,{size:20,className:"text-white"}),Vibrato:t.jsx($,{size:20,className:"text-white"}),Compressor:t.jsx(F,{size:20,className:"text-white"}),EQ3:t.jsx(C,{size:20,className:"text-white"}),Filter:t.jsx(C,{size:20,className:"text-white"}),StereoWidener:t.jsx(S,{size:20,className:"text-white"}),SpaceyDelayer:t.jsx(z,{size:20,className:"text-white"}),RETapeEcho:t.jsx(D,{size:20,className:"text-white"})}[e.type]||t.jsx(P,{size:20,className:"text-white"}),i={Distortion:"from-red-600 to-orange-600",Reverb:"from-indigo-500 to-purple-600",JCReverb:"from-indigo-500 to-purple-600",Delay:"from-blue-500 to-cyan-600",FeedbackDelay:"from-blue-500 to-cyan-600",PingPongDelay:"from-blue-500 to-cyan-600",Chorus:"from-pink-500 to-rose-600",Phaser:"from-purple-500 to-violet-600",Tremolo:"from-orange-500 to-amber-600",Vibrato:"from-teal-500 to-emerald-600",Compressor:"from-green-500 to-emerald-600",EQ3:"from-blue-500 to-indigo-600",Filter:"from-orange-500 to-red-600",StereoWidener:"from-pink-500 to-fuchsia-600",SpaceyDelayer:"from-purple-500 to-violet-600",RETapeEcho:"from-red-600 to-orange-600"}[e.type]||"from-gray-500 to-gray-600";return t.jsxs("div",{className:"synth-editor-container bg-gradient-to-b from-[#1e1e1e] to-[#151515] rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"synth-editor-header px-4 py-3 bg-[#1a1a1a] flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${i}`,children:o}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white",children:e.type}),t.jsxs("p",{className:"text-xs text-gray-400",children:[e.enabled?"Active":"Bypassed"," | Mix: ",e.wet,"%"]})]})]}),s&&t.jsx("button",{onClick:s,className:"p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:t.jsx(k,{size:16})})]}),t.jsx("div",{className:"p-4",children:t.jsx(n,{effect:e,onUpdateParameter:a,onUpdateWet:r})})]})},ae=({effect:e,onUpdateParameter:a,onUpdateWet:r,onClose:s})=>{o.useMemo(()=>"GenericEffectEditor"!==_(e.type).name,[e.type]);const n=o.useMemo(()=>{if("neural"!==e.category||void 0===e.neuralModelIndex)return null;return new J(e.neuralModelIndex).getAvailableParameters().map(e=>({name:e.name,key:e.key,min:0,max:100,step:1,unit:e.unit||"%",defaultValue:e.default,implemented:e.implemented}))},[e.category,e.neuralModelIndex]);return n?t.jsx(re,{effect:e,parameters:n,onUpdateParameter:a,onUpdateWet:r,onClose:s}):t.jsx(ee,{effect:e,onUpdateParameter:a,onUpdateWet:r,onClose:s})};function te({color:e,title:a}){return t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"w-1 h-4 rounded-full",style:{backgroundColor:e}}),t.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:a})]})}const re=({effect:e,parameters:a,onUpdateParameter:s,onUpdateWet:n,onClose:o})=>{const i=a=>{const t=e.parameters[a.key]??a.defaultValue;return"number"==typeof t?t:a.defaultValue},l=a.filter(e=>!1!==e.implemented),c=a.filter(e=>!1===e.implemented);return t.jsxs("div",{className:"synth-editor-container bg-gradient-to-b from-[#1e1e1e] to-[#151515] rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"synth-editor-header px-4 py-3 bg-[#1a1a1a] flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600",children:t.jsx(k,{size:20,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white",children:e.type}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Neural Effect | ",e.enabled?"Active":"Bypassed"]})]})]}),o&&t.jsx("button",{onClick:o,className:"p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:t.jsx(j,{size:16})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[l.length>0&&t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(te,{color:"#a855f7",title:"Parameters"}),t.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:l.map(e=>t.jsx(r,{value:i(e),min:e.min,max:e.max,onChange:a=>s(e.key,a),label:e.name,size:"sm",color:"#a855f7",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),c.length>0&&t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800 opacity-50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(U,{size:14,className:"text-yellow-500"}),t.jsx("h3",{className:"text-sm font-bold text-yellow-500 uppercase tracking-wide",children:"Coming Soon"})]}),t.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:c.map(e=>t.jsx(r,{value:i(e),min:e.min,max:e.max,onChange:()=>{},label:e.name,size:"sm",color:"#6b7280",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),t.jsxs("section",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-gray-800",children:[t.jsx(te,{color:"#ec4899",title:"Output"}),t.jsx("div",{className:"flex justify-center",children:t.jsx(r,{value:e.wet,min:0,max:100,onChange:n,label:"Mix",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(e)}%`})})]}),t.jsx("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-800",children:t.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"Neural effects use machine learning models for authentic amp/pedal emulation. Changes are applied in real-time."})})]})]})},se=[{category:"tonejs",type:"Compressor",label:"Compressor",group:"Dynamics",description:"Dynamic range compression with threshold, ratio, attack, and release"},{category:"tonejs",type:"EQ3",label:"3-Band EQ",group:"Dynamics",description:"Three-band equalizer with low, mid, and high frequency control"},{category:"tonejs",type:"Distortion",label:"Distortion",group:"Distortion",description:"Waveshaping distortion with drive control"},{category:"tonejs",type:"BitCrusher",label:"Bit Crusher",group:"Distortion",description:"Digital bit reduction for lo-fi effects"},{category:"tonejs",type:"Chebyshev",label:"Chebyshev",group:"Distortion",description:"Harmonic waveshaper distortion"},{category:"tonejs",type:"Reverb",label:"Reverb",group:"Reverb & Delay",description:"Convolution reverb with decay and pre-delay"},{category:"tonejs",type:"JCReverb",label:"JC Reverb",group:"Reverb & Delay",description:"Feedback comb filter reverb"},{category:"tonejs",type:"Delay",label:"Delay",group:"Reverb & Delay",description:"Simple delay with time and feedback"},{category:"tonejs",type:"FeedbackDelay",label:"Feedback Delay",group:"Reverb & Delay",description:"Delay with enhanced feedback control"},{category:"tonejs",type:"PingPongDelay",label:"Ping Pong Delay",group:"Reverb & Delay",description:"Stereo delay that bounces between left and right"},{category:"tonejs",type:"SpaceEcho",label:"Space Echo",group:"Reverb & Delay",description:"Roland RE-201 emulation with 3 heads and spring reverb"},{category:"tonejs",type:"SpaceyDelayer",label:"Spacey Delayer",group:"Reverb & Delay",description:"Multitap tape delay with configurable tap spacing (WASM)"},{category:"tonejs",type:"RETapeEcho",label:"RE Tape Echo",group:"Reverb & Delay",description:"Roland RE-150/201 tape echo with wow, flutter, and tape saturation (WASM)"},{category:"tonejs",type:"BiPhase",label:"Bi-Phase",group:"Modulation",description:"Dual-stage phaser with series/parallel routing"},{category:"tonejs",type:"Chorus",label:"Chorus",group:"Modulation",description:"Modulated delay for thickening sounds"},{category:"tonejs",type:"Phaser",label:"Phaser",group:"Modulation",description:"Sweeping notch filter effect"},{category:"tonejs",type:"Tremolo",label:"Tremolo",group:"Modulation",description:"Amplitude modulation for rhythmic pulsing"},{category:"tonejs",type:"Vibrato",label:"Vibrato",group:"Modulation",description:"Pitch modulation for warbling effects"},{category:"tonejs",type:"AutoPanner",label:"Auto Panner",group:"Modulation",description:"Automatic stereo panning modulation"},{category:"tonejs",type:"Filter",label:"Filter",group:"Filter",description:"Resonant filter with multiple types"},{category:"tonejs",type:"DubFilter",label:"Dub Filter",group:"Filter",description:"King Tubby-style resonant high-pass filter for dramatic sweeps"},{category:"tonejs",type:"AutoFilter",label:"Auto Filter",group:"Filter",description:"LFO-modulated filter for rhythmic sweeps"},{category:"tonejs",type:"AutoWah",label:"Auto Wah",group:"Filter",description:"Envelope-following wah effect"},{category:"tonejs",type:"PitchShift",label:"Pitch Shift",group:"Pitch",description:"Transpose audio up or down by semitones"},{category:"tonejs",type:"FrequencyShifter",label:"Frequency Shifter",group:"Pitch",description:"Ring modulation-style frequency shifting"},{category:"tonejs",type:"StereoWidener",label:"Stereo Widener",group:"Spatial",description:"Enhance stereo image width"},...Q.map(e=>({category:"neural",neuralModelIndex:e.index,label:e.name,group:"overdrive"===e.category?"Neural Overdrive":"distortion"===e.category?"Neural Distortion":"amplifier"===e.category?"Neural Amp":"Neural Effect",description:`${e.fullName} - ${e.description}`}))];function ne(){const e={};return se.forEach(a=>{e[a.group]||(e[a.group]=[]),e[a.group].push(a)}),e}const oe="master-fx-user-presets",ie=({isOpen:r,onClose:s})=>{const[n,b]=o.useState(!1),[f,w]=o.useState(!1),[C,M]=o.useState(""),[P,D]=o.useState(null),{masterEffects:z,addMasterEffectConfig:S,removeMasterEffect:F,updateMasterEffect:$,reorderMasterEffects:V,setMasterEffects:E}=e(),T=l(c(p),c(g,{coordinateGetter:h})),R=o.useCallback(()=>{try{const e=localStorage.getItem(oe);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),B=o.useCallback(()=>{if(!C.trim())return;const e=R();e.push({name:C.trim(),effects:z.map(e=>({...e}))}),localStorage.setItem(oe,JSON.stringify(e)),M(""),w(!1)},[C,z,R]),A=o.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));E(a),b(!1)},[E]),q=o.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));E(a),b(!1)},[E]),H=o.useCallback(e=>{const a=R().filter(a=>a.name!==e);localStorage.setItem(oe,JSON.stringify(a))},[R]),O=z.filter(e=>"neural"===e.category).length,I=o.useCallback(e=>{if("neural"===e.category&&O>=3){if(!confirm("⚠️ Performance Warning\n\nYou are adding a 4th neural effect to the master chain. Multiple neural effects can cause high CPU usage and audio glitches.\n\nConsider using Tone.js effects or reducing the neural effect count.\n\nContinue anyway?"))return}const a={id:`master-fx-${Date.now()}`,category:e.category,type:e.type||"Distortion",enabled:!0,wet:100,parameters:{},neuralModelIndex:e.neuralModelIndex,neuralModelName:"neural"===e.category?e.label:void 0};if("neural"===e.category&&void 0!==e.neuralModelIndex){const t=Q[e.neuralModelIndex];t?.parameters&&Object.entries(t.parameters).forEach(([e,t])=>{t&&(a.parameters[e]=t.default)})}S(a)},[O,S]),L=R(),J=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),G=ne();return r?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:e=>{e.target===e.currentTarget&&s()},children:t.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1200px] flex flex-col overflow-hidden animate-scale-in",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(y,{size:20,className:"text-accent-primary"}),t.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Master Effects"}),t.jsxs("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:[z.length," FX"]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>b(!n),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2",children:["Presets ",t.jsx(v,{size:14})]}),n&&t.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:[L.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:"User Presets"}),L.map(e=>t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-dark-bgHover cursor-pointer group",children:[t.jsx("span",{onClick:()=>q(e),className:"text-sm text-text-primary flex-1",children:e.name}),t.jsx("button",{onClick:a=>{a.stopPropagation(),H(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:t.jsx(j,{size:14})})]},e.name)),t.jsx("div",{className:"border-t border-dark-border"})]}),Object.entries(J).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>t.jsxs("div",{onClick:()=>A(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[t.jsx("div",{className:"text-sm text-text-primary",children:e.name}),t.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),t.jsx("button",{onClick:()=>w(!0),className:"p-2 rounded-lg text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:t.jsx(N,{size:18})})]}),O>=3&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[t.jsx(U,{size:14,className:"text-yellow-500"}),t.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[O," neural effects - High CPU usage"]})]}),t.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:t.jsx(j,{size:24})})]}),f&&t.jsx("div",{className:"px-6 py-4 bg-dark-bgTertiary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"text",placeholder:"Preset name...",value:C,onChange:e=>M(e.target.value),onKeyDown:e=>{"Enter"===e.key&&B(),"Escape"===e.key&&w(!1)},className:"flex-1 px-4 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                         placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),t.jsx("button",{onClick:B,className:"px-4 py-2 text-sm font-medium rounded-lg bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),t.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),t.jsx("div",{className:"px-6 py-3 bg-dark-bgSecondary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-3 text-sm font-mono text-text-muted overflow-x-auto",children:[t.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),t.jsx("span",{children:"→"}),z.length>0?z.map((e,a)=>t.jsxs(i.Fragment,{children:[t.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<z.length-1&&t.jsx("span",{children:"→"})]},e.id)):t.jsx("span",{className:"italic text-text-muted",children:"direct"}),t.jsx("span",{children:"→"}),t.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[t.jsx(k,{size:14})," OUTPUT"]})]})}),t.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[t.jsxs("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary mb-3",children:"Effect Chain"}),t.jsx("p",{className:"text-xs text-text-muted",children:"Drag effects to reorder. Click to edit parameters."})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:0===z.length?t.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No master effects. Add effects from the panel on the right."}):t.jsx(d,{sensors:T,collisionDetection:m,onDragEnd:e=>{const{active:a,over:t}=e;if(t&&a.id!==t.id){const e=z.findIndex(e=>e.id===a.id),r=z.findIndex(e=>e.id===t.id);-1!==e&&-1!==r&&V(e,r)}},children:t.jsx(x,{items:z.map(e=>e.id),strategy:u,children:z.map(e=>t.jsx(le,{effect:e,isSelected:P?.id===e.id,onSelect:()=>D(e),onToggle:()=>(e=>{const a=z.find(a=>a.id===e);a&&$(e,{enabled:!a.enabled})})(e.id),onRemove:()=>F(e.id),onWetChange:a=>((e,a)=>{$(e,{wet:a})})(e.id,a)},e.id))})})})]}),t.jsx("div",{className:"w-1/2 flex flex-col",children:P?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-text-primary",children:[P.type," Parameters"]}),t.jsx("p",{className:"text-xs text-text-muted",children:"Adjust effect settings"})]}),t.jsx("button",{onClick:()=>D(null),className:"text-xs text-text-muted hover:text-accent-primary transition-colors",children:"Back to Add"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:t.jsx(ae,{effect:P,onUpdateParameter:(e,a)=>{const t={parameters:{...P.parameters,[e]:a}};$(P.id,t),D({...P,...t})},onUpdateWet:e=>{$(P.id,{wet:e}),D({...P,wet:e})}})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Add Effect"}),t.jsx("p",{className:"text-xs text-text-muted",children:"Select an effect to add to the chain"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:t.jsx("div",{className:"space-y-4",children:Object.entries(G).map(([e,a])=>t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-2",children:e}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>t.jsxs("button",{onClick:()=>I(e),className:"px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                       hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                       transition-colors text-left flex items-center justify-between gap-2",children:[t.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&t.jsx(W,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))})})]})})]})]})}):null};function le({effect:e,isSelected:a,onSelect:r,onToggle:s,onRemove:n,onWetChange:o}){const{attributes:i,listeners:l,setNodeRef:c,transform:d,transition:m,isDragging:x}=b({id:e.id}),u={transform:f.Transform.toString(d),transition:m,opacity:x?.5:1};return t.jsx("div",{ref:c,style:u,className:`\n        bg-dark-bgSecondary border rounded-lg p-4 mb-3 cursor-pointer transition-all\n        ${x?"shadow-lg ring-2 ring-accent-primary":""}\n        ${e.enabled?"":"opacity-60"}\n        ${a?"border-accent-primary bg-accent-primary/5":"border-dark-border hover:border-dark-borderLight"}\n      `,onClick:r,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{...i,...l,className:"text-text-muted hover:text-accent-primary cursor-grab active:cursor-grabbing p-1",title:"Drag to reorder",onClick:e=>e.stopPropagation(),children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[t.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),t.jsx("circle",{cx:"4",cy:"8",r:"1.5"}),t.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),t.jsx("circle",{cx:"10",cy:"4",r:"1.5"}),t.jsx("circle",{cx:"10",cy:"8",r:"1.5"}),t.jsx("circle",{cx:"10",cy:"12",r:"1.5"})]})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-sm text-text-primary",children:e.neuralModelName||e.type}),"neural"===e.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[t.jsx(W,{size:10}),"Neural"]})]}),t.jsxs("div",{className:"text-xs text-text-muted",children:[e.enabled?"Active":"Bypassed"," • Wet: ",e.wet,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>o(Number(e.target.value)),className:"w-20 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                       [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                       [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),r()},className:"p-2 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:t.jsx(C,{size:16})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),s()},className:`\n              p-2 rounded transition-colors\n              ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n            `,title:e.enabled?"Disable":"Enable",children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),t.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-2 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:t.jsx(j,{size:16})})]})]})})}const ce=({isOpen:e,onClose:r})=>{const[i,l]=o.useState(null),[c,d]=o.useState(!1),{instruments:m,currentInstrumentId:x,addEffectConfig:u,removeEffect:h,updateEffect:g,updateInstrument:p}=s(),b=m.find(e=>e.id===x),f=o.useCallback(e=>{if(null===x)return;const a=e.effects.map((e,a)=>({...e,id:`instrument-fx-${Date.now()}-${a}`}));p(x,{effects:a}),d(!1),n.success(`Applied ${e.name} to ${b?.name}`)},[x,p,b?.name]);if(!b)return null;const N=b.effects||[],k=N.filter(e=>"neural"===e.category).length,w=ne();return e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:e=>{e.target===e.currentTarget&&r()},children:t.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1200px] flex flex-col overflow-hidden animate-scale-in",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(y,{size:20,className:"text-accent-primary"}),t.jsxs("h2",{className:"text-lg font-bold text-text-primary",children:[b.name||`Instrument ${b.id}`," Effects"]}),t.jsx("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:b.synthType}),t.jsxs("span",{className:"text-[10px] text-accent-info px-2 py-1 bg-accent-info/10 rounded",children:[se.length," effects available"]}),t.jsxs("div",{className:"relative ml-2",children:[t.jsxs("button",{onClick:()=>d(!c),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2 border border-dark-border",children:["Presets ",t.jsx(v,{size:14})]}),c&&t.jsx("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:Object.entries(a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{})).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>t.jsxs("div",{onClick:()=>f(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[t.jsx("div",{className:"text-sm text-text-primary",children:e.name}),t.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))})]})]}),k>=3&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[t.jsx(U,{size:14,className:"text-yellow-500"}),t.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[k," neural effects - High CPU usage"]})]}),t.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:t.jsx(j,{size:24})})]}),t.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[t.jsxs("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary mb-3",children:"Effect Chain"}),t.jsxs("p",{className:"text-xs text-text-muted",children:[N.length," effect",1!==N.length?"s":""," active",k>0&&` • ${k} neural`]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:0===N.length?t.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No effects. Add from the panel on the right →"}):N.map(e=>t.jsx("div",{className:`\n                      bg-dark-bgSecondary border rounded-lg p-4 mb-3 cursor-pointer transition-all\n                      ${e.enabled?"":"opacity-60"}\n                      ${i?.id===e.id?"border-accent-primary bg-accent-primary/5":"border-dark-border hover:border-dark-borderLight"}\n                    `,onClick:()=>l(e),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-sm text-text-primary",children:e.neuralModelName||e.type}),"neural"===e.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[t.jsx(W,{size:10}),"Neural"]})]}),t.jsxs("div",{className:"text-xs text-text-muted",children:[e.enabled?"Active":"Bypassed"," • Wet: ",e.wet,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:a=>{return t=e.id,r=Number(a.target.value),void(null!==x&&g(x,t,{wet:r}));var t,r},className:"w-20 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary"})}),t.jsx("button",{onClick:a=>{a.stopPropagation(),l(e)},className:"p-2 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:t.jsx(C,{size:16})}),t.jsx("button",{onClick:a=>{a.stopPropagation(),(e=>{const a=N.find(a=>a.id===e);a&&null!==x&&g(x,e,{enabled:!a.enabled})})(e.id)},className:`\n                            p-2 rounded transition-colors\n                            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n                          `,title:e.enabled?"Disable":"Enable",children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),t.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),t.jsx("button",{onClick:a=>{var t;a.stopPropagation(),t=e.id,null!==x&&h(x,t)},className:"p-2 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:t.jsx(j,{size:16})})]})]})},e.id))})]}),t.jsx("div",{className:"w-1/2 flex flex-col",children:i?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-text-primary flex items-center gap-2",children:[i.neuralModelName||i.type," Parameters","neural"===i.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[t.jsx(W,{size:10}),"Neural"]})]}),t.jsx("p",{className:"text-xs text-text-muted",children:"Adjust effect settings"})]}),t.jsx("button",{onClick:()=>l(null),className:"text-xs text-text-muted hover:text-accent-primary transition-colors",children:"Back to Add"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:t.jsx(ae,{effect:i,onUpdateParameter:(e,a)=>{const t={parameters:{...i.parameters,[e]:a}};null!==x&&g(x,i.id,t),l({...i,...t})},onUpdateWet:e=>{null!==x&&g(x,i.id,{wet:e}),l({...i,wet:e})}})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Add Effect"}),t.jsxs("p",{className:"text-xs text-text-muted",children:["All ",se.length," effects available (23 Tone.js + 37 Neural)"]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:t.jsx("div",{className:"space-y-4",children:Object.entries(w).map(([e,a])=>t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-2",children:e}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>t.jsxs("button",{onClick:()=>(e=>{if(null===x)return;if("neural"===e.category&&k>=3&&!confirm("⚠️ Performance Warning\n\nYou are adding a 4th neural effect. Multiple neural effects can cause high CPU usage and audio glitches.\n\nConsider using Tone.js effects or reducing the neural effect count.\n\nContinue anyway?"))return;const a={id:`effect-${Date.now()}`,category:e.category,type:e.type||"Distortion",enabled:!0,wet:100,parameters:{},neuralModelIndex:e.neuralModelIndex,neuralModelName:"neural"===e.category?e.label:void 0};if("neural"===e.category&&void 0!==e.neuralModelIndex){const t=Q[e.neuralModelIndex];t?.parameters&&Object.entries(t.parameters).forEach(([e,t])=>{t&&(a.parameters[e]=t.default)})}u(x,a)})(e),className:"px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                       hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                       transition-colors text-left flex items-center justify-between gap-2",children:[t.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&t.jsx(W,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))})})]})})]})]})}):null};export{ae as EffectParameterEditor,ce as InstrumentEffectsModal,ie as MasterEffectsModal,H as MasterEffectsPanel};
