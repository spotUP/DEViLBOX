import{j as e}from"./index-zx6LJBPK.js";import{R as n,r as a}from"./vendor-utils-XMmR-oGw.js";import{A as r}from"./VJView-BexYXGXr.js";import"./vendor-react-DkDaD07v.js";import"./vendor-tone-CADp_hfL.js";import"./vendor-ui-uomqNFY-.js";import"./react-three-fiber.esm-DUbY8J_y.js";let o=null;class t{mod=null;pcmBuf=0;pcmBufSize=0;strBuf=0;strBufSize=0;_ready=!1;get ready(){return this._ready}async init(e,n,a){const r=await(o||(o=new Promise((e,n)=>{const a=window.createProjectM;if("function"==typeof a)return void e(a);const r=document.createElement("script");r.src="/projectm/ProjectM.js",r.onload=()=>{const a=window.createProjectM;"function"==typeof a?e(a):n(new Error("createProjectM not found after script load"))},r.onerror=()=>n(new Error("Failed to load ProjectM.js")),document.head.appendChild(r)}),o));e.id||(e.id="projectm-canvas"),this.mod=await r({canvas:e,printErr:e=>{"string"!=typeof e||e.includes("registerOrRemoveHandler")}});const t=this.mod._pm_init(n,a);if(0!==t)throw new Error(`pm_init failed with code ${t}`);const i=this.mod._pm_get_max_samples();this.pcmBufSize=2*i,this.pcmBuf=this.mod._malloc(4*this.pcmBufSize),this.strBufSize=65536,this.strBuf=this.mod._malloc(this.strBufSize),this._ready=!0}renderFrame(){this.mod?._pm_render_frame()}pushAudio(e,n){if(!this.mod||!this.pcmBuf)return;const a=Math.min(n,this.pcmBufSize/2);this.mod.HEAPF32.set(e.subarray(0,2*a),this.pcmBuf>>2),this.mod._pm_add_pcm(this.pcmBuf,a)}loadPresetData(e,n=!0){if(!this.mod)return;const a=this.mod.lengthBytesUTF8(e)+1;let r=this.strBuf,o=!1;a>this.strBufSize&&(r=this.mod._malloc(a),o=!0),this.mod.stringToUTF8(e,r,a),this.mod._pm_load_preset_data(r,n?1:0),o&&this.mod._free(r)}loadPresetFile(e,n=!0){if(!this.mod)return;const a=this.mod.lengthBytesUTF8(e)+1;let r=this.strBuf,o=!1;a>this.strBufSize&&(r=this.mod._malloc(a),o=!0),this.mod.stringToUTF8(e,r,a),this.mod._pm_load_preset_file(r,n?1:0),o&&this.mod._free(r)}setSize(e,n){this.mod?._pm_set_size(e,n)}setBeatSensitivity(e){this.mod?._pm_set_beat_sensitivity(e)}setSoftCutDuration(e){this.mod?._pm_set_soft_cut_duration(e)}setPresetDuration(e){this.mod?._pm_set_preset_duration(e)}setPresetLocked(e){this.mod?._pm_set_preset_locked(e?1:0)}setHardCutEnabled(e){this.mod?._pm_set_hard_cut_enabled(e?1:0)}setMeshSize(e,n){this.mod?._pm_set_mesh_size(e,n)}destroy(){this.mod&&(this.mod._pm_destroy(),this.pcmBuf&&this.mod._free(this.pcmBuf),this.strBuf&&this.mod._free(this.strBuf),this.pcmBuf=0,this.strBuf=0,this.mod=null,this._ready=!1)}}const i={"Bass Pulse Tunnel":"[preset00]\nfRating=4\nfGammaAdj=1.8\nfDecay=0.96\nfVideoEchoZoom=1.01\nfVideoEchoAlpha=0.3\nnVideoEchoOrientation=0\nnWaveMode=0\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=1\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=1.0\nfWaveScale=1.5\nfWaveSmoothing=0.6\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.5\nfWarpScale=1.2\nfZoomExponent=1.0\nfShader=0\nzoom=1.0\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0.5\nsx=1\nsy=1\nwave_r=0.0\nwave_g=0.5\nwave_b=1.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.01\nob_r=0.0\nob_g=0.0\nob_b=0.0\nob_a=0.5\nib_size=0.01\nib_r=0.1\nib_g=0.3\nib_b=0.6\nib_a=0.3\nper_frame_1=zoom = 1.0 + 0.1*bass;\nper_frame_2=rot = 0.02*sin(time*0.3) + 0.01*treb;\nper_frame_3=warp = 0.5 + 0.5*bass;\nper_frame_4=wave_r = 0.5 + 0.5*sin(time*1.1);\nper_frame_5=wave_g = 0.5 + 0.5*sin(time*1.3 + 2.0);\nper_frame_6=wave_b = 0.5 + 0.5*sin(time*1.7 + 4.0);\nper_frame_7=decay = 0.94 + 0.04*bass;\nper_frame_8=ob_a = 0.3 + 0.3*bass;\nper_pixel_1=zoom = zoom + 0.02*rad*bass;\nper_pixel_2=rot = rot + 0.01*sin(ang*6.0)*treb;","Neon Waveform":"[preset00]\nfRating=4\nfGammaAdj=2.0\nfDecay=0.92\nfVideoEchoZoom=1.0\nfVideoEchoAlpha=0.0\nnVideoEchoOrientation=0\nnWaveMode=5\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=0\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=1.0\nfWaveScale=2.0\nfWaveSmoothing=0.5\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.0\nfWarpScale=1.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.0\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0\nsx=1\nsy=1\nwave_r=0.0\nwave_g=1.0\nwave_b=0.5\nwave_x=0.5\nwave_y=0.5\nob_size=0\nob_r=0\nob_g=0\nob_b=0\nob_a=0\nib_size=0\nib_r=0\nib_g=0\nib_b=0\nib_a=0\nper_frame_1=wave_r = 0.5+0.5*sin(time*2.0);\nper_frame_2=wave_g = 0.5+0.5*cos(time*1.5);\nper_frame_3=wave_b = 0.5+0.5*sin(time*3.0+1.0);\nper_frame_4=wave_x = 0.5;\nper_frame_5=wave_y = 0.5;\nper_frame_6=zoom = 0.98 + 0.02*bass;\nper_frame_7=rot = 0.005*sin(time*0.2);","Spiral Galaxy":"[preset00]\nfRating=4\nfGammaAdj=1.9\nfDecay=0.97\nfVideoEchoZoom=1.0\nfVideoEchoAlpha=0.4\nnVideoEchoOrientation=3\nnWaveMode=0\nbAdditiveWaves=1\nbWaveDots=1\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=0.9\nfWaveScale=1.0\nfWaveSmoothing=0.7\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=2.0\nfWarpScale=2.0\nfZoomExponent=1.0\nfShader=0\nzoom=0.99\nrot=0.03\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=1.0\nsx=1\nsy=1\nwave_r=1.0\nwave_g=0.5\nwave_b=0.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.005\nob_r=0.0\nob_g=0.0\nob_b=0.2\nob_a=0.8\nib_size=0.005\nib_r=0.2\nib_g=0.0\nib_b=0.2\nib_a=0.3\nper_frame_1=rot = 0.03 + 0.02*bass;\nper_frame_2=zoom = 0.985 + 0.015*mid;\nper_frame_3=warp = 1.0 + 2.0*treb;\nper_frame_4=wave_r = 0.8 + 0.2*bass;\nper_frame_5=wave_g = 0.3 + 0.3*mid;\nper_frame_6=wave_b = 0.5 + 0.5*treb;\nper_frame_7=decay = 0.96 + 0.02*bass;\nper_pixel_1=rot = rot + 0.03*sin(rad*3.14159*4.0)*bass;\nper_pixel_2=zoom = zoom + 0.01*sin(ang*4.0)*mid;","Heartbeat Rings":"[preset00]\nfRating=4\nfGammaAdj=2.0\nfDecay=0.95\nfVideoEchoZoom=1.005\nfVideoEchoAlpha=0.5\nnVideoEchoOrientation=0\nnWaveMode=3\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=1\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=1.0\nfWaveScale=1.8\nfWaveSmoothing=0.5\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.0\nfWarpScale=1.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.0\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0\nsx=1.0\nsy=1.0\nwave_r=1.0\nwave_g=0.2\nwave_b=0.4\nwave_x=0.5\nwave_y=0.5\nob_size=0\nob_r=0\nob_g=0\nob_b=0\nob_a=0\nib_size=0\nib_r=0\nib_g=0\nib_b=0\nib_a=0\nper_frame_1=zoom = 1.0 + 0.15*bass - 0.05*mid;\nper_frame_2=sx = 1.0 + 0.05*sin(time*2.0)*bass;\nper_frame_3=sy = 1.0 + 0.05*cos(time*2.0)*bass;\nper_frame_4=wave_r = 1.0;\nper_frame_5=wave_g = 0.2 + 0.4*mid;\nper_frame_6=wave_b = 0.4 + 0.6*treb;\nper_frame_7=decay = 0.93 + 0.05*bass;\nper_pixel_1=zoom = zoom + 0.1*sin(rad*3.14159*6.0)*bass;","Electric Storm":"[preset00]\nfRating=5\nfGammaAdj=1.7\nfDecay=0.94\nfVideoEchoZoom=1.01\nfVideoEchoAlpha=0.35\nnVideoEchoOrientation=1\nnWaveMode=6\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=1.0\nfWaveScale=1.0\nfWaveSmoothing=0.6\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=2.0\nfWarpScale=1.5\nfZoomExponent=1.0\nfShader=0\nzoom=0.98\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=1.0\nsx=1\nsy=1\nwave_r=0.3\nwave_g=0.5\nwave_b=1.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.01\nob_r=0.0\nob_g=0.0\nob_b=0.0\nob_a=0.8\nib_size=0.005\nib_r=0.0\nib_g=0.2\nib_b=0.5\nib_a=0.5\nper_frame_1=warp = 1.0 + 3.0*bass;\nper_frame_2=zoom = 0.97 + 0.03*mid;\nper_frame_3=rot = 0.01*sin(time*0.5)*treb;\nper_frame_4=cx = 0.5 + 0.1*sin(time*0.7);\nper_frame_5=cy = 0.5 + 0.1*cos(time*0.9);\nper_frame_6=wave_r = 0.3 + 0.7*treb;\nper_frame_7=wave_g = 0.3 + 0.4*mid;\nper_frame_8=wave_b = 0.8 + 0.2*bass;\nper_frame_9=decay = 0.92 + 0.06*bass;\nper_pixel_1=warp = warp + 0.5*sin(ang*3.0 + time)*treb;\nper_pixel_2=zoom = zoom + 0.02*cos(rad*8.0)*bass;","Deep Ocean":"[preset00]\nfRating=4\nfGammaAdj=1.6\nfDecay=0.985\nfVideoEchoZoom=1.0\nfVideoEchoAlpha=0.2\nnVideoEchoOrientation=2\nnWaveMode=2\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=0\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=0.7\nfWaveScale=1.2\nfWaveSmoothing=0.8\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=0.5\nfWarpScale=2.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.005\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0.5\nsx=1\nsy=1\nwave_r=0.0\nwave_g=0.3\nwave_b=0.8\nwave_x=0.5\nwave_y=0.5\nob_size=0.005\nob_r=0.0\nob_g=0.05\nob_b=0.15\nob_a=1.0\nib_size=0\nib_r=0\nib_g=0\nib_b=0\nib_a=0\nper_frame_1=zoom = 1.003 + 0.005*bass;\nper_frame_2=warp = 0.3 + 0.8*mid;\nper_frame_3=rot = 0.003*sin(time*0.15);\nper_frame_4=dx = 0.002*sin(time*0.2);\nper_frame_5=dy = 0.003*cos(time*0.15);\nper_frame_6=wave_r = 0.0 + 0.3*treb;\nper_frame_7=wave_g = 0.3 + 0.3*mid;\nper_frame_8=wave_b = 0.7 + 0.3*bass;\nper_frame_9=decay = 0.98 + 0.015*bass;\nper_pixel_1=zoom = zoom + 0.005*sin(rad*6.28*2.0 + time*0.5)*mid;\nper_pixel_2=warp = warp + 0.3*sin(ang*2.0 + time*0.3)*bass;","Fire Dance":"[preset00]\nfRating=5\nfGammaAdj=2.2\nfDecay=0.93\nfVideoEchoZoom=1.02\nfVideoEchoAlpha=0.25\nnVideoEchoOrientation=0\nnWaveMode=4\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=1.0\nfWaveScale=1.5\nfWaveSmoothing=0.5\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=3.0\nfWarpScale=1.0\nfZoomExponent=1.0\nfShader=0\nzoom=0.99\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=-0.005\nwarp=0.5\nsx=1\nsy=1\nwave_r=1.0\nwave_g=0.5\nwave_b=0.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.01\nob_r=0.0\nob_g=0.0\nob_b=0.0\nob_a=1.0\nib_size=0\nib_r=0\nib_g=0\nib_b=0\nib_a=0\nper_frame_1=zoom = 0.98 + 0.04*bass;\nper_frame_2=dy = -0.005 - 0.01*bass;\nper_frame_3=warp = 0.5 + 1.5*mid;\nper_frame_4=rot = 0.005*sin(time*0.4)*treb;\nper_frame_5=wave_r = 0.9 + 0.1*bass;\nper_frame_6=wave_g = 0.3 + 0.4*mid;\nper_frame_7=wave_b = 0.0 + 0.3*treb;\nper_frame_8=decay = 0.91 + 0.07*bass;\nper_pixel_1=dy = dy - 0.01*sin(x*3.14159*2.0)*bass;\nper_pixel_2=dx = 0.003*sin(y*3.14159*4.0 + time)*treb;","Cosmic Warp":"[preset00]\nfRating=5\nfGammaAdj=1.8\nfDecay=0.96\nfVideoEchoZoom=0.99\nfVideoEchoAlpha=0.5\nnVideoEchoOrientation=3\nnWaveMode=7\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=0.8\nfWaveScale=1.0\nfWaveSmoothing=0.6\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.5\nfWarpScale=3.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.01\nrot=0.02\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=2.0\nsx=1\nsy=1\nwave_r=0.6\nwave_g=0.2\nwave_b=1.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.005\nob_r=0.1\nob_g=0.0\nob_b=0.2\nob_a=0.5\nib_size=0.005\nib_r=0.2\nib_g=0.0\nib_b=0.3\nib_a=0.3\nper_frame_1=zoom = 1.005 + 0.02*bass;\nper_frame_2=rot = 0.02 + 0.03*treb;\nper_frame_3=warp = 2.0 + 3.0*mid;\nper_frame_4=cx = 0.5 + 0.15*sin(time*0.3);\nper_frame_5=cy = 0.5 + 0.15*cos(time*0.4);\nper_frame_6=wave_r = 0.4 + 0.6*sin(time*0.7);\nper_frame_7=wave_g = 0.2 + 0.4*sin(time*1.1 + 2.0);\nper_frame_8=wave_b = 0.8 + 0.2*cos(time*0.9);\nper_frame_9=decay = 0.95 + 0.03*bass;\nper_pixel_1=zoom = zoom + 0.03*sin(ang*5.0 + time*0.5)*bass;\nper_pixel_2=rot = rot + 0.04*sin(rad*3.14*3.0)*mid;\nper_pixel_3=warp = warp + sin(ang*3.0)*treb;",Strobelight:"[preset00]\nfRating=4\nfGammaAdj=2.5\nfDecay=0.5\nfVideoEchoZoom=1.0\nfVideoEchoAlpha=0.0\nnVideoEchoOrientation=0\nnWaveMode=0\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=0\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=1.0\nfWaveScale=3.0\nfWaveSmoothing=0.3\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.0\nfWarpScale=1.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.0\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0\nsx=1\nsy=1\nwave_r=1.0\nwave_g=1.0\nwave_b=1.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.01\nob_r=0.0\nob_g=0.0\nob_b=0.0\nob_a=1.0\nib_size=0\nib_r=0\nib_g=0\nib_b=0\nib_a=0\nper_frame_1=decay = 0.2 + 0.6*bass;\nper_frame_2=wave_r = 0.5+0.5*sin(time*5.0);\nper_frame_3=wave_g = 0.5+0.5*sin(time*5.0+2.0);\nper_frame_4=wave_b = 0.5+0.5*sin(time*5.0+4.0);\nper_frame_5=zoom = 1.0 + 0.3*bass;\nper_frame_6=rot = 0.1*treb*sin(time);",Kaleidoscope:"[preset00]\nfRating=5\nfGammaAdj=1.8\nfDecay=0.97\nfVideoEchoZoom=1.005\nfVideoEchoAlpha=0.6\nnVideoEchoOrientation=2\nnWaveMode=1\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=0.6\nfWaveScale=1.0\nfWaveSmoothing=0.7\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.0\nfWarpScale=2.0\nfZoomExponent=1.0\nfShader=0\nzoom=0.99\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=1.5\nsx=1\nsy=1\nwave_r=0.8\nwave_g=0.4\nwave_b=1.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.005\nob_r=0.0\nob_g=0.0\nob_b=0.1\nob_a=0.6\nib_size=0.005\nib_r=0.1\nib_g=0.0\nib_b=0.1\nib_a=0.4\nper_frame_1=rot = 0.05*bass;\nper_frame_2=zoom = 0.98 + 0.03*mid;\nper_frame_3=warp = 1.0 + 2.0*treb;\nper_frame_4=wave_r = 0.5 + 0.5*sin(time*1.5);\nper_frame_5=wave_g = 0.5 + 0.5*sin(time*1.5 + 2.09);\nper_frame_6=wave_b = 0.5 + 0.5*sin(time*1.5 + 4.19);\nper_frame_7=decay = 0.96 + 0.03*bass;\nper_pixel_1=rot = rot + 0.1*sin(ang*6.0)*bass;\nper_pixel_2=zoom = zoom + 0.02*sin(ang*8.0 + time)*mid;\nper_pixel_3=warp = warp + sin(rad*4.0)*treb;","Hypnotic Zoom":"[preset00]\nfRating=4\nfGammaAdj=2.0\nfDecay=0.98\nfVideoEchoZoom=1.0\nfVideoEchoAlpha=0.0\nnVideoEchoOrientation=0\nnWaveMode=0\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=1\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=0.9\nfWaveScale=1.2\nfWaveSmoothing=0.6\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.0\nfWarpScale=1.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.04\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0\nsx=1\nsy=1\nwave_r=1.0\nwave_g=1.0\nwave_b=1.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.01\nob_r=0.0\nob_g=0.0\nob_b=0.0\nob_a=0.3\nib_size=0.01\nib_r=0.2\nib_g=0.1\nib_b=0.5\nib_a=0.6\nper_frame_1=zoom = 1.02 + 0.06*bass;\nper_frame_2=rot = 0.01*sin(time*0.25) + 0.005*treb;\nper_frame_3=cx = 0.5 + 0.05*sin(time*0.3);\nper_frame_4=cy = 0.5 + 0.05*cos(time*0.4);\nper_frame_5=wave_r = 0.8 + 0.2*bass;\nper_frame_6=wave_g = 0.6 + 0.4*mid;\nper_frame_7=wave_b = 1.0;\nper_frame_8=decay = 0.97 + 0.02*bass;\nper_frame_9=ib_r = 0.2 + 0.3*sin(time*0.5);\nper_frame_10=ib_g = 0.1 + 0.2*sin(time*0.7);\nper_frame_11=ib_b = 0.5 + 0.3*sin(time*0.3);","Motion Vectors":"[preset00]\nfRating=4\nfGammaAdj=1.9\nfDecay=0.96\nfVideoEchoZoom=1.0\nfVideoEchoAlpha=0.0\nnVideoEchoOrientation=0\nnWaveMode=0\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=1\nbRedBlueStereo=0\nnMotionVectorsX=32\nnMotionVectorsY=24\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=0.5\nfWaveScale=1.0\nfWaveSmoothing=0.5\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.0\nfWarpScale=1.5\nfZoomExponent=1.0\nfShader=0\nzoom=1.0\nrot=0.02\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0.5\nsx=1\nsy=1\nwave_r=0.5\nwave_g=1.0\nwave_b=0.5\nwave_x=0.5\nwave_y=0.5\nob_size=0\nob_r=0\nob_g=0\nob_b=0\nob_a=0\nib_size=0\nib_r=0\nib_g=0\nib_b=0\nib_a=0\nper_frame_1=rot = 0.02 + 0.03*bass;\nper_frame_2=zoom = 0.99 + 0.02*mid;\nper_frame_3=warp = 0.5 + 1.5*treb;\nper_frame_4=decay = 0.95 + 0.04*bass;\nper_frame_5=wave_r = 0.3 + 0.7*treb;\nper_frame_6=wave_g = 0.8 + 0.2*mid;\nper_frame_7=wave_b = 0.3 + 0.4*bass;\nper_pixel_1=rot = rot + 0.05*sin(rad*6.28*3.0)*bass;\nper_pixel_2=dx = 0.005*cos(ang*4.0+time)*mid;\nper_pixel_3=dy = 0.005*sin(ang*4.0+time)*mid;","Acid Trip":"[preset00]\nfRating=5\nfGammaAdj=1.5\nfDecay=0.99\nfVideoEchoZoom=1.01\nfVideoEchoAlpha=0.7\nnVideoEchoOrientation=1\nnWaveMode=5\nbAdditiveWaves=1\nbWaveDots=0\nbMaximizeWaveColor=0\nbTexWrap=1\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=1\nbInvert=0\nfWaveAlpha=0.6\nfWaveScale=1.0\nfWaveSmoothing=0.6\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=2.0\nfWarpScale=3.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.0\nrot=0.01\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=2.0\nsx=1\nsy=1\nwave_r=1.0\nwave_g=0.0\nwave_b=1.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.01\nob_r=0.1\nob_g=0.0\nob_b=0.1\nob_a=0.3\nib_size=0.01\nib_r=0.0\nib_g=0.1\nib_b=0.0\nib_a=0.3\nper_frame_1=zoom = 0.99 + 0.02*bass;\nper_frame_2=rot = 0.01 + 0.02*treb*sin(time*0.3);\nper_frame_3=warp = 2.0 + 4.0*mid;\nper_frame_4=cx = 0.5 + 0.2*sin(time*0.2)*bass;\nper_frame_5=cy = 0.5 + 0.2*cos(time*0.3)*bass;\nper_frame_6=wave_r = 0.5+0.5*sin(time*2.0);\nper_frame_7=wave_g = 0.5+0.5*sin(time*2.0+2.09);\nper_frame_8=wave_b = 0.5+0.5*sin(time*2.0+4.19);\nper_frame_9=decay = 0.985 + 0.01*bass;\nper_pixel_1=warp = warp + 2.0*sin(ang*3.0+time*0.5)*bass;\nper_pixel_2=rot = rot + 0.05*cos(rad*6.28*2.0)*treb;\nper_pixel_3=zoom = zoom + 0.01*sin(ang*7.0)*mid;","Minimal Pulse":"[preset00]\nfRating=3\nfGammaAdj=2.0\nfDecay=0.8\nfVideoEchoZoom=1.0\nfVideoEchoAlpha=0.0\nnVideoEchoOrientation=0\nnWaveMode=0\nbAdditiveWaves=0\nbWaveDots=0\nbMaximizeWaveColor=1\nbTexWrap=0\nbDarkenCenter=0\nbMotionVectorsOn=0\nbRedBlueStereo=0\nnMotionVectorsX=12\nnMotionVectorsY=9\nbBrighten=0\nbDarken=0\nbSolarize=0\nbInvert=0\nfWaveAlpha=1.0\nfWaveScale=2.5\nfWaveSmoothing=0.4\nfWaveParam=0\nfModWaveAlphaStart=0.75\nfModWaveAlphaEnd=0.95\nfWarpAnimSpeed=1.0\nfWarpScale=1.0\nfZoomExponent=1.0\nfShader=0\nzoom=1.0\nrot=0.0\ncx=0.5\ncy=0.5\ndx=0\ndy=0\nwarp=0\nsx=1\nsy=1\nwave_r=0.0\nwave_g=1.0\nwave_b=0.0\nwave_x=0.5\nwave_y=0.5\nob_size=0.005\nob_r=0.0\nob_g=0.0\nob_b=0.0\nob_a=1.0\nib_size=0\nib_r=0\nib_g=0\nib_b=0\nib_a=0\nper_frame_1=decay = 0.5 + 0.4*bass;\nper_frame_2=wave_r = bass;\nper_frame_3=wave_g = mid;\nper_frame_4=wave_b = treb;\nper_frame_5=zoom = 1.0 + 0.05*bass;"},s=Object.keys(i),_=n.forwardRef(({onReady:o,onPresetChange:_},m)=>{const b=a.useRef(null),d=a.useRef(null),f=a.useRef(null),p=a.useRef(0),c=a.useRef(0),[v,l]=a.useState(!1),[h,W]=a.useState(null),x=a.useRef(null);a.useEffect(()=>{let e=!1;const n=d.current;if(!n)return;n.id||(n.id="projectm-canvas");const a=requestAnimationFrame(()=>{e||(async()=>{try{const a=new t,m=n.clientWidth,b=n.clientHeight,d=Math.round(Math.max(m,320)*devicePixelRatio),p=Math.round(Math.max(b,240)*devicePixelRatio);if(n.width=d,n.height=p,await a.init(n,d,p),e)return void a.destroy();f.current=a;const v=new r;if(v.enable(),x.current=v,s.length>0){const e=0;a.loadPresetData(i[s[e]],!1),c.current=e,_?.(e,s[e])}l(!0),o?.(s.length)}catch(a){W(a instanceof Error?a.message:String(a))}})()});return()=>{e=!0,cancelAnimationFrame(a),cancelAnimationFrame(p.current),x.current?.disable(),x.current=null,f.current?.destroy(),f.current=null}},[]),a.useEffect(()=>{if(!v)return;const e=()=>{const n=f.current,a=x.current;if(n&&a){const e=a.update().waveform,r=new Float32Array(2*e.length);for(let n=0;n<e.length;n++)r[2*n]=e[n],r[2*n+1]=e[n];n.pushAudio(r,e.length),n.renderFrame()}p.current=requestAnimationFrame(e)};return p.current=requestAnimationFrame(e),()=>cancelAnimationFrame(p.current)},[v]),a.useEffect(()=>{const e=d.current;if(!e||!f.current)return;const n=new ResizeObserver(()=>{const n=Math.round(e.clientWidth*devicePixelRatio),a=Math.round(e.clientHeight*devicePixelRatio);e.width=n,e.height=a,f.current?.setSize(n,a)});return n.observe(e),()=>n.disconnect()},[v]);const w=a.useCallback(e=>{if(!f.current||0===s.length)return;const n=(e%s.length+s.length)%s.length,a=s[n];f.current.loadPresetData(i[a],!0),c.current=n,_?.(n,a)},[_]);return n.useImperativeHandle(m,()=>({nextPreset:()=>w(c.current+1),randomPreset:()=>w(Math.floor(Math.random()*s.length)),loadPresetByIndex:e=>w(e),loadPresetByName:e=>{const n=s.indexOf(e);n>=0&&w(n)},getPresetNames:()=>s,getCurrentIndex:()=>c.current}),[w]),e.jsxDEV("div",{ref:b,className:"w-full h-full relative",children:[e.jsxDEV("canvas",{ref:d,className:"w-full h-full block",style:{imageRendering:"auto"}},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1089,columnNumber:9},void 0),!v&&!h&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:e.jsxDEV("div",{className:"text-white/60 font-mono text-sm",children:"Loading projectM (WASM)..."},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1096,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1095,columnNumber:11},void 0),h&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:e.jsxDEV("div",{className:"text-red-400/80 font-mono text-sm text-center px-8",children:[e.jsxDEV("div",{children:"projectM failed to load"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1102,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-xs mt-1 text-white/40",children:h},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1103,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-xs mt-2 text-white/30",children:"Falling back to Butterchurn is recommended"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1104,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1101,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1100,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/vj/ProjectMCanvas.tsx",lineNumber:1088,columnNumber:7},void 0)});_.displayName="ProjectMCanvas";export{_ as ProjectMCanvas};
