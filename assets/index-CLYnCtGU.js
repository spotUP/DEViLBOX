import{f as e,_ as a,j as r,d as t,$ as s,a0 as o,a1 as n,a2 as i,a3 as l,Q as c,R as d,b as m,n as x}from"./index-BScIrLQs.js";import{r as u,R as b}from"./vendor-utils-Cm-70yv0.js";import{u as h,a as p,D as g,c as f,S as y,v as j,s as v,K as N,P as k,b as w,C as M}from"./sortable.esm-DxGMPghL.js";import{b as C,C as S,X as P,aq as $,V as D,aM as z,S as V,aN as F,aO as E,M as W,aP as A,w as T,R,aE as B,aw as U,Z as q,aQ as H,aR as O,aF as I,E as L,_ as Q,aL as G}from"./vendor-ui-CfbwX2Zi.js";import"./vendor-react-LeNVipsj.js";import"./vendor-tone-MhHxAwwC.js";const J={drive:{name:"Drive",id:"drive",value:50,default:50,min:0,max:100,unit:"%",curve:"exponential"},tone:{name:"Tone",id:"tone",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},level:{name:"Level",id:"level",value:75,default:75,min:0,max:100,unit:"%",curve:"linear"},dryWet:{name:"Mix",id:"dryWet",value:100,default:100,min:0,max:100,unit:"%",curve:"linear"},presence:{name:"Presence",id:"presence",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},bass:{name:"Bass",id:"bass",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},mid:{name:"Mid",id:"mid",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},treble:{name:"Treble",id:"treble",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"}},K=[{type:"Compressor",label:"Compressor",category:"Dynamics"},{type:"EQ3",label:"3-Band EQ",category:"Dynamics"},{type:"Distortion",label:"Distortion",category:"Distortion"},{type:"BitCrusher",label:"Bit Crusher",category:"Distortion"},{type:"Chebyshev",label:"Chebyshev",category:"Distortion"},{type:"Reverb",label:"Reverb",category:"Time"},{type:"JCReverb",label:"JC Reverb",category:"Time"},{type:"Delay",label:"Delay",category:"Time"},{type:"FeedbackDelay",label:"Feedback Delay",category:"Time"},{type:"PingPongDelay",label:"Ping Pong Delay",category:"Time"},{type:"SpaceEcho",label:"Space Echo",category:"Time"},{type:"SpaceyDelayer",label:"Spacey Delayer",category:"Time"},{type:"RETapeEcho",label:"RE Tape Echo",category:"Time"},{type:"MVerb",label:"MVerb Plate",category:"Time"},{type:"SpringReverb",label:"Spring Reverb",category:"Time"},{type:"Leslie",label:"Leslie Speaker",category:"Modulation"},{type:"BiPhase",label:"Bi-Phase",category:"Modulation"},{type:"Chorus",label:"Chorus",category:"Modulation"},{type:"Phaser",label:"Phaser",category:"Modulation"},{type:"Tremolo",label:"Tremolo",category:"Modulation"},{type:"Vibrato",label:"Vibrato",category:"Modulation"},{type:"AutoFilter",label:"Auto Filter",category:"Modulation"},{type:"AutoPanner",label:"Auto Panner",category:"Modulation"},{type:"AutoWah",label:"Auto Wah",category:"Modulation"},{type:"DubFilter",label:"Dub Filter",category:"Filter"},{type:"MoogFilter",label:"Moog Filter",category:"Filter"},{type:"Filter",label:"Filter",category:"Filter"},{type:"PitchShift",label:"Pitch Shift",category:"Pitch"},{type:"FrequencyShifter",label:"Freq Shifter",category:"Pitch"},{type:"StereoWidener",label:"Stereo Widener",category:"Stereo"}];function X({effect:e,onToggle:a,onRemove:t,onEdit:s,onWetChange:o}){const{attributes:n,listeners:i,setNodeRef:l,transform:c,transition:d,isDragging:m}=w({id:e.id}),x={transform:M.Transform.toString(c),transition:d,opacity:m?.5:1};return r.jsx("div",{ref:l,style:x,className:`\n        bg-dark-bgSecondary border border-dark-border rounded-lg p-3 mb-2\n        ${m?"shadow-lg ring-2 ring-accent-primary":""}\n        ${e.enabled?"":"opacity-60"}\n      `,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{...n,...i,className:"text-text-muted hover:text-accent-primary cursor-grab active:cursor-grabbing p-1",title:"Drag to reorder",children:r.jsx(z,{size:16})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-sm text-text-primary",children:e.type}),r.jsx("div",{className:"text-xs text-text-muted",children:e.enabled?"Active":"Bypassed"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-text-muted",children:"WET"}),r.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>o(Number(e.target.value)),className:"w-16 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary\n                     [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3\n                     [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-accent-primary [&::-moz-range-thumb]:border-0"}),r.jsxs("span",{className:"text-xs text-accent-primary font-mono w-8 text-right",children:[e.wet,"%"]})]}),r.jsx("button",{onClick:s,className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:r.jsx(V,{size:14})}),r.jsx("button",{onClick:a,className:`\n            p-1.5 rounded transition-colors\n            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n          `,title:e.enabled?"Disable":"Enable",children:r.jsx(F,{size:14})}),r.jsx("button",{onClick:t,className:"p-1.5 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:r.jsx(P,{size:14})})]})})}const Y="master-fx-user-presets",Z=({onEditEffect:t})=>{const[s,o]=u.useState(!1),[n,i]=u.useState(!1),[l,c]=u.useState(!1),[d,m]=u.useState(""),{masterEffects:x,addMasterEffect:w,removeMasterEffect:M,updateMasterEffect:z,reorderMasterEffects:V,setMasterEffects:F}=e(),E=u.useCallback(()=>{try{const e=localStorage.getItem(Y);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),W=u.useCallback(()=>{if(!d.trim())return;const e=E();e.push({name:d.trim(),effects:x.map(e=>({...e}))}),localStorage.setItem(Y,JSON.stringify(e)),m(""),c(!1)},[d,x,E]),A=u.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));F(a),i(!1)},[F]),T=u.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));F(a),i(!1)},[F]),R=u.useCallback(e=>{const a=E().filter(a=>a.name!==e);localStorage.setItem(Y,JSON.stringify(a))},[E]),B=E(),U=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),q=h(p(k),p(N,{coordinateGetter:v})),H=K.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{});return r.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-dark-bgSecondary border-b border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(C,{size:16,className:"text-accent-primary"}),r.jsx("span",{className:"font-medium text-sm text-text-primary",children:"Master Effects"}),r.jsxs("span",{className:"text-xs text-text-muted px-2 py-0.5 bg-dark-bg rounded",children:[x.length," FX"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>i(!n),className:"px-3 py-1 text-xs font-medium rounded bg-dark-bg text-text-primary\n                       hover:bg-dark-bgHover transition-colors flex items-center gap-1 border border-dark-border",children:["Presets ",r.jsx(S,{size:12})]}),n&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-80 overflow-y-auto",children:[B.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:"User Presets"}),B.map(e=>r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-dark-bgHover cursor-pointer group",children:[r.jsx("span",{onClick:()=>T(e),className:"text-sm text-text-primary flex-1",children:e.name}),r.jsx("button",{onClick:a=>{a.stopPropagation(),R(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:r.jsx(P,{size:12})})]},e.name)),r.jsx("div",{className:"border-t border-dark-border my-1"})]}),Object.entries(U).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:e}),a.map(e=>r.jsxs("div",{onClick:()=>A(e),className:"px-3 py-2 hover:bg-dark-bgHover cursor-pointer",children:[r.jsx("div",{className:"text-sm text-text-primary",children:e.name}),r.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),r.jsx("button",{onClick:()=>c(!0),className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:r.jsx($,{size:14})}),r.jsx("button",{onClick:()=>o(!s),className:"px-3 py-1 text-xs font-medium rounded bg-accent-primary/10 text-accent-primary\n                     hover:bg-accent-primary/20 transition-colors",children:"+ Add Effect"})]})]}),l&&r.jsx("div",{className:"px-4 py-3 bg-dark-bgTertiary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",placeholder:"Preset name...",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&W(),"Escape"===e.key&&c(!1)},className:"flex-1 px-3 py-1.5 text-sm bg-dark-bg border border-dark-border rounded text-text-primary\n                       placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),r.jsx("button",{onClick:W,className:"px-3 py-1.5 text-xs font-medium rounded bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),r.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-xs font-medium rounded bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),s&&r.jsxs("div",{className:"p-4 bg-dark-bgTertiary border-b border-dark-border",children:[r.jsx("div",{className:"text-xs text-text-muted mb-3 font-medium",children:"Select Effect Type:"}),r.jsx("div",{className:"space-y-3",children:Object.entries(H).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-text-muted mb-1.5 uppercase tracking-wide",children:e}),r.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(({type:e,label:a})=>r.jsx("button",{onClick:()=>(w(e),void o(!1)),className:"px-2 py-1 text-xs rounded border border-dark-border bg-dark-bg\n                               hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                               transition-colors",children:a},e))})]},e))})]}),r.jsx("div",{className:"px-4 py-2 bg-dark-bgSecondary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-text-muted overflow-x-auto",children:[r.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),r.jsx("span",{children:"→"}),x.length>0?x.map((e,a)=>r.jsxs(b.Fragment,{children:[r.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<x.length-1&&r.jsx("span",{children:"→"})]},e.id)):r.jsx("span",{className:"italic text-text-muted",children:"direct"}),r.jsx("span",{children:"→"}),r.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[r.jsx(D,{size:12})," OUTPUT"]})]})}),r.jsx("div",{className:"p-4",children:0===x.length?r.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No master effects. All audio passes through unchanged."}):r.jsx(g,{sensors:q,collisionDetection:f,onDragEnd:e=>{const{active:a,over:r}=e;if(r&&a.id!==r.id){const e=x.findIndex(e=>e.id===a.id),t=x.findIndex(e=>e.id===r.id);-1!==e&&-1!==t&&V(e,t)}},children:r.jsx(y,{items:x.map(e=>e.id),strategy:j,children:x.map(e=>r.jsx(X,{effect:e,onToggle:()=>(e=>{const a=x.find(a=>a.id===e);a&&z(e,{enabled:!a.enabled})})(e.id),onRemove:()=>{return a=e.id,void M(a);var a},onEdit:()=>(e=>{t&&t(e)})(e),onWetChange:a=>((e,a)=>{z(e,{wet:a})})(e.id,a)},e.id))})})}),r.jsx("div",{className:"px-4 pb-4",children:r.jsxs("div",{className:"text-xs text-text-muted p-3 bg-dark-bgSecondary rounded border border-dark-border",children:[r.jsx("strong",{children:"Tip:"})," Drag effects to reorder the signal chain. Order matters: compression before reverb sounds different than reverb before compression."]})})]})},_={drive:{...J.drive},tone:{...J.tone},level:{...J.level},dryWet:{...J.dryWet}},ee={drive:{...J.drive},presence:{...J.presence},level:{...J.level},dryWet:{...J.dryWet}},ae={drive:{...J.drive},bass:{...J.bass},mid:{...J.mid},treble:{...J.treble},presence:{...J.presence},level:{...J.level},dryWet:{...J.dryWet}},re=[{index:0,name:"TS808",fullName:"Ibanez TS808 Tube Screamer",category:"overdrive",description:"Legendary mid-focused overdrive, smooth and warm",tags:["tubescreamer","classic","smooth","mid-boost","vintage"],parameters:_,characteristics:{gain:"medium",tone:"neutral",character:["warm","smooth","mid-focused","classic"]}},{index:1,name:"ProCo RAT",fullName:"ProCo RAT Distortion",category:"distortion",description:"Aggressive distortion with cutting edge and sustain",tags:["rat","distortion","aggressive","cutting","sustain"],parameters:_,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","saturated","edgy"]}},{index:2,name:"MT-2",fullName:"Boss MT-2 Metal Zone",category:"distortion",description:"Extreme high-gain distortion with active EQ",tags:["metal","high-gain","eq","heavy","modern"],parameters:ae,characteristics:{gain:"extreme",tone:"bright",character:["heavy","saturated","aggressive","tight"]}},{index:3,name:"DOD 250",fullName:"DOD 250 Overdrive/Preamp",category:"overdrive",description:"Classic simple overdrive with transparent tone",tags:["dod","overdrive","transparent","simple","vintage"],parameters:{..._,tone:void 0},characteristics:{gain:"medium",tone:"neutral",character:["transparent","simple","responsive","dynamic"]}},{index:4,name:"Big Muff",fullName:"Electro-Harmonix Big Muff Pi",category:"distortion",description:"Thick, creamy fuzz with massive sustain",tags:["fuzz","muff","sustain","thick","vintage"],parameters:_,characteristics:{gain:"high",tone:"dark",character:["thick","woolly","sustaining","vintage"]}},{index:5,name:"MXR Dist+",fullName:"MXR Distortion+",category:"distortion",description:"Simple, raw distortion with lots of character",tags:["mxr","distortion","raw","simple"],parameters:{..._,tone:void 0},characteristics:{gain:"high",tone:"bright",character:["raw","edgy","simple","aggressive"]}},{index:6,name:"Bluesbreaker",fullName:"Marshall Bluesbreaker",category:"overdrive",description:"Legendary transparent amp-like overdrive",tags:["marshall","blues","transparent","amp-like","dynamic"],parameters:_,characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","amp-like","responsive"]}},{index:7,name:"Klon",fullName:"Klon Centaur",category:"overdrive",description:"Boutique transparent overdrive, highly sought after",tags:["klon","centaur","boutique","transparent","legendary"],parameters:_,characteristics:{gain:"medium",tone:"bright",character:["transparent","sparkle","boutique","clean"]}},{index:8,name:"Princeton",fullName:"Fender Princeton Reverb",category:"amplifier",description:"Classic clean Fender amp tone",tags:["fender","amp","clean","vintage","reverb"],parameters:ee,characteristics:{gain:"low",tone:"bright",character:["clean","sparkle","classic","warm"]}},{index:9,name:"Plexi",fullName:"Marshall Plexi Super Lead",category:"amplifier",description:"Legendary British rock amp, crunchy and aggressive",tags:["marshall","plexi","rock","british","crunch"],parameters:ae,characteristics:{gain:"high",tone:"bright",character:["crunchy","aggressive","british","rock"]}},{index:10,name:"Mesa Recto",fullName:"Mesa Boogie Dual Rectifier",category:"amplifier",description:"Modern high-gain metal amp",tags:["mesa","rectifier","metal","high-gain","modern"],parameters:ae,characteristics:{gain:"extreme",tone:"dark",character:["heavy","tight","modern","crushing"]}},{index:11,name:"AC30",fullName:"Vox AC30",category:"amplifier",description:"British chime and jangle, clean to crunch",tags:["vox","ac30","british","jangle","chime"],parameters:ee,characteristics:{gain:"medium",tone:"bright",character:["chime","jangle","british","sparkle"]}},{index:12,name:"Bassman",fullName:"Fender Bassman",category:"amplifier",description:"Classic bass amp that guitarists love",tags:["fender","bassman","vintage","clean","bass"],parameters:ee,characteristics:{gain:"low",tone:"dark",character:["clean","warm","full","vintage"]}},{index:13,name:"JCM800",fullName:"Marshall JCM800",category:"amplifier",description:"80s British rock and metal tone",tags:["marshall","jcm800","80s","rock","metal"],parameters:ae,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","tight","80s"]}},{index:14,name:"SLO100",fullName:"Soldano SLO-100",category:"amplifier",description:"Boutique high-gain with singing leads",tags:["soldano","slo","high-gain","boutique","lead"],parameters:ae,characteristics:{gain:"extreme",tone:"bright",character:["singing","smooth","high-gain","boutique"]}},{index:15,name:"5150",fullName:"Peavey 5150",category:"amplifier",description:"Iconic metal amp, tight and aggressive",tags:["peavey","5150","metal","aggressive","modern"],parameters:ae,characteristics:{gain:"extreme",tone:"bright",character:["tight","aggressive","metal","modern"]}},{index:16,name:"Dumble ODS",fullName:"Dumble Overdrive Special",category:"amplifier",description:"Legendary boutique amp, smooth and rich",tags:["dumble","boutique","smooth","overdrive","luxury"],parameters:ae,characteristics:{gain:"medium",tone:"dark",character:["smooth","rich","boutique","singing"]}},{index:17,name:"Matchless DC30",fullName:"Matchless DC-30",category:"amplifier",description:"Boutique British-style clean to crunch",tags:["matchless","boutique","british","clean"],parameters:ee,characteristics:{gain:"medium",tone:"bright",character:["boutique","clean","dynamic","sparkle"]}},{index:18,name:"Orange Rockerverb",fullName:"Orange Rockerverb",category:"amplifier",description:"British alternative rock tone",tags:["orange","british","alternative","rock"],parameters:ee,characteristics:{gain:"high",tone:"neutral",character:["thick","british","alternative","punchy"]}},{index:19,name:"ENGL Powerball",fullName:"ENGL Powerball",category:"amplifier",description:"German high-gain metal machine",tags:["engl","metal","high-gain","german","modern"],parameters:ae,characteristics:{gain:"extreme",tone:"bright",character:["tight","articulate","metal","modern"]}},{index:20,name:"Friedman BE-100",fullName:"Friedman BE-100",category:"amplifier",description:"Modern boutique high-gain",tags:["friedman","boutique","high-gain","modern"],parameters:ae,characteristics:{gain:"extreme",tone:"bright",character:["tight","modern","boutique","versatile"]}},{index:21,name:"Timmy",fullName:"Paul Cochrane Timmy",category:"overdrive",description:"Transparent overdrive with separate bass/treble controls",tags:["timmy","transparent","overdrive","boutique"],parameters:{..._,bass:J.bass,treble:J.treble},characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","versatile","boutique"]}},{index:22,name:"Vertex",fullName:"Vertex Steel String",category:"overdrive",description:"Clean boost to light overdrive",tags:["vertex","clean","boost","transparent"],parameters:_,characteristics:{gain:"low",tone:"bright",character:["clean","transparent","boost","sparkle"]}},{index:23,name:"Fulltone OCD",fullName:"Fulltone Obsessive Compulsive Drive",category:"overdrive",description:"Versatile overdrive from sparkle to crunch",tags:["fulltone","ocd","versatile","overdrive"],parameters:_,characteristics:{gain:"medium",tone:"neutral",character:["versatile","dynamic","amp-like","responsive"]}},{index:24,name:"Horizon",fullName:"Horizon Devices Precision Drive",category:"overdrive",description:"Modern djent and metal tones",tags:["horizon","djent","metal","modern","tight"],parameters:_,characteristics:{gain:"high",tone:"bright",character:["tight","modern","djent","articulate"]}},{index:25,name:"Suhr Riot",fullName:"Suhr Riot Distortion",category:"distortion",description:"British-voiced distortion",tags:["suhr","riot","distortion","british"],parameters:_,characteristics:{gain:"high",tone:"bright",character:["british","aggressive","versatile","cutting"]}},{index:26,name:"Bogner Ecstasy",fullName:"Bogner Ecstasy Blue",category:"overdrive",description:"Boutique amp-in-a-box pedal",tags:["bogner","ecstasy","amp-in-a-box","boutique"],parameters:_,characteristics:{gain:"high",tone:"neutral",character:["boutique","versatile","amp-like","smooth"]}},{index:27,name:"Wampler Pinnacle",fullName:"Wampler Pinnacle",category:"distortion",description:"Brown sound high-gain distortion",tags:["wampler","pinnacle","brown-sound","high-gain"],parameters:_,characteristics:{gain:"extreme",tone:"dark",character:["brown-sound","high-gain","smooth","saturated"]}},{index:28,name:"Fortin 33",fullName:"Fortin 33",category:"overdrive",description:"Modern metal overdrive",tags:["fortin","metal","modern","tight"],parameters:_,characteristics:{gain:"high",tone:"bright",character:["tight","modern","metal","articulate"]}},{index:29,name:"Revv G3",fullName:"Revv G3 Purple",category:"distortion",description:"Modern high-gain distortion",tags:["revv","g3","high-gain","modern"],parameters:_,characteristics:{gain:"extreme",tone:"bright",character:["modern","tight","high-gain","aggressive"]}},{index:30,name:"Way Huge Pork Loin",fullName:"Way Huge Pork Loin",category:"overdrive",description:"Vintage-style overdrive",tags:["way-huge","pork-loin","vintage","overdrive"],parameters:_,characteristics:{gain:"medium",tone:"dark",character:["vintage","warm","smooth","thick"]}},{index:31,name:"Darkglass B7K",fullName:"Darkglass B7K Ultra",category:"distortion",description:"Modern bass distortion and preamp",tags:["darkglass","bass","distortion","modern"],parameters:ae,characteristics:{gain:"high",tone:"bright",character:["bass","modern","tight","aggressive"]}},{index:32,name:"Tech 21 SansAmp",fullName:"Tech 21 SansAmp Bass Driver DI",category:"amplifier",description:"Classic bass amp simulation",tags:["tech21","sansamp","bass","di"],parameters:ae,characteristics:{gain:"medium",tone:"neutral",character:["bass","classic","versatile","di"]}},{index:33,name:"Ampeg SVT",fullName:"Ampeg SVT Classic",category:"amplifier",description:"Legendary bass amp tone",tags:["ampeg","svt","bass","classic","vintage"],parameters:ee,characteristics:{gain:"low",tone:"dark",character:["bass","classic","warm","full"]}},{index:34,name:"Virus Distortion",fullName:"Access Virus Hard Distortion",category:"distortion",description:"Digital synth-style distortion",tags:["virus","synth","digital","experimental"],parameters:_,characteristics:{gain:"extreme",tone:"bright",character:["digital","harsh","experimental","synth"]}},{index:35,name:"Filmosound",fullName:"Bell & Howell Filmosound",category:"amplifier",description:"Vintage tube amp from 1940s projectors",tags:["filmosound","vintage","tube","lo-fi"],parameters:ee,characteristics:{gain:"low",tone:"dark",character:["vintage","lo-fi","warm","unique"]}},{index:36,name:"Gibson EH-185",fullName:"Gibson EH-185 Lap Steel Amp",category:"amplifier",description:"Vintage 1940s tube amp",tags:["gibson","vintage","tube","warm"],parameters:ee,characteristics:{gain:"low",tone:"dark",character:["vintage","warm","tube","smooth"]}}];class te{modelIndex;schema;constructor(e){this.modelIndex=e;const a=re[e];this.schema=a?.parameters||{}}getAvailableParameters(){return Object.entries(this.schema).filter(([,e])=>void 0!==e).map(([e,a])=>({key:e,...a,implemented:this.isImplemented(e)}))}getParameter(e){const a=this.schema[e];return a?{...a,implemented:this.isImplemented(e)}:null}mapToCondition(e){return void 0!==e.drive?e.drive/100:void 0!==e.gain?e.gain/100:void 0!==e.tone?e.tone/100:.5}isImplemented(e){return["drive","gain","tone","bass","mid","treble","presence","level","output","dryWet"].includes(e)}getParameterCount(){return Object.keys(this.schema).length}getModelName(){const e=re[this.modelIndex];return e?.name||"Unknown Model"}getModelFullName(){const e=re[this.modelIndex];return e?.fullName||e?.name||"Unknown Model"}getModelCategory(){const e=re[this.modelIndex];return e?.category||"effect"}hasEQ(){return!!(this.schema.bass||this.schema.mid||this.schema.treble)}getDefaultParameters(){const e={};return Object.entries(this.schema).forEach(([a,r])=>{r&&(e[a]=r.default)}),e}}const se=({bpmSync:e,syncDivision:a,onToggleSync:n,onChangeDivision:i})=>{const l=t(e=>e.bpm),c=1===e,d=u.useMemo(()=>c?s(l,a):null,[c,l,a]),m=u.useMemo(()=>{const e={};for(const a of o)(e[a.category]??=[]).push(a);return e},[]);return r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("button",{onClick:()=>n(!c),className:"flex items-center gap-1 px-2.5 py-1 rounded text-xs font-bold uppercase tracking-wide transition-colors "+(c?"bg-emerald-600 text-white":"bg-gray-800 text-gray-500 hover:bg-gray-700"),title:c?"BPM sync ON — click to disable":"Enable BPM sync",children:[r.jsx(E,{size:12}),"Sync"]}),c&&r.jsxs(r.Fragment,{children:[r.jsx("select",{value:a,onChange:e=>i(e.target.value),className:"bg-gray-800 text-gray-200 text-xs rounded px-2 py-1 border border-gray-700 focus:outline-none focus:border-emerald-500",children:Object.entries(m).map(([e,a])=>r.jsx("optgroup",{label:e,children:a.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))},e))}),null!==d&&r.jsx("span",{className:"text-[10px] text-emerald-400 font-mono tabular-nums",children:d<1e3?`${Math.round(d)}ms`:`${(d/1e3).toFixed(2)}s`})]})]})};function oe({color:e,title:a}){return r.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[r.jsx("div",{className:"w-1.5 h-5 rounded-full",style:{backgroundColor:e,boxShadow:`0 0 8px ${e}60`}}),r.jsx("h3",{className:"text-xs font-black text-white/90 uppercase tracking-[0.15em]",children:a})]})}function ne(e,a,r){const t=e.parameters[a];return"number"==typeof t?t:r}function ie(e,a){const t=i(e.parameters),s=l(e.parameters);return r.jsx(se,{bpmSync:t?1:0,syncDivision:s,onToggleSync:e=>a("bpmSync",e?1:0),onChangeDivision:e=>a("syncDivision",e)})}const le=({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"time",.25),o=ne(e,"feedback",.5),l=i(e.parameters),c="PingPongDelay"===e.type;return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#3b82f6",title:c?"Ping Pong Delay":"Delay"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:l?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("time",e),label:"Time",color:"#3b82f6",formatValue:e=>`${Math.round(1e3*e)}ms`})}),r.jsx(n,{value:o,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#3b82f6",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),ie(e,a)]})})},ce=({effect:e,onUpdateWet:a})=>r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#6b7280",title:e.type}),r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:a,label:"Mix",size:"lg",color:"#6b7280",formatValue:e=>`${Math.round(e)}%`})}),r.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Use sliders in the expanded view for this effect type."})]})}),de=["Hyperion","Krajeski","Stilson","Microtracker","Improved","Oberheim"],me=["LP2","LP4","BP2","BP4","HP2","HP4","Notch"],xe=["Slow","Brake","Fast"],ue={Distortion:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"drive",.4);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#ef4444",title:"Distortion"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("drive",e),label:"Drive",size:"lg",color:"#ef4444",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#f97316",formatValue:e=>`${Math.round(e)}%`})]})]})})},Reverb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"decay",1.5),o=ne(e,"preDelay",.01);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#6366f1",title:"Reverb"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:.1,max:10,onChange:e=>a("decay",e),label:"Decay",color:"#6366f1",formatValue:e=>`${e.toFixed(1)}s`}),r.jsx(n,{value:o,min:0,max:.5,onChange:e=>a("preDelay",e),label:"Pre-Delay",color:"#6366f1",formatValue:e=>`${Math.round(1e3*e)}ms`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}%`})]})]})})},Delay:le,FeedbackDelay:le,PingPongDelay:le,Chorus:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",1.5),o=ne(e,"depth",.7),l=ne(e,"delayTime",3.5),c=i(e.parameters);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#ec4899",title:"Chorus"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:c?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}Hz`})}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",size:"sm",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:l,min:2,max:20,onChange:e=>a("delayTime",e),label:"Delay",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}ms`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]}),ie(e,a)]})})},Phaser:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",.5),o=ne(e,"octaves",3),i=ne(e,"baseFrequency",350);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#a855f7",title:"Phaser"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#a855f7",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#a855f7",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:i,min:50,max:1e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#a855f7",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#c084fc",formatValue:e=>`${Math.round(e)}%`})]})]})})},Tremolo:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",10),o=ne(e,"depth",.5);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f97316",title:"Tremolo"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#f97316",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#f97316",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})]})]})})},Vibrato:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",5),o=ne(e,"depth",.1);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#14b8a6",title:"Vibrato"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#14b8a6",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#14b8a6",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#2dd4bf",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoFilter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",1),o=ne(e,"baseFrequency",200),i=ne(e,"octaves",2.6);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#eab308",title:"Auto Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#eab308",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:20,max:2e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#eab308",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:i,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#eab308",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoPanner:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",1),o=ne(e,"depth",1);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#22c55e",title:"Auto Panner"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",color:"#22c55e",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#22c55e",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#4ade80",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoWah:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"baseFrequency",100),o=ne(e,"octaves",6),i=ne(e,"sensitivity",0),l=ne(e,"Q",2);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f43f5e",title:"Auto Wah"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:50,max:500,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:i,min:-40,max:0,onChange:e=>a("sensitivity",e),label:"Sens",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}dB`}),r.jsx(n,{value:l,min:0,max:10,onChange:e=>a("Q",e),label:"Q",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fb7185",formatValue:e=>`${Math.round(e)}%`})})})]})},BitCrusher:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"bits",4);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#84cc16",title:"Bit Crusher"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:1,max:16,onChange:e=>a("bits",Math.round(e)),label:"Bits",size:"lg",color:"#84cc16",formatValue:e=>`${Math.round(e)} bit`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#a3e635",formatValue:e=>`${Math.round(e)}%`})]})]})})},Chebyshev:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"order",50);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f59e0b",title:"Chebyshev Waveshaper"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:1,max:100,onChange:e=>a("order",Math.round(e)),label:"Order",size:"lg",color:"#f59e0b",formatValue:e=>Math.round(e).toString()}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},FrequencyShifter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",0);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#06b6d4",title:"Frequency Shifter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-1e3,max:1e3,onChange:e=>a("frequency",e),label:"Shift",size:"lg",color:"#06b6d4",bipolar:!0,formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#22d3ee",formatValue:e=>`${Math.round(e)}%`})]})]})})},PitchShift:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"pitch",0),o=ne(e,"windowSize",.1),i=ne(e,"feedback",0);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#8b5cf6",title:"Pitch Shift"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-12,max:12,onChange:e=>a("pitch",Math.round(e)),label:"Pitch",color:"#8b5cf6",bipolar:!0,formatValue:e=>`${Math.round(e)>0?"+":""}${Math.round(e)}st`}),r.jsx(n,{value:o,min:.01,max:.5,onChange:e=>a("windowSize",e),label:"Window",color:"#8b5cf6",formatValue:e=>`${Math.round(1e3*e)}ms`}),r.jsx(n,{value:i,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#a78bfa",formatValue:e=>`${Math.round(e)}%`})})})]})},Compressor:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"threshold",-24),o=ne(e,"ratio",12),i=ne(e,"attack",.003),l=ne(e,"release",.25);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#10b981",title:"Compressor"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-100,max:0,onChange:e=>a("threshold",e),label:"Threshold",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`}),r.jsx(n,{value:o,min:1,max:20,onChange:e=>a("ratio",e),label:"Ratio",size:"sm",color:"#10b981",formatValue:e=>`${e.toFixed(1)}:1`}),r.jsx(n,{value:i,min:0,max:1,onChange:e=>a("attack",e),label:"Attack",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`}),r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("release",e),label:"Release",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#34d399",formatValue:e=>`${Math.round(e)}%`})})})]})},EQ3:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"low",0),o=ne(e,"mid",0),i=ne(e,"high",0),l=ne(e,"lowFrequency",400),c=ne(e,"highFrequency",2500);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#3b82f6",title:"3-Band EQ"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-20,max:20,onChange:e=>a("low",e),label:"Low",color:"#ef4444",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),r.jsx(n,{value:o,min:-20,max:20,onChange:e=>a("mid",e),label:"Mid",color:"#eab308",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),r.jsx(n,{value:i,min:-20,max:20,onChange:e=>a("high",e),label:"High",color:"#3b82f6",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`})]})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#6b7280",title:"Crossover"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:l,min:20,max:1e3,onChange:e=>a("lowFrequency",e),label:"Low Freq",size:"sm",color:"#6b7280",formatValue:e=>`${Math.round(e)}Hz`}),r.jsx(n,{value:c,min:1e3,max:1e4,onChange:e=>a("highFrequency",e),label:"High Freq",size:"sm",color:"#6b7280",formatValue:e=>`${(e/1e3).toFixed(1)}kHz`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"sm",color:"#9ca3af",formatValue:e=>`${Math.round(e)}%`})]})]})]})},Filter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"frequency",350),o=ne(e,"Q",1),i=ne(e,"gain",0);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f97316",title:"Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:20,max:2e4,onChange:e=>a("frequency",e),label:"Frequency",color:"#f97316",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}kHz`:`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:.001,max:100,onChange:e=>a("Q",e),label:"Q",color:"#f97316",formatValue:e=>e.toFixed(1)}),r.jsx(n,{value:i,min:-40,max:40,onChange:e=>a("gain",e),label:"Gain",color:"#f97316",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})})})]})},JCReverb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"roomSize",.5);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#6366f1",title:"JC Reverb"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("roomSize",e),label:"Room Size",size:"lg",color:"#6366f1",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#818cf8",formatValue:e=>`${Math.round(e)}%`})]})]})})},StereoWidener:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"width",.5);return r.jsx("div",{className:"space-y-4",children:r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#ec4899",title:"Stereo Widener"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("width",e),label:"Width",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",size:"lg",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]})]})})},SpaceEcho:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"mode",4),o=ne(e,"rate",300),l=ne(e,"intensity",.5),c=ne(e,"echoVolume",.8),d=ne(e,"reverbVolume",.3),m=ne(e,"bass",0),x=ne(e,"treble",0),u=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#6366f1",title:"Echo"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:1,max:12,onChange:e=>a("mode",Math.round(e)),label:"Mode",color:"#6366f1",formatValue:e=>`${Math.round(e)}`}),r.jsx("div",{className:u?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:o,min:50,max:1e3,onChange:e=>a("rate",e),label:"Rate",color:"#6366f1",formatValue:e=>`${Math.round(e)}ms`})}),r.jsx(n,{value:l,min:0,max:1.2,onChange:e=>a("intensity",e),label:"Intensity",color:"#6366f1",formatValue:e=>`${(100*e).toFixed(0)}%`})]}),ie(e,a)]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#818cf8",title:"Levels & EQ"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("echoVolume",e),label:"Echo Vol",color:"#818cf8",formatValue:e=>`${(100*e).toFixed(0)}%`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("reverbVolume",e),label:"Reverb Vol",color:"#818cf8",formatValue:e=>`${(100*e).toFixed(0)}%`}),r.jsx(n,{value:m,min:-20,max:20,onChange:e=>a("bass",e),label:"Bass",color:"#818cf8",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`}),r.jsx(n,{value:x,min:-20,max:20,onChange:e=>a("treble",e),label:"Treble",color:"#818cf8",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#a5b4fc",formatValue:e=>`${Math.round(e)}%`})})})]})},BiPhase:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"routing",0),o=ne(e,"rateA",.5),l=ne(e,"depthA",.6),c=ne(e,"rateB",4),d=ne(e,"depthB",.4),m=ne(e,"feedback",.3),x=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#a855f7",title:"Routing"}),r.jsxs("div",{className:"flex gap-2 justify-center mb-2",children:[r.jsx("button",{onClick:()=>a("routing",0),className:"px-4 py-1.5 text-xs font-medium rounded transition-colors "+(0===Math.round(s)?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:"Parallel"}),r.jsx("button",{onClick:()=>a("routing",1),className:"px-4 py-1.5 text-xs font-medium rounded transition-colors "+(1===Math.round(s)?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:"Series"})]})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#a855f7",title:"Phase A"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:x?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:o,min:.1,max:10,onChange:e=>a("rateA",e),label:"Rate A",color:"#a855f7",formatValue:e=>`${e.toFixed(1)}Hz`})}),r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("depthA",e),label:"Depth A",color:"#a855f7",formatValue:e=>`${(100*e).toFixed(0)}%`})]}),ie(e,a)]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#c084fc",title:"Phase B"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:c,min:.1,max:10,onChange:e=>a("rateB",e),label:"Rate B",color:"#c084fc",formatValue:e=>`${e.toFixed(1)}Hz`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("depthB",e),label:"Depth B",color:"#c084fc",formatValue:e=>`${(100*e).toFixed(0)}%`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:m,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#a855f7",formatValue:e=>`${(100*e).toFixed(0)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#d8b4fe",formatValue:e=>`${Math.round(e)}%`})]})})]})},DubFilter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"cutoff",20),o=ne(e,"resonance",10),i=ne(e,"gain",1);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#22c55e",title:"Dub Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:20,max:1e4,onChange:e=>a("cutoff",e),label:"Cutoff",color:"#22c55e",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:0,max:100,onChange:e=>a("resonance",e),label:"Resonance",color:"#22c55e",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:i,min:.5,max:2,onChange:e=>a("gain",e),label:"Drive",color:"#22c55e",formatValue:e=>`${e.toFixed(2)}x`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#4ade80",formatValue:e=>`${Math.round(e)}%`})})})]})},TapeSaturation:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"drive",50),o=ne(e,"tone",12e3);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#ef4444",title:"Tape Saturation"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:100,onChange:e=>a("drive",e),label:"Drive",color:"#ef4444",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:o,min:2e3,max:2e4,onChange:e=>a("tone",e),label:"Tone",color:"#ef4444",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#f87171",formatValue:e=>`${Math.round(e)}%`})})})]})},SidechainCompressor:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"threshold",-24),o=ne(e,"ratio",4),i=ne(e,"attack",.003),l=ne(e,"release",.25),c=ne(e,"knee",6),d=ne(e,"sidechainGain",100);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#10b981",title:"Compressor"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:-60,max:0,onChange:e=>a("threshold",e),label:"Threshold",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`}),r.jsx(n,{value:o,min:1,max:20,onChange:e=>a("ratio",e),label:"Ratio",color:"#10b981",formatValue:e=>`${e.toFixed(1)}:1`}),r.jsx(n,{value:c,min:0,max:40,onChange:e=>a("knee",e),label:"Knee",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`})]})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#34d399",title:"Envelope & Sidechain"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:i,min:.001,max:.5,onChange:e=>a("attack",e),label:"Attack",color:"#34d399",formatValue:e=>e>=.1?`${(1e3*e).toFixed(0)}ms`:`${(1e3*e).toFixed(1)}ms`}),r.jsx(n,{value:l,min:.01,max:1,onChange:e=>a("release",e),label:"Release",color:"#34d399",formatValue:e=>`${(1e3*e).toFixed(0)}ms`}),r.jsx(n,{value:d,min:0,max:100,onChange:e=>a("sidechainGain",e),label:"SC Gain",color:"#34d399",formatValue:e=>`${Math.round(e)}%`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#6ee7b7",formatValue:e=>`${Math.round(e)}%`})})})]})},SpaceyDelayer:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"firstTap",250),o=ne(e,"tapSize",150),l=ne(e,"feedback",40),c=ne(e,"multiTap",1),d=ne(e,"tapeFilter",0),m=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#8b5cf6",title:"Spacey Delayer"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:m?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:s,min:10,max:2e3,onChange:e=>a("firstTap",e),label:"First Tap",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}ms`})}),r.jsx(n,{value:o,min:10,max:1e3,onChange:e=>a("tapSize",e),label:"Tap Size",color:"#a78bfa",formatValue:e=>`${Math.round(e)}ms`}),r.jsx(n,{value:l,min:0,max:95,onChange:e=>a("feedback",e),label:"Feedback",color:"#7c3aed",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),ie(e,a)]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#a78bfa",title:"Options"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>a("multiTap",c?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(c?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Multi-Tap ",c?"ON":"OFF"]}),r.jsxs("button",{onClick:()=>a("tapeFilter",d?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(d?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Tape Filter ",d?"ON":"OFF"]})]})]})]})},RETapeEcho:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"mode",3),o=ne(e,"repeatRate",.5),l=ne(e,"intensity",.5),c=ne(e,"echoVolume",.8),d=ne(e,"wow",0),m=ne(e,"flutter",0),x=ne(e,"dirt",0),u=ne(e,"inputBleed",0),b=ne(e,"loopAmount",0),h=ne(e,"playheadFilter",1),p=i(e.parameters);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#dc2626",title:"RE Tape Echo"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx("div",{className:p?"opacity-40 pointer-events-none":"",children:r.jsx(n,{value:100*o,min:0,max:100,onChange:e=>a("repeatRate",e/100),label:"Rate",color:"#dc2626",formatValue:e=>`${Math.round(e)}%`})}),r.jsx(n,{value:100*l,min:0,max:100,onChange:e=>a("intensity",e/100),label:"Intensity",color:"#ef4444",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*c,min:0,max:100,onChange:e=>a("echoVolume",e/100),label:"Echo Vol",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),ie(e,a)]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f97316",title:"Tape Character"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:100*d,min:0,max:100,onChange:e=>a("wow",e/100),label:"Wow",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*m,min:0,max:100,onChange:e=>a("flutter",e/100),label:"Flutter",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*x,min:0,max:100,onChange:e=>a("dirt",e/100),label:"Dirt",color:"#ea580c",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:100*b,min:0,max:100,onChange:e=>a("loopAmount",e/100),label:"Tape Loop",color:"#a16207",formatValue:e=>`${Math.round(e)}%`})]})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#b91c1c",title:"Mode & Options"}),r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Echo Mode"}),r.jsx("div",{className:"grid grid-cols-6 gap-1",children:["Head 1","Head 2","Both","H1+FB","H2+FB","Both+FB"].map((e,t)=>r.jsx("button",{onClick:()=>a("mode",t),className:"px-2 py-1.5 rounded text-xs font-medium transition-colors "+(s===t?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>a("playheadFilter",h?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(h?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Head EQ ",h?"ON":"OFF"]}),r.jsxs("button",{onClick:()=>a("inputBleed",u?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(u?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Bleed ",u?"ON":"OFF"]})]})]})]})},MoogFilter:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"cutoff",1e3),o=ne(e,"resonance",10),i=ne(e,"drive",1),l=ne(e,"model",0),c=ne(e,"filterMode",1);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f59e0b",title:"Model"}),r.jsx("div",{className:"grid grid-cols-3 gap-1 mb-3",children:de.map((e,t)=>r.jsx("button",{onClick:()=>a("model",t),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(Math.round(l)===t?"bg-amber-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))}),0===Math.round(l)&&r.jsxs(r.Fragment,{children:[r.jsx(oe,{color:"#f59e0b",title:"Filter Mode (Hyperion)"}),r.jsx("div",{className:"grid grid-cols-4 gap-1",children:me.map((e,t)=>r.jsx("button",{onClick:()=>a("filterMode",t),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(Math.round(c)===t?"bg-amber-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))})]})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f59e0b",title:"Filter"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:20,max:2e4,onChange:e=>a("cutoff",e),label:"Cutoff",color:"#f59e0b",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`}),r.jsx(n,{value:o,min:0,max:100,onChange:e=>a("resonance",e),label:"Resonance",color:"#f59e0b",formatValue:e=>`${Math.round(e)}%`}),r.jsx(n,{value:i,min:.1,max:4,onChange:e=>a("drive",e),label:"Drive",color:"#f59e0b",formatValue:e=>`${e.toFixed(1)}x`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Mix",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})})})]})},MVerb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"damping",.5),o=ne(e,"density",.5),i=ne(e,"bandwidth",.5),l=ne(e,"decay",.7),c=ne(e,"predelay",0),d=ne(e,"size",.8),m=ne(e,"gain",1),x=ne(e,"mix",.4),u=ne(e,"earlyMix",.5);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#7c3aed",title:"Reverb"}),r.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("decay",e),label:"Decay",color:"#7c3aed",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("size",e),label:"Size",color:"#7c3aed",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("damping",e),label:"Damp",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("density",e),label:"Density",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#a78bfa",title:"Character"}),r.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[r.jsx(n,{value:i,min:0,max:1,onChange:e=>a("bandwidth",e),label:"Bandwidth",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("predelay",e),label:"Pre-Delay",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:u,min:0,max:1,onChange:e=>a("earlyMix",e),label:"Early Mix",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:m,min:0,max:1,onChange:e=>a("gain",e),label:"Gain",color:"#c4b5fd",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:x,min:0,max:1,onChange:e=>a("mix",e),label:"Int. Mix",color:"#c4b5fd",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Wet",color:"#ddd6fe",formatValue:e=>`${Math.round(e)}%`})]})})]})},Leslie:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"speed",0),o=ne(e,"hornRate",6.8),i=ne(e,"drumRate",5.9),l=ne(e,"hornDepth",.7),c=ne(e,"drumDepth",.5),d=ne(e,"doppler",.5),m=ne(e,"width",.8),x=ne(e,"acceleration",.5),u=s<.25?0:s>.75?2:1;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#f97316",title:"Speed"}),r.jsx("div",{className:"grid grid-cols-3 gap-1 mb-3",children:xe.map((e,t)=>r.jsx("button",{onClick:()=>a("speed",0===t?0:1===t?.5:1),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(u===t?"bg-orange-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},t))}),r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:x,min:0,max:1,onChange:e=>a("acceleration",e),label:"Accel",color:"#f97316",formatValue:e=>`${Math.round(100*e)}%`})})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#fb923c",title:"Rotors"}),r.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[r.jsx(n,{value:o,min:.1,max:10,onChange:e=>a("hornRate",e),label:"Horn Hz",color:"#fb923c",formatValue:e=>`${e.toFixed(1)}`}),r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("hornDepth",e),label:"Horn Dep",color:"#fb923c",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:i,min:.1,max:8,onChange:e=>a("drumRate",e),label:"Drum Hz",color:"#fdba74",formatValue:e=>`${e.toFixed(1)}`}),r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("drumDepth",e),label:"Drum Dep",color:"#fdba74",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("doppler",e),label:"Doppler",color:"#fed7aa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:m,min:0,max:1,onChange:e=>a("width",e),label:"Width",color:"#fed7aa",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Wet",color:"#fef3c7",formatValue:e=>`${Math.round(e)}%`})]})})]})},SpringReverb:({effect:e,onUpdateParameter:a,onUpdateWet:t})=>{const s=ne(e,"decay",.6),o=ne(e,"damping",.4),i=ne(e,"tension",.5),l=ne(e,"mix",.35),c=ne(e,"drip",.5),d=ne(e,"diffusion",.7);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#059669",title:"Spring Tank"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:s,min:0,max:1,onChange:e=>a("decay",e),label:"Decay",color:"#059669",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:o,min:0,max:1,onChange:e=>a("damping",e),label:"Damp",color:"#059669",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:i,min:0,max:1,onChange:e=>a("tension",e),label:"Tension",color:"#10b981",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(oe,{color:"#34d399",title:"Character"}),r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:c,min:0,max:1,onChange:e=>a("drip",e),label:"Drip",color:"#34d399",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:d,min:0,max:1,onChange:e=>a("diffusion",e),label:"Diffusion",color:"#34d399",formatValue:e=>`${Math.round(100*e)}%`})]})]}),r.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:r.jsxs("div",{className:"flex justify-around items-end",children:[r.jsx(n,{value:l,min:0,max:1,onChange:e=>a("mix",e),label:"Int. Mix",color:"#6ee7b7",formatValue:e=>`${Math.round(100*e)}%`}),r.jsx(n,{value:e.wet,min:0,max:100,onChange:t,label:"Wet",color:"#a7f3d0",formatValue:e=>`${Math.round(e)}%`})]})})]})},WAMBigMuff:ce,WAMTS9:ce,WAMDistoMachine:ce,WAMQuadraFuzz:ce,WAMVoxAmp:ce,WAMStonePhaser:ce,WAMPingPongDelay:ce,WAMFaustDelay:ce,WAMPitchShifter:ce,WAMGraphicEQ:ce,WAMPedalboard:ce};const be={Distortion:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},Reverb:{bg:"#0e0a20",bgEnd:"#080618",accent:"#6366f1",border:"#1a1430"},JCReverb:{bg:"#0e0a20",bgEnd:"#080618",accent:"#6366f1",border:"#1a1430"},Delay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},FeedbackDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},PingPongDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},Chorus:{bg:"#200a18",bgEnd:"#180614",accent:"#ec4899",border:"#301428"},Phaser:{bg:"#180a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"},Tremolo:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},Vibrato:{bg:"#081a18",bgEnd:"#041210",accent:"#14b8a6",border:"#0a2a28"},Compressor:{bg:"#081a0a",bgEnd:"#041204",accent:"#10b981",border:"#0a2a0e"},EQ3:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},Filter:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},StereoWidener:{bg:"#200a18",bgEnd:"#180614",accent:"#ec4899",border:"#301428"},AutoFilter:{bg:"#1a1808",bgEnd:"#121004",accent:"#eab308",border:"#2a280a"},AutoPanner:{bg:"#081a0a",bgEnd:"#041204",accent:"#22c55e",border:"#0a2a0e"},AutoWah:{bg:"#200a10",bgEnd:"#18060a",accent:"#f43f5e",border:"#301418"},BitCrusher:{bg:"#141a08",bgEnd:"#0e1204",accent:"#84cc16",border:"#1e2a0a"},Chebyshev:{bg:"#1a1508",bgEnd:"#120e04",accent:"#f59e0b",border:"#2a2008"},FrequencyShifter:{bg:"#081820",bgEnd:"#041018",accent:"#06b6d4",border:"#0a2830"},PitchShift:{bg:"#100a20",bgEnd:"#0a0618",accent:"#8b5cf6",border:"#1a1430"},SpaceyDelayer:{bg:"#100a20",bgEnd:"#0a0618",accent:"#8b5cf6",border:"#1a1430"},SpaceEcho:{bg:"#0e0a20",bgEnd:"#080618",accent:"#6366f1",border:"#1a1430"},BiPhase:{bg:"#180a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"},DubFilter:{bg:"#081a0a",bgEnd:"#041204",accent:"#22c55e",border:"#0a2a0e"},TapeSaturation:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},SidechainCompressor:{bg:"#081a10",bgEnd:"#04120a",accent:"#10b981",border:"#0a2a18"},RETapeEcho:{bg:"#2a0808",bgEnd:"#1a0404",accent:"#dc2626",border:"#3a1010"},MoogFilter:{bg:"#1a1508",bgEnd:"#120e04",accent:"#f59e0b",border:"#2a2008"},MVerb:{bg:"#140a22",bgEnd:"#0c061a",accent:"#7c3aed",border:"#201432"},Leslie:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},SpringReverb:{bg:"#081a0a",bgEnd:"#041204",accent:"#059669",border:"#0a2a0e"},WAMBigMuff:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},WAMTS9:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},WAMDistoMachine:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#dc2626",border:"#3a1a0a"},WAMQuadraFuzz:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},WAMVoxAmp:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},WAMStonePhaser:{bg:"#180a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"},WAMPingPongDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},WAMFaustDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},WAMPitchShifter:{bg:"#100a20",bgEnd:"#0a0618",accent:"#8b5cf6",border:"#1a1430"},WAMGraphicEQ:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},WAMPedalboard:{bg:"#081a18",bgEnd:"#041210",accent:"#14b8a6",border:"#0a2a28"}},he={bg:"#181818",bgEnd:"#101010",accent:"#888",border:"#282828"},pe=["0 6px 16px rgba(0,0,0,0.5)","0 2px 4px rgba(0,0,0,0.7)","inset 0 1px 0 rgba(255,255,255,0.06)","inset 0 -1px 0 rgba(0,0,0,0.4)"].join(", "),ge=({effectType:e,...a})=>{const t=ue[e]||ce;return r.jsx(t,{...a})},fe=({effect:e,onUpdateParameter:a,onUpdateWet:t,onClose:s})=>{const o={Distortion:r.jsx(q,{size:18,className:"text-white"}),Reverb:r.jsx(T,{size:18,className:"text-white"}),JCReverb:r.jsx(T,{size:18,className:"text-white"}),Delay:r.jsx(E,{size:18,className:"text-white"}),FeedbackDelay:r.jsx(E,{size:18,className:"text-white"}),PingPongDelay:r.jsx(E,{size:18,className:"text-white"}),Chorus:r.jsx(R,{size:18,className:"text-white"}),Phaser:r.jsx(R,{size:18,className:"text-white"}),Tremolo:r.jsx(O,{size:18,className:"text-white"}),Vibrato:r.jsx(O,{size:18,className:"text-white"}),Compressor:r.jsx(U,{size:18,className:"text-white"}),EQ3:r.jsx(V,{size:18,className:"text-white"}),Filter:r.jsx(V,{size:18,className:"text-white"}),StereoWidener:r.jsx(H,{size:18,className:"text-white"}),SpaceyDelayer:r.jsx(E,{size:18,className:"text-white"}),SpaceEcho:r.jsx(T,{size:18,className:"text-white"}),BiPhase:r.jsx(R,{size:18,className:"text-white"}),DubFilter:r.jsx(V,{size:18,className:"text-white"}),TapeSaturation:r.jsx(q,{size:18,className:"text-white"}),SidechainCompressor:r.jsx(U,{size:18,className:"text-white"}),RETapeEcho:r.jsx(B,{size:18,className:"text-white"}),MoogFilter:r.jsx(V,{size:18,className:"text-white"}),MVerb:r.jsx(T,{size:18,className:"text-white"}),Leslie:r.jsx(R,{size:18,className:"text-white"}),SpringReverb:r.jsx(T,{size:18,className:"text-white"}),WAMBigMuff:r.jsx(A,{size:18,className:"text-white"}),WAMTS9:r.jsx(A,{size:18,className:"text-white"}),WAMDistoMachine:r.jsx(A,{size:18,className:"text-white"}),WAMQuadraFuzz:r.jsx(A,{size:18,className:"text-white"}),WAMVoxAmp:r.jsx(A,{size:18,className:"text-white"}),WAMStonePhaser:r.jsx(A,{size:18,className:"text-white"}),WAMPingPongDelay:r.jsx(A,{size:18,className:"text-white"}),WAMFaustDelay:r.jsx(A,{size:18,className:"text-white"}),WAMPitchShifter:r.jsx(A,{size:18,className:"text-white"}),WAMGraphicEQ:r.jsx(A,{size:18,className:"text-white"}),WAMPedalboard:r.jsx(A,{size:18,className:"text-white"})},n=be[e.type]||he,i=o[e.type]||r.jsx(W,{size:18,className:"text-white"});return r.jsxs("div",{className:"synth-editor-container rounded-xl overflow-hidden select-none",style:{background:`linear-gradient(170deg, ${n.bg} 0%, ${n.bgEnd} 100%)`,border:`2px solid ${n.border}`,boxShadow:pe},children:[r.jsxs("div",{className:"px-5 py-4 flex items-center justify-between",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%)",borderBottom:`1px solid ${n.border}`},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:`linear-gradient(135deg, ${n.accent}40, ${n.accent}20)`,border:`1px solid ${n.accent}30`,boxShadow:`0 0 12px ${n.accent}15`},children:i}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-base font-black text-white tracking-wide",children:e.neuralModelName||e.type}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[r.jsx("div",{style:{width:7,height:7,borderRadius:"50%",backgroundColor:e.enabled?"#22ff44":"#1a2a1a",boxShadow:e.enabled?"0 0 4px 1px rgba(34,255,68,0.5), 0 0 10px 3px rgba(34,255,68,0.15)":"inset 0 1px 2px rgba(0,0,0,0.5)",transition:"all 0.3s ease"}}),r.jsxs("p",{className:"text-[11px] text-gray-400 font-medium",children:[e.enabled?"Active":"Bypassed"," | Mix: ",e.wet,"%"]})]})]})]}),s&&r.jsx("button",{onClick:s,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/5 transition-colors",children:r.jsx(P,{size:16})})]}),r.jsx("div",{className:"p-4",children:r.jsx(ge,{effectType:e.type,effect:e,onUpdateParameter:a,onUpdateWet:t})})]})},ye=({effect:e,onUpdateParameter:a,onUpdateWet:t,onClose:s})=>{u.useMemo(()=>{var a;return"GenericEffectEditor"!==(a=e.type,ue[a]||ce).name},[e.type]);const o=u.useMemo(()=>{if("neural"!==e.category||void 0===e.neuralModelIndex)return null;return new te(e.neuralModelIndex).getAvailableParameters().map(e=>({name:e.name,key:e.key,min:0,max:100,step:1,unit:e.unit||"%",defaultValue:e.default,implemented:e.implemented}))},[e.category,e.neuralModelIndex]);return o?r.jsx(Ne,{effect:e,parameters:o,onUpdateParameter:a,onUpdateWet:t,onClose:s}):r.jsx(fe,{effect:e,onUpdateParameter:a,onUpdateWet:t,onClose:s})};function je({color:e,title:a}){return r.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[r.jsx("div",{className:"w-1.5 h-5 rounded-full",style:{backgroundColor:e,boxShadow:`0 0 8px ${e}60`}}),r.jsx("h3",{className:"text-xs font-black text-white/90 uppercase tracking-[0.15em]",children:a})]})}const ve=["0 6px 16px rgba(0,0,0,0.5)","0 2px 4px rgba(0,0,0,0.7)","inset 0 1px 0 rgba(255,255,255,0.06)","inset 0 -1px 0 rgba(0,0,0,0.4)"].join(", "),Ne=({effect:e,parameters:a,onUpdateParameter:t,onUpdateWet:s,onClose:o})=>{const i=a=>{const r=e.parameters[a.key]??a.defaultValue;return"number"==typeof r?r:a.defaultValue},l=a.filter(e=>!1!==e.implemented),c=a.filter(e=>!1===e.implemented);return r.jsxs("div",{className:"synth-editor-container rounded-xl overflow-hidden select-none",style:{background:"linear-gradient(170deg, #1a0a20 0%, #100618 100%)",border:"2px solid #281430",boxShadow:ve},children:[r.jsxs("div",{className:"px-5 py-4 flex items-center justify-between",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%)",borderBottom:"1px solid #281430"},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:"linear-gradient(135deg, rgba(168,85,247,0.25), rgba(236,72,153,0.15))",border:"1px solid rgba(168,85,247,0.2)",boxShadow:"0 0 12px rgba(168,85,247,0.1)"},children:r.jsx(D,{size:18,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-base font-black text-white tracking-wide",children:e.type}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[r.jsx("div",{style:{width:7,height:7,borderRadius:"50%",backgroundColor:e.enabled?"#c084fc":"#1a0a20",boxShadow:e.enabled?"0 0 4px 1px rgba(192,132,252,0.5), 0 0 10px 3px rgba(192,132,252,0.15)":"inset 0 1px 2px rgba(0,0,0,0.5)",transition:"all 0.3s ease"}}),r.jsxs("p",{className:"text-[11px] text-gray-400 font-medium",children:["Neural Effect | ",e.enabled?"Active":"Bypassed"]})]})]})]}),o&&r.jsx("button",{onClick:o,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/5 transition-colors",children:r.jsx(P,{size:16})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[l.length>0&&r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(je,{color:"#a855f7",title:"Parameters"}),r.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:l.map(e=>r.jsx(n,{value:i(e),min:e.min,max:e.max,onChange:a=>t(e.key,a),label:e.name,size:"sm",color:"#a855f7",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),c.length>0&&r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm opacity-50",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(I,{size:14,className:"text-yellow-500"}),r.jsx("h3",{className:"text-[11px] font-black text-yellow-500/80 uppercase tracking-[0.15em]",children:"Coming Soon"})]}),r.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:c.map(e=>r.jsx(n,{value:i(e),min:e.min,max:e.max,onChange:()=>{},label:e.name,size:"sm",color:"#6b7280",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),r.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[r.jsx(je,{color:"#ec4899",title:"Output"}),r.jsx("div",{className:"flex justify-center",children:r.jsx(n,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(e)}%`})})]}),r.jsx("div",{className:"rounded-lg p-3 border border-white/[0.04] bg-black/20",children:r.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Neural effects use machine learning models for authentic amp/pedal emulation. Changes are applied in real-time."})})]})]})},ke=[{category:"tonejs",type:"Compressor",label:"Compressor",group:"Dynamics",description:"Dynamic range compression with threshold, ratio, attack, and release"},{category:"tonejs",type:"EQ3",label:"3-Band EQ",group:"Dynamics",description:"Three-band equalizer with low, mid, and high frequency control"},{category:"tonejs",type:"Distortion",label:"Distortion",group:"Distortion",description:"Waveshaping distortion with drive control"},{category:"tonejs",type:"BitCrusher",label:"Bit Crusher",group:"Distortion",description:"Digital bit reduction for lo-fi effects"},{category:"tonejs",type:"Chebyshev",label:"Chebyshev",group:"Distortion",description:"Harmonic waveshaper distortion"},{category:"tonejs",type:"Reverb",label:"Reverb",group:"Reverb & Delay",description:"Convolution reverb with decay and pre-delay"},{category:"tonejs",type:"JCReverb",label:"JC Reverb",group:"Reverb & Delay",description:"Feedback comb filter reverb"},{category:"tonejs",type:"Delay",label:"Delay",group:"Reverb & Delay",description:"Simple delay with time and feedback"},{category:"tonejs",type:"FeedbackDelay",label:"Feedback Delay",group:"Reverb & Delay",description:"Delay with enhanced feedback control"},{category:"tonejs",type:"PingPongDelay",label:"Ping Pong Delay",group:"Reverb & Delay",description:"Stereo delay that bounces between left and right"},{category:"tonejs",type:"SpaceEcho",label:"Space Echo",group:"Reverb & Delay",description:"Roland RE-201 emulation with 3 heads and spring reverb"},{category:"tonejs",type:"SpaceyDelayer",label:"Spacey Delayer",group:"Reverb & Delay",description:"Multitap tape delay with configurable tap spacing (WASM)"},{category:"tonejs",type:"RETapeEcho",label:"RE Tape Echo",group:"Reverb & Delay",description:"Roland RE-150/201 tape echo with wow, flutter, and tape saturation (WASM)"},{category:"tonejs",type:"BiPhase",label:"Bi-Phase",group:"Modulation",description:"Dual-stage phaser with series/parallel routing"},{category:"tonejs",type:"Chorus",label:"Chorus",group:"Modulation",description:"Modulated delay for thickening sounds"},{category:"tonejs",type:"Phaser",label:"Phaser",group:"Modulation",description:"Sweeping notch filter effect"},{category:"tonejs",type:"Tremolo",label:"Tremolo",group:"Modulation",description:"Amplitude modulation for rhythmic pulsing"},{category:"tonejs",type:"Vibrato",label:"Vibrato",group:"Modulation",description:"Pitch modulation for warbling effects"},{category:"tonejs",type:"AutoPanner",label:"Auto Panner",group:"Modulation",description:"Automatic stereo panning modulation"},{category:"tonejs",type:"Filter",label:"Filter",group:"Filter",description:"Resonant filter with multiple types"},{category:"tonejs",type:"DubFilter",label:"Dub Filter",group:"Filter",description:"King Tubby-style resonant high-pass filter for dramatic sweeps"},{category:"tonejs",type:"AutoFilter",label:"Auto Filter",group:"Filter",description:"LFO-modulated filter for rhythmic sweeps"},{category:"tonejs",type:"AutoWah",label:"Auto Wah",group:"Filter",description:"Envelope-following wah effect"},{category:"wasm",type:"MoogFilter",label:"Moog Filter",group:"Filter",description:"6 analog-modeled Moog ladder filters (Hyperion, Krajeski, Stilson, Microtracker, Improved, Oberheim) via WASM"},{category:"wasm",type:"MVerb",label:"MVerb Plate",group:"Reverb & Delay",description:"MVerb plate reverb — lush algorithmic reverb with damping, density, and early/late reflections (WASM, GPL v3)"},{category:"wasm",type:"Leslie",label:"Leslie Speaker",group:"Modulation",description:"Rotary speaker cabinet — crossover, dual-rotor AM/doppler, speed ramping between chorale and tremolo (WASM)"},{category:"wasm",type:"SpringReverb",label:"Spring Reverb",group:"Reverb & Delay",description:"Classic dub spring tank — allpass diffusion, comb bank, metallic drip transients, tension control (WASM)"},{category:"tonejs",type:"PitchShift",label:"Pitch Shift",group:"Pitch",description:"Transpose audio up or down by semitones"},{category:"tonejs",type:"FrequencyShifter",label:"Frequency Shifter",group:"Pitch",description:"Ring modulation-style frequency shifting"},{category:"tonejs",type:"StereoWidener",label:"Stereo Widener",group:"Spatial",description:"Enhance stereo image width"},{category:"wam",type:"WAMBigMuff",label:"Big Muff (WAM)",group:"Distortion",description:"Electro-Harmonix Big Muff Pi fuzz (WAM 2.0)"},{category:"wam",type:"WAMTS9",label:"TS-9 Overdrive (WAM)",group:"Distortion",description:"Ibanez Tube Screamer overdrive (WAM 2.0, Faust DSP)"},{category:"wam",type:"WAMQuadraFuzz",label:"QuadraFuzz (WAM)",group:"Distortion",description:"4-band multiband distortion/fuzz (WAM 2.0)"},{category:"wam",type:"WAMDistoMachine",label:"Disto Machine (WAM)",group:"Amp Simulator",description:"Multi-mode distortion with cabinet sim (WAM 2.0)"},{category:"wam",type:"WAMVoxAmp",label:"Vox Amp 30 (WAM)",group:"Amp Simulator",description:"1960s guitar amp simulator with cabinet (WAM 2.0)"},{category:"wam",type:"WAMStonePhaser",label:"Stone Phaser (WAM)",group:"Modulation",description:"Stereo phaser effect (WAM 2.0, Faust DSP)"},{category:"wam",type:"WAMPingPongDelay",label:"Ping Pong Delay (WAM)",group:"Reverb & Delay",description:"Stereo ping-pong delay (WAM 2.0)"},{category:"wam",type:"WAMFaustDelay",label:"Faust Delay (WAM)",group:"Reverb & Delay",description:"Ping-pong delay powered by Faust DSP (WAM 2.0)"},{category:"wam",type:"WAMPitchShifter",label:"Pitch Shifter (WAM)",group:"Pitch",description:"Csound-powered pitch shifter (WAM 2.0)"},{category:"wam",type:"WAMGraphicEQ",label:"Graphic EQ (WAM)",group:"Dynamics",description:"Multi-band graphic equalizer (WAM 2.0)"},{category:"wam",type:"WAMPedalboard",label:"Pedalboard (WAM)",group:"Multi-FX",description:"Drag-and-drop guitar pedalboard (WAM 2.0)"},...re.map(e=>({category:"neural",neuralModelIndex:e.index,label:e.name,group:"overdrive"===e.category?"Neural Overdrive":"distortion"===e.category?"Neural Distortion":"amplifier"===e.category?"Neural Amp":"Neural Effect",description:`${e.fullName} - ${e.description}`}))];function we(){const e={};return ke.forEach(a=>{e[a.group]||(e[a.group]=[]),e[a.group].push(a)}),e}const Me="master-fx-user-presets",Ce=({isOpen:t,onClose:s})=>{const[o,n]=u.useState(!1),[i,l]=u.useState(!1),[m,x]=u.useState(""),[w,M]=u.useState(null),[z,V]=u.useState(""),{masterEffects:F,addMasterEffectConfig:E,removeMasterEffect:W,updateMasterEffect:T,reorderMasterEffects:R,setMasterEffects:B}=e(),U=h(p(k),p(N,{coordinateGetter:v})),q=u.useCallback(()=>{try{const e=localStorage.getItem(Me);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),H=u.useCallback(()=>{if(!m.trim())return;const e=q();e.push({name:m.trim(),effects:F.map(e=>({...e}))}),localStorage.setItem(Me,JSON.stringify(e)),x(""),l(!1)},[m,F,q]),O=u.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));B(a),n(!1)},[B]),J=u.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));B(a),n(!1)},[B]),K=u.useCallback(e=>{const a=q().filter(a=>a.name!==e);localStorage.setItem(Me,JSON.stringify(a))},[q]),X=F.filter(e=>"neural"===e.category).length,Y=u.useCallback(e=>{if("neural"===e.category&&X>=3){if(!confirm("⚠️ Performance Warning\n\nYou are adding a 4th neural effect to the master chain. Multiple neural effects can cause high CPU usage and audio glitches.\n\nConsider using Tone.js effects or reducing the neural effect count.\n\nContinue anyway?"))return}const a={id:`master-fx-${Date.now()}`,category:e.category,type:e.type||"Distortion",enabled:!0,wet:100,parameters:{},neuralModelIndex:e.neuralModelIndex,neuralModelName:"neural"===e.category?e.label:void 0};if("neural"===e.category&&void 0!==e.neuralModelIndex){const r=re[e.neuralModelIndex];r?.parameters&&Object.entries(r.parameters).forEach(([e,r])=>{r&&(a.parameters[e]=r.default)})}E(a)},[X,E]),Z=q(),_=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),ee=we(),ae=u.useMemo(()=>{if(!z.trim())return ee;const e=z.toLowerCase(),a={};for(const[r,t]of Object.entries(ee)){const s=t.filter(a=>a.label.toLowerCase().includes(e));s.length>0&&(a[r]=s)}return a},[ee,z]);return t?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:e=>{e.target===e.currentTarget&&s()},children:r.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1200px] flex flex-col overflow-hidden animate-scale-in",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(C,{size:20,className:"text-accent-primary"}),r.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Master Effects"}),r.jsxs("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:[F.length," FX"]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>n(!o),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2",children:["Presets ",r.jsx(S,{size:14})]}),o&&r.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:[Z.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:"User Presets"}),Z.map(e=>r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-dark-bgHover cursor-pointer group",children:[r.jsx("span",{onClick:()=>J(e),className:"text-sm text-text-primary flex-1",children:e.name}),r.jsx("button",{onClick:a=>{a.stopPropagation(),K(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:r.jsx(P,{size:14})})]},e.name)),r.jsx("div",{className:"border-t border-dark-border"})]}),Object.entries(_).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>r.jsxs("div",{onClick:()=>O(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[r.jsx("div",{className:"text-sm text-text-primary",children:e.name}),r.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),r.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded-lg text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:r.jsx($,{size:18})})]}),X>=3&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[r.jsx(I,{size:14,className:"text-yellow-500"}),r.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[X," neural effects - High CPU usage"]})]}),r.jsx("button",{onClick:()=>{c.getState().masterEffectsPoppedOut?d("DEViLBOX — Master Effects"):(s(),c.getState().setMasterEffectsPoppedOut(!0))},className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-cyan-400",title:"Pop out to separate window",children:r.jsx(L,{size:20})}),r.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:r.jsx(P,{size:24})})]}),i&&r.jsx("div",{className:"px-6 py-4 bg-dark-bgTertiary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"text",placeholder:"Preset name...",value:m,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&H(),"Escape"===e.key&&l(!1)},className:"flex-1 px-4 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                         placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),r.jsx("button",{onClick:H,className:"px-4 py-2 text-sm font-medium rounded-lg bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),r.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),r.jsx("div",{className:"px-6 py-3 bg-dark-bgSecondary border-b border-dark-border",children:r.jsxs("div",{className:"flex items-center gap-3 text-sm font-mono text-text-muted overflow-x-auto",children:[r.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),r.jsx("span",{children:"→"}),F.length>0?F.map((e,a)=>r.jsxs(b.Fragment,{children:[r.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<F.length-1&&r.jsx("span",{children:"→"})]},e.id)):r.jsx("span",{className:"italic text-text-muted",children:"direct"}),r.jsx("span",{children:"→"}),r.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[r.jsx(D,{size:14})," OUTPUT"]})]})}),r.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[r.jsxs("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary mb-3",children:"Effect Chain"}),r.jsx("p",{className:"text-xs text-text-muted",children:"Drag effects to reorder. Click to edit parameters."})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:0===F.length?r.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No master effects. Add effects from the panel on the right."}):r.jsx(g,{sensors:U,collisionDetection:f,onDragEnd:e=>{const{active:a,over:r}=e;if(r&&a.id!==r.id){const e=F.findIndex(e=>e.id===a.id),t=F.findIndex(e=>e.id===r.id);-1!==e&&-1!==t&&R(e,t)}},children:r.jsx(y,{items:F.map(e=>e.id),strategy:j,children:F.map(e=>r.jsx(Se,{effect:e,isSelected:w?.id===e.id,onSelect:()=>M(e),onToggle:()=>(e=>{const a=F.find(a=>a.id===e);a&&T(e,{enabled:!a.enabled})})(e.id),onRemove:()=>W(e.id),onWetChange:a=>((e,a)=>{T(e,{wet:a})})(e.id,a)},e.id))})})})]}),r.jsx("div",{className:"w-1/2 flex flex-col",children:w?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-text-primary",children:[w.type," Parameters"]}),r.jsx("p",{className:"text-xs text-text-muted",children:"Adjust effect settings"})]}),r.jsx("button",{onClick:()=>M(null),className:"text-xs text-text-muted hover:text-accent-primary transition-colors",children:"Back to Add"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsx(ye,{effect:w,onUpdateParameter:(e,a)=>{const r={parameters:{...w.parameters,[e]:a}};T(w.id,r),M({...w,...r})},onUpdateWet:e=>{T(w.id,{wet:e}),M({...w,wet:e})}})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Add Effect"}),r.jsx("p",{className:"text-xs text-text-muted",children:"Select an effect to add to the chain"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Q,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted"}),r.jsx("input",{type:"text",placeholder:"Search effects...",value:z,onChange:e=>V(e.target.value),className:"w-full pl-9 pr-8 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                               placeholder-text-muted focus:outline-none focus:border-accent-primary transition-colors"}),z&&r.jsx("button",{onClick:()=>V(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",children:r.jsx(P,{size:14})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsxs("div",{className:"space-y-4",children:[0===Object.keys(ae).length?r.jsxs("div",{className:"p-8 text-center text-text-muted text-sm",children:['No effects matching "',z,'"']}):null,Object.entries(ae).map(([e,a])=>r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-2",children:e}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>r.jsxs("button",{onClick:()=>Y(e),className:"px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                       hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                       transition-colors text-left flex items-center justify-between gap-2",children:[r.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&r.jsx(G,{size:12,className:"flex-shrink-0 opacity-60"}),"wam"===e.category&&r.jsx(A,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))]})})]})})]})]})}):null};function Se({effect:e,isSelected:a,onSelect:t,onToggle:s,onRemove:o,onWetChange:n}){const{attributes:i,listeners:l,setNodeRef:c,transform:d,transition:m,isDragging:x}=w({id:e.id}),u="neural"===e.category?{bg:"#1a0a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"}:be[e.type]||he,b={transform:M.Transform.toString(d),transition:m,opacity:x?.5:e.enabled?1:.55,background:`linear-gradient(135deg, ${u.bg} 0%, ${u.bgEnd} 100%)`,border:a?`2px solid ${u.accent}`:`2px solid ${u.border}`,boxShadow:x?`0 8px 24px rgba(0,0,0,0.5), 0 0 0 2px ${u.accent}`:a?`0 4px 12px rgba(0,0,0,0.4), 0 0 12px ${u.accent}20`:"0 2px 6px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.04)"};return r.jsx("div",{ref:c,style:b,className:"rounded-xl p-4 mb-3 cursor-pointer transition-all select-none",onClick:t,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{...i,...l,className:"cursor-grab active:cursor-grabbing p-1 opacity-30 hover:opacity-60 transition-opacity",style:{color:u.accent},title:"Drag to reorder",onClick:e=>e.stopPropagation(),children:r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:[r.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),r.jsx("circle",{cx:"4",cy:"8",r:"1.5"}),r.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),r.jsx("circle",{cx:"10",cy:"4",r:"1.5"}),r.jsx("circle",{cx:"10",cy:"8",r:"1.5"}),r.jsx("circle",{cx:"10",cy:"12",r:"1.5"})]})}),r.jsx("div",{style:{width:7,height:7,borderRadius:"50%",backgroundColor:e.enabled?u.accent:`${u.bg}`,boxShadow:e.enabled?`0 0 4px 1px ${u.accent}80, 0 0 10px 3px ${u.accent}25`:"inset 0 1px 2px rgba(0,0,0,0.5)",transition:"all 0.3s ease",flexShrink:0}}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-black text-sm text-white/90 tracking-wide truncate",children:e.neuralModelName||e.type}),"neural"===e.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider",style:{background:`${u.accent}15`,border:`1px solid ${u.accent}30`,color:`${u.accent}cc`},children:[r.jsx(G,{size:8}),"Neural"]}),"wam"===e.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider",style:{background:`${u.accent}15`,border:`1px solid ${u.accent}30`,color:`${u.accent}cc`},children:[r.jsx(A,{size:8}),"WAM"]})]}),r.jsxs("div",{className:"text-[11px] mt-0.5",style:{color:`${u.accent}80`},children:[e.enabled?"Active":"Bypassed"," | Mix: ",e.wet,"%"]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",onClick:e=>e.stopPropagation(),children:[r.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>n(Number(e.target.value)),className:"w-16 h-1 rounded-lg appearance-none cursor-pointer\n                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5\n                     [&::-webkit-slider-thumb]:rounded-full",style:{background:`linear-gradient(90deg, ${u.accent}60 ${e.wet}%, rgba(255,255,255,0.08) ${e.wet}%)`,"--thumb-color":u.accent}}),r.jsx("button",{onClick:e=>{e.stopPropagation(),t()},className:"p-1.5 rounded-lg transition-colors hover:bg-white/5",style:{color:`${u.accent}70`},title:"Edit parameters",children:r.jsx(V,{size:14})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),s()},className:"p-1.5 rounded-lg transition-colors hover:bg-white/5",style:{color:e.enabled?u.accent:"rgba(255,255,255,0.2)"},title:e.enabled?"Disable":"Enable",children:r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[r.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),r.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),o()},className:"p-1.5 rounded-lg transition-colors hover:bg-white/5",style:{color:"rgba(255,80,80,0.4)"},title:"Remove effect",children:r.jsx(P,{size:14})})]})]})})}const Pe=({isOpen:e,onClose:t})=>{const[s,o]=u.useState(null),[n,i]=u.useState(!1),[l,b]=u.useState(""),{instruments:h,currentInstrumentId:p,addEffectConfig:g,removeEffect:f,updateEffect:y,updateInstrument:j}=m(),v=h.find(e=>e.id===p),N=u.useRef(0),k=u.useCallback(e=>{if(null===p)return;const a=e.effects.map((e,a)=>({...e,id:`instrument-fx-${++N.current}-${a}`}));j(p,{effects:a}),i(!1),x.success(`Applied ${e.name} to ${v?.name}`)},[p,j,v?.name]),w=v?.effects||[],M=w.filter(e=>"neural"===e.category).length,$=u.useCallback(e=>{if(null===p)return;if("neural"===e.category&&M>=3){if(!window.confirm("Performance Warning\n\nYou are adding a 4th neural effect. Multiple neural effects can cause high CPU usage and audio glitches.\n\nConsider using Tone.js effects or reducing the neural effect count.\n\nContinue anyway?"))return}const a={id:"effect-"+ ++N.current,category:e.category,type:e.type||"Distortion",enabled:!0,wet:100,parameters:{},neuralModelIndex:e.neuralModelIndex,neuralModelName:"neural"===e.category?e.label:void 0};if("neural"===e.category&&void 0!==e.neuralModelIndex){const r=re[e.neuralModelIndex];r?.parameters&&Object.entries(r.parameters).forEach(([e,r])=>{r&&(a.parameters[e]=r.default)})}g(p,a)},[p,M,g]),D=u.useCallback(e=>{null!==p&&f(p,e)},[p,f]),z=u.useCallback(e=>{const a=w.find(a=>a.id===e);a&&null!==p&&y(p,e,{enabled:!a.enabled})},[w,p,y]),F=u.useCallback((e,a)=>{null!==p&&y(p,e,{wet:a})},[p,y]),E=u.useCallback(e=>{e.target===e.currentTarget&&t()},[t]),W=we(),T=u.useMemo(()=>{if(!l.trim())return W;const e=l.toLowerCase(),a={};for(const[r,t]of Object.entries(W)){const s=t.filter(a=>a.label.toLowerCase().includes(e));s.length>0&&(a[r]=s)}return a},[W,l]);return e&&v?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:E,children:r.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1200px] flex flex-col overflow-hidden animate-scale-in",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(C,{size:20,className:"text-accent-primary"}),r.jsxs("h2",{className:"text-lg font-bold text-text-primary",children:[v.name||`Instrument ${v.id}`," Effects"]}),r.jsx("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:v.synthType}),r.jsxs("span",{className:"text-[10px] text-accent-info px-2 py-1 bg-accent-info/10 rounded",children:[ke.length," effects available"]}),r.jsxs("div",{className:"relative ml-2",children:[r.jsxs("button",{onClick:()=>i(!n),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2 border border-dark-border",children:["Presets ",r.jsx(S,{size:14})]}),n&&r.jsx("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:Object.entries(a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{})).map(([e,a])=>r.jsxs("div",{children:[r.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>r.jsxs("div",{onClick:()=>k(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[r.jsx("div",{className:"text-sm text-text-primary",children:e.name}),r.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))})]})]}),M>=3&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[r.jsx(I,{size:14,className:"text-yellow-500"}),r.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[M," neural effects - High CPU usage"]})]}),r.jsx("button",{onClick:()=>{c.getState().instrumentEffectsPoppedOut?d("DEViLBOX — Instrument Effects"):(t(),c.getState().setInstrumentEffectsPoppedOut(!0))},className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-cyan-400",title:"Pop out to separate window",children:r.jsx(L,{size:20})}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:r.jsx(P,{size:24})})]}),r.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[r.jsxs("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary mb-3",children:"Effect Chain"}),r.jsxs("p",{className:"text-xs text-text-muted",children:[w.length," effect",1!==w.length?"s":""," active",M>0&&` • ${M} neural`]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:0===w.length?r.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No effects. Add from the panel on the right →"}):w.map(e=>r.jsx("div",{className:`\n                      bg-dark-bgSecondary border rounded-lg p-4 mb-3 cursor-pointer transition-all\n                      ${e.enabled?"":"opacity-60"}\n                      ${s?.id===e.id?"border-accent-primary bg-accent-primary/5":"border-dark-border hover:border-dark-borderLight"}\n                    `,onClick:()=>o(e),children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-sm text-text-primary",children:e.neuralModelName||e.type}),"neural"===e.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[r.jsx(G,{size:10}),"Neural"]}),"wam"===e.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-cyan-500/20 to-teal-500/20 border border-cyan-500/30 rounded text-[10px] text-cyan-300",children:[r.jsx(A,{size:10}),"WAM"]})]}),r.jsxs("div",{className:"text-xs text-text-muted",children:[e.enabled?"Active":"Bypassed"," • Wet: ",e.wet,"%"]})]}),r.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:a=>F(e.id,Number(a.target.value)),className:"w-20 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary"})}),r.jsx("button",{onClick:a=>{a.stopPropagation(),o(e)},className:"p-2 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:r.jsx(V,{size:16})}),r.jsx("button",{onClick:a=>{a.stopPropagation(),z(e.id)},className:`\n                            p-2 rounded transition-colors\n                            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n                          `,title:e.enabled?"Disable":"Enable",children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),r.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),r.jsx("button",{onClick:a=>{a.stopPropagation(),D(e.id)},className:"p-2 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:r.jsx(P,{size:16})})]})]})},e.id))})]}),r.jsx("div",{className:"w-1/2 flex flex-col",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-text-primary flex items-center gap-2",children:[s.neuralModelName||s.type," Parameters","neural"===s.category&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[r.jsx(G,{size:10}),"Neural"]})]}),r.jsx("p",{className:"text-xs text-text-muted",children:"Adjust effect settings"})]}),r.jsx("button",{onClick:()=>o(null),className:"text-xs text-text-muted hover:text-accent-primary transition-colors",children:"Back to Add"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsx(ye,{effect:s,onUpdateParameter:(e,a)=>{const r={parameters:{...s.parameters,[e]:a}};null!==p&&y(p,s.id,r),o({...s,...r})},onUpdateWet:e=>{null!==p&&y(p,s.id,{wet:e}),o({...s,wet:e})}})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Add Effect"}),r.jsxs("p",{className:"text-xs text-text-muted",children:["All ",ke.length," effects available"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Q,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted"}),r.jsx("input",{type:"text",placeholder:"Search effects...",value:l,onChange:e=>b(e.target.value),className:"w-full pl-9 pr-8 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                               placeholder-text-muted focus:outline-none focus:border-accent-primary transition-colors"}),l&&r.jsx("button",{onClick:()=>b(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",children:r.jsx(P,{size:14})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:r.jsxs("div",{className:"space-y-4",children:[0===Object.keys(T).length?r.jsxs("div",{className:"p-8 text-center text-text-muted text-sm",children:['No effects matching "',l,'"']}):null,Object.entries(T).map(([e,a])=>r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-2",children:e}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>r.jsxs("button",{onClick:()=>$(e),className:"px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                       hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                       transition-colors text-left flex items-center justify-between gap-2",children:[r.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&r.jsx(G,{size:12,className:"flex-shrink-0 opacity-60"}),"wam"===e.category&&r.jsx(A,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))]})})]})})]})]})}):null};export{ye as EffectParameterEditor,Pe as InstrumentEffectsModal,Ce as MasterEffectsModal,Z as MasterEffectsPanel};
