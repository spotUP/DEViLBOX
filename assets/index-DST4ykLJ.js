import{f as e,_ as a,j as t,d as r,$ as s,a0 as o,a1 as n,a2 as i,g as l,a3 as c,a4 as d,a5 as m,Q as x,R as u,b,n as h}from"./index-B_tzmBrs.js";import{r as p,R as g}from"./vendor-utils-Cm-70yv0.js";import{u as f,a as y,D as v,c as j,S as N,v as k,s as w,K as M,P as C,b as S,C as P}from"./sortable.esm-_tstVFY2.js";import{b as $,C as z,X as D,n as V,V as F,aS as E,S as W,aT as A,q as T,M as R,aU as B,K as U,R as H,aL as q,aF as O,Z as I,aV as L,aW as Q,a6 as G,E as J,l as K,a8 as X,aR as Z}from"./vendor-ui-BuYJq6ba.js";import"./vendor-react-LeNVipsj.js";import"./vendor-tone-CADp_hfL.js";const Y={drive:{name:"Drive",id:"drive",value:50,default:50,min:0,max:100,unit:"%",curve:"exponential"},tone:{name:"Tone",id:"tone",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},level:{name:"Level",id:"level",value:75,default:75,min:0,max:100,unit:"%",curve:"linear"},dryWet:{name:"Mix",id:"dryWet",value:100,default:100,min:0,max:100,unit:"%",curve:"linear"},presence:{name:"Presence",id:"presence",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},bass:{name:"Bass",id:"bass",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},mid:{name:"Mid",id:"mid",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"},treble:{name:"Treble",id:"treble",value:50,default:50,min:0,max:100,unit:"%",curve:"linear"}},_=[{type:"Compressor",label:"Compressor",category:"Dynamics"},{type:"EQ3",label:"3-Band EQ",category:"Dynamics"},{type:"Distortion",label:"Distortion",category:"Distortion"},{type:"BitCrusher",label:"Bit Crusher",category:"Distortion"},{type:"Chebyshev",label:"Chebyshev",category:"Distortion"},{type:"Reverb",label:"Reverb",category:"Time"},{type:"JCReverb",label:"JC Reverb",category:"Time"},{type:"Delay",label:"Delay",category:"Time"},{type:"FeedbackDelay",label:"Feedback Delay",category:"Time"},{type:"PingPongDelay",label:"Ping Pong Delay",category:"Time"},{type:"SpaceEcho",label:"Space Echo",category:"Time"},{type:"SpaceyDelayer",label:"Spacey Delayer",category:"Time"},{type:"RETapeEcho",label:"RE Tape Echo",category:"Time"},{type:"MVerb",label:"MVerb Plate",category:"Time"},{type:"SpringReverb",label:"Spring Reverb",category:"Time"},{type:"Leslie",label:"Leslie Speaker",category:"Modulation"},{type:"BiPhase",label:"Bi-Phase",category:"Modulation"},{type:"Chorus",label:"Chorus",category:"Modulation"},{type:"Phaser",label:"Phaser",category:"Modulation"},{type:"Tremolo",label:"Tremolo",category:"Modulation"},{type:"Vibrato",label:"Vibrato",category:"Modulation"},{type:"AutoFilter",label:"Auto Filter",category:"Modulation"},{type:"AutoPanner",label:"Auto Panner",category:"Modulation"},{type:"AutoWah",label:"Auto Wah",category:"Modulation"},{type:"DubFilter",label:"Dub Filter",category:"Filter"},{type:"MoogFilter",label:"Moog Filter",category:"Filter"},{type:"Filter",label:"Filter",category:"Filter"},{type:"PitchShift",label:"Pitch Shift",category:"Pitch"},{type:"FrequencyShifter",label:"Freq Shifter",category:"Pitch"},{type:"StereoWidener",label:"Stereo Widener",category:"Stereo"}];function ee({effect:e,onToggle:a,onRemove:r,onEdit:s,onWetChange:o}){const{attributes:n,listeners:i,setNodeRef:l,transform:c,transition:d,isDragging:m}=S({id:e.id}),x={transform:P.Transform.toString(c),transition:d,opacity:m?.5:1};return t.jsx("div",{ref:l,style:x,className:`\n        bg-dark-bgSecondary border border-dark-border rounded-lg p-3 mb-2\n        ${m?"shadow-lg ring-2 ring-accent-primary":""}\n        ${e.enabled?"":"opacity-60"}\n      `,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{...n,...i,className:"text-text-muted hover:text-accent-primary cursor-grab active:cursor-grabbing p-1",title:"Drag to reorder",children:t.jsx(E,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-sm text-text-primary",children:e.type}),t.jsx("div",{className:"text-xs text-text-muted",children:e.enabled?"Active":"Bypassed"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-text-muted",children:"WET"}),t.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>o(Number(e.target.value)),className:"w-16 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary\n                     [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3\n                     [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-accent-primary [&::-moz-range-thumb]:border-0"}),t.jsxs("span",{className:"text-xs text-accent-primary font-mono w-8 text-right",children:[e.wet,"%"]})]}),t.jsx("button",{onClick:s,className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:t.jsx(W,{size:14})}),t.jsx("button",{onClick:a,className:`\n            p-1.5 rounded transition-colors\n            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n          `,title:e.enabled?"Disable":"Enable",children:t.jsx(A,{size:14})}),t.jsx("button",{onClick:r,className:"p-1.5 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:t.jsx(D,{size:14})})]})})}const ae="master-fx-user-presets",te=({onEditEffect:r})=>{const[s,o]=p.useState(!1),[n,i]=p.useState(!1),[l,c]=p.useState(!1),[d,m]=p.useState(""),{masterEffects:x,addMasterEffect:u,removeMasterEffect:b,updateMasterEffect:h,reorderMasterEffects:S,setMasterEffects:P}=e(),E=p.useCallback(()=>{try{const e=localStorage.getItem(ae);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),W=p.useCallback(()=>{if(!d.trim())return;const e=E();e.push({name:d.trim(),effects:x.map(e=>({...e}))}),localStorage.setItem(ae,JSON.stringify(e)),m(""),c(!1)},[d,x,E]),A=p.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));P(a),i(!1)},[P]),T=p.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));P(a),i(!1)},[P]),R=p.useCallback(e=>{const a=E().filter(a=>a.name!==e);localStorage.setItem(ae,JSON.stringify(a))},[E]),B=E(),U=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),H=f(y(C),y(M,{coordinateGetter:w})),q=_.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{});return t.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-dark-bgSecondary border-b border-dark-border",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{size:16,className:"text-accent-primary"}),t.jsx("span",{className:"font-medium text-sm text-text-primary",children:"Master Effects"}),t.jsxs("span",{className:"text-xs text-text-muted px-2 py-0.5 bg-dark-bg rounded",children:[x.length," FX"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>i(!n),className:"px-3 py-1 text-xs font-medium rounded bg-dark-bg text-text-primary\n                       hover:bg-dark-bgHover transition-colors flex items-center gap-1 border border-dark-border",children:["Presets ",t.jsx(z,{size:12})]}),n&&t.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-80 overflow-y-auto",children:[B.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:"User Presets"}),B.map(e=>t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-dark-bgHover cursor-pointer group",children:[t.jsx("span",{onClick:()=>T(e),className:"text-sm text-text-primary flex-1",children:e.name}),t.jsx("button",{onClick:a=>{a.stopPropagation(),R(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:t.jsx(D,{size:12})})]},e.name)),t.jsx("div",{className:"border-t border-dark-border my-1"})]}),Object.entries(U).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"px-3 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary",children:e}),a.map(e=>t.jsxs("div",{onClick:()=>A(e),className:"px-3 py-2 hover:bg-dark-bgHover cursor-pointer",children:[t.jsx("div",{className:"text-sm text-text-primary",children:e.name}),t.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),t.jsx("button",{onClick:()=>c(!0),className:"p-1.5 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:t.jsx(V,{size:14})}),t.jsx("button",{onClick:()=>o(!s),className:"px-3 py-1 text-xs font-medium rounded bg-accent-primary/10 text-accent-primary\n                     hover:bg-accent-primary/20 transition-colors",children:"+ Add Effect"})]})]}),l&&t.jsx("div",{className:"px-4 py-3 bg-dark-bgTertiary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",placeholder:"Preset name...",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&W(),"Escape"===e.key&&c(!1)},className:"flex-1 px-3 py-1.5 text-sm bg-dark-bg border border-dark-border rounded text-text-primary\n                       placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),t.jsx("button",{onClick:W,className:"px-3 py-1.5 text-xs font-medium rounded bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),t.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-xs font-medium rounded bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),s&&t.jsxs("div",{className:"p-4 bg-dark-bgTertiary border-b border-dark-border",children:[t.jsx("div",{className:"text-xs text-text-muted mb-3 font-medium",children:"Select Effect Type:"}),t.jsx("div",{className:"space-y-3",children:Object.entries(q).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-text-muted mb-1.5 uppercase tracking-wide",children:e}),t.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(({type:e,label:a})=>t.jsx("button",{onClick:()=>(u(e),void o(!1)),className:"px-2 py-1 text-xs rounded border border-dark-border bg-dark-bg\n                               hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                               transition-colors",children:a},e))})]},e))})]}),t.jsx("div",{className:"px-4 py-2 bg-dark-bgSecondary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-text-muted overflow-x-auto",children:[t.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),t.jsx("span",{children:"→"}),x.length>0?x.map((e,a)=>t.jsxs(g.Fragment,{children:[t.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<x.length-1&&t.jsx("span",{children:"→"})]},e.id)):t.jsx("span",{className:"italic text-text-muted",children:"direct"}),t.jsx("span",{children:"→"}),t.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[t.jsx(F,{size:12})," OUTPUT"]})]})}),t.jsx("div",{className:"p-4",children:0===x.length?t.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No master effects. All audio passes through unchanged."}):t.jsx(v,{sensors:H,collisionDetection:j,onDragEnd:e=>{const{active:a,over:t}=e;if(t&&a.id!==t.id){const e=x.findIndex(e=>e.id===a.id),r=x.findIndex(e=>e.id===t.id);-1!==e&&-1!==r&&S(e,r)}},children:t.jsx(N,{items:x.map(e=>e.id),strategy:k,children:x.map(e=>t.jsx(ee,{effect:e,onToggle:()=>(e=>{const a=x.find(a=>a.id===e);a&&h(e,{enabled:!a.enabled})})(e.id),onRemove:()=>{return a=e.id,void b(a);var a},onEdit:()=>(e=>{r&&r(e)})(e),onWetChange:a=>((e,a)=>{h(e,{wet:a})})(e.id,a)},e.id))})})}),t.jsx("div",{className:"px-4 pb-4",children:t.jsxs("div",{className:"text-xs text-text-muted p-3 bg-dark-bgSecondary rounded border border-dark-border",children:[t.jsx("strong",{children:"Tip:"})," Drag effects to reorder the signal chain. Order matters: compression before reverb sounds different than reverb before compression."]})})]})},re={drive:{...Y.drive},tone:{...Y.tone},level:{...Y.level},dryWet:{...Y.dryWet}},se={drive:{...Y.drive},presence:{...Y.presence},level:{...Y.level},dryWet:{...Y.dryWet}},oe={drive:{...Y.drive},bass:{...Y.bass},mid:{...Y.mid},treble:{...Y.treble},presence:{...Y.presence},level:{...Y.level},dryWet:{...Y.dryWet}},ne=[{index:0,name:"TS808",fullName:"Ibanez TS808 Tube Screamer",category:"overdrive",description:"Legendary mid-focused overdrive, smooth and warm",tags:["tubescreamer","classic","smooth","mid-boost","vintage"],parameters:re,characteristics:{gain:"medium",tone:"neutral",character:["warm","smooth","mid-focused","classic"]}},{index:1,name:"ProCo RAT",fullName:"ProCo RAT Distortion",category:"distortion",description:"Aggressive distortion with cutting edge and sustain",tags:["rat","distortion","aggressive","cutting","sustain"],parameters:re,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","saturated","edgy"]}},{index:2,name:"MT-2",fullName:"Boss MT-2 Metal Zone",category:"distortion",description:"Extreme high-gain distortion with active EQ",tags:["metal","high-gain","eq","heavy","modern"],parameters:oe,characteristics:{gain:"extreme",tone:"bright",character:["heavy","saturated","aggressive","tight"]}},{index:3,name:"DOD 250",fullName:"DOD 250 Overdrive/Preamp",category:"overdrive",description:"Classic simple overdrive with transparent tone",tags:["dod","overdrive","transparent","simple","vintage"],parameters:{...re,tone:void 0},characteristics:{gain:"medium",tone:"neutral",character:["transparent","simple","responsive","dynamic"]}},{index:4,name:"Big Muff",fullName:"Electro-Harmonix Big Muff Pi",category:"distortion",description:"Thick, creamy fuzz with massive sustain",tags:["fuzz","muff","sustain","thick","vintage"],parameters:re,characteristics:{gain:"high",tone:"dark",character:["thick","woolly","sustaining","vintage"]}},{index:5,name:"MXR Dist+",fullName:"MXR Distortion+",category:"distortion",description:"Simple, raw distortion with lots of character",tags:["mxr","distortion","raw","simple"],parameters:{...re,tone:void 0},characteristics:{gain:"high",tone:"bright",character:["raw","edgy","simple","aggressive"]}},{index:6,name:"Bluesbreaker",fullName:"Marshall Bluesbreaker",category:"overdrive",description:"Legendary transparent amp-like overdrive",tags:["marshall","blues","transparent","amp-like","dynamic"],parameters:re,characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","amp-like","responsive"]}},{index:7,name:"Klon",fullName:"Klon Centaur",category:"overdrive",description:"Boutique transparent overdrive, highly sought after",tags:["klon","centaur","boutique","transparent","legendary"],parameters:re,characteristics:{gain:"medium",tone:"bright",character:["transparent","sparkle","boutique","clean"]}},{index:8,name:"Princeton",fullName:"Fender Princeton Reverb",category:"amplifier",description:"Classic clean Fender amp tone",tags:["fender","amp","clean","vintage","reverb"],parameters:se,characteristics:{gain:"low",tone:"bright",character:["clean","sparkle","classic","warm"]}},{index:9,name:"Plexi",fullName:"Marshall Plexi Super Lead",category:"amplifier",description:"Legendary British rock amp, crunchy and aggressive",tags:["marshall","plexi","rock","british","crunch"],parameters:oe,characteristics:{gain:"high",tone:"bright",character:["crunchy","aggressive","british","rock"]}},{index:10,name:"Mesa Recto",fullName:"Mesa Boogie Dual Rectifier",category:"amplifier",description:"Modern high-gain metal amp",tags:["mesa","rectifier","metal","high-gain","modern"],parameters:oe,characteristics:{gain:"extreme",tone:"dark",character:["heavy","tight","modern","crushing"]}},{index:11,name:"AC30",fullName:"Vox AC30",category:"amplifier",description:"British chime and jangle, clean to crunch",tags:["vox","ac30","british","jangle","chime"],parameters:se,characteristics:{gain:"medium",tone:"bright",character:["chime","jangle","british","sparkle"]}},{index:12,name:"Bassman",fullName:"Fender Bassman",category:"amplifier",description:"Classic bass amp that guitarists love",tags:["fender","bassman","vintage","clean","bass"],parameters:se,characteristics:{gain:"low",tone:"dark",character:["clean","warm","full","vintage"]}},{index:13,name:"JCM800",fullName:"Marshall JCM800",category:"amplifier",description:"80s British rock and metal tone",tags:["marshall","jcm800","80s","rock","metal"],parameters:oe,characteristics:{gain:"high",tone:"bright",character:["aggressive","cutting","tight","80s"]}},{index:14,name:"SLO100",fullName:"Soldano SLO-100",category:"amplifier",description:"Boutique high-gain with singing leads",tags:["soldano","slo","high-gain","boutique","lead"],parameters:oe,characteristics:{gain:"extreme",tone:"bright",character:["singing","smooth","high-gain","boutique"]}},{index:15,name:"5150",fullName:"Peavey 5150",category:"amplifier",description:"Iconic metal amp, tight and aggressive",tags:["peavey","5150","metal","aggressive","modern"],parameters:oe,characteristics:{gain:"extreme",tone:"bright",character:["tight","aggressive","metal","modern"]}},{index:16,name:"Dumble ODS",fullName:"Dumble Overdrive Special",category:"amplifier",description:"Legendary boutique amp, smooth and rich",tags:["dumble","boutique","smooth","overdrive","luxury"],parameters:oe,characteristics:{gain:"medium",tone:"dark",character:["smooth","rich","boutique","singing"]}},{index:17,name:"Matchless DC30",fullName:"Matchless DC-30",category:"amplifier",description:"Boutique British-style clean to crunch",tags:["matchless","boutique","british","clean"],parameters:se,characteristics:{gain:"medium",tone:"bright",character:["boutique","clean","dynamic","sparkle"]}},{index:18,name:"Orange Rockerverb",fullName:"Orange Rockerverb",category:"amplifier",description:"British alternative rock tone",tags:["orange","british","alternative","rock"],parameters:se,characteristics:{gain:"high",tone:"neutral",character:["thick","british","alternative","punchy"]}},{index:19,name:"ENGL Powerball",fullName:"ENGL Powerball",category:"amplifier",description:"German high-gain metal machine",tags:["engl","metal","high-gain","german","modern"],parameters:oe,characteristics:{gain:"extreme",tone:"bright",character:["tight","articulate","metal","modern"]}},{index:20,name:"Friedman BE-100",fullName:"Friedman BE-100",category:"amplifier",description:"Modern boutique high-gain",tags:["friedman","boutique","high-gain","modern"],parameters:oe,characteristics:{gain:"extreme",tone:"bright",character:["tight","modern","boutique","versatile"]}},{index:21,name:"Timmy",fullName:"Paul Cochrane Timmy",category:"overdrive",description:"Transparent overdrive with separate bass/treble controls",tags:["timmy","transparent","overdrive","boutique"],parameters:{...re,bass:Y.bass,treble:Y.treble},characteristics:{gain:"low",tone:"neutral",character:["transparent","dynamic","versatile","boutique"]}},{index:22,name:"Vertex",fullName:"Vertex Steel String",category:"overdrive",description:"Clean boost to light overdrive",tags:["vertex","clean","boost","transparent"],parameters:re,characteristics:{gain:"low",tone:"bright",character:["clean","transparent","boost","sparkle"]}},{index:23,name:"Fulltone OCD",fullName:"Fulltone Obsessive Compulsive Drive",category:"overdrive",description:"Versatile overdrive from sparkle to crunch",tags:["fulltone","ocd","versatile","overdrive"],parameters:re,characteristics:{gain:"medium",tone:"neutral",character:["versatile","dynamic","amp-like","responsive"]}},{index:24,name:"Horizon",fullName:"Horizon Devices Precision Drive",category:"overdrive",description:"Modern djent and metal tones",tags:["horizon","djent","metal","modern","tight"],parameters:re,characteristics:{gain:"high",tone:"bright",character:["tight","modern","djent","articulate"]}},{index:25,name:"Suhr Riot",fullName:"Suhr Riot Distortion",category:"distortion",description:"British-voiced distortion",tags:["suhr","riot","distortion","british"],parameters:re,characteristics:{gain:"high",tone:"bright",character:["british","aggressive","versatile","cutting"]}},{index:26,name:"Bogner Ecstasy",fullName:"Bogner Ecstasy Blue",category:"overdrive",description:"Boutique amp-in-a-box pedal",tags:["bogner","ecstasy","amp-in-a-box","boutique"],parameters:re,characteristics:{gain:"high",tone:"neutral",character:["boutique","versatile","amp-like","smooth"]}},{index:27,name:"Wampler Pinnacle",fullName:"Wampler Pinnacle",category:"distortion",description:"Brown sound high-gain distortion",tags:["wampler","pinnacle","brown-sound","high-gain"],parameters:re,characteristics:{gain:"extreme",tone:"dark",character:["brown-sound","high-gain","smooth","saturated"]}},{index:28,name:"Fortin 33",fullName:"Fortin 33",category:"overdrive",description:"Modern metal overdrive",tags:["fortin","metal","modern","tight"],parameters:re,characteristics:{gain:"high",tone:"bright",character:["tight","modern","metal","articulate"]}},{index:29,name:"Revv G3",fullName:"Revv G3 Purple",category:"distortion",description:"Modern high-gain distortion",tags:["revv","g3","high-gain","modern"],parameters:re,characteristics:{gain:"extreme",tone:"bright",character:["modern","tight","high-gain","aggressive"]}},{index:30,name:"Way Huge Pork Loin",fullName:"Way Huge Pork Loin",category:"overdrive",description:"Vintage-style overdrive",tags:["way-huge","pork-loin","vintage","overdrive"],parameters:re,characteristics:{gain:"medium",tone:"dark",character:["vintage","warm","smooth","thick"]}},{index:31,name:"Darkglass B7K",fullName:"Darkglass B7K Ultra",category:"distortion",description:"Modern bass distortion and preamp",tags:["darkglass","bass","distortion","modern"],parameters:oe,characteristics:{gain:"high",tone:"bright",character:["bass","modern","tight","aggressive"]}},{index:32,name:"Tech 21 SansAmp",fullName:"Tech 21 SansAmp Bass Driver DI",category:"amplifier",description:"Classic bass amp simulation",tags:["tech21","sansamp","bass","di"],parameters:oe,characteristics:{gain:"medium",tone:"neutral",character:["bass","classic","versatile","di"]}},{index:33,name:"Ampeg SVT",fullName:"Ampeg SVT Classic",category:"amplifier",description:"Legendary bass amp tone",tags:["ampeg","svt","bass","classic","vintage"],parameters:se,characteristics:{gain:"low",tone:"dark",character:["bass","classic","warm","full"]}},{index:34,name:"Virus Distortion",fullName:"Access Virus Hard Distortion",category:"distortion",description:"Digital synth-style distortion",tags:["virus","synth","digital","experimental"],parameters:re,characteristics:{gain:"extreme",tone:"bright",character:["digital","harsh","experimental","synth"]}},{index:35,name:"Filmosound",fullName:"Bell & Howell Filmosound",category:"amplifier",description:"Vintage tube amp from 1940s projectors",tags:["filmosound","vintage","tube","lo-fi"],parameters:se,characteristics:{gain:"low",tone:"dark",character:["vintage","lo-fi","warm","unique"]}},{index:36,name:"Gibson EH-185",fullName:"Gibson EH-185 Lap Steel Amp",category:"amplifier",description:"Vintage 1940s tube amp",tags:["gibson","vintage","tube","warm"],parameters:se,characteristics:{gain:"low",tone:"dark",character:["vintage","warm","tube","smooth"]}}];class ie{modelIndex;schema;constructor(e){this.modelIndex=e;const a=ne[e];this.schema=a?.parameters||{}}getAvailableParameters(){return Object.entries(this.schema).filter(([,e])=>void 0!==e).map(([e,a])=>({key:e,...a,implemented:this.isImplemented(e)}))}getParameter(e){const a=this.schema[e];return a?{...a,implemented:this.isImplemented(e)}:null}mapToCondition(e){return void 0!==e.drive?e.drive/100:void 0!==e.gain?e.gain/100:void 0!==e.tone?e.tone/100:.5}isImplemented(e){return["drive","gain","tone","bass","mid","treble","presence","level","output","dryWet"].includes(e)}getParameterCount(){return Object.keys(this.schema).length}getModelName(){const e=ne[this.modelIndex];return e?.name||"Unknown Model"}getModelFullName(){const e=ne[this.modelIndex];return e?.fullName||e?.name||"Unknown Model"}getModelCategory(){const e=ne[this.modelIndex];return e?.category||"effect"}hasEQ(){return!!(this.schema.bass||this.schema.mid||this.schema.treble)}getDefaultParameters(){const e={};return Object.entries(this.schema).forEach(([a,t])=>{t&&(e[a]=t.default)}),e}}const le=({bpmSync:e,syncDivision:a,onToggleSync:n,onChangeDivision:i})=>{const l=r(e=>e.bpm),c=1===e,d=p.useMemo(()=>c?s(l,a):null,[c,l,a]),m=p.useMemo(()=>{const e={};for(const a of o)(e[a.category]??=[]).push(a);return e},[]);return t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsxs("button",{onClick:()=>n(!c),className:"flex items-center gap-1 px-2.5 py-1 rounded text-xs font-bold uppercase tracking-wide transition-colors "+(c?"bg-emerald-600 text-white":"bg-gray-800 text-gray-500 hover:bg-gray-700"),title:c?"BPM sync ON — click to disable":"Enable BPM sync",children:[t.jsx(T,{size:12}),"Sync"]}),c&&t.jsxs(t.Fragment,{children:[t.jsx("select",{value:a,onChange:e=>i(e.target.value),className:"bg-gray-800 text-gray-200 text-xs rounded px-2 py-1 border border-gray-700 focus:outline-none focus:border-emerald-500",children:Object.entries(m).map(([e,a])=>t.jsx("optgroup",{label:e,children:a.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))},e))}),null!==d&&t.jsx("span",{className:"text-[10px] text-emerald-400 font-mono tabular-nums",children:d<1e3?`${Math.round(d)}ms`:`${(d/1e3).toFixed(2)}s`})]})]})};function ce({color:e,title:a}){return t.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[t.jsx("div",{className:"w-1.5 h-5 rounded-full",style:{backgroundColor:e,boxShadow:`0 0 8px ${e}60`}}),t.jsx("h3",{className:"text-xs font-black text-white/90 uppercase tracking-[0.15em]",children:a})]})}function de(e,a,t){const r=e.parameters[a];return"number"==typeof r?r:t}function me(e,a){const r=i(e.parameters),s=d(e.parameters);return t.jsx(le,{bpmSync:r?1:0,syncDivision:s,onToggleSync:e=>a("bpmSync",e?1:0),onChangeDivision:e=>a("syncDivision",e)})}const xe=({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"time",.25),o=de(e,"feedback",.5),l=i(e.parameters),c="PingPongDelay"===e.type;return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#3b82f6",title:c?"Ping Pong Delay":"Delay"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx("div",{className:l?"opacity-40 pointer-events-none":"",children:t.jsx(n,{value:s,min:0,max:1,onChange:e=>a("time",e),label:"Time",color:"#3b82f6",formatValue:e=>`${Math.round(1e3*e)}ms`})}),t.jsx(n,{value:o,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#3b82f6",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),me(e,a)]})})},ue=({effect:e,onUpdateWet:a})=>t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#6b7280",title:e.type}),t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:a,label:"Mix",size:"lg",color:"#6b7280",formatValue:e=>`${Math.round(e)}%`})}),t.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Use sliders in the expanded view for this effect type."})]})}),be=({effect:e,onUpdateWet:a})=>{const r=p.useRef(null),[s,o]=p.useState(!0),[i,d]=p.useState(!1);return p.useEffect(()=>{let a=!0,t=null,s=null;return(async()=>{if(r.current){r.current.innerHTML="",d(!1),o(!0);try{const n=l();let i=null;for(let t=0;t<25&&(i=n.getMasterEffectNode(e.id),!(i&&i instanceof c));t++)if(i=null,await new Promise(e=>setTimeout(e,200)),!a)return;if(!(i&&i instanceof c))return void(a&&o(!1));if(await i.ensureInitialized(),!a)return;const m=await i.createGui();if(!m||!a||!r.current)return void(a&&o(!1));t=m,d(!0),r.current.appendChild(m);const x=()=>{const e=r.current;if(!e||!m)return;m.style.transform="",m.style.position="",m.style.left="",m.style.top="";const a=m.offsetWidth||m.scrollWidth||m.clientWidth,t=m.offsetHeight||m.scrollHeight||m.clientHeight;if(!a||!t)return;const s=e.clientWidth,o=e.clientHeight;if(!s||!o)return;const n=Math.min(s/a,o/t),i=a*n,l=t*n;m.style.position="absolute",m.style.transformOrigin="top left",m.style.transform=`scale(${n})`,m.style.left=(s-i)/2+"px",m.style.top=(o-l)/2+"px"};s=new ResizeObserver(x),s.observe(r.current),requestAnimationFrame(x),setTimeout(x,300),setTimeout(x,800),setTimeout(x,1500)}catch(n){}finally{a&&o(!1)}}})(),()=>{a=!1,s?.disconnect(),t?.parentElement&&t.parentElement.removeChild(t)}},[e.id]),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{ref:r,className:"bg-black rounded-lg border border-white/[0.06] overflow-hidden relative",style:{minHeight:i?300:0,display:i||s?"block":"none"}}),s&&t.jsx("div",{className:"flex items-center justify-center py-8 text-text-muted text-xs",children:"Loading plugin interface..."}),!i&&!s&&t.jsx("div",{className:"text-center text-text-muted text-xs py-4",children:"Plugin did not provide a native GUI."}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#6b7280",title:"Mix"}),t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:a,label:"Mix",size:"lg",color:"#6b7280",formatValue:e=>`${Math.round(e)}%`})})]})]})},he=["Hyperion","Krajeski","Stilson","Microtracker","Improved","Oberheim"],pe=["LP2","LP4","BP2","BP4","HP2","HP4","Notch"],ge=["Slow","Brake","Fast"],fe={Distortion:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"drive",.4);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#ef4444",title:"Distortion"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:1,onChange:e=>a("drive",e),label:"Drive",size:"lg",color:"#ef4444",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"lg",color:"#f97316",formatValue:e=>`${Math.round(e)}%`})]})]})})},Reverb:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"decay",1.5),o=de(e,"preDelay",.01);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#6366f1",title:"Reverb"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:.1,max:10,onChange:e=>a("decay",e),label:"Decay",color:"#6366f1",formatValue:e=>`${e.toFixed(1)}s`}),t.jsx(n,{value:o,min:0,max:.5,onChange:e=>a("preDelay",e),label:"Pre-Delay",color:"#6366f1",formatValue:e=>`${Math.round(1e3*e)}ms`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}%`})]})]})})},Delay:xe,FeedbackDelay:xe,PingPongDelay:xe,Chorus:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",1.5),o=de(e,"depth",.7),l=de(e,"delayTime",3.5),c=i(e.parameters);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#ec4899",title:"Chorus"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx("div",{className:c?"opacity-40 pointer-events-none":"",children:t.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}Hz`})}),t.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",size:"sm",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:l,min:2,max:20,onChange:e=>a("delayTime",e),label:"Delay",size:"sm",color:"#ec4899",formatValue:e=>`${e.toFixed(1)}ms`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"sm",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]}),me(e,a)]})})},Phaser:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",.5),o=de(e,"octaves",3),i=de(e,"baseFrequency",350);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#a855f7",title:"Phaser"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#a855f7",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(n,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#a855f7",formatValue:e=>e.toFixed(1)}),t.jsx(n,{value:i,min:50,max:1e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#a855f7",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"sm",color:"#c084fc",formatValue:e=>`${Math.round(e)}%`})]})]})})},Tremolo:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",10),o=de(e,"depth",.5);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f97316",title:"Tremolo"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#f97316",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#f97316",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})]})]})})},Vibrato:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",5),o=de(e,"depth",.1);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#14b8a6",title:"Vibrato"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:100,onChange:e=>a("frequency",e),label:"Rate",color:"#14b8a6",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#14b8a6",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#2dd4bf",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoFilter:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",1),o=de(e,"baseFrequency",200),i=de(e,"octaves",2.6);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#eab308",title:"Auto Filter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",size:"sm",color:"#eab308",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(n,{value:o,min:20,max:2e3,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#eab308",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(n,{value:i,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#eab308",formatValue:e=>e.toFixed(1)}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"sm",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoPanner:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",1),o=de(e,"depth",1);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#22c55e",title:"Auto Panner"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:20,onChange:e=>a("frequency",e),label:"Rate",color:"#22c55e",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(n,{value:o,min:0,max:1,onChange:e=>a("depth",e),label:"Depth",color:"#22c55e",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#4ade80",formatValue:e=>`${Math.round(e)}%`})]})]})})},AutoWah:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"baseFrequency",100),o=de(e,"octaves",6),i=de(e,"sensitivity",0),l=de(e,"Q",2);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f43f5e",title:"Auto Wah"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:50,max:500,onChange:e=>a("baseFrequency",e),label:"Base Freq",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(n,{value:o,min:0,max:8,onChange:e=>a("octaves",e),label:"Octaves",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)}),t.jsx(n,{value:i,min:-40,max:0,onChange:e=>a("sensitivity",e),label:"Sens",size:"sm",color:"#f43f5e",formatValue:e=>`${Math.round(e)}dB`}),t.jsx(n,{value:l,min:0,max:10,onChange:e=>a("Q",e),label:"Q",size:"sm",color:"#f43f5e",formatValue:e=>e.toFixed(1)})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#fb7185",formatValue:e=>`${Math.round(e)}%`})})})]})},BitCrusher:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"bits",4);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#84cc16",title:"Bit Crusher"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:1,max:16,onChange:e=>a("bits",Math.round(e)),label:"Bits",size:"lg",color:"#84cc16",formatValue:e=>`${Math.round(e)} bit`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"lg",color:"#a3e635",formatValue:e=>`${Math.round(e)}%`})]})]})})},Chebyshev:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"order",50);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f59e0b",title:"Chebyshev Waveshaper"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:1,max:100,onChange:e=>a("order",Math.round(e)),label:"Order",size:"lg",color:"#f59e0b",formatValue:e=>Math.round(e).toString()}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"lg",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})]})]})})},FrequencyShifter:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",0);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#06b6d4",title:"Frequency Shifter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:-1e3,max:1e3,onChange:e=>a("frequency",e),label:"Shift",size:"lg",color:"#06b6d4",bipolar:!0,formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"lg",color:"#22d3ee",formatValue:e=>`${Math.round(e)}%`})]})]})})},PitchShift:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"pitch",0),o=de(e,"windowSize",.1),i=de(e,"feedback",0);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#8b5cf6",title:"Pitch Shift"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:-12,max:12,onChange:e=>a("pitch",Math.round(e)),label:"Pitch",color:"#8b5cf6",bipolar:!0,formatValue:e=>`${Math.round(e)>0?"+":""}${Math.round(e)}st`}),t.jsx(n,{value:o,min:.01,max:.5,onChange:e=>a("windowSize",e),label:"Window",color:"#8b5cf6",formatValue:e=>`${Math.round(1e3*e)}ms`}),t.jsx(n,{value:i,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#a78bfa",formatValue:e=>`${Math.round(e)}%`})})})]})},Compressor:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"threshold",-24),o=de(e,"ratio",12),i=de(e,"attack",.003),l=de(e,"release",.25);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#10b981",title:"Compressor"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:-100,max:0,onChange:e=>a("threshold",e),label:"Threshold",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`}),t.jsx(n,{value:o,min:1,max:20,onChange:e=>a("ratio",e),label:"Ratio",size:"sm",color:"#10b981",formatValue:e=>`${e.toFixed(1)}:1`}),t.jsx(n,{value:i,min:0,max:1,onChange:e=>a("attack",e),label:"Attack",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`}),t.jsx(n,{value:l,min:0,max:1,onChange:e=>a("release",e),label:"Release",size:"sm",color:"#10b981",formatValue:e=>`${Math.round(1e3*e)}ms`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#34d399",formatValue:e=>`${Math.round(e)}%`})})})]})},EQ3:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"low",0),o=de(e,"mid",0),i=de(e,"high",0),l=de(e,"lowFrequency",400),c=de(e,"highFrequency",2500);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#3b82f6",title:"3-Band EQ"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:-20,max:20,onChange:e=>a("low",e),label:"Low",color:"#ef4444",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),t.jsx(n,{value:o,min:-20,max:20,onChange:e=>a("mid",e),label:"Mid",color:"#eab308",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`}),t.jsx(n,{value:i,min:-20,max:20,onChange:e=>a("high",e),label:"High",color:"#3b82f6",bipolar:!0,formatValue:e=>`${e>0?"+":""}${e.toFixed(1)}dB`})]})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#6b7280",title:"Crossover"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:l,min:20,max:1e3,onChange:e=>a("lowFrequency",e),label:"Low Freq",size:"sm",color:"#6b7280",formatValue:e=>`${Math.round(e)}Hz`}),t.jsx(n,{value:c,min:1e3,max:1e4,onChange:e=>a("highFrequency",e),label:"High Freq",size:"sm",color:"#6b7280",formatValue:e=>`${(e/1e3).toFixed(1)}kHz`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"sm",color:"#9ca3af",formatValue:e=>`${Math.round(e)}%`})]})]})]})},Filter:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"frequency",350),o=de(e,"Q",1),i=de(e,"gain",0);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f97316",title:"Filter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:20,max:2e4,onChange:e=>a("frequency",e),label:"Frequency",color:"#f97316",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}kHz`:`${Math.round(e)}Hz`}),t.jsx(n,{value:o,min:.001,max:100,onChange:e=>a("Q",e),label:"Q",color:"#f97316",formatValue:e=>e.toFixed(1)}),t.jsx(n,{value:i,min:-40,max:40,onChange:e=>a("gain",e),label:"Gain",color:"#f97316",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`})})})]})},JCReverb:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"roomSize",.5);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#6366f1",title:"JC Reverb"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:1,onChange:e=>a("roomSize",e),label:"Room Size",size:"lg",color:"#6366f1",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"lg",color:"#818cf8",formatValue:e=>`${Math.round(e)}%`})]})]})})},StereoWidener:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"width",.5);return t.jsx("div",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#ec4899",title:"Stereo Widener"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:1,onChange:e=>a("width",e),label:"Width",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",size:"lg",color:"#f472b6",formatValue:e=>`${Math.round(e)}%`})]})]})})},SpaceEcho:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"mode",4),o=de(e,"rate",300),l=de(e,"intensity",.5),c=de(e,"echoVolume",.8),d=de(e,"reverbVolume",.3),m=de(e,"bass",0),x=de(e,"treble",0),u=i(e.parameters);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#6366f1",title:"Echo"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:1,max:12,onChange:e=>a("mode",Math.round(e)),label:"Mode",color:"#6366f1",formatValue:e=>`${Math.round(e)}`}),t.jsx("div",{className:u?"opacity-40 pointer-events-none":"",children:t.jsx(n,{value:o,min:50,max:1e3,onChange:e=>a("rate",e),label:"Rate",color:"#6366f1",formatValue:e=>`${Math.round(e)}ms`})}),t.jsx(n,{value:l,min:0,max:1.2,onChange:e=>a("intensity",e),label:"Intensity",color:"#6366f1",formatValue:e=>`${(100*e).toFixed(0)}%`})]}),me(e,a)]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#818cf8",title:"Levels & EQ"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:c,min:0,max:1,onChange:e=>a("echoVolume",e),label:"Echo Vol",color:"#818cf8",formatValue:e=>`${(100*e).toFixed(0)}%`}),t.jsx(n,{value:d,min:0,max:1,onChange:e=>a("reverbVolume",e),label:"Reverb Vol",color:"#818cf8",formatValue:e=>`${(100*e).toFixed(0)}%`}),t.jsx(n,{value:m,min:-20,max:20,onChange:e=>a("bass",e),label:"Bass",color:"#818cf8",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`}),t.jsx(n,{value:x,min:-20,max:20,onChange:e=>a("treble",e),label:"Treble",color:"#818cf8",bipolar:!0,formatValue:e=>`${e>0?"+":""}${Math.round(e)}dB`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#a5b4fc",formatValue:e=>`${Math.round(e)}%`})})})]})},BiPhase:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"routing",0),o=de(e,"rateA",.5),l=de(e,"depthA",.6),c=de(e,"rateB",4),d=de(e,"depthB",.4),m=de(e,"feedback",.3),x=i(e.parameters);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#a855f7",title:"Routing"}),t.jsxs("div",{className:"flex gap-2 justify-center mb-2",children:[t.jsx("button",{onClick:()=>a("routing",0),className:"px-4 py-1.5 text-xs font-medium rounded transition-colors "+(0===Math.round(s)?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:"Parallel"}),t.jsx("button",{onClick:()=>a("routing",1),className:"px-4 py-1.5 text-xs font-medium rounded transition-colors "+(1===Math.round(s)?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:"Series"})]})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#a855f7",title:"Phase A"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx("div",{className:x?"opacity-40 pointer-events-none":"",children:t.jsx(n,{value:o,min:.1,max:10,onChange:e=>a("rateA",e),label:"Rate A",color:"#a855f7",formatValue:e=>`${e.toFixed(1)}Hz`})}),t.jsx(n,{value:l,min:0,max:1,onChange:e=>a("depthA",e),label:"Depth A",color:"#a855f7",formatValue:e=>`${(100*e).toFixed(0)}%`})]}),me(e,a)]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#c084fc",title:"Phase B"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:c,min:.1,max:10,onChange:e=>a("rateB",e),label:"Rate B",color:"#c084fc",formatValue:e=>`${e.toFixed(1)}Hz`}),t.jsx(n,{value:d,min:0,max:1,onChange:e=>a("depthB",e),label:"Depth B",color:"#c084fc",formatValue:e=>`${(100*e).toFixed(0)}%`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:m,min:0,max:.95,onChange:e=>a("feedback",e),label:"Feedback",color:"#a855f7",formatValue:e=>`${(100*e).toFixed(0)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#d8b4fe",formatValue:e=>`${Math.round(e)}%`})]})})]})},DubFilter:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"cutoff",20),o=de(e,"resonance",10),i=de(e,"gain",1);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#22c55e",title:"Dub Filter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:20,max:1e4,onChange:e=>a("cutoff",e),label:"Cutoff",color:"#22c55e",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`}),t.jsx(n,{value:o,min:0,max:100,onChange:e=>a("resonance",e),label:"Resonance",color:"#22c55e",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:i,min:.5,max:2,onChange:e=>a("gain",e),label:"Drive",color:"#22c55e",formatValue:e=>`${e.toFixed(2)}x`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#4ade80",formatValue:e=>`${Math.round(e)}%`})})})]})},TapeSaturation:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"drive",50),o=de(e,"tone",12e3);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#ef4444",title:"Tape Saturation"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:100,onChange:e=>a("drive",e),label:"Drive",color:"#ef4444",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:o,min:2e3,max:2e4,onChange:e=>a("tone",e),label:"Tone",color:"#ef4444",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#f87171",formatValue:e=>`${Math.round(e)}%`})})})]})},SidechainCompressor:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"threshold",-24),o=de(e,"ratio",4),i=de(e,"attack",.003),l=de(e,"release",.25),c=de(e,"knee",6),d=de(e,"sidechainGain",100);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#10b981",title:"Compressor"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:-60,max:0,onChange:e=>a("threshold",e),label:"Threshold",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`}),t.jsx(n,{value:o,min:1,max:20,onChange:e=>a("ratio",e),label:"Ratio",color:"#10b981",formatValue:e=>`${e.toFixed(1)}:1`}),t.jsx(n,{value:c,min:0,max:40,onChange:e=>a("knee",e),label:"Knee",color:"#10b981",formatValue:e=>`${Math.round(e)}dB`})]})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#34d399",title:"Envelope & Sidechain"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:i,min:.001,max:.5,onChange:e=>a("attack",e),label:"Attack",color:"#34d399",formatValue:e=>e>=.1?`${(1e3*e).toFixed(0)}ms`:`${(1e3*e).toFixed(1)}ms`}),t.jsx(n,{value:l,min:.01,max:1,onChange:e=>a("release",e),label:"Release",color:"#34d399",formatValue:e=>`${(1e3*e).toFixed(0)}ms`}),t.jsx(n,{value:d,min:0,max:100,onChange:e=>a("sidechainGain",e),label:"SC Gain",color:"#34d399",formatValue:e=>`${Math.round(e)}%`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#6ee7b7",formatValue:e=>`${Math.round(e)}%`})})})]})},SpaceyDelayer:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"firstTap",250),o=de(e,"tapSize",150),l=de(e,"feedback",40),c=de(e,"multiTap",1),d=de(e,"tapeFilter",0),m=i(e.parameters);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#8b5cf6",title:"Spacey Delayer"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx("div",{className:m?"opacity-40 pointer-events-none":"",children:t.jsx(n,{value:s,min:10,max:2e3,onChange:e=>a("firstTap",e),label:"First Tap",color:"#8b5cf6",formatValue:e=>`${Math.round(e)}ms`})}),t.jsx(n,{value:o,min:10,max:1e3,onChange:e=>a("tapSize",e),label:"Tap Size",color:"#a78bfa",formatValue:e=>`${Math.round(e)}ms`}),t.jsx(n,{value:l,min:0,max:95,onChange:e=>a("feedback",e),label:"Feedback",color:"#7c3aed",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),me(e,a)]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#a78bfa",title:"Options"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>a("multiTap",c?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(c?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Multi-Tap ",c?"ON":"OFF"]}),t.jsxs("button",{onClick:()=>a("tapeFilter",d?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(d?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Tape Filter ",d?"ON":"OFF"]})]})]})]})},RETapeEcho:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"mode",3),o=de(e,"repeatRate",.5),l=de(e,"intensity",.5),c=de(e,"echoVolume",.8),d=de(e,"wow",0),m=de(e,"flutter",0),x=de(e,"dirt",0),u=de(e,"inputBleed",0),b=de(e,"loopAmount",0),h=de(e,"playheadFilter",1),p=i(e.parameters);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#dc2626",title:"RE Tape Echo"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx("div",{className:p?"opacity-40 pointer-events-none":"",children:t.jsx(n,{value:100*o,min:0,max:100,onChange:e=>a("repeatRate",e/100),label:"Rate",color:"#dc2626",formatValue:e=>`${Math.round(e)}%`})}),t.jsx(n,{value:100*l,min:0,max:100,onChange:e=>a("intensity",e/100),label:"Intensity",color:"#ef4444",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:100*c,min:0,max:100,onChange:e=>a("echoVolume",e/100),label:"Echo Vol",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#06b6d4",formatValue:e=>`${Math.round(e)}%`})]}),me(e,a)]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f97316",title:"Tape Character"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:100*d,min:0,max:100,onChange:e=>a("wow",e/100),label:"Wow",color:"#f97316",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:100*m,min:0,max:100,onChange:e=>a("flutter",e/100),label:"Flutter",color:"#fb923c",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:100*x,min:0,max:100,onChange:e=>a("dirt",e/100),label:"Dirt",color:"#ea580c",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:100*b,min:0,max:100,onChange:e=>a("loopAmount",e/100),label:"Tape Loop",color:"#a16207",formatValue:e=>`${Math.round(e)}%`})]})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#b91c1c",title:"Mode & Options"}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Echo Mode"}),t.jsx("div",{className:"grid grid-cols-6 gap-1",children:["Head 1","Head 2","Both","H1+FB","H2+FB","Both+FB"].map((e,r)=>t.jsx("button",{onClick:()=>a("mode",r),className:"px-2 py-1.5 rounded text-xs font-medium transition-colors "+(s===r?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},r))})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>a("playheadFilter",h?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(h?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Head EQ ",h?"ON":"OFF"]}),t.jsxs("button",{onClick:()=>a("inputBleed",u?0:1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(u?"bg-red-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Bleed ",u?"ON":"OFF"]})]})]})]})},MoogFilter:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"cutoff",1e3),o=de(e,"resonance",10),i=de(e,"drive",1),l=de(e,"model",0),c=de(e,"filterMode",1);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f59e0b",title:"Model"}),t.jsx("div",{className:"grid grid-cols-3 gap-1 mb-3",children:he.map((e,r)=>t.jsx("button",{onClick:()=>a("model",r),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(Math.round(l)===r?"bg-amber-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},r))}),0===Math.round(l)&&t.jsxs(t.Fragment,{children:[t.jsx(ce,{color:"#f59e0b",title:"Filter Mode (Hyperion)"}),t.jsx("div",{className:"grid grid-cols-4 gap-1",children:pe.map((e,r)=>t.jsx("button",{onClick:()=>a("filterMode",r),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(Math.round(c)===r?"bg-amber-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},r))})]})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f59e0b",title:"Filter"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:20,max:2e4,onChange:e=>a("cutoff",e),label:"Cutoff",color:"#f59e0b",formatValue:e=>e>=1e3?`${(e/1e3).toFixed(1)}k`:`${Math.round(e)}Hz`}),t.jsx(n,{value:o,min:0,max:100,onChange:e=>a("resonance",e),label:"Resonance",color:"#f59e0b",formatValue:e=>`${Math.round(e)}%`}),t.jsx(n,{value:i,min:.1,max:4,onChange:e=>a("drive",e),label:"Drive",color:"#f59e0b",formatValue:e=>`${e.toFixed(1)}x`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Mix",color:"#fbbf24",formatValue:e=>`${Math.round(e)}%`})})})]})},MVerb:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"damping",.5),o=de(e,"density",.5),i=de(e,"bandwidth",.5),l=de(e,"decay",.7),c=de(e,"predelay",0),d=de(e,"size",.8),m=de(e,"gain",1),x=de(e,"mix",.4),u=de(e,"earlyMix",.5);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#7c3aed",title:"Reverb"}),t.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[t.jsx(n,{value:l,min:0,max:1,onChange:e=>a("decay",e),label:"Decay",color:"#7c3aed",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:d,min:0,max:1,onChange:e=>a("size",e),label:"Size",color:"#7c3aed",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:s,min:0,max:1,onChange:e=>a("damping",e),label:"Damp",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:o,min:0,max:1,onChange:e=>a("density",e),label:"Density",color:"#8b5cf6",formatValue:e=>`${Math.round(100*e)}%`})]})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#a78bfa",title:"Character"}),t.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[t.jsx(n,{value:i,min:0,max:1,onChange:e=>a("bandwidth",e),label:"Bandwidth",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:c,min:0,max:1,onChange:e=>a("predelay",e),label:"Pre-Delay",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:u,min:0,max:1,onChange:e=>a("earlyMix",e),label:"Early Mix",color:"#a78bfa",formatValue:e=>`${Math.round(100*e)}%`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:m,min:0,max:1,onChange:e=>a("gain",e),label:"Gain",color:"#c4b5fd",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:x,min:0,max:1,onChange:e=>a("mix",e),label:"Int. Mix",color:"#c4b5fd",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Wet",color:"#ddd6fe",formatValue:e=>`${Math.round(e)}%`})]})})]})},Leslie:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"speed",0),o=de(e,"hornRate",6.8),i=de(e,"drumRate",5.9),l=de(e,"hornDepth",.7),c=de(e,"drumDepth",.5),d=de(e,"doppler",.5),m=de(e,"width",.8),x=de(e,"acceleration",.5),u=s<.25?0:s>.75?2:1;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#f97316",title:"Speed"}),t.jsx("div",{className:"grid grid-cols-3 gap-1 mb-3",children:ge.map((e,r)=>t.jsx("button",{onClick:()=>a("speed",0===r?0:1===r?.5:1),className:"px-2 py-1.5 text-xs font-medium rounded transition-colors "+(u===r?"bg-orange-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:e},r))}),t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:x,min:0,max:1,onChange:e=>a("acceleration",e),label:"Accel",color:"#f97316",formatValue:e=>`${Math.round(100*e)}%`})})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#fb923c",title:"Rotors"}),t.jsxs("div",{className:"flex justify-around items-end flex-wrap gap-y-4",children:[t.jsx(n,{value:o,min:.1,max:10,onChange:e=>a("hornRate",e),label:"Horn Hz",color:"#fb923c",formatValue:e=>`${e.toFixed(1)}`}),t.jsx(n,{value:l,min:0,max:1,onChange:e=>a("hornDepth",e),label:"Horn Dep",color:"#fb923c",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:i,min:.1,max:8,onChange:e=>a("drumRate",e),label:"Drum Hz",color:"#fdba74",formatValue:e=>`${e.toFixed(1)}`}),t.jsx(n,{value:c,min:0,max:1,onChange:e=>a("drumDepth",e),label:"Drum Dep",color:"#fdba74",formatValue:e=>`${Math.round(100*e)}%`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:d,min:0,max:1,onChange:e=>a("doppler",e),label:"Doppler",color:"#fed7aa",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:m,min:0,max:1,onChange:e=>a("width",e),label:"Width",color:"#fed7aa",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Wet",color:"#fef3c7",formatValue:e=>`${Math.round(e)}%`})]})})]})},SpringReverb:({effect:e,onUpdateParameter:a,onUpdateWet:r})=>{const s=de(e,"decay",.6),o=de(e,"damping",.4),i=de(e,"tension",.5),l=de(e,"mix",.35),c=de(e,"drip",.5),d=de(e,"diffusion",.7);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#059669",title:"Spring Tank"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:s,min:0,max:1,onChange:e=>a("decay",e),label:"Decay",color:"#059669",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:o,min:0,max:1,onChange:e=>a("damping",e),label:"Damp",color:"#059669",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:i,min:0,max:1,onChange:e=>a("tension",e),label:"Tension",color:"#10b981",formatValue:e=>`${Math.round(100*e)}%`})]})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(ce,{color:"#34d399",title:"Character"}),t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:c,min:0,max:1,onChange:e=>a("drip",e),label:"Drip",color:"#34d399",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:d,min:0,max:1,onChange:e=>a("diffusion",e),label:"Diffusion",color:"#34d399",formatValue:e=>`${Math.round(100*e)}%`})]})]}),t.jsx("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:t.jsxs("div",{className:"flex justify-around items-end",children:[t.jsx(n,{value:l,min:0,max:1,onChange:e=>a("mix",e),label:"Int. Mix",color:"#6ee7b7",formatValue:e=>`${Math.round(100*e)}%`}),t.jsx(n,{value:e.wet,min:0,max:100,onChange:r,label:"Wet",color:"#a7f3d0",formatValue:e=>`${Math.round(e)}%`})]})})]})},WAMBigMuff:be,WAMTS9:be,WAMDistoMachine:be,WAMQuadraFuzz:be,WAMVoxAmp:be,WAMStonePhaser:be,WAMPingPongDelay:be,WAMFaustDelay:be,WAMPitchShifter:be,WAMGraphicEQ:be,WAMPedalboard:be};const ye={Distortion:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},Reverb:{bg:"#0e0a20",bgEnd:"#080618",accent:"#6366f1",border:"#1a1430"},JCReverb:{bg:"#0e0a20",bgEnd:"#080618",accent:"#6366f1",border:"#1a1430"},Delay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},FeedbackDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},PingPongDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},Chorus:{bg:"#200a18",bgEnd:"#180614",accent:"#ec4899",border:"#301428"},Phaser:{bg:"#180a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"},Tremolo:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},Vibrato:{bg:"#081a18",bgEnd:"#041210",accent:"#14b8a6",border:"#0a2a28"},Compressor:{bg:"#081a0a",bgEnd:"#041204",accent:"#10b981",border:"#0a2a0e"},EQ3:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},Filter:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},StereoWidener:{bg:"#200a18",bgEnd:"#180614",accent:"#ec4899",border:"#301428"},AutoFilter:{bg:"#1a1808",bgEnd:"#121004",accent:"#eab308",border:"#2a280a"},AutoPanner:{bg:"#081a0a",bgEnd:"#041204",accent:"#22c55e",border:"#0a2a0e"},AutoWah:{bg:"#200a10",bgEnd:"#18060a",accent:"#f43f5e",border:"#301418"},BitCrusher:{bg:"#141a08",bgEnd:"#0e1204",accent:"#84cc16",border:"#1e2a0a"},Chebyshev:{bg:"#1a1508",bgEnd:"#120e04",accent:"#f59e0b",border:"#2a2008"},FrequencyShifter:{bg:"#081820",bgEnd:"#041018",accent:"#06b6d4",border:"#0a2830"},PitchShift:{bg:"#100a20",bgEnd:"#0a0618",accent:"#8b5cf6",border:"#1a1430"},SpaceyDelayer:{bg:"#100a20",bgEnd:"#0a0618",accent:"#8b5cf6",border:"#1a1430"},SpaceEcho:{bg:"#0e0a20",bgEnd:"#080618",accent:"#6366f1",border:"#1a1430"},BiPhase:{bg:"#180a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"},DubFilter:{bg:"#081a0a",bgEnd:"#041204",accent:"#22c55e",border:"#0a2a0e"},TapeSaturation:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},SidechainCompressor:{bg:"#081a10",bgEnd:"#04120a",accent:"#10b981",border:"#0a2a18"},RETapeEcho:{bg:"#2a0808",bgEnd:"#1a0404",accent:"#dc2626",border:"#3a1010"},MoogFilter:{bg:"#1a1508",bgEnd:"#120e04",accent:"#f59e0b",border:"#2a2008"},MVerb:{bg:"#140a22",bgEnd:"#0c061a",accent:"#7c3aed",border:"#201432"},Leslie:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},SpringReverb:{bg:"#081a0a",bgEnd:"#041204",accent:"#059669",border:"#0a2a0e"},WAMBigMuff:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},WAMTS9:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},WAMDistoMachine:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#dc2626",border:"#3a1a0a"},WAMQuadraFuzz:{bg:"#2a1008",bgEnd:"#1a0a04",accent:"#ef4444",border:"#3a1a0a"},WAMVoxAmp:{bg:"#201408",bgEnd:"#180e04",accent:"#f97316",border:"#301e0a"},WAMStonePhaser:{bg:"#180a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"},WAMPingPongDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},WAMFaustDelay:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},WAMPitchShifter:{bg:"#100a20",bgEnd:"#0a0618",accent:"#8b5cf6",border:"#1a1430"},WAMGraphicEQ:{bg:"#081420",bgEnd:"#040e18",accent:"#3b82f6",border:"#0a1e30"},WAMPedalboard:{bg:"#081a18",bgEnd:"#041210",accent:"#14b8a6",border:"#0a2a28"}},ve={bg:"#181818",bgEnd:"#101010",accent:"#888",border:"#282828"},je=["0 6px 16px rgba(0,0,0,0.5)","0 2px 4px rgba(0,0,0,0.7)","inset 0 1px 0 rgba(255,255,255,0.06)","inset 0 -1px 0 rgba(0,0,0,0.4)"].join(", "),Ne=({effectType:e,...a})=>{const r=fe[e]||ue;return t.jsx(r,{...a})},ke=({effect:e,onUpdateParameter:a,onUpdateWet:r,onClose:s})=>{const o={Distortion:t.jsx(I,{size:18,className:"text-white"}),Reverb:t.jsx(U,{size:18,className:"text-white"}),JCReverb:t.jsx(U,{size:18,className:"text-white"}),Delay:t.jsx(T,{size:18,className:"text-white"}),FeedbackDelay:t.jsx(T,{size:18,className:"text-white"}),PingPongDelay:t.jsx(T,{size:18,className:"text-white"}),Chorus:t.jsx(H,{size:18,className:"text-white"}),Phaser:t.jsx(H,{size:18,className:"text-white"}),Tremolo:t.jsx(Q,{size:18,className:"text-white"}),Vibrato:t.jsx(Q,{size:18,className:"text-white"}),Compressor:t.jsx(O,{size:18,className:"text-white"}),EQ3:t.jsx(W,{size:18,className:"text-white"}),Filter:t.jsx(W,{size:18,className:"text-white"}),StereoWidener:t.jsx(L,{size:18,className:"text-white"}),SpaceyDelayer:t.jsx(T,{size:18,className:"text-white"}),SpaceEcho:t.jsx(U,{size:18,className:"text-white"}),BiPhase:t.jsx(H,{size:18,className:"text-white"}),DubFilter:t.jsx(W,{size:18,className:"text-white"}),TapeSaturation:t.jsx(I,{size:18,className:"text-white"}),SidechainCompressor:t.jsx(O,{size:18,className:"text-white"}),RETapeEcho:t.jsx(q,{size:18,className:"text-white"}),MoogFilter:t.jsx(W,{size:18,className:"text-white"}),MVerb:t.jsx(U,{size:18,className:"text-white"}),Leslie:t.jsx(H,{size:18,className:"text-white"}),SpringReverb:t.jsx(U,{size:18,className:"text-white"}),WAMBigMuff:t.jsx(B,{size:18,className:"text-white"}),WAMTS9:t.jsx(B,{size:18,className:"text-white"}),WAMDistoMachine:t.jsx(B,{size:18,className:"text-white"}),WAMQuadraFuzz:t.jsx(B,{size:18,className:"text-white"}),WAMVoxAmp:t.jsx(B,{size:18,className:"text-white"}),WAMStonePhaser:t.jsx(B,{size:18,className:"text-white"}),WAMPingPongDelay:t.jsx(B,{size:18,className:"text-white"}),WAMFaustDelay:t.jsx(B,{size:18,className:"text-white"}),WAMPitchShifter:t.jsx(B,{size:18,className:"text-white"}),WAMGraphicEQ:t.jsx(B,{size:18,className:"text-white"}),WAMPedalboard:t.jsx(B,{size:18,className:"text-white"})},n=ye[e.type]||ve,i=o[e.type]||t.jsx(R,{size:18,className:"text-white"});return e.type.startsWith("WAM")?t.jsx("div",{className:"overflow-y-auto scrollbar-modern",children:t.jsx(Ne,{effectType:e.type,effect:e,onUpdateParameter:a,onUpdateWet:r})}):t.jsxs("div",{className:"synth-editor-container rounded-xl overflow-hidden select-none",style:{background:`linear-gradient(170deg, ${n.bg} 0%, ${n.bgEnd} 100%)`,border:`2px solid ${n.border}`,boxShadow:je},children:[t.jsxs("div",{className:"px-5 py-4 flex items-center justify-between",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%)",borderBottom:`1px solid ${n.border}`},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:`linear-gradient(135deg, ${n.accent}40, ${n.accent}20)`,border:`1px solid ${n.accent}30`,boxShadow:`0 0 12px ${n.accent}15`},children:i}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base font-black text-white tracking-wide",children:e.neuralModelName||e.type}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("div",{style:{width:7,height:7,borderRadius:"50%",backgroundColor:e.enabled?"#22ff44":"#1a2a1a",boxShadow:e.enabled?"0 0 4px 1px rgba(34,255,68,0.5), 0 0 10px 3px rgba(34,255,68,0.15)":"inset 0 1px 2px rgba(0,0,0,0.5)",transition:"all 0.3s ease"}}),t.jsxs("p",{className:"text-[11px] text-gray-400 font-medium",children:[e.enabled?"Active":"Bypassed"," | Mix: ",e.wet,"%"]})]})]})]}),s&&t.jsx("button",{onClick:s,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/5 transition-colors",children:t.jsx(D,{size:16})})]}),t.jsx("div",{className:"p-4 overflow-y-auto scrollbar-modern",children:t.jsx(Ne,{effectType:e.type,effect:e,onUpdateParameter:a,onUpdateWet:r})})]})},we=({effect:e,onUpdateParameter:a,onUpdateWet:r,onClose:s})=>{p.useMemo(()=>{var a;return"GenericEffectEditor"!==(a=e.type,fe[a]||ue).name},[e.type]);const o=p.useMemo(()=>{if("neural"!==e.category||void 0===e.neuralModelIndex)return null;return new ie(e.neuralModelIndex).getAvailableParameters().map(e=>({name:e.name,key:e.key,min:0,max:100,step:1,unit:e.unit||"%",defaultValue:e.default,implemented:e.implemented}))},[e.category,e.neuralModelIndex]);return o?t.jsx(Se,{effect:e,parameters:o,onUpdateParameter:a,onUpdateWet:r,onClose:s}):t.jsx(ke,{effect:e,onUpdateParameter:a,onUpdateWet:r,onClose:s})};function Me({color:e,title:a}){return t.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[t.jsx("div",{className:"w-1.5 h-5 rounded-full",style:{backgroundColor:e,boxShadow:`0 0 8px ${e}60`}}),t.jsx("h3",{className:"text-xs font-black text-white/90 uppercase tracking-[0.15em]",children:a})]})}const Ce=["0 6px 16px rgba(0,0,0,0.5)","0 2px 4px rgba(0,0,0,0.7)","inset 0 1px 0 rgba(255,255,255,0.06)","inset 0 -1px 0 rgba(0,0,0,0.4)"].join(", "),Se=({effect:e,parameters:a,onUpdateParameter:r,onUpdateWet:s,onClose:o})=>{const i=a=>{const t=e.parameters[a.key]??a.defaultValue;return"number"==typeof t?t:a.defaultValue},l=a.filter(e=>!1!==e.implemented),c=a.filter(e=>!1===e.implemented);return t.jsxs("div",{className:"synth-editor-container rounded-xl overflow-hidden select-none",style:{background:"linear-gradient(170deg, #1a0a20 0%, #100618 100%)",border:"2px solid #281430",boxShadow:Ce},children:[t.jsxs("div",{className:"px-5 py-4 flex items-center justify-between",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%)",borderBottom:"1px solid #281430"},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"linear-gradient(135deg, rgba(168,85,247,0.25), rgba(236,72,153,0.15))",border:"1px solid rgba(168,85,247,0.2)",boxShadow:"0 0 12px rgba(168,85,247,0.1)"},children:t.jsx(F,{size:18,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base font-black text-white tracking-wide",children:e.type}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("div",{style:{width:7,height:7,borderRadius:"50%",backgroundColor:e.enabled?"#c084fc":"#1a0a20",boxShadow:e.enabled?"0 0 4px 1px rgba(192,132,252,0.5), 0 0 10px 3px rgba(192,132,252,0.15)":"inset 0 1px 2px rgba(0,0,0,0.5)",transition:"all 0.3s ease"}}),t.jsxs("p",{className:"text-[11px] text-gray-400 font-medium",children:["Neural Effect | ",e.enabled?"Active":"Bypassed"]})]})]})]}),o&&t.jsx("button",{onClick:o,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/5 transition-colors",children:t.jsx(D,{size:16})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[l.length>0&&t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(Me,{color:"#a855f7",title:"Parameters"}),t.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:l.map(e=>t.jsx(n,{value:i(e),min:e.min,max:e.max,onChange:a=>r(e.key,a),label:e.name,size:"sm",color:"#a855f7",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),c.length>0&&t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm opacity-50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(G,{size:14,className:"text-yellow-500"}),t.jsx("h3",{className:"text-[11px] font-black text-yellow-500/80 uppercase tracking-[0.15em]",children:"Coming Soon"})]}),t.jsx("div",{className:"flex flex-wrap justify-around gap-4",children:c.map(e=>t.jsx(n,{value:i(e),min:e.min,max:e.max,onChange:()=>{},label:e.name,size:"sm",color:"#6b7280",formatValue:a=>`${Math.round(a)}${e.unit}`},e.key))})]}),t.jsxs("section",{className:"rounded-xl p-4 border border-white/[0.04] bg-black/30 backdrop-blur-sm",children:[t.jsx(Me,{color:"#ec4899",title:"Output"}),t.jsx("div",{className:"flex justify-center",children:t.jsx(n,{value:e.wet,min:0,max:100,onChange:s,label:"Mix",size:"lg",color:"#ec4899",formatValue:e=>`${Math.round(e)}%`})})]}),t.jsx("div",{className:"rounded-lg p-3 border border-white/[0.04] bg-black/20",children:t.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Neural effects use machine learning models for authentic amp/pedal emulation. Changes are applied in real-time."})})]})]})},Pe=[{category:"tonejs",type:"Compressor",label:"Compressor",group:"Dynamics",description:"Dynamic range compression with threshold, ratio, attack, and release"},{category:"tonejs",type:"EQ3",label:"3-Band EQ",group:"Dynamics",description:"Three-band equalizer with low, mid, and high frequency control"},{category:"tonejs",type:"Distortion",label:"Distortion",group:"Distortion",description:"Waveshaping distortion with drive control"},{category:"tonejs",type:"BitCrusher",label:"Bit Crusher",group:"Distortion",description:"Digital bit reduction for lo-fi effects"},{category:"tonejs",type:"Chebyshev",label:"Chebyshev",group:"Distortion",description:"Harmonic waveshaper distortion"},{category:"tonejs",type:"Reverb",label:"Reverb",group:"Reverb & Delay",description:"Convolution reverb with decay and pre-delay"},{category:"tonejs",type:"JCReverb",label:"JC Reverb",group:"Reverb & Delay",description:"Feedback comb filter reverb"},{category:"tonejs",type:"Delay",label:"Delay",group:"Reverb & Delay",description:"Simple delay with time and feedback"},{category:"tonejs",type:"FeedbackDelay",label:"Feedback Delay",group:"Reverb & Delay",description:"Delay with enhanced feedback control"},{category:"tonejs",type:"PingPongDelay",label:"Ping Pong Delay",group:"Reverb & Delay",description:"Stereo delay that bounces between left and right"},{category:"tonejs",type:"SpaceEcho",label:"Space Echo",group:"Reverb & Delay",description:"Roland RE-201 emulation with 3 heads and spring reverb"},{category:"tonejs",type:"SpaceyDelayer",label:"Spacey Delayer",group:"Reverb & Delay",description:"Multitap tape delay with configurable tap spacing (WASM)"},{category:"tonejs",type:"RETapeEcho",label:"RE Tape Echo",group:"Reverb & Delay",description:"Roland RE-150/201 tape echo with wow, flutter, and tape saturation (WASM)"},{category:"tonejs",type:"BiPhase",label:"Bi-Phase",group:"Modulation",description:"Dual-stage phaser with series/parallel routing"},{category:"tonejs",type:"Chorus",label:"Chorus",group:"Modulation",description:"Modulated delay for thickening sounds"},{category:"tonejs",type:"Phaser",label:"Phaser",group:"Modulation",description:"Sweeping notch filter effect"},{category:"tonejs",type:"Tremolo",label:"Tremolo",group:"Modulation",description:"Amplitude modulation for rhythmic pulsing"},{category:"tonejs",type:"Vibrato",label:"Vibrato",group:"Modulation",description:"Pitch modulation for warbling effects"},{category:"tonejs",type:"AutoPanner",label:"Auto Panner",group:"Modulation",description:"Automatic stereo panning modulation"},{category:"tonejs",type:"Filter",label:"Filter",group:"Filter",description:"Resonant filter with multiple types"},{category:"tonejs",type:"DubFilter",label:"Dub Filter",group:"Filter",description:"King Tubby-style resonant high-pass filter for dramatic sweeps"},{category:"tonejs",type:"AutoFilter",label:"Auto Filter",group:"Filter",description:"LFO-modulated filter for rhythmic sweeps"},{category:"tonejs",type:"AutoWah",label:"Auto Wah",group:"Filter",description:"Envelope-following wah effect"},{category:"wasm",type:"MoogFilter",label:"Moog Filter",group:"Filter",description:"6 analog-modeled Moog ladder filters (Hyperion, Krajeski, Stilson, Microtracker, Improved, Oberheim) via WASM"},{category:"wasm",type:"MVerb",label:"MVerb Plate",group:"Reverb & Delay",description:"MVerb plate reverb — lush algorithmic reverb with damping, density, and early/late reflections (WASM, GPL v3)"},{category:"wasm",type:"Leslie",label:"Leslie Speaker",group:"Modulation",description:"Rotary speaker cabinet — crossover, dual-rotor AM/doppler, speed ramping between chorale and tremolo (WASM)"},{category:"wasm",type:"SpringReverb",label:"Spring Reverb",group:"Reverb & Delay",description:"Classic dub spring tank — allpass diffusion, comb bank, metallic drip transients, tension control (WASM)"},{category:"tonejs",type:"PitchShift",label:"Pitch Shift",group:"Pitch",description:"Transpose audio up or down by semitones"},{category:"tonejs",type:"FrequencyShifter",label:"Frequency Shifter",group:"Pitch",description:"Ring modulation-style frequency shifting"},{category:"tonejs",type:"StereoWidener",label:"Stereo Widener",group:"Spatial",description:"Enhance stereo image width"},{category:"wam",type:"WAMBigMuff",label:"Big Muff (WAM)",group:"Distortion",description:"Electro-Harmonix Big Muff Pi fuzz (WAM 2.0)"},{category:"wam",type:"WAMTS9",label:"TS-9 Overdrive (WAM)",group:"Distortion",description:"Ibanez Tube Screamer overdrive (WAM 2.0, Faust DSP)"},{category:"wam",type:"WAMQuadraFuzz",label:"QuadraFuzz (WAM)",group:"Distortion",description:"4-band multiband distortion/fuzz (WAM 2.0)"},{category:"wam",type:"WAMDistoMachine",label:"Disto Machine (WAM)",group:"Amp Simulator",description:"Multi-mode distortion with cabinet sim (WAM 2.0)"},{category:"wam",type:"WAMVoxAmp",label:"Vox Amp 30 (WAM)",group:"Amp Simulator",description:"1960s guitar amp simulator with cabinet (WAM 2.0)"},{category:"wam",type:"WAMStonePhaser",label:"Stone Phaser (WAM)",group:"Modulation",description:"Stereo phaser effect (WAM 2.0, Faust DSP)"},{category:"wam",type:"WAMPingPongDelay",label:"Ping Pong Delay (WAM)",group:"Reverb & Delay",description:"Stereo ping-pong delay (WAM 2.0)"},{category:"wam",type:"WAMFaustDelay",label:"Faust Delay (WAM)",group:"Reverb & Delay",description:"Ping-pong delay powered by Faust DSP (WAM 2.0)"},{category:"wam",type:"WAMPitchShifter",label:"Pitch Shifter (WAM)",group:"Pitch",description:"Csound-powered pitch shifter (WAM 2.0)"},{category:"wam",type:"WAMGraphicEQ",label:"Graphic EQ (WAM)",group:"Dynamics",description:"Multi-band graphic equalizer (WAM 2.0)"},{category:"wam",type:"WAMPedalboard",label:"Pedalboard (WAM)",group:"Multi-FX",description:"Drag-and-drop guitar pedalboard (WAM 2.0)"},...ne.map(e=>({category:"neural",neuralModelIndex:e.index,label:e.name,group:"overdrive"===e.category?"Neural Overdrive":"distortion"===e.category?"Neural Distortion":"amplifier"===e.category?"Neural Amp":"Neural Effect",description:`${e.fullName} - ${e.description}`}))];function $e(){const e={};return Pe.forEach(a=>{e[a.group]||(e[a.group]=[]),e[a.group].push(a)}),e}const ze="master-fx-user-presets",De=({isOpen:r,onClose:s})=>{const[o,n]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState(""),[b,h]=p.useState(null),[S,P]=p.useState(null),[E,A]=p.useState(""),{masterEffects:T,addMasterEffectConfig:R,removeMasterEffect:U,updateMasterEffect:H,reorderMasterEffects:q,setMasterEffects:O}=e(),I=p.useMemo(()=>T.find(e=>e.id===b)??null,[T,b]),L=f(y(C),y(M,{coordinateGetter:w})),Q=p.useCallback(()=>{try{const e=localStorage.getItem(ze);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a.filter(e=>null!==e&&"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e.effects)):[]}catch{return[]}},[]),Y=p.useCallback(()=>{if(!c.trim())return;const e=Q();e.push({name:c.trim(),effects:T.map(e=>({...e}))}),localStorage.setItem(ze,JSON.stringify(e)),d(""),l(!1)},[c,T,Q]),_=p.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));O(a),n(!1)},[O]),ee=p.useCallback(e=>{const a=e.effects.map((e,a)=>({...e,id:`master-fx-${Date.now()}-${a}`}));O(a),n(!1)},[O]),ae=p.useCallback(e=>{const a=Q().filter(a=>a.name!==e);localStorage.setItem(ze,JSON.stringify(a))},[Q]),te=T.filter(e=>"neural"===e.category).length,re=p.useCallback(a=>{if(S&&U(S),"neural"===a.category&&te>=3){if(!confirm("Performance Warning\n\nAdding a 4th neural effect. Multiple neural effects can cause high CPU usage and audio glitches.\n\nContinue anyway?"))return P(null),void h(null)}const t=a.type||"Distortion",r={...m(t)};if("neural"===a.category&&void 0!==a.neuralModelIndex){const e=ne[a.neuralModelIndex];e?.parameters&&Object.entries(e.parameters).forEach(([e,a])=>{a&&(r[e]=a.default)})}R({category:a.category,type:t,enabled:!0,wet:100,parameters:r,neuralModelIndex:a.neuralModelIndex,neuralModelName:"neural"===a.category?a.label:void 0});const s=e.getState().masterEffects,o=s[s.length-1]?.id??null;P(o),h(o)},[S,te,R,U]),se=p.useCallback(()=>{S&&P(null)},[S]),oe=p.useCallback(()=>{S&&U(S),P(null),h(null)},[S,U]),ie=Q(),le=a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),ce=$e(),de=p.useMemo(()=>{if(!E.trim())return ce;const e=E.toLowerCase(),a={};for(const[t,r]of Object.entries(ce)){const s=r.filter(a=>a.label.toLowerCase().includes(e));s.length>0&&(a[t]=s)}return a},[ce,E]);return r?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:e=>{e.target===e.currentTarget&&s()},children:t.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1400px] flex flex-col overflow-hidden animate-scale-in",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($,{size:20,className:"text-accent-primary"}),t.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Master Effects"}),t.jsxs("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:[T.length," FX"]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>n(!o),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2",children:["Presets ",t.jsx(z,{size:14})]}),o&&t.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:[ie.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:"User Presets"}),ie.map(e=>t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-dark-bgHover cursor-pointer group",children:[t.jsx("span",{onClick:()=>ee(e),className:"text-sm text-text-primary flex-1",children:e.name}),t.jsx("button",{onClick:a=>{a.stopPropagation(),ae(e.name)},className:"text-text-muted hover:text-accent-error opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete preset",children:t.jsx(D,{size:14})})]},e.name)),t.jsx("div",{className:"border-t border-dark-border"})]}),Object.entries(le).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>t.jsxs("div",{onClick:()=>_(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[t.jsx("div",{className:"text-sm text-text-primary",children:e.name}),t.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))]})]}),t.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded-lg text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Save current effects as preset",children:t.jsx(V,{size:18})})]}),te>=3&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[t.jsx(G,{size:14,className:"text-yellow-500"}),t.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[te," neural effects - High CPU usage"]})]}),t.jsx("button",{onClick:()=>{x.getState().masterEffectsPoppedOut?u("DEViLBOX — Master Effects"):(s(),x.getState().setMasterEffectsPoppedOut(!0))},className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-cyan-400",title:"Pop out to separate window",children:t.jsx(J,{size:20})}),t.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:t.jsx(D,{size:24})})]}),i&&t.jsx("div",{className:"px-6 py-4 bg-dark-bgTertiary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"text",placeholder:"Preset name...",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&Y(),"Escape"===e.key&&l(!1)},className:"flex-1 px-4 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                         placeholder-text-muted focus:outline-none focus:border-accent-primary",autoFocus:!0}),t.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm font-medium rounded-lg bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:"Save"}),t.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bg text-text-muted hover:text-text-primary border border-dark-border hover:border-dark-borderLight transition-colors",children:"Cancel"})]})}),t.jsx("div",{className:"px-6 py-3 bg-dark-bgSecondary border-b border-dark-border",children:t.jsxs("div",{className:"flex items-center gap-3 text-sm font-mono text-text-muted overflow-x-auto",children:[t.jsx("span",{className:"text-accent-primary font-bold whitespace-nowrap",children:"INPUT"}),t.jsx("span",{children:"→"}),T.length>0?T.map((e,a)=>t.jsxs(g.Fragment,{children:[t.jsx("span",{className:"whitespace-nowrap "+(e.enabled?"text-accent-success":"text-accent-error"),children:e.type}),a<T.length-1&&t.jsx("span",{children:"→"})]},e.id)):t.jsx("span",{className:"italic text-text-muted",children:"direct"}),t.jsx("span",{children:"→"}),t.jsxs("span",{className:"text-accent-primary font-bold whitespace-nowrap flex items-center gap-1",children:[t.jsx(F,{size:14})," OUTPUT"]})]})}),t.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[t.jsxs("div",{className:"w-1/4 border-r border-dark-border flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary mb-1",children:"Effect Chain"}),t.jsx("p",{className:"text-xs text-text-muted",children:"Drag to reorder. Click to edit."})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-3",children:0===T.length?t.jsx("div",{className:"p-6 text-center text-text-muted text-xs border border-dashed border-dark-border rounded-lg",children:"No effects yet. Add from the browser panel."}):t.jsx(v,{sensors:L,collisionDetection:j,onDragEnd:e=>{const{active:a,over:t}=e;if(t&&a.id!==t.id){const e=T.findIndex(e=>e.id===a.id),r=T.findIndex(e=>e.id===t.id);-1!==e&&-1!==r&&q(e,r)}},children:t.jsx(N,{items:T.map(e=>e.id),strategy:k,children:T.map(e=>t.jsx(Ve,{effect:e,isSelected:b===e.id,onSelect:()=>{S&&(U(S),P(null)),h(e.id)},onToggle:()=>(e=>{const a=T.find(a=>a.id===e);a&&H(e,{enabled:!a.enabled})})(e.id),onRemove:()=>U(e.id),onWetChange:a=>((e,a)=>{H(e,{wet:a})})(e.id,a)},e.id))})})})]}),t.jsx("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:I?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-text-primary",children:[I.neuralModelName||I.type," Parameters"]}),t.jsx("p",{className:"text-xs text-text-muted",children:S===b?"Preview — tweak knobs to hear changes":"Adjust effect settings"})]}),S===b&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:oe,className:"px-3 py-1.5 text-xs font-medium rounded-lg border border-dark-border\n                                 text-text-muted hover:text-text-primary hover:border-dark-borderLight transition-colors",children:"Cancel"}),t.jsxs("button",{onClick:se,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-medium rounded-lg\n                                 bg-accent-primary text-white hover:bg-accent-primaryHover transition-colors",children:[t.jsx(K,{size:12}),"Add to Chain"]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:t.jsx(we,{effect:I,onUpdateParameter:(a,t)=>{if(!b)return;const r=e.getState().masterEffects.find(e=>e.id===b);r&&H(b,{parameters:{...r.parameters,[a]:t}})},onUpdateWet:e=>{b&&H(b,{wet:e})}})})]}):t.jsx("div",{className:"flex-1 flex items-center justify-center text-text-muted",children:t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx(W,{size:32,className:"mx-auto opacity-30"}),t.jsxs("p",{className:"text-sm",children:["Select an effect from the chain",t.jsx("br",{}),"or click one in the browser to preview"]})]})})}),t.jsxs("div",{className:"w-1/4 flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Effect Browser"}),t.jsx("p",{className:"text-xs text-text-muted",children:"Click to preview"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(X,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted"}),t.jsx("input",{type:"text",placeholder:"Search effects...",value:E,onChange:e=>A(e.target.value),className:"w-full pl-9 pr-8 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                           placeholder-text-muted focus:outline-none focus:border-accent-primary transition-colors"}),E&&t.jsx("button",{onClick:()=>A(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",children:t.jsx(D,{size:14})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-3",children:t.jsxs("div",{className:"space-y-3",children:[0===Object.keys(de).length?t.jsxs("div",{className:"p-6 text-center text-text-muted text-xs",children:['No effects matching "',E,'"']}):null,Object.entries(de).map(([e,a])=>t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-1.5",children:e}),t.jsx("div",{className:"space-y-1",children:a.map(e=>t.jsxs("button",{onClick:()=>re(e),className:"w-full px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                   hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                   transition-colors text-left flex items-center justify-between gap-2",children:[t.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&t.jsx(Z,{size:12,className:"flex-shrink-0 opacity-60"}),"wam"===e.category&&t.jsx(B,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))]})})]})]})]})}):null};function Ve({effect:e,isSelected:a,onSelect:r,onToggle:s,onRemove:o,onWetChange:n}){const{attributes:i,listeners:l,setNodeRef:c,transform:d,transition:m,isDragging:x}=S({id:e.id}),u="neural"===e.category?{bg:"#1a0a20",bgEnd:"#100618",accent:"#a855f7",border:"#281430"}:ye[e.type]||ve,b={transform:P.Transform.toString(d),transition:m,opacity:x?.5:e.enabled?1:.55,background:`linear-gradient(135deg, ${u.bg} 0%, ${u.bgEnd} 100%)`,border:a?`2px solid ${u.accent}`:`2px solid ${u.border}`,boxShadow:x?`0 8px 24px rgba(0,0,0,0.5), 0 0 0 2px ${u.accent}`:a?`0 4px 12px rgba(0,0,0,0.4), 0 0 12px ${u.accent}20`:"0 2px 6px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.04)"};return t.jsx("div",{ref:c,style:b,className:"rounded-xl p-4 mb-3 cursor-pointer transition-all select-none",onClick:r,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{...i,...l,className:"cursor-grab active:cursor-grabbing p-1 opacity-30 hover:opacity-60 transition-opacity",style:{color:u.accent},title:"Drag to reorder",onClick:e=>e.stopPropagation(),children:t.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:[t.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),t.jsx("circle",{cx:"4",cy:"8",r:"1.5"}),t.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),t.jsx("circle",{cx:"10",cy:"4",r:"1.5"}),t.jsx("circle",{cx:"10",cy:"8",r:"1.5"}),t.jsx("circle",{cx:"10",cy:"12",r:"1.5"})]})}),t.jsx("div",{style:{width:7,height:7,borderRadius:"50%",backgroundColor:e.enabled?u.accent:`${u.bg}`,boxShadow:e.enabled?`0 0 4px 1px ${u.accent}80, 0 0 10px 3px ${u.accent}25`:"inset 0 1px 2px rgba(0,0,0,0.5)",transition:"all 0.3s ease",flexShrink:0}}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-black text-sm text-white/90 tracking-wide truncate",children:e.neuralModelName||e.type}),"neural"===e.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider",style:{background:`${u.accent}15`,border:`1px solid ${u.accent}30`,color:`${u.accent}cc`},children:[t.jsx(Z,{size:8}),"Neural"]}),"wam"===e.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider",style:{background:`${u.accent}15`,border:`1px solid ${u.accent}30`,color:`${u.accent}cc`},children:[t.jsx(B,{size:8}),"WAM"]})]}),t.jsxs("div",{className:"text-[11px] mt-0.5",style:{color:`${u.accent}80`},children:[e.enabled?"Active":"Bypassed"," | Mix: ",e.wet,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",onClick:e=>e.stopPropagation(),children:[t.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:e=>n(Number(e.target.value)),className:"w-16 h-1 rounded-lg appearance-none cursor-pointer\n                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5\n                     [&::-webkit-slider-thumb]:rounded-full",style:{background:`linear-gradient(90deg, ${u.accent}60 ${e.wet}%, rgba(255,255,255,0.08) ${e.wet}%)`,"--thumb-color":u.accent}}),t.jsx("button",{onClick:e=>{e.stopPropagation(),r()},className:"p-1.5 rounded-lg transition-colors hover:bg-white/5",style:{color:`${u.accent}70`},title:"Edit parameters",children:t.jsx(W,{size:14})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),s()},className:"p-1.5 rounded-lg transition-colors hover:bg-white/5",style:{color:e.enabled?u.accent:"rgba(255,255,255,0.2)"},title:e.enabled?"Disable":"Enable",children:t.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[t.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),t.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),o()},className:"p-1.5 rounded-lg transition-colors hover:bg-white/5",style:{color:"rgba(255,80,80,0.4)"},title:"Remove effect",children:t.jsx(D,{size:14})})]})]})})}const Fe=({isOpen:e,onClose:r})=>{const[s,o]=p.useState(null),[n,i]=p.useState(!1),[l,c]=p.useState(""),{instruments:d,currentInstrumentId:m,addEffectConfig:g,removeEffect:f,updateEffect:y,updateInstrument:v}=b(),j=d.find(e=>e.id===m),N=p.useRef(0),k=p.useCallback(e=>{if(null===m)return;const a=e.effects.map((e,a)=>({...e,id:`instrument-fx-${++N.current}-${a}`}));v(m,{effects:a}),i(!1),h.success(`Applied ${e.name} to ${j?.name}`)},[m,v,j?.name]),w=j?.effects||[],M=w.filter(e=>"neural"===e.category).length,C=p.useCallback(e=>{if(null===m)return;if("neural"===e.category&&M>=3){if(!window.confirm("Performance Warning\n\nYou are adding a 4th neural effect. Multiple neural effects can cause high CPU usage and audio glitches.\n\nConsider using Tone.js effects or reducing the neural effect count.\n\nContinue anyway?"))return}const a={id:"effect-"+ ++N.current,category:e.category,type:e.type||"Distortion",enabled:!0,wet:100,parameters:{},neuralModelIndex:e.neuralModelIndex,neuralModelName:"neural"===e.category?e.label:void 0};if("neural"===e.category&&void 0!==e.neuralModelIndex){const t=ne[e.neuralModelIndex];t?.parameters&&Object.entries(t.parameters).forEach(([e,t])=>{t&&(a.parameters[e]=t.default)})}g(m,a)},[m,M,g]),S=p.useCallback(e=>{null!==m&&f(m,e)},[m,f]),P=p.useCallback(e=>{const a=w.find(a=>a.id===e);a&&null!==m&&y(m,e,{enabled:!a.enabled})},[w,m,y]),V=p.useCallback((e,a)=>{null!==m&&y(m,e,{wet:a})},[m,y]),F=p.useCallback(e=>{e.target===e.currentTarget&&r()},[r]),E=$e(),A=p.useMemo(()=>{if(!l.trim())return E;const e=l.toLowerCase(),a={};for(const[t,r]of Object.entries(E)){const s=r.filter(a=>a.label.toLowerCase().includes(e));s.length>0&&(a[t]=s)}return a},[E,l]);return e&&j?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:F,children:t.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-xl shadow-2xl w-[95vw] h-[90vh] max-w-[1200px] flex flex-col overflow-hidden animate-scale-in",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($,{size:20,className:"text-accent-primary"}),t.jsxs("h2",{className:"text-lg font-bold text-text-primary",children:[j.name||`Instrument ${j.id}`," Effects"]}),t.jsx("span",{className:"text-xs text-text-muted px-2 py-1 bg-dark-bg rounded",children:j.synthType}),t.jsxs("span",{className:"text-[10px] text-accent-info px-2 py-1 bg-accent-info/10 rounded",children:[Pe.length," effects available"]}),t.jsxs("div",{className:"relative ml-2",children:[t.jsxs("button",{onClick:()=>i(!n),className:"px-4 py-2 text-sm font-medium rounded-lg bg-dark-bgTertiary text-text-primary\n                         hover:bg-dark-bgHover transition-colors flex items-center gap-2 border border-dark-border",children:["Presets ",t.jsx(z,{size:14})]}),n&&t.jsx("div",{className:"absolute left-0 top-full mt-2 w-72 bg-dark-bgSecondary border border-dark-border rounded-lg shadow-xl z-50 max-h-[60vh] overflow-y-auto scrollbar-modern",children:Object.entries(a.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{})).map(([e,a])=>t.jsxs("div",{children:[t.jsx("div",{className:"px-4 py-2 text-xs text-text-muted font-medium uppercase tracking-wide bg-dark-bgTertiary sticky top-0",children:e}),a.map(e=>t.jsxs("div",{onClick:()=>k(e),className:"px-4 py-3 hover:bg-dark-bgHover cursor-pointer",children:[t.jsx("div",{className:"text-sm text-text-primary",children:e.name}),t.jsx("div",{className:"text-xs text-text-muted",children:e.description})]},e.name))]},e))})]})]}),M>=3&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[t.jsx(G,{size:14,className:"text-yellow-500"}),t.jsxs("span",{className:"text-xs text-yellow-500 font-medium",children:[M," neural effects - High CPU usage"]})]}),t.jsx("button",{onClick:()=>{x.getState().instrumentEffectsPoppedOut?u("DEViLBOX — Instrument Effects"):(r(),x.getState().setInstrumentEffectsPoppedOut(!0))},className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-cyan-400",title:"Pop out to separate window",children:t.jsx(J,{size:20})}),t.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-dark-bgHover transition-colors text-text-muted hover:text-text-primary",children:t.jsx(D,{size:24})})]}),t.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[t.jsxs("div",{className:"w-1/2 border-r border-dark-border flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary",children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary mb-3",children:"Effect Chain"}),t.jsxs("p",{className:"text-xs text-text-muted",children:[w.length," effect",1!==w.length?"s":""," active",M>0&&` • ${M} neural`]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:0===w.length?t.jsx("div",{className:"p-8 text-center text-text-muted text-sm border border-dashed border-dark-border rounded-lg",children:"No effects. Add from the panel on the right →"}):w.map(e=>t.jsx("div",{className:`\n                      bg-dark-bgSecondary border rounded-lg p-4 mb-3 cursor-pointer transition-all\n                      ${e.enabled?"":"opacity-60"}\n                      ${s?.id===e.id?"border-accent-primary bg-accent-primary/5":"border-dark-border hover:border-dark-borderLight"}\n                    `,onClick:()=>o(e),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-sm text-text-primary",children:e.neuralModelName||e.type}),"neural"===e.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[t.jsx(Z,{size:10}),"Neural"]}),"wam"===e.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-cyan-500/20 to-teal-500/20 border border-cyan-500/30 rounded text-[10px] text-cyan-300",children:[t.jsx(B,{size:10}),"WAM"]})]}),t.jsxs("div",{className:"text-xs text-text-muted",children:[e.enabled?"Active":"Bypassed"," • Wet: ",e.wet,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{type:"range",min:"0",max:"100",value:e.wet,onChange:a=>V(e.id,Number(a.target.value)),className:"w-20 h-1 bg-dark-bg rounded-lg appearance-none cursor-pointer\n                                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n                                     [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent-primary"})}),t.jsx("button",{onClick:a=>{a.stopPropagation(),o(e)},className:"p-2 rounded text-text-muted hover:text-accent-primary hover:bg-dark-bgHover transition-colors",title:"Edit parameters",children:t.jsx(W,{size:16})}),t.jsx("button",{onClick:a=>{a.stopPropagation(),P(e.id)},className:`\n                            p-2 rounded transition-colors\n                            ${e.enabled?"text-accent-success bg-accent-success/10 hover:bg-accent-success/20":"text-text-muted hover:text-accent-error hover:bg-accent-error/10"}\n                          `,title:e.enabled?"Disable":"Enable",children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),t.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})}),t.jsx("button",{onClick:a=>{a.stopPropagation(),S(e.id)},className:"p-2 rounded text-text-muted hover:text-accent-error hover:bg-accent-error/10 transition-colors",title:"Remove effect",children:t.jsx(D,{size:16})})]})]})},e.id))})]}),t.jsx("div",{className:"w-1/2 flex flex-col",children:s?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-text-primary flex items-center gap-2",children:[s.neuralModelName||s.type," Parameters","neural"===s.category&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded text-[10px] text-purple-300",children:[t.jsx(Z,{size:10}),"Neural"]})]}),t.jsx("p",{className:"text-xs text-text-muted",children:"Adjust effect settings"})]}),t.jsx("button",{onClick:()=>o(null),className:"text-xs text-text-muted hover:text-accent-primary transition-colors",children:"Back to Add"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:t.jsx(we,{effect:s,onUpdateParameter:(e,a)=>{const t={parameters:{...s.parameters,[e]:a}};null!==m&&y(m,s.id,t),o({...s,...t})},onUpdateWet:e=>{null!==m&&y(m,s.id,{wet:e}),o({...s,wet:e})}})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-dark-border bg-dark-bgSecondary space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Add Effect"}),t.jsxs("p",{className:"text-xs text-text-muted",children:["All ",Pe.length," effects available"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(X,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted"}),t.jsx("input",{type:"text",placeholder:"Search effects...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-9 pr-8 py-2 text-sm bg-dark-bg border border-dark-border rounded-lg text-text-primary\n                               placeholder-text-muted focus:outline-none focus:border-accent-primary transition-colors"}),l&&t.jsx("button",{onClick:()=>c(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",children:t.jsx(D,{size:14})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-modern p-4",children:t.jsxs("div",{className:"space-y-4",children:[0===Object.keys(A).length?t.jsxs("div",{className:"p-8 text-center text-text-muted text-sm",children:['No effects matching "',l,'"']}):null,Object.entries(A).map(([e,a])=>t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs text-text-muted font-medium uppercase tracking-wide mb-2",children:e}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>t.jsxs("button",{onClick:()=>C(e),className:"px-3 py-2 text-sm rounded-lg border border-dark-border bg-dark-bgSecondary\n                                       hover:bg-accent-primary hover:text-white hover:border-accent-primary\n                                       transition-colors text-left flex items-center justify-between gap-2",children:[t.jsx("span",{className:"truncate",children:e.label}),"neural"===e.category&&t.jsx(Z,{size:12,className:"flex-shrink-0 opacity-60"}),"wam"===e.category&&t.jsx(B,{size:12,className:"flex-shrink-0 opacity-60"})]},e.label))})]},e))]})})]})})]})]})}):null};export{we as EffectParameterEditor,Fe as InstrumentEffectsModal,De as MasterEffectsModal,te as MasterEffectsPanel};
