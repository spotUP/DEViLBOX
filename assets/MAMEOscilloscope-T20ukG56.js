import{aG as e,c as t,j as r}from"./index-zx6LJBPK.js";import{r as o}from"./vendor-utils-XMmR-oGw.js";import"./vendor-react-DkDaD07v.js";import"./vendor-tone-CADp_hfL.js";import"./vendor-ui-uomqNFY-.js";function n({instrumentId:n,width:i,height:s=120,color:l}){const a=o.useRef(null),c=o.useRef(null),u=o.useRef(0),m=o.useRef(null),[d,f]=o.useState(!1),h="cyan-lineart"===e(e=>e.currentThemeId),b=h?"#030808":"#0a0a0b",g=h?"rgba(0, 255, 255, 0.06)":"rgba(100, 100, 120, 0.1)",p=h?"rgba(0, 255, 255, 0.15)":"rgba(100, 100, 120, 0.2)",v=l||(h?"#00ffff":"#00d4aa"),x=h?"linear-gradient(180deg, #0a1515 0%, #050c0c 100%)":"linear-gradient(180deg, #252525 0%, #1a1a1a 100%)",E=o.useRef(b),A=o.useRef(g),N=o.useRef(p),k=o.useRef(v);return o.useEffect(()=>{E.current=b},[b]),o.useEffect(()=>{A.current=g},[g]),o.useEffect(()=>{N.current=p},[p]),o.useEffect(()=>{k.current=v},[v]),o.useEffect(()=>{const e=t().getMAMEChipSynth(n);if(!e)return void requestAnimationFrame(()=>f(!1));requestAnimationFrame(()=>f(!0));const r=e.onOscData(e=>{m.current=e}),o=()=>{const e=a.current;if(!e)return void(u.current=requestAnimationFrame(o));const t=e.getContext("2d");if(!t)return void(u.current=requestAnimationFrame(o));const r=window.devicePixelRatio||1,n=e.clientWidth,i=e.clientHeight;e.width===n*r&&e.height===i*r||(e.width=n*r,e.height=i*r,t.scale(r,r)),t.fillStyle=E.current,t.fillRect(0,0,n,i);const s=n-8,l=i-8;t.strokeStyle=A.current,t.lineWidth=1;for(let o=1;o<4;o++){const e=4+l*o/4;t.beginPath(),t.moveTo(4,e),t.lineTo(n-4,e),t.stroke()}for(let o=1;o<8;o++){const e=4+s*o/8;t.beginPath(),t.moveTo(e,4),t.lineTo(e,i-4),t.stroke()}t.strokeStyle=N.current,t.lineWidth=1,t.beginPath(),t.moveTo(4,i/2),t.lineTo(n-4,i/2),t.stroke();const c=m.current,d=k.current;if(c&&c.length>0){t.strokeStyle=d,t.lineWidth=1.5,t.beginPath();const e=c.length,r=s/e;for(let o=0;o<e;o++){const e=4+o*r,n=4+l/2-Math.max(-1,Math.min(1,c[o]))*(l/2-4);0===o?t.moveTo(e,n):t.lineTo(e,n)}t.stroke(),t.strokeStyle=d,t.globalAlpha=.3,t.lineWidth=3,t.stroke(),t.globalAlpha=1}else t.strokeStyle=d,t.globalAlpha=.3,t.lineWidth=1,t.beginPath(),t.moveTo(4,i/2),t.lineTo(n-4,i/2),t.stroke(),t.globalAlpha=1;u.current=requestAnimationFrame(o)};return u.current=requestAnimationFrame(o),()=>{r(),u.current&&cancelAnimationFrame(u.current)}},[n]),d?r.jsxDEV("div",{ref:c,className:"rounded-lg overflow-hidden",style:{background:x,border:h?"1px solid rgba(0, 255, 255, 0.2)":"1px solid rgba(255, 255, 255, 0.08)",width:i||"100%"},children:[r.jsxDEV("div",{className:"px-2 py-1 flex items-center justify-between border-b",style:{borderColor:h?"rgba(0, 255, 255, 0.1)":"rgba(255, 255, 255, 0.05)"},children:r.jsxDEV("span",{className:"text-[10px] font-mono uppercase tracking-wider",style:{color:h?"#00ffff":"#888"},children:"Oscilloscope"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/visualization/MAMEOscilloscope.tsx",lineNumber:192,columnNumber:9},this)},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/visualization/MAMEOscilloscope.tsx",lineNumber:190,columnNumber:7},this),r.jsxDEV("canvas",{ref:a,style:{width:"100%",height:s},className:"block"},void 0,!1,{fileName:"/Users/spot/Code/DEViLBOX/src/components/visualization/MAMEOscilloscope.tsx",lineNumber:197,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/spot/Code/DEViLBOX/src/components/visualization/MAMEOscilloscope.tsx",lineNumber:181,columnNumber:5},this):null}export{n as MAMEOscilloscope};
