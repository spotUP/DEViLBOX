function n(n,t){return(n[t]<<8|n[t+1])>>>0}function t(n,t){return(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}function e(e,r){if(r+20>e.length)return!1;if(1413893464!==t(e,r))return!1;if(0!==e[r+4])return!1;let i=r+4;if(i+2>e.length)return!1;const o=n(e,i);if(i+=2,i+2>e.length)return!1;const u=n(e,i);i+=2;let l=2+o+u<<6>>>0;if(i+2>e.length)return!1;const f=n(e,i);i+=2;let a=1+f>>>0;if(i+2>e.length)return!1;const s=n(e,i);i+=2;const c=Math.imul(1+s,28)>>>0;if(i+2>e.length)return!1;const h=n(e,i);if(i+=2,a=Math.imul(a,h)>>>0,l=l+a+c>>>0,i+=2,i+2>e.length)return!1;const g=n(e,i);i+=2,a=1+g<<3>>>0,l=l+a+32>>>0;const m=i+l;if(m+32>e.length)return!1;if(0!==t(e,m))return!1;const p=n(e,m+4);if(0===p)return!1;const y=2*p>>>0;if(m+34>e.length)return!1;return y===t(e,m+30)}function r(r){const i=r instanceof Uint8Array?r:new Uint8Array(r);if(i.length<32)return!1;if(24576===n(i,0)){if(4>i.length)return!1;const r=n(i,2);if(0===r)return!1;if(32768&r)return!1;if(1&r)return!1;let o=2+r,u=-1;for(let n=0;n<=10&&!(o+4>i.length);n++){if(813777402===t(i,o)){u=o;break}o+=2}if(u<0)return!1;const l=u+4;if(l+2>i.length)return!1;const f=n(i,l);if(0===f)return!1;if(32768&f)return!1;if(1&f)return!1;return e(i,l+f)}return e(i,0)}function i(n,t){if(!r(new Uint8Array(n)))throw new Error("Not a Jochen Hippel 7V module");const e=t.split("/").pop()??t,i=e.replace(/^(hip7|s7g)\./i,"")||e,o=Array.from({length:64},()=>({note:0,instrument:0,volume:0,effTyp:0,eff:0,effTyp2:0,eff2:0}));return{name:`${i} [Jochen Hippel 7V]`,format:"MOD",patterns:[{id:"pattern-0",name:"Pattern 0",length:64,channels:Array.from({length:4},(n,t)=>({id:`channel-${t}`,name:`Channel ${t+1}`,muted:!1,solo:!1,collapsed:!1,volume:100,pan:0===t||3===t?-50:50,instrumentId:null,color:null,rows:o})),importMetadata:{sourceFormat:"MOD",sourceFile:t,importedAt:(new Date).toISOString(),originalChannelCount:4,originalPatternCount:1,originalInstrumentCount:0}}],instruments:[{id:1,name:"Sample 1",type:"synth",synthType:"Synth",effects:[],volume:0,pan:0}],songPositions:[0],songLength:1,restartPosition:0,numChannels:4,initialSpeed:6,initialBPM:125,linearPeriods:!1}}export{r as isJochenHippel7VFormat,i as parseJochenHippel7VFile};
